var nt=Object.defineProperty,it=Object.defineProperties;var at=Object.getOwnPropertyDescriptors;var De=Object.getOwnPropertySymbols;var rt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable;var ye=(n,e,t)=>e in n?nt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_e=(n,e)=>{for(var t in e||(e={}))rt.call(e,t)&&ye(n,t,e[t]);if(De)for(var t of De(e))ot.call(e,t)&&ye(n,t,e[t]);return n},Te=(n,e)=>it(n,at(e));import{S as ce,i as he,s as pe,e as D,t as M,k as S,c as y,a as O,h as X,d as m,m as K,b as w,f as c,g as C,J as v,L as B,j as $,M as A,l as F,K as Q,N as me,O as L,w as le,x as se,P as Z,y as ne,Q as ft,q as G,o as W,B as ie,n as ae,p as re,R as oe,T as ge,v as ut,U as dt,V as ct,W as fe,X as x,Y as ht}from"../chunks/vendor-fd55e573.js";function ee(){const n=new Date;let e=n.getDate(),t=n.getMonth()+1;return e<10&&(e="0"+e),t<10&&(t="0"+t),`${t}/${e}`}function ve(){let e=new Date().getHours();return e<10&&(e="0"+e),`${e}`}function we(){const n=new Date,e=new Date(n);e.setDate(e.getDate()+1);let t=e.getDate(),l=e.getMonth()+1;return t<10&&(t="0"+t),l<10&&(l="0"+l),`${l}/${t}`}function Ee(n){let e,t,l,s,a,i,r=n[0].name+"",u,d,o,h,f,b,q,j,E,R,Y,_=!n[0].isDone&&n[0].startTime&&n[0].startDate&&Ie(n),I=n[0].daysBeforeRepeating&&Oe(n);function N(T,g){return T[2]?pt:_t}let p=N(n),k=p(n);return{c(){e=D("div"),t=D("div"),l=D("span"),s=M("close"),a=S(),i=D("div"),u=M(r),d=S(),o=D("div"),_&&_.c(),h=S(),f=D("div"),I&&I.c(),b=S(),q=D("div"),j=M("Done"),E=S(),k.c(),this.h()},l(T){e=y(T,"DIV",{class:!0});var g=O(e);t=y(g,"DIV",{style:!0});var H=O(t);l=y(H,"SPAN",{class:!0,style:!0});var P=O(l);s=X(P,"close"),P.forEach(m),H.forEach(m),a=K(g),i=y(g,"DIV",{class:!0,style:!0});var z=O(i);u=X(z,r),z.forEach(m),d=K(g),o=y(g,"DIV",{class:!0,style:!0});var V=O(o);_&&_.l(V),V.forEach(m),h=K(g),f=y(g,"DIV",{class:!0,style:!0});var J=O(f);I&&I.l(J),J.forEach(m),b=K(g),q=y(g,"DIV",{});var ue=O(q);j=X(ue,"Done"),ue.forEach(m),E=K(g),k.l(g),g.forEach(m),this.h()},h(){w(l,"class","material-icons"),c(l,"margin-left","auto"),c(l,"margin-right","0"),c(t,"display","flex"),w(i,"class","google-calendar-event-title svelte-1q27ax5"),c(i,"margin-top","10px"),c(i,"margin-left","10px"),w(o,"class","google-calendar-event-time svelte-1q27ax5"),c(o,"margin-top","4px"),c(o,"margin-left","10px"),w(f,"class","google-calendar-event-detail svelte-1q27ax5"),c(f,"margin-top","12px"),c(f,"margin-left","16px"),w(e,"class","detailed-card svelte-1q27ax5")},m(T,g){C(T,e,g),v(e,t),v(t,l),v(l,s),v(e,a),v(e,i),v(i,u),v(e,d),v(e,o),_&&_.m(o,null),v(e,h),v(e,f),I&&I.m(f,null),v(e,b),v(e,q),v(q,j),v(e,E),k.m(e,null),R||(Y=[B(l,"click",n[6]),B(q,"click",n[7])],R=!0)},p(T,g){g&1&&r!==(r=T[0].name+"")&&$(u,r),!T[0].isDone&&T[0].startTime&&T[0].startDate?_?_.p(T,g):(_=Ie(T),_.c(),_.m(o,null)):_&&(_.d(1),_=null),T[0].daysBeforeRepeating?I?I.p(T,g):(I=Oe(T),I.c(),I.m(f,null)):I&&(I.d(1),I=null),p===(p=N(T))&&k?k.p(T,g):(k.d(1),k=p(T),k&&(k.c(),k.m(e,null)))},d(T){T&&m(e),_&&_.d(),I&&I.d(),k.d(),R=!1,A(Y)}}}function Ie(n){let e,t=n[0].startDate+" "+n[0].startTime+"",l;return{c(){e=M("Scheduled for "),l=M(t)},l(s){e=X(s,"Scheduled for "),l=X(s,t)},m(s,a){C(s,e,a),C(s,l,a)},p(s,a){a&1&&t!==(t=s[0].startDate+" "+s[0].startTime+"")&&$(l,t)},d(s){s&&m(e),s&&m(l)}}}function Oe(n){let e,t=n[0].daysBeforeRepeating+"",l,s,a=(n[0].completionCount||0)+"",i,r;return{c(){e=M("Repeats every "),l=M(t),s=M(" days, completed "),i=M(a),r=M(" times")},l(u){e=X(u,"Repeats every "),l=X(u,t),s=X(u," days, completed "),i=X(u,a),r=X(u," times")},m(u,d){C(u,e,d),C(u,l,d),C(u,s,d),C(u,i,d),C(u,r,d)},p(u,d){d&1&&t!==(t=u[0].daysBeforeRepeating+"")&&$(l,t),d&1&&a!==(a=(u[0].completionCount||0)+"")&&$(i,a)},d(u){u&&m(e),u&&m(l),u&&m(s),u&&m(i),u&&m(r)}}}function pt(n){let e,t,l,s,a,i;return{c(){e=D("div"),t=M("Repeats every "),l=D("input"),s=M(" days"),this.h()},l(r){e=y(r,"DIV",{style:!0});var u=O(e);t=X(u,"Repeats every "),l=y(u,"INPUT",{style:!0,placeholder:!0}),s=X(u," days"),u.forEach(m),this.h()},h(){c(l,"width","20px"),w(l,"placeholder","0"),c(e,"display","flex")},m(r,u){C(r,e,u),v(e,t),v(e,l),L(l,n[3]),v(e,s),a||(i=[B(l,"input",n[9]),B(l,"keypress",n[5])],a=!0)},p(r,u){u&8&&l.value!==r[3]&&L(l,r[3])},d(r){r&&m(e),a=!1,A(i)}}}function _t(n){let e,t,l,s;return{c(){e=D("span"),t=M("Repeat task"),this.h()},l(a){e=y(a,"SPAN",{style:!0});var i=O(e);t=X(i,"Repeat task"),i.forEach(m),this.h()},h(){c(e,"margin-left","5px")},m(a,i){C(a,e,i),v(e,t),l||(s=B(e,"click",n[8]),l=!0)},p:Q,d(a){a&&m(e),l=!1,s()}}}function mt(n){let e,t=n[1]&&Ee(n);return{c(){t&&t.c(),e=F()},l(l){t&&t.l(l),e=F()},m(l,s){t&&t.m(l,s),C(l,e,s)},p(l,[s]){l[1]?t?t.p(l,s):(t=Ee(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Q,o:Q,d(l){t&&t.d(l),l&&m(e)}}}function gt(n,e,t){let{taskObject:l}=e,{isOpen:s=!1}=e,a=!1,i=7;const r=me();function u(b){b.charCode===13&&(i?t(0,l.daysBeforeRepeating=i,l):(alert("Task is reset and will no longer repeat"),t(0,l.daysBeforeRepeating=0,l)),r("task-repeat"),t(3,i=0),t(2,a=!1))}const d=()=>r("card-close"),o=()=>r("task-done"),h=()=>t(2,a=!0);function f(){i=this.value,t(3,i)}return n.$$set=b=>{"taskObject"in b&&t(0,l=b.taskObject),"isOpen"in b&&t(1,s=b.isOpen)},[l,s,a,i,r,u,d,o,h,f]}class vt extends ce{constructor(e){super();he(this,e,gt,mt,pe,{taskObject:0,isOpen:1})}}function je(n,e,t){const l=n.slice();return l[42]=e[t],l[44]=t,l}function Ve(n){let e,t,l,s,a,i,r,u,d,o,h,f,b;function q(p,k){return p[3]?kt:bt}let j=q(n),E=j(n);a=new vt({props:{isOpen:n[2],taskObject:n[0]}}),a.$on("card-close",n[25]),a.$on("task-done",n[21]),a.$on("task-repeat",n[26]);let R=n[5]&&Ce(n),Y=n[0].children,_=[];for(let p=0;p<Y.length;p+=1)_[p]=Ne(je(n,Y,p));const I=p=>W(_[p],1,1,()=>{_[p]=null});let N=n[5]&&Re(n);return{c(){e=D("div"),t=D("div"),l=D("div"),E.c(),s=S(),le(a.$$.fragment),i=S(),r=D("div"),R&&R.c(),u=S(),d=D("div");for(let p=0;p<_.length;p+=1)_[p].c();o=S(),N&&N.c(),this.h()},l(p){e=y(p,"DIV",{draggable:!0,class:!0,style:!0});var k=O(e);t=y(k,"DIV",{class:!0});var T=O(t);l=y(T,"DIV",{style:!0,class:!0});var g=O(l);E.l(g),g.forEach(m),s=K(T),se(a.$$.fragment,T),i=K(T),r=y(T,"DIV",{style:!0});var H=O(r);R&&R.l(H),H.forEach(m),T.forEach(m),u=K(k),d=y(k,"DIV",{style:!0});var P=O(d);for(let z=0;z<_.length;z+=1)_[z].l(P);o=K(P),N&&N.l(P),P.forEach(m),k.forEach(m),this.h()},h(){c(l,"font-size",1.5*.85**n[1]+"rem"),w(l,"class","keep-on-same-line name-of-task svelte-t4v7r0"),Z(l,"scheduled-orange",!n[0].isDone&&n[0].startTime&&n[0].startDate),Z(l,"crossed-out",n[0].isDone),c(r,"width",200*.9**n[1]+"px"),c(r,"height","100%"),w(t,"class","current-task-flexbox svelte-t4v7r0"),c(d,"margin-top",20*.7**n[1]+"px"),w(e,"draggable","true"),w(e,"class","scheduled-task svelte-t4v7r0"),c(e,"margin-left",(n[1]===1?"0":"20")+"px"),c(e,"margin-bottom","10px"),c(e,"width",350*.8**n[1]+"px"),c(e,"height",n[0].duration&&!n[13]&&n[0].duration*90/60>n[0].children.length*60*.7**n[1]&&n[0].duration*90/60>60*.65**n[1]?`${n[0].duration*90/60}px`:"100%"),c(e,"padding-left",10*.8**n[1]+"px"),Z(e,"black-duration-line",!n[0].isDone&&!(n[0].startTime&&n[0].startDate)),Z(e,"orange-duration-line",!n[0].isDone&&n[0].startTime&&n[0].startDate),Z(e,"green-duration-line",n[0].isDone)},m(p,k){C(p,e,k),v(e,t),v(t,l),E.m(l,null),v(t,s),ne(a,t,null),v(t,i),v(t,r),R&&R.m(r,null),v(e,u),v(e,d);for(let T=0;T<_.length;T+=1)_[T].m(d,null);v(d,o),N&&N.m(d,null),h=!0,f||(b=[B(e,"dragstart",ft(n[37])),B(e,"pointerleave",n[20])],f=!0)},p(p,k){j===(j=q(p))&&E?E.p(p,k):(E.d(1),E=j(p),E&&(E.c(),E.m(l,null))),(!h||k[0]&2)&&c(l,"font-size",1.5*.85**p[1]+"rem"),k[0]&1&&Z(l,"scheduled-orange",!p[0].isDone&&p[0].startTime&&p[0].startDate),k[0]&1&&Z(l,"crossed-out",p[0].isDone);const T={};if(k[0]&4&&(T.isOpen=p[2]),k[0]&1&&(T.taskObject=p[0]),a.$set(T),p[5]?R?R.p(p,k):(R=Ce(p),R.c(),R.m(r,null)):R&&(R.d(1),R=null),(!h||k[0]&2)&&c(r,"width",200*.9**p[1]+"px"),k[0]&32771){Y=p[0].children;let g;for(g=0;g<Y.length;g+=1){const H=je(p,Y,g);_[g]?(_[g].p(H,k),G(_[g],1)):(_[g]=Ne(H),_[g].c(),G(_[g],1),_[g].m(d,o))}for(ae(),g=Y.length;g<_.length;g+=1)I(g);re()}p[5]?N?N.p(p,k):(N=Re(p),N.c(),N.m(d,null)):N&&(N.d(1),N=null),(!h||k[0]&2)&&c(d,"margin-top",20*.7**p[1]+"px"),(!h||k[0]&2)&&c(e,"margin-left",(p[1]===1?"0":"20")+"px"),(!h||k[0]&2)&&c(e,"width",350*.8**p[1]+"px"),(!h||k[0]&8195)&&c(e,"height",p[0].duration&&!p[13]&&p[0].duration*90/60>p[0].children.length*60*.7**p[1]&&p[0].duration*90/60>60*.65**p[1]?`${p[0].duration*90/60}px`:"100%"),(!h||k[0]&2)&&c(e,"padding-left",10*.8**p[1]+"px"),k[0]&1&&Z(e,"black-duration-line",!p[0].isDone&&!(p[0].startTime&&p[0].startDate)),k[0]&1&&Z(e,"orange-duration-line",!p[0].isDone&&p[0].startTime&&p[0].startDate),k[0]&1&&Z(e,"green-duration-line",p[0].isDone)},i(p){if(!h){G(a.$$.fragment,p);for(let k=0;k<Y.length;k+=1)G(_[k]);h=!0}},o(p){W(a.$$.fragment,p),_=_.filter(Boolean);for(let k=0;k<_.length;k+=1)W(_[k]);h=!1},d(p){p&&m(e),E.d(),ie(a),R&&R.d(),oe(_,p),N&&N.d(),f=!1,A(b)}}}function kt(n){let e,t,l;return{c(){e=D("input")},l(s){e=y(s,"INPUT",{})},m(s,a){C(s,e,a),L(e,n[4]),t||(l=[B(e,"input",n[24]),B(e,"keypress",n[18])],t=!0)},p(s,a){a[0]&16&&e.value!==s[4]&&L(e,s[4])},d(s){s&&m(e),t=!1,A(l)}}}function bt(n){let e,t=n[0].name+"",l,s,a;return{c(){e=D("div"),l=M(t),this.h()},l(i){e=y(i,"DIV",{class:!0,style:!0});var r=O(e);l=X(r,t),r.forEach(m),this.h()},h(){w(e,"class","truncate svelte-t4v7r0"),c(e,"width",350*.85**n[1]+"px")},m(i,r){C(i,e,r),v(e,l),s||(a=[B(e,"click",n[23]),B(e,"pointerenter",n[19])],s=!0)},p(i,r){r[0]&1&&t!==(t=i[0].name+"")&&$(l,t),r[0]&2&&c(e,"width",350*.85**i[1]+"px")},d(i){i&&m(e),s=!1,A(a)}}}function Ce(n){let e;function t(a,i){if(!(a[6]||a[8]||Ot||a[12]))return Tt;if(a[8])return yt;if(a[12])return Dt}let l=t(n),s=l&&l(n);return{c(){s&&s.c(),e=F()},l(a){s&&s.l(a),e=F()},m(a,i){s&&s.m(a,i),C(a,e,i)},p(a,i){l===(l=t(a))&&s?s.p(a,i):(s&&s.d(1),s=l&&l(a),s&&(s.c(),s.m(e.parentNode,e)))},d(a){s&&s.d(a),a&&m(e)}}}function Dt(n){let e,t,l,s,a,i,r,u;return{c(){e=D("div"),t=D("div"),l=M("Delete"),s=S(),a=D("div"),i=M("Cancel"),this.h()},l(d){e=y(d,"DIV",{style:!0});var o=O(e);t=y(o,"DIV",{});var h=O(t);l=X(h,"Delete"),h.forEach(m),s=K(o),a=y(o,"DIV",{});var f=O(a);i=X(f,"Cancel"),f.forEach(m),o.forEach(m),this.h()},h(){c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","space-evenly")},m(d,o){C(d,e,o),v(e,t),v(t,l),v(e,s),v(e,a),v(a,i),r||(u=[B(t,"click",n[22]),B(a,"click",n[30])],r=!0)},p:Q,d(d){d&&m(e),r=!1,A(u)}}}function yt(n){let e,t,l,s,a;return{c(){e=D("input"),t=S(),l=D("input"),this.h()},l(i){e=y(i,"INPUT",{placeholder:!0,style:!0}),t=K(i),l=y(i,"INPUT",{placeholder:!0,style:!0}),this.h()},h(){w(e,"placeholder","03/14"),c(e,"width","40px"),c(e,"margin-left","14px"),w(l,"placeholder","13:00"),c(l,"width","40px")},m(i,r){C(i,e,r),L(e,n[9]),C(i,t,r),C(i,l,r),L(l,n[10]),s||(a=[B(e,"input",n[27]),B(l,"input",n[28]),B(l,"keypress",n[17])],s=!0)},p(i,r){r[0]&512&&e.value!==i[9]&&L(e,i[9]),r[0]&1024&&l.value!==i[10]&&L(l,i[10])},d(i){i&&m(e),i&&m(t),i&&m(l),s=!1,A(a)}}}function Tt(n){return{c:Q,l:Q,m:Q,p:Q,d:Q}}function Ne(n){let e,t;function l(...s){return n[31](n[44],...s)}return e=new Be({props:{taskObject:n[42],depth:n[1]+1}}),e.$on("task-create",l),e.$on("task-done",n[32]),e.$on("task-delete",n[33]),e.$on("task-repeating",n[34]),{c(){le(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,a){ne(e,s,a),t=!0},p(s,a){n=s;const i={};a[0]&1&&(i.taskObject=n[42]),a[0]&2&&(i.depth=n[1]+1),e.$set(i)},i(s){t||(G(e.$$.fragment,s),t=!0)},o(s){W(e.$$.fragment,s),t=!1},d(s){ie(e,s)}}}function Re(n){let e;function t(a,i){return a[6]?wt:Et}let l=t(n),s=l(n);return{c(){s.c(),e=F()},l(a){s.l(a),e=F()},m(a,i){s.m(a,i),C(a,e,i)},p(a,i){l===(l=t(a))&&s?s.p(a,i):(s.d(1),s=l(a),s&&(s.c(),s.m(e.parentNode,e)))},d(a){s.d(a),a&&m(e)}}}function wt(n){let e,t,l,s;return{c(){e=D("div"),t=D("input"),this.h()},l(a){e=y(a,"DIV",{style:!0});var i=O(e);t=y(i,"INPUT",{placeholder:!0,style:!0}),i.forEach(m),this.h()},h(){w(t,"placeholder","Type sub-task"),c(t,"width","100%"),c(t,"margin-left","5px"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"margin-left","20px")},m(a,i){C(a,e,i),v(e,t),L(t,n[7]),l||(s=[B(t,"input",n[36]),B(t,"keypress",n[16])],l=!0)},p(a,i){i[0]&128&&t.value!==a[7]&&L(t,a[7])},d(a){a&&m(e),l=!1,A(s)}}}function Et(n){let e,t,l,s,a;return{c(){e=D("div"),t=D("div"),l=M("new sub-task"),this.h()},l(i){e=y(i,"DIV",{style:!0});var r=O(e);t=y(r,"DIV",{style:!0});var u=O(t);l=X(u,"new sub-task"),u.forEach(m),r.forEach(m),this.h()},h(){c(t,"border-left","2px solid grey"),c(t,"color","grey"),c(t,"padding-left","5px"),c(t,"padding-bottom",8*.68**(n[1]+1)+"px"),c(t,"font-size",1.5*.85**(n[1]+1)+"rem"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"margin-left","20px")},m(i,r){C(i,e,r),v(e,t),v(t,l),s||(a=B(t,"click",n[35]),s=!0)},p(i,r){r[0]&2&&c(t,"padding-bottom",8*.68**(i[1]+1)+"px"),r[0]&2&&c(t,"font-size",1.5*.85**(i[1]+1)+"rem")},d(i){i&&m(e),s=!1,a()}}}function It(n){let e,t,l=!n[0].isDeleted&&!n[0].isDone&&!(n[0].startTime&&n[0].startDate)&&Ve(n);return{c(){l&&l.c(),e=F()},l(s){l&&l.l(s),e=F()},m(s,a){l&&l.m(s,a),C(s,e,a),t=!0},p(s,a){!s[0].isDeleted&&!s[0].isDone&&!(s[0].startTime&&s[0].startDate)?l?(l.p(s,a),a[0]&1&&G(l,1)):(l=Ve(s),l.c(),G(l,1),l.m(e.parentNode,e)):l&&(ae(),W(l,1,1,()=>{l=null}),re())},i(s){t||(G(l),t=!0)},o(s){W(l),t=!1},d(s){l&&l.d(s),s&&m(e)}}}let Ot=!1;function jt(n,e){n.dataTransfer.setData("text/plain",e)}function Vt(n,e,t){let l,{taskObject:s}=e,{depth:a}=e,i=!1;const r=me();let u=!1,d="",o=!1,h=!1,f="",b=!1,q="",j="",E=0,R=!1;function Y(U,de){const ke=_e({},s.children[de]);ke.children=U.detail.updatedChildren;const be=[...s.children];be[de]=ke,k(be)}function _(U){U.charCode===13&&(f&&p(f),t(7,f=""),t(6,h=!1))}function I(U){U.charCode===13&&(q.length!==5||j.length!==5?(alert("Formats must be exact - date is mm:dd and time is hh:mm, resetting"),t(0,s.startDate="",s),t(0,s.scheduledTime="",s)):(t(0,s.startDate=q,s),t(0,s.startTime=j,s)),r("task-done",{}),t(8,b=!1))}function N(U){if(U.charCode===13){if(!d){alert("Task name can't be empty.");return}t(0,s.name=d,s),r("task-done",{}),t(4,d=""),t(3,u=!1)}}function p(U){k([...s.children,{name:U,children:[]}])}function k(U){r("task-create",{updatedChildren:U})}function T(){t(5,o=!0)}function g(){t(5,o=!1)}function H(){t(0,s.isDone=!s.isDone,s),s.isRepeating&&(s.isDone?(t(0,s.completionCount=s.completionCount+1||1,s),t(0,s.lastCompletionDate=ee(),s)):(t(0,s.completionCount=s.completionCount-1||0,s),t(0,s.lastCompletionDate="",s))),r("task-done",{})}function P(){t(0,s.isDeleted=!s.isDeleted,s),console.log("taskObject.deleted =",s.isDeleted),r("task-delete",{})}const z=()=>t(2,i=!0);function V(){d=this.value,t(4,d)}const J=()=>t(2,i=!1),ue=()=>r("task-done");function Ae(){q=this.value,t(9,q)}function Qe(){j=this.value,t(10,j)}function Le(){E=this.value,t(11,E)}const Je=()=>t(12,R=!1),Ze=(U,de)=>Y(de,U);function $e(U){ge.call(this,n,U)}function xe(U){ge.call(this,n,U)}function et(U){ge.call(this,n,U)}const tt=()=>t(6,h=!0);function lt(){f=this.value,t(7,f)}const st=U=>jt(U,s.name);return n.$$set=U=>{"taskObject"in U&&t(0,s=U.taskObject),"depth"in U&&t(1,a=U.depth)},n.$$.update=()=>{n.$$.dirty[0]&1&&t(13,l=s.children.filter(U=>U.duration).length>0)},[s,a,i,u,d,o,h,f,b,q,j,E,R,l,r,Y,_,I,N,T,g,H,P,z,V,J,ue,Ae,Qe,Le,Je,Ze,$e,xe,et,tt,lt,st]}class Be extends ce{constructor(e){super();he(this,e,Vt,It,pe,{taskObject:0,depth:1},null,[-1,-1])}}function Pe(n,e,t){const l=n.slice();return l[16]=e[t],l[18]=t,l}function qe(n,e,t){const l=n.slice();return l[19]=e[t],l}function Ue(n,e,t){const l=n.slice();return l[16]=e[t],l[18]=t,l}function ze(n){let e,t,l=n[16]+"",s,a,i,r,u,d;return{c(){e=D("div"),t=D("div"),s=M(l),i=S(),r=D("div"),d=S(),this.h()},l(o){e=y(o,"DIV",{style:!0,class:!0});var h=O(e);t=y(h,"DIV",{class:!0,style:!0,id:!0});var f=O(t);s=X(f,l),f.forEach(m),i=K(h),r=y(h,"DIV",{id:!0,class:!0}),O(r).forEach(m),d=K(h),h.forEach(m),this.h()},h(){w(t,"class","time-indicator svelte-1otkjb3"),c(t,"color",n[16].slice(0,2)===ve()&&ee()===n[0]()?"red":""),w(t,"id",a=n[16].slice(0,2)===ve()?"current-hour-block":""),w(r,"id",u=n[16]),w(r,"class","calendar-time-block svelte-1otkjb3"),c(e,"display","flex"),c(e,"top",90*n[18]+"px"),c(e,"position","absolute"),w(e,"class","svelte-1otkjb3")},m(o,h){C(o,e,h),v(e,t),v(t,s),v(e,i),v(e,r),v(e,d)},p(o,h){h&1&&c(t,"color",o[16].slice(0,2)===ve()&&ee()===o[0]()?"red":"")},d(o){o&&m(e)}}}function He(n){let e,t,l=n[19].name+"",s,a,i,r,u,d,o,h;function f(...j){return n[8](n[19],...j)}function b(...j){return n[9](n[19],...j)}function q(...j){return n[11](n[19],...j)}return{c(){e=D("div"),t=D("div"),s=M(l),a=S(),i=D("div"),r=S(),u=D("div"),d=S(),this.h()},l(j){e=y(j,"DIV",{class:!0,style:!0});var E=O(e);t=y(E,"DIV",{draggable:!0,style:!0,class:!0});var R=O(t);s=X(R,l),R.forEach(m),a=K(E),i=y(E,"DIV",{style:!0,draggable:!0,class:!0});var Y=O(i);Y.forEach(m),r=K(E),u=y(E,"DIV",{draggable:!0,style:!0,class:!0});var _=O(u);_.forEach(m),d=K(E),E.forEach(m),this.h()},h(){w(t,"draggable","true"),c(t,"width","11vw"),w(t,"class","svelte-1otkjb3"),c(i,"height",n[19].duration*n[3]-20-10+"px"),c(i,"width","11vw"),w(i,"draggable","true"),w(i,"class","svelte-1otkjb3"),w(u,"draggable","true"),c(u,"height","8px"),c(u,"width","11vw"),c(u,"position","absolute"),c(u,"bottom","0"),c(u,"left","-3px"),c(u,"cursor","ns-resize"),w(u,"class","svelte-1otkjb3"),w(e,"class","scheduled-task svelte-1otkjb3"),c(e,"top",n[19].verticalOffset+"px"),c(e,"height",(n[19].duration*n[3]||30)+"px")},m(j,E){C(j,e,E),v(e,t),v(t,s),v(e,a),v(e,i),v(e,r),v(e,u),v(e,d),o||(h=[B(t,"dragstart",f),B(i,"dragstart",b),B(u,"dragstart",n[10]),B(u,"dragend",q)],o=!0)},p(j,E){n=j,E&2&&l!==(l=n[19].name+"")&&$(s,l),E&2&&c(i,"height",n[19].duration*n[3]-20-10+"px"),E&2&&c(e,"top",n[19].verticalOffset+"px"),E&2&&c(e,"height",(n[19].duration*n[3]||30)+"px")},d(j){j&&m(e),o=!1,A(h)}}}function Se(n){let e,t=n[1][n[16]],l=[];for(let s=0;s<t.length;s+=1)l[s]=He(qe(n,t,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=F()},l(s){for(let a=0;a<l.length;a+=1)l[a].l(s);e=F()},m(s,a){for(let i=0;i<l.length;i+=1)l[i].m(s,a);C(s,e,a)},p(s,a){if(a&110){t=s[1][s[16]];let i;for(i=0;i<t.length;i+=1){const r=qe(s,t,i);l[i]?l[i].p(r,a):(l[i]=He(r),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(s){oe(l,s),s&&m(e)}}}function Ct(n){let e,t,l,s,a,i=n[2],r=[];for(let o=0;o<i.length;o+=1)r[o]=ze(Ue(n,i,o));let u=n[2],d=[];for(let o=0;o<u.length;o+=1)d[o]=Se(Pe(n,u,o));return{c(){e=D("div"),t=D("div");for(let o=0;o<r.length;o+=1)r[o].c();l=S();for(let o=0;o<d.length;o+=1)d[o].c();this.h()},l(o){e=y(o,"DIV",{style:!0,class:!0});var h=O(e);t=y(h,"DIV",{id:!0,style:!0,class:!0});var f=O(t);for(let b=0;b<r.length;b+=1)r[b].l(f);l=K(f);for(let b=0;b<d.length;b+=1)d[b].l(f);f.forEach(m),h.forEach(m),this.h()},h(){w(t,"id","calendar-day-container"),c(t,"width","12vw"),c(t,"margin-left","0px"),c(t,"margin-top","10px"),c(t,"position","relative"),c(t,"height","1600px"),w(t,"class","svelte-1otkjb3"),c(e,"height","100vh"),c(e,"overflow-y","scroll"),c(e,"overflow-x","hidden"),w(e,"class","svelte-1otkjb3")},m(o,h){C(o,e,h),v(e,t);for(let f=0;f<r.length;f+=1)r[f].m(t,null);v(t,l);for(let f=0;f<d.length;f+=1)d[f].m(t,null);s||(a=[B(t,"drop",n[12]),B(t,"dragover",Nt)],s=!0)},p(o,[h]){if(h&5){i=o[2];let f;for(f=0;f<i.length;f+=1){const b=Ue(o,i,f);r[f]?r[f].p(b,h):(r[f]=ze(b),r[f].c(),r[f].m(t,l))}for(;f<r.length;f+=1)r[f].d(1);r.length=i.length}if(h&110){u=o[2];let f;for(f=0;f<u.length;f+=1){const b=Pe(o,u,f);d[f]?d[f].p(b,h):(d[f]=Se(b),d[f].c(),d[f].m(t,null))}for(;f<d.length;f+=1)d[f].d(1);d.length=u.length}},i:Q,o:Q,d(o){o&&m(e),oe(r,o),oe(d,o),s=!1,A(a)}}}function Ke(n,e){n.dataTransfer.setData("text/plain",e)}function Nt(n){n.preventDefault(),n.dataTransfer.dropEffect="move"}function Rt({startTime:n}){const e=n.slice(0,2),t=n.slice(3,5);return(Number(e)+Number(t)/60-8)*90}function Bt(n,e,t){let{scheduledTasks:l}=e,{getDate:s}=e;const a=me(),i=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00","00:00","01:00","02:00"];let r={},u=0,d=90/60;ut(()=>{ee()===s()&&document.getElementById("current-hour-block").scrollIntoView()});function o(){const _={};for(const I of i){_[I]=[];for(const N of l)N.startTime.slice(0,2)===I.slice(0,2)&&_[I].push(Te(_e({},N),{verticalOffset:Rt(N)}))}t(1,r=_)}function h(_){_.preventDefault();var N=document.getElementById("calendar-day-container").getBoundingClientRect();N.left,N.top;const p=90;let T=_.layerY/p;const g=T-Math.floor(T),H=Math.trunc(T);let P=g*60,z=8+H;z<10&&(z=`0${z}`),P<10?(P=P.toPrecision(1),P=`0${P}`):P=P.toPrecision(2);const V=`${z}:${P}`;console.log("scheduledTime =",V),a("task-scheduled",{taskName:_.dataTransfer.getData("text/plain"),timeOfDay:V,dateScheduled:s()})}function f(_){u=_.offsetY}function b(_,I){I.duration||(I.duration=10);const N=60/90,p=(_.offsetY-u)*N;a("task-duration-adjusted",{taskName:I.name,duration:Math.max(1,I.duration+p)})}const q=(_,I)=>Ke(I,_.name),j=(_,I)=>Ke(I,_.name),E=_=>f(_),R=(_,I)=>b(I,_),Y=_=>h(_);return n.$$set=_=>{"scheduledTasks"in _&&t(7,l=_.scheduledTasks),"getDate"in _&&t(0,s=_.getDate)},n.$$.update=()=>{n.$$.dirty&128&&l&&o()},[s,r,i,d,h,f,b,l,q,j,E,R,Y]}class Me extends ce{constructor(e){super();he(this,e,Bt,Ct,pe,{scheduledTasks:7,getDate:0})}}const Pt={apiKey:"AIzaSyCOVm0X6UUQQcftXf066z_0hFk497j4dNY",authDomain:"project-y-2a061.firebaseapp.com",projectId:"project-y-2a061",storageBucket:"project-y-2a061.appspot.com",messagingSenderId:"132745397287",appId:"1:132745397287:web:b34052fb4683bc85e73a02",measurementId:"G-EZSLE84PYQ"};dt(Pt);var te=ct();function Xe(n,e,t){const l=n.slice();return l[23]=e[t],l}function Ge(n){let e,t,l,s,a,i=n[0],r=[];for(let o=0;o<i.length;o+=1)r[o]=We(Xe(n,i,o));const u=o=>W(r[o],1,1,()=>{r[o]=null});let d=n[5]&&Fe(n);return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=S(),t=D("div"),d&&d.c(),this.h()},l(o){for(let f=0;f<r.length;f+=1)r[f].l(o);e=K(o),t=y(o,"DIV",{style:!0,class:!0});var h=O(t);d&&d.l(h),h.forEach(m),this.h()},h(){c(t,"height","100px"),w(t,"class","svelte-tilh6m")},m(o,h){for(let f=0;f<r.length;f+=1)r[f].m(o,h);C(o,e,h),C(o,t,h),d&&d.m(t,null),l=!0,s||(a=[B(t,"mouseenter",n[14]),B(t,"mouseleave",n[15])],s=!0)},p(o,h){if(h&1537){i=o[0];let f;for(f=0;f<i.length;f+=1){const b=Xe(o,i,f);r[f]?(r[f].p(b,h),G(r[f],1)):(r[f]=We(b),r[f].c(),G(r[f],1),r[f].m(e.parentNode,e))}for(ae(),f=i.length;f<r.length;f+=1)u(f);re()}o[5]?d?d.p(o,h):(d=Fe(o),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},i(o){if(!l){for(let h=0;h<i.length;h+=1)G(r[h]);l=!0}},o(o){r=r.filter(Boolean);for(let h=0;h<r.length;h+=1)W(r[h]);l=!1},d(o){oe(r,o),o&&m(e),o&&m(t),d&&d.d(),s=!1,A(a)}}}function Ye(n){let e,t,l,s;function a(...i){return n[11](n[23],...i)}return t=new Be({props:{taskObject:n[23],depth:1}}),t.$on("task-create",a),t.$on("task-done",n[10]),t.$on("task-delete",n[10]),t.$on("task-repeating",n[10]),{c(){e=D("div"),le(t.$$.fragment),l=S(),this.h()},l(i){e=y(i,"DIV",{class:!0});var r=O(e);se(t.$$.fragment,r),l=K(r),r.forEach(m),this.h()},h(){w(e,"class","task-container svelte-tilh6m")},m(i,r){C(i,e,r),ne(t,e,null),v(e,l),s=!0},p(i,r){n=i;const u={};r&1&&(u.taskObject=n[23]),t.$set(u)},i(i){s||(G(t.$$.fragment,i),s=!0)},o(i){W(t.$$.fragment,i),s=!1},d(i){i&&m(e),ie(t)}}}function We(n){let e,t,l=!n[23].isDeleted&&Ye(n);return{c(){l&&l.c(),e=F()},l(s){l&&l.l(s),e=F()},m(s,a){l&&l.m(s,a),C(s,e,a),t=!0},p(s,a){s[23].isDeleted?l&&(ae(),W(l,1,1,()=>{l=null}),re()):l?(l.p(s,a),a&1&&G(l,1)):(l=Ye(s),l.c(),G(l,1),l.m(e.parentNode,e))},i(s){t||(G(l),t=!0)},o(s){W(l),t=!1},d(s){l&&l.d(s),s&&m(e)}}}function Fe(n){let e;function t(a,i){return a[4]?qt:Ut}let l=t(n),s=l(n);return{c(){s.c(),e=F()},l(a){s.l(a),e=F()},m(a,i){s.m(a,i),C(a,e,i)},p(a,i){l===(l=t(a))&&s?s.p(a,i):(s.d(1),s=l(a),s&&(s.c(),s.m(e.parentNode,e)))},d(a){s.d(a),a&&m(e)}}}function qt(n){let e,t,l,s;return{c(){e=D("div"),t=D("input"),this.h()},l(a){e=y(a,"DIV",{style:!0,class:!0});var i=O(e);t=y(i,"INPUT",{placeholder:!0,class:!0}),i.forEach(m),this.h()},h(){w(t,"placeholder","Type task..."),w(t,"class","svelte-tilh6m"),c(e,"display","flex"),c(e,"align-content","center"),c(e,"justify-items","center"),w(e,"class","svelte-tilh6m")},m(a,i){C(a,e,i),v(e,t),L(t,n[3]),l||(s=[B(t,"input",n[13]),B(t,"keypress",n[8])],l=!0)},p(a,i){i&8&&t.value!==a[3]&&L(t,a[3])},d(a){a&&m(e),l=!1,A(s)}}}function Ut(n){let e,t,l,s;return{c(){e=D("div"),t=M("New task"),this.h()},l(a){e=y(a,"DIV",{style:!0,class:!0});var i=O(e);t=X(i,"New task"),i.forEach(m),this.h()},h(){c(e,"font-size","1.5rem"),c(e,"color","grey"),w(e,"class","svelte-tilh6m")},m(a,i){C(a,e,i),v(e,t),l||(s=B(e,"click",n[12]),l=!0)},p:Q,d(a){a&&m(e),l=!1,s()}}}function zt(n){let e,t,l,s,a,i,r,u,d,o=n[0].length>0&&Ge(n);return i=new Me({props:{scheduledTasks:n[1],getDate:ee}}),i.$on("task-scheduled",n[16]),i.$on("task-duration-adjusted",n[17]),u=new Me({props:{scheduledTasks:n[2],getDate:we}}),u.$on("task-scheduled",n[18]),u.$on("task-duration-adjusted",n[19]),{c(){e=D("div"),t=D("div"),l=D("div"),o&&o.c(),s=S(),a=D("div"),le(i.$$.fragment),r=S(),le(u.$$.fragment),this.h()},l(h){e=y(h,"DIV",{style:!0,class:!0});var f=O(e);t=y(f,"DIV",{class:!0});var b=O(t);l=y(b,"DIV",{class:!0});var q=O(l);o&&o.l(q),q.forEach(m),b.forEach(m),s=K(f),a=y(f,"DIV",{style:!0,class:!0});var j=O(a);se(i.$$.fragment,j),r=K(j),se(u.$$.fragment,j),j.forEach(m),f.forEach(m),this.h()},h(){w(l,"class","todo-list svelte-tilh6m"),w(t,"class","fixed-height-container-for-scrolling svelte-tilh6m"),c(a,"display","flex"),c(a,"justify-content","space-evenly"),c(a,"width","30vw"),c(a,"border-left","2px dashed grey"),w(a,"class","svelte-tilh6m"),c(e,"display","flex"),c(e,"padding-left","0"),c(e,"padding-top","10px"),w(e,"class","svelte-tilh6m")},m(h,f){C(h,e,f),v(e,t),v(t,l),o&&o.m(l,null),v(e,s),v(e,a),ne(i,a,null),v(a,r),ne(u,a,null),d=!0},p(h,[f]){h[0].length>0?o?(o.p(h,f),f&1&&G(o,1)):(o=Ge(h),o.c(),G(o,1),o.m(l,null)):o&&(ae(),W(o,1,1,()=>{o=null}),re());const b={};f&2&&(b.scheduledTasks=h[1]),i.$set(b);const q={};f&4&&(q.scheduledTasks=h[2]),u.$set(q)},i(h){d||(G(o),G(i.$$.fragment,h),G(u.$$.fragment,h),d=!0)},o(h){W(o),W(i.$$.fragment,h),W(u.$$.fragment,h),d=!1},d(h){h&&m(e),o&&o.d(),ie(i),ie(u)}}}function Ht(n,e,t){let l=[],s=[],a=[],i="",r=!1,u=!1;async function d({taskName:g,timeOfDay:H,dateScheduled:P}){function z(V){if(V.name===g)return V.startTime=H,V.startDate=P,!0;for(const J of V.children)if(z(J))return!0;return!1}for(const V of l)if(z(V)){console.log("successfully mutated allTasks, =",l);break}await fe(x(te,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:l}),t(0,l=[...l])}async function o({taskName:g,duration:H}){function P(z){if(z.name===g)return z.duration=H,!0;for(const V of z.children)if(P(V))return!0;return!1}for(const z of l)if(P(z)){console.log("successfully mutated allTasks, =",l);break}await fe(x(te,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:l}),t(0,l=[...l])}async function h(){const g=await ht(x(te,"users/GxBbopqXHW0qgjKEwU4z"));t(0,l=g.data().allTasks)}h();function f(g){g.charCode===13&&b()}function b(){i||alert("You have to type something first");const g=[...l,{name:i,children:[]}];fe(x(te,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:g}),t(0,l=[...g]),newToplevelTask="",isTypingNewTask=!1}function q(g,H){const{updatedChildren:P}=g.detail;H.children=[...P],fe(x(te,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:l}),t(0,l=[...l])}function j(){console.log("updateFirestore()"),fe(x(te,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:l}),t(0,l=[...l])}const E=(g,H)=>q(H,g),R=()=>t(4,r=!0);function Y(){i=this.value,t(3,i)}const _=()=>t(5,u=!0),I=()=>t(5,u=!1),N=g=>d(g.detail),p=g=>o(g.detail),k=g=>d(g.detail),T=g=>o(g.detail);return n.$$.update=()=>{if(n.$$.dirty&7&&l){let H=function(V){V.startTime!==void 0&&g.push(V);for(const J of V.children)H(J)};const g=[];for(const V of l)H(V);const P=ee();t(1,s=g.filter(V=>V.startDate===P&&!V.isDeleted));const z=we();t(2,a=g.filter(V=>V.startDate===z&&!V.isDeleted)),console.log("scheduledTasks2 =",a);for(const V of s)V.isRepeating&&(console.log("task.name =",V.name),console.log("last completion date =",V.lastCompletionDate),V.lastCompletionDate!==P&&(V.startDate=P,V.isDone=!1));l.sort((V,J)=>!!V.isDone-!!J.isDone)}},[l,s,a,i,r,u,d,o,f,q,j,E,R,Y,_,I,N,p,k,T]}class Mt extends ce{constructor(e){super();he(this,e,Ht,zt,pe,{})}}export{Mt as default};
