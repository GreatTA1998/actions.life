var Ot=Object.defineProperty;var qe=Object.getOwnPropertySymbols;var Vt=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable;var Ke=(s,e,t)=>e in s?Ot(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Ye=(s,e)=>{for(var t in e||(e={}))Vt.call(e,t)&&Ke(s,t,e[t]);if(qe)for(var t of qe(e))St.call(e,t)&&Ke(s,t,e[t]);return s};import{S as Ve,i as Se,s as we,t as L,h as W,g as O,d as p,k as U,m as z,j as de,e as T,w as ve,c as w,a as N,x as ke,f as d,y as ge,K as g,q as C,o as A,B as be,b as y,_ as se,n as oe,p as fe,$ as Ne,X as ne,Y as M,Z as he,l as ue,a0 as Le,a1 as Xe,L as Pe,a2 as Nt,a3 as Ee,M as Rt,O as jt,P as Ct,Q as Bt,v as Ft,a4 as Ie,N as De,I as Pt,W as Mt}from"../../chunks/vendor-94da56df.js";import{d as ye}from"../../chunks/db-66132ac0.js";function Me(){const s=new Date;let e=s.getDate(),t=s.getMonth()+1;return e<10&&(e="0"+e),t<10&&(t="0"+t),`${t}/${e}`}function Ge(s,e,t){const l=s.slice();return l[1]=e[t],l}function Je(s){let e;return{c(){e=L("(Repeats)")},l(t){e=W(t,"(Repeats)")},m(t,l){O(t,e,l)},d(t){t&&p(e)}}}function Qe(s){let e;return{c(){e=L("(Completed)")},l(t){e=W(t,"(Completed)")},m(t,l){O(t,e,l)},d(t){t&&p(e)}}}function Ze(s){let e,t=s[0].startDate+"",l,n,r=s[0].startTime+"",a,i;return{c(){e=L("("),l=L(t),n=U(),a=L(r),i=L(")")},l(u){e=W(u,"("),l=W(u,t),n=z(u),a=W(u,r),i=W(u,")")},m(u,f){O(u,e,f),O(u,l,f),O(u,n,f),O(u,a,f),O(u,i,f)},p(u,f){f&1&&t!==(t=u[0].startDate+"")&&de(l,t),f&1&&r!==(r=u[0].startTime+"")&&de(a,r)},d(u){u&&p(e),u&&p(l),u&&p(n),u&&p(a),u&&p(i)}}}function $e(s){let e,t,l,n;return t=new xe({props:{taskObject:s[1]}}),{c(){e=T("div"),ve(t.$$.fragment),l=U(),this.h()},l(r){e=w(r,"DIV",{style:!0});var a=N(e);ke(t.$$.fragment,a),l=z(a),a.forEach(p),this.h()},h(){d(e,"margin-left","12px")},m(r,a){O(r,e,a),ge(t,e,null),g(e,l),n=!0},p(r,a){const i={};a&1&&(i.taskObject=r[1]),t.$set(i)},i(r){n||(C(t.$$.fragment,r),n=!0)},o(r){A(t.$$.fragment,r),n=!1},d(r){r&&p(e),be(t)}}}function Ut(s){let e,t=s[0].name+"",l,n,r,a,i,u,f=s[0].isRepeating&&Je(),c=s[0].isDone&&Qe(),o=s[0].startDate&&s[0].startTime&&Ze(s),_=s[0].children,v=[];for(let m=0;m<_.length;m+=1)v[m]=$e(Ge(s,_,m));const b=m=>A(v[m],1,1,()=>{v[m]=null});return{c(){e=T("div"),l=L(t),n=U(),f&&f.c(),r=U(),c&&c.c(),a=U(),o&&o.c(),i=U();for(let m=0;m<v.length;m+=1)v[m].c();this.h()},l(m){e=w(m,"DIV",{class:!0});var k=N(e);l=W(k,t),n=z(k),f&&f.l(k),r=z(k),c&&c.l(k),a=z(k),o&&o.l(k),i=z(k);for(let h=0;h<v.length;h+=1)v[h].l(k);k.forEach(p),this.h()},h(){y(e,"class","svelte-10bdwqk"),se(e,"task-completed",s[0].isDone),se(e,"task-scheduled",!s[0].isDone&&s[0].startDate&&s[0].startTime)},m(m,k){O(m,e,k),g(e,l),g(e,n),f&&f.m(e,null),g(e,r),c&&c.m(e,null),g(e,a),o&&o.m(e,null),g(e,i);for(let h=0;h<v.length;h+=1)v[h].m(e,null);u=!0},p(m,[k]){if((!u||k&1)&&t!==(t=m[0].name+"")&&de(l,t),m[0].isRepeating?f||(f=Je(),f.c(),f.m(e,r)):f&&(f.d(1),f=null),m[0].isDone?c||(c=Qe(),c.c(),c.m(e,a)):c&&(c.d(1),c=null),m[0].startDate&&m[0].startTime?o?o.p(m,k):(o=Ze(m),o.c(),o.m(e,i)):o&&(o.d(1),o=null),k&1){_=m[0].children;let h;for(h=0;h<_.length;h+=1){const D=Ge(m,_,h);v[h]?(v[h].p(D,k),C(v[h],1)):(v[h]=$e(D),v[h].c(),C(v[h],1),v[h].m(e,null))}for(oe(),h=_.length;h<v.length;h+=1)b(h);fe()}k&1&&se(e,"task-completed",m[0].isDone),k&1&&se(e,"task-scheduled",!m[0].isDone&&m[0].startDate&&m[0].startTime)},i(m){if(!u){for(let k=0;k<_.length;k+=1)C(v[k]);u=!0}},o(m){v=v.filter(Boolean);for(let k=0;k<v.length;k+=1)A(v[k]);u=!1},d(m){m&&p(e),f&&f.d(),c&&c.d(),o&&o.d(),Ne(v,m)}}}function zt(s,e,t){let{taskObject:l}=e;return s.$$set=n=>{"taskObject"in n&&t(0,l=n.taskObject)},[l]}class xe extends Ve{constructor(e){super();Se(this,e,zt,Ut,we,{taskObject:0})}}function et(s,e,t){const l=s.slice();return l[27]=e[t],l}function tt(s){let e,t,l,n,r,a,i,u,f,c,o,_,v,b,m,k,h,D,I,P,Y,R,J,X,B,V,q,le,S,re,_e,Q=!s[0].isDone&&s[0].startTime&&s[0].startDate&&lt(s);function pe(j,F){if(j[0].daysBeforeRepeating)return Ht;if(j[0].repeatsOnDaysOfWeek)return At}let Te=pe(s),te=Te&&Te(s);function ze(j,F){return j[4]?Lt:Wt}let Re=ze(s),ie=Re(s);function Ae(j,F){return j[5]?qt:Kt}let je=Ae(s),ae=je(s),me=s[0].children,Z=[];for(let j=0;j<me.length;j+=1)Z[j]=st(et(s,me,j));const We=j=>A(Z[j],1,1,()=>{Z[j]=null});return{c(){e=T("div"),t=T("div"),l=T("input"),n=U(),r=T("span"),a=L("close"),i=U(),u=T("div"),Q&&Q.c(),f=U(),c=T("div"),te&&te.c(),o=U(),_=T("div"),v=T("textarea"),b=U(),m=T("div"),k=T("div"),ie.c(),h=U(),ae.c(),D=U(),I=T("div"),P=T("button"),Y=L("Delete"),R=U(),J=T("button"),X=L("Done"),B=U(),V=T("div"),q=L("Full task history:"),le=U();for(let j=0;j<Z.length;j+=1)Z[j].c();this.h()},l(j){e=w(j,"DIV",{class:!0});var F=N(e);t=w(F,"DIV",{style:!0,class:!0});var G=N(t);l=w(G,"INPUT",{type:!0,class:!0,style:!0}),n=z(G),r=w(G,"SPAN",{class:!0,style:!0});var Oe=N(r);a=W(Oe,"close"),Oe.forEach(p),G.forEach(p),i=z(F),u=w(F,"DIV",{class:!0,style:!0});var E=N(u);Q&&Q.l(E),E.forEach(p),f=z(F),c=w(F,"DIV",{class:!0,style:!0});var H=N(c);te&&te.l(H),H.forEach(p),o=z(F),_=w(F,"DIV",{stle:!0,class:!0});var $=N(_);v=w($,"TEXTAREA",{rows:!0,placeholder:!0,style:!0,class:!0}),N(v).forEach(p),$.forEach(p),b=z(F),m=w(F,"DIV",{style:!0,class:!0});var x=N(m);k=w(x,"DIV",{class:!0});var ee=N(k);ie.l(ee),h=z(ee),ae.l(ee),ee.forEach(p),D=z(x),I=w(x,"DIV",{style:!0,class:!0});var K=N(I);P=w(K,"BUTTON",{class:!0});var ce=N(P);Y=W(ce,"Delete"),ce.forEach(p),R=z(K),J=w(K,"BUTTON",{class:!0});var Ce=N(J);X=W(Ce,"Done"),Ce.forEach(p),K.forEach(p),x.forEach(p),B=z(F),V=w(F,"DIV",{style:!0,class:!0});var Be=N(V);q=W(Be,"Full task history:"),Be.forEach(p),le=z(F);for(let Fe=0;Fe<Z.length;Fe+=1)Z[Fe].l(F);F.forEach(p),this.h()},h(){y(l,"type","text"),y(l,"class","google-calendar-event-title svelte-bv1cfr"),d(l,"width","96%"),d(l,"margin-left","10px"),y(r,"class","material-icons svelte-bv1cfr"),d(r,"margin-left","auto"),d(r,"margin-right","0"),d(t,"display","flex"),y(t,"class","svelte-bv1cfr"),y(u,"class","google-calendar-event-time svelte-bv1cfr"),d(u,"margin-top","4px"),d(u,"margin-left","10px"),y(c,"class","google-calendar-event-detail svelte-bv1cfr"),d(c,"margin-top","12px"),d(c,"margin-left","16px"),y(v,"rows","5"),y(v,"placeholder","notes"),d(v,"margin-left","10px"),d(v,"width","100%"),d(v,"max-width","97%"),y(v,"class","svelte-bv1cfr"),y(_,"stle","float: left; width: 80%"),y(_,"class","svelte-bv1cfr"),y(k,"class","svelte-bv1cfr"),y(P,"class","svelte-bv1cfr"),y(J,"class","svelte-bv1cfr"),d(I,"margin-left","auto"),d(I,"margin-right","16px"),y(I,"class","svelte-bv1cfr"),d(m,"display","flex"),d(m,"margin-left","10px"),y(m,"class","svelte-bv1cfr"),d(V,"font-size","1rem"),d(V,"margin-top","12px"),d(V,"margin-left","12px"),d(V,"font-weight","600"),y(V,"class","svelte-bv1cfr"),y(e,"class","detailed-card svelte-bv1cfr")},m(j,F){O(j,e,F),g(e,t),g(t,l),ne(l,s[8]),g(t,n),g(t,r),g(r,a),g(e,i),g(e,u),Q&&Q.m(u,null),g(e,f),g(e,c),te&&te.m(c,null),g(e,o),g(e,_),g(_,v),ne(v,s[7]),g(e,b),g(e,m),g(m,k),ie.m(k,null),g(k,h),ae.m(k,null),g(m,D),g(m,I),g(I,P),g(P,Y),g(I,R),g(I,J),g(J,X),g(e,B),g(e,V),g(V,q),g(e,le);for(let G=0;G<Z.length;G+=1)Z[G].m(e,null);S=!0,re||(_e=[M(l,"input",s[14]),M(l,"input",s[11]),M(r,"click",s[15]),M(v,"input",s[16]),M(v,"input",s[10]),M(P,"click",s[22]),M(J,"click",s[23])],re=!0)},p(j,F){if(F&256&&l.value!==j[8]&&ne(l,j[8]),!j[0].isDone&&j[0].startTime&&j[0].startDate?Q?Q.p(j,F):(Q=lt(j),Q.c(),Q.m(u,null)):Q&&(Q.d(1),Q=null),Te===(Te=pe(j))&&te?te.p(j,F):(te&&te.d(1),te=Te&&Te(j),te&&(te.c(),te.m(c,null))),F&128&&ne(v,j[7]),Re===(Re=ze(j))&&ie?ie.p(j,F):(ie.d(1),ie=Re(j),ie&&(ie.c(),ie.m(k,h))),je===(je=Ae(j))&&ae?ae.p(j,F):(ae.d(1),ae=je(j),ae&&(ae.c(),ae.m(k,null))),F&1){me=j[0].children;let G;for(G=0;G<me.length;G+=1){const Oe=et(j,me,G);Z[G]?(Z[G].p(Oe,F),C(Z[G],1)):(Z[G]=st(Oe),Z[G].c(),C(Z[G],1),Z[G].m(e,null))}for(oe(),G=me.length;G<Z.length;G+=1)We(G);fe()}},i(j){if(!S){for(let F=0;F<me.length;F+=1)C(Z[F]);S=!0}},o(j){Z=Z.filter(Boolean);for(let F=0;F<Z.length;F+=1)A(Z[F]);S=!1},d(j){j&&p(e),Q&&Q.d(),te&&te.d(),ie.d(),ae.d(),Ne(Z,j),re=!1,he(_e)}}}function lt(s){let e,t=s[0].startDate+" "+s[0].startTime+"",l;return{c(){e=L("Scheduled for "),l=L(t)},l(n){e=W(n,"Scheduled for "),l=W(n,t)},m(n,r){O(n,e,r),O(n,l,r)},p(n,r){r&1&&t!==(t=n[0].startDate+" "+n[0].startTime+"")&&de(l,t)},d(n){n&&p(e),n&&p(l)}}}function At(s){let e,t=s[0].repeatsOnDaysOfWeek+"",l;return{c(){e=L("Repeats "),l=L(t)},l(n){e=W(n,"Repeats "),l=W(n,t)},m(n,r){O(n,e,r),O(n,l,r)},p(n,r){r&1&&t!==(t=n[0].repeatsOnDaysOfWeek+"")&&de(l,t)},d(n){n&&p(e),n&&p(l)}}}function Ht(s){let e,t=s[0].daysBeforeRepeating+"",l,n,r=(s[0].completionCount||0)+"",a,i;return{c(){e=L("Repeats every "),l=L(t),n=L(" days, completed "),a=L(r),i=L(" times")},l(u){e=W(u,"Repeats every "),l=W(u,t),n=W(u," days, completed "),a=W(u,r),i=W(u," times")},m(u,f){O(u,e,f),O(u,l,f),O(u,n,f),O(u,a,f),O(u,i,f)},p(u,f){f&1&&t!==(t=u[0].daysBeforeRepeating+"")&&de(l,t),f&1&&r!==(r=(u[0].completionCount||0)+"")&&de(a,r)},d(u){u&&p(e),u&&p(l),u&&p(n),u&&p(a),u&&p(i)}}}function Lt(s){let e,t,l,n,r;return{c(){e=T("input"),t=U(),l=T("input"),this.h()},l(a){e=w(a,"INPUT",{placeholder:!0,style:!0,class:!0}),t=z(a),l=w(a,"INPUT",{placeholder:!0,style:!0,class:!0}),this.h()},h(){y(e,"placeholder","12/31"),d(e,"width","40px"),y(e,"class","svelte-bv1cfr"),y(l,"placeholder","19:45"),d(l,"width","40px"),y(l,"class","svelte-bv1cfr")},m(a,i){O(a,e,i),ne(e,s[2]),O(a,t,i),O(a,l,i),ne(l,s[3]),n||(r=[M(e,"input",s[18]),M(l,"input",s[19]),M(l,"keypress",s[13])],n=!0)},p(a,i){i&4&&e.value!==a[2]&&ne(e,a[2]),i&8&&l.value!==a[3]&&ne(l,a[3])},d(a){a&&p(e),a&&p(t),a&&p(l),n=!1,he(r)}}}function Wt(s){let e,t,l,n;return{c(){e=T("button"),t=L("Schedule"),this.h()},l(r){e=w(r,"BUTTON",{class:!0});var a=N(e);t=W(a,"Schedule"),a.forEach(p),this.h()},h(){y(e,"class","svelte-bv1cfr")},m(r,a){O(r,e,a),g(e,t),l||(n=M(e,"click",s[17]),l=!0)},p:Pe,d(r){r&&p(e),l=!1,n()}}}function qt(s){let e,t,l,n,r,a;return{c(){e=T("div"),t=L("Repeats every "),l=T("input"),n=L(" days"),this.h()},l(i){e=w(i,"DIV",{style:!0,class:!0});var u=N(e);t=W(u,"Repeats every "),l=w(u,"INPUT",{style:!0,placeholder:!0,class:!0}),n=W(u," days"),u.forEach(p),this.h()},h(){d(l,"width","20px"),y(l,"placeholder","0"),y(l,"class","svelte-bv1cfr"),d(e,"display","flex"),y(e,"class","svelte-bv1cfr")},m(i,u){O(i,e,u),g(e,t),g(e,l),ne(l,s[6]),g(e,n),r||(a=[M(l,"input",s[21]),M(l,"keypress",s[12])],r=!0)},p(i,u){u&64&&l.value!==i[6]&&ne(l,i[6])},d(i){i&&p(e),r=!1,he(a)}}}function Kt(s){let e,t,l,n;return{c(){e=T("button"),t=L("Repeat task"),this.h()},l(r){e=w(r,"BUTTON",{style:!0,class:!0});var a=N(e);t=W(a,"Repeat task"),a.forEach(p),this.h()},h(){d(e,"margin-left","0px"),y(e,"class","svelte-bv1cfr")},m(r,a){O(r,e,a),g(e,t),l||(n=M(e,"click",s[20]),l=!0)},p:Pe,d(r){r&&p(e),l=!1,n()}}}function st(s){let e,t,l,n;return t=new xe({props:{taskObject:s[27]}}),{c(){e=T("div"),ve(t.$$.fragment),l=U(),this.h()},l(r){e=w(r,"DIV",{style:!0,class:!0});var a=N(e);ke(t.$$.fragment,a),l=z(a),a.forEach(p),this.h()},h(){d(e,"margin-left","12px"),y(e,"class","svelte-bv1cfr")},m(r,a){O(r,e,a),ge(t,e,null),g(e,l),n=!0},p(r,a){const i={};a&1&&(i.taskObject=r[27]),t.$set(i)},i(r){n||(C(t.$$.fragment,r),n=!0)},o(r){A(t.$$.fragment,r),n=!1},d(r){r&&p(e),be(t)}}}function Yt(s){let e,t,l=s[1]&&tt(s);return{c(){l&&l.c(),e=ue()},l(n){l&&l.l(n),e=ue()},m(n,r){l&&l.m(n,r),O(n,e,r),t=!0},p(n,[r]){n[1]?l?(l.p(n,r),r&2&&C(l,1)):(l=tt(n),l.c(),C(l,1),l.m(e.parentNode,e)):l&&(oe(),A(l,1,1,()=>{l=null}),fe())},i(n){t||(C(l),t=!0)},o(n){A(l),t=!1},d(n){l&&l.d(n),n&&p(e)}}}function Xt(s,e,t){let{taskObject:l}=e,{isOpen:n=!1}=e,r,a,i=!1,u=!1,f=7;const c=Le();let o=l.notes||"",_=l.name||"";const v=Xe.throttle(S=>{t(7,o=S.target.value),m()},500),b=Xe.throttle(S=>{t(8,_=S.target.value),k()},500);function m(){t(0,l.notes=o,l),c("task-notes-update")}function k(){t(0,l.name=_,l),c("task-title-update")}function h(S){S.charCode===13&&(f?(t(0,l.daysBeforeRepeating=f,l),t(0,l.startDate=Me(),l),t(0,l.startTime="23:30",l)):(alert("Task is reset and will no longer repeat"),t(0,l.daysBeforeRepeating=0,l)),c("task-repeat"),t(6,f=0),t(5,u=!1))}function D(S){S.charCode===13&&(!r||!a?alert("Need BOTH date and time"):(t(0,l.startDate=r,l),t(0,l.startTime=a,l)),c("task-schedule"),t(2,r=""),t(3,a=""))}function I(){_=this.value,t(8,_)}const P=()=>c("card-close");function Y(){o=this.value,t(7,o)}const R=()=>t(4,i=!0);function J(){r=this.value,t(2,r)}function X(){a=this.value,t(3,a)}const B=()=>t(5,u=!0);function V(){f=this.value,t(6,f)}const q=()=>c("task-delete"),le=()=>c("task-done");return s.$$set=S=>{"taskObject"in S&&t(0,l=S.taskObject),"isOpen"in S&&t(1,n=S.isOpen)},[l,n,r,a,i,u,f,o,_,c,v,b,h,D,I,P,Y,R,J,X,B,V,q,le]}class Gt extends Ve{constructor(e){super();Se(this,e,Xt,Yt,we,{taskObject:0,isOpen:1})}}function nt(s,e,t){const l=s.slice();return l[32]=e[t],l[34]=t,l}function rt(s){let e,t,l,n,r,a,i,u,f;function c(h,D){return h[2]?Jt:Qt}let o=c(s),_=o(s),v=s[0].children,b=[];for(let h=0;h<v.length;h+=1)b[h]=it(nt(s,v,h));const m=h=>A(b[h],1,1,()=>{b[h]=null});let k=s[4]&&at(s);return{c(){e=T("div"),t=T("div"),l=T("div"),_.c(),n=U(),r=T("div");for(let h=0;h<b.length;h+=1)b[h].c();a=U(),k&&k.c(),this.h()},l(h){e=w(h,"DIV",{draggable:!0,class:!0,style:!0});var D=N(e);t=w(D,"DIV",{class:!0});var I=N(t);l=w(I,"DIV",{style:!0,class:!0});var P=N(l);_.l(P),P.forEach(p),I.forEach(p),n=z(D),r=w(D,"DIV",{style:!0});var Y=N(r);for(let R=0;R<b.length;R+=1)b[R].l(Y);a=z(Y),k&&k.l(Y),Y.forEach(p),D.forEach(p),this.h()},h(){d(l,"font-size",1.5*.85**s[1]+"rem"),d(l,"font-family","aktiv-grotesk, sans-serif"),y(l,"class","keep-on-same-line name-of-task svelte-t4v7r0"),se(l,"scheduled-orange",!s[0].isDone&&s[0].startTime&&s[0].startDate),se(l,"crossed-out",s[0].isDone),y(t,"class","current-task-flexbox svelte-t4v7r0"),d(r,"margin-top",20*.7**s[1]+"px"),y(e,"draggable","true"),y(e,"class","scheduled-task svelte-t4v7r0"),d(e,"margin-left",(s[1]===1?"0":"20")+"px"),d(e,"margin-bottom","10px"),d(e,"width",350*.8**s[1]+"px"),d(e,"height",s[0].duration&&!s[7]&&s[0].duration*90/60>s[0].children.length*60*.7**s[1]&&s[0].duration*90/60>60*.65**s[1]?`${s[0].duration*90/60}px`:"100%"),d(e,"padding-left",10*.8**s[1]+"px"),se(e,"black-duration-line",!s[0].isDone&&!(s[0].startTime&&s[0].startDate)),se(e,"orange-duration-line",!s[0].isDone&&s[0].startTime&&s[0].startDate),se(e,"green-duration-line",s[0].isDone)},m(h,D){O(h,e,D),g(e,t),g(t,l),_.m(l,null),g(e,n),g(e,r);for(let I=0;I<b.length;I+=1)b[I].m(r,null);g(r,a),k&&k.m(r,null),i=!0,u||(f=[M(e,"dragstart",Nt(s[23])),M(e,"pointerleave",s[13])],u=!0)},p(h,D){if(o===(o=c(h))&&_?_.p(h,D):(_.d(1),_=o(h),_&&(_.c(),_.m(l,null))),(!i||D[0]&2)&&d(l,"font-size",1.5*.85**h[1]+"rem"),D[0]&1&&se(l,"scheduled-orange",!h[0].isDone&&h[0].startTime&&h[0].startDate),D[0]&1&&se(l,"crossed-out",h[0].isDone),D[0]&515){v=h[0].children;let I;for(I=0;I<v.length;I+=1){const P=nt(h,v,I);b[I]?(b[I].p(P,D),C(b[I],1)):(b[I]=it(P),b[I].c(),C(b[I],1),b[I].m(r,a))}for(oe(),I=v.length;I<b.length;I+=1)m(I);fe()}h[4]?k?k.p(h,D):(k=at(h),k.c(),k.m(r,null)):k&&(k.d(1),k=null),(!i||D[0]&2)&&d(r,"margin-top",20*.7**h[1]+"px"),(!i||D[0]&2)&&d(e,"margin-left",(h[1]===1?"0":"20")+"px"),(!i||D[0]&2)&&d(e,"width",350*.8**h[1]+"px"),(!i||D[0]&131)&&d(e,"height",h[0].duration&&!h[7]&&h[0].duration*90/60>h[0].children.length*60*.7**h[1]&&h[0].duration*90/60>60*.65**h[1]?`${h[0].duration*90/60}px`:"100%"),(!i||D[0]&2)&&d(e,"padding-left",10*.8**h[1]+"px"),D[0]&1&&se(e,"black-duration-line",!h[0].isDone&&!(h[0].startTime&&h[0].startDate)),D[0]&1&&se(e,"orange-duration-line",!h[0].isDone&&h[0].startTime&&h[0].startDate),D[0]&1&&se(e,"green-duration-line",h[0].isDone)},i(h){if(!i){for(let D=0;D<v.length;D+=1)C(b[D]);i=!0}},o(h){b=b.filter(Boolean);for(let D=0;D<b.length;D+=1)A(b[D]);i=!1},d(h){h&&p(e),_.d(),Ne(b,h),k&&k.d(),u=!1,he(f)}}}function Jt(s){let e,t,l;return{c(){e=T("input")},l(n){e=w(n,"INPUT",{})},m(n,r){O(n,e,r),ne(e,s[3]),t||(l=[M(e,"input",s[15]),M(e,"keypress",s[11])],t=!0)},p(n,r){r[0]&8&&e.value!==n[3]&&ne(e,n[3])},d(n){n&&p(e),t=!1,he(l)}}}function Qt(s){let e,t=s[0].name+"",l,n,r;return{c(){e=T("div"),l=L(t),this.h()},l(a){e=w(a,"DIV",{class:!0,style:!0});var i=N(e);l=W(i,t),i.forEach(p),this.h()},h(){y(e,"class","truncate svelte-t4v7r0"),d(e,"width",350*.85**s[1]+"px")},m(a,i){O(a,e,i),g(e,l),n||(r=[M(e,"click",s[14]),M(e,"pointerenter",s[12])],n=!0)},p(a,i){i[0]&1&&t!==(t=a[0].name+"")&&de(l,t),i[0]&2&&d(e,"width",350*.85**a[1]+"px")},d(a){a&&p(e),n=!1,he(r)}}}function it(s){let e,t;function l(...n){return s[16](s[34],...n)}return e=new ot({props:{taskObject:s[32],depth:s[1]+1}}),e.$on("task-create",l),e.$on("task-click",s[17]),e.$on("task-done",s[18]),e.$on("task-delete",s[19]),e.$on("task-repeating",s[20]),{c(){ve(e.$$.fragment)},l(n){ke(e.$$.fragment,n)},m(n,r){ge(e,n,r),t=!0},p(n,r){s=n;const a={};r[0]&1&&(a.taskObject=s[32]),r[0]&2&&(a.depth=s[1]+1),e.$set(a)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}function at(s){let e;function t(r,a){return r[5]?Zt:$t}let l=t(s),n=l(s);return{c(){n.c(),e=ue()},l(r){n.l(r),e=ue()},m(r,a){n.m(r,a),O(r,e,a)},p(r,a){l===(l=t(r))&&n?n.p(r,a):(n.d(1),n=l(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){n.d(r),r&&p(e)}}}function Zt(s){let e,t,l,n;return{c(){e=T("div"),t=T("input"),this.h()},l(r){e=w(r,"DIV",{style:!0});var a=N(e);t=w(a,"INPUT",{placeholder:!0,style:!0}),a.forEach(p),this.h()},h(){y(t,"placeholder","Type sub-task"),d(t,"width","100%"),d(t,"margin-left","5px"),d(e,"display","flex"),d(e,"align-items","center"),d(e,"margin-left","20px")},m(r,a){O(r,e,a),g(e,t),ne(t,s[6]),l||(n=[M(t,"input",s[22]),M(t,"keypress",s[10])],l=!0)},p(r,a){a[0]&64&&t.value!==r[6]&&ne(t,r[6])},d(r){r&&p(e),l=!1,he(n)}}}function $t(s){let e,t,l,n,r;return{c(){e=T("div"),t=T("div"),l=L("new sub-task"),this.h()},l(a){e=w(a,"DIV",{style:!0});var i=N(e);t=w(i,"DIV",{style:!0});var u=N(t);l=W(u,"new sub-task"),u.forEach(p),i.forEach(p),this.h()},h(){d(t,"border-left","2px solid grey"),d(t,"color","grey"),d(t,"padding-left","5px"),d(t,"padding-bottom",8*.68**(s[1]+1)+"px"),d(t,"font-size",1.5*.85**(s[1]+1)+"rem"),d(e,"display","flex"),d(e,"align-items","center"),d(e,"margin-left","20px")},m(a,i){O(a,e,i),g(e,t),g(t,l),n||(r=M(t,"click",s[21]),n=!0)},p(a,i){i[0]&2&&d(t,"padding-bottom",8*.68**(a[1]+1)+"px"),i[0]&2&&d(t,"font-size",1.5*.85**(a[1]+1)+"rem")},d(a){a&&p(e),n=!1,r()}}}function xt(s){let e,t,l=!s[0].isDeleted&&!s[0].isDone&&!(s[0].startTime&&s[0].startDate)&&rt(s);return{c(){l&&l.c(),e=ue()},l(n){l&&l.l(n),e=ue()},m(n,r){l&&l.m(n,r),O(n,e,r),t=!0},p(n,r){!n[0].isDeleted&&!n[0].isDone&&!(n[0].startTime&&n[0].startDate)?l?(l.p(n,r),r[0]&1&&C(l,1)):(l=rt(n),l.c(),C(l,1),l.m(e.parentNode,e)):l&&(oe(),A(l,1,1,()=>{l=null}),fe())},i(n){t||(C(l),t=!0)},o(n){A(l),t=!1},d(n){l&&l.d(n),n&&p(e)}}}function el(s,e){s.dataTransfer.setData("text/plain",e)}function tl(s,e,t){let l,{taskObject:n}=e,{depth:r}=e;const a=Le();let i=!1,u="",f=!1,c=!1,o="";function _(S,re){const _e=Ye({},n.children[re]);_e.children=S.detail.updatedChildren;const Q=[...n.children];Q[re]=_e,k(Q)}function v(S){S.charCode===13&&(o&&m(o),t(6,o=""),t(5,c=!1))}function b(S){if(S.charCode===13){if(!u){alert("Task name can't be empty.");return}t(0,n.name=u,n),a("task-done",{}),t(3,u=""),t(2,i=!1)}}function m(S){k([...n.children,{name:S,children:[]}])}function k(S){a("task-create",{updatedChildren:S})}function h(){t(4,f=!0)}function D(){t(4,f=!1)}const I=()=>a("task-click",{task:n});function P(){u=this.value,t(3,u)}const Y=(S,re)=>_(re,S);function R(S){Ee.call(this,s,S)}function J(S){Ee.call(this,s,S)}function X(S){Ee.call(this,s,S)}function B(S){Ee.call(this,s,S)}const V=()=>t(5,c=!0);function q(){o=this.value,t(6,o)}const le=S=>el(S,n.name);return s.$$set=S=>{"taskObject"in S&&t(0,n=S.taskObject),"depth"in S&&t(1,r=S.depth)},s.$$.update=()=>{s.$$.dirty[0]&1&&t(7,l=n.children.filter(S=>S.duration).length>0)},[n,r,i,u,f,c,o,l,a,_,v,b,h,D,I,P,Y,R,J,X,B,V,q,le]}class ot extends Ve{constructor(e){super();Se(this,e,tl,xt,we,{taskObject:0,depth:1},null,[-1,-1])}}function ll(s){let e,t,l;return{c(){e=T("div"),this.h()},l(n){e=w(n,"DIV",{style:!0,draggable:!0});var r=N(e);r.forEach(p),this.h()},h(){d(e,"height",s[3]-20-10+"px"),d(e,"width","11vw"),y(e,"draggable","true")},m(n,r){O(n,e,r),t||(l=M(e,"dragstart",s[14]),t=!0)},p(n,r){r&8&&d(e,"height",n[3]-20-10+"px")},d(n){n&&p(e),t=!1,l()}}}function sl(s){let e,t,l=s[4].name+"",n,r,a,i,u,f,c;const o=s[12].default,_=Rt(o,s,s[11],null),v=_||ll(s);return{c(){e=T("div"),t=T("div"),n=L(l),r=U(),v&&v.c(),a=U(),i=T("div"),this.h()},l(b){e=w(b,"DIV",{class:!0,style:!0});var m=N(e);t=w(m,"DIV",{draggable:!0,style:!0});var k=N(t);n=W(k,l),k.forEach(p),r=z(m),v&&v.l(m),a=z(m),i=w(m,"DIV",{draggable:!0,style:!0});var h=N(i);h.forEach(p),m.forEach(p),this.h()},h(){y(t,"draggable","true"),d(t,"width","11vw"),y(i,"draggable","true"),d(i,"height","8px"),d(i,"width","11vw"),d(i,"position","absolute"),d(i,"bottom","0"),d(i,"left","-3px"),d(i,"cursor","ns-resize"),y(e,"class","scheduled-task svelte-1at2tfe"),d(e,"top",s[1]+"px"),d(e,"height",s[3]+"px"),d(e,"left",s[2]+"px"),d(e,"font-size",s[0]+"rem"),se(e,"green",s[4].isDone)},m(b,m){O(b,e,m),g(e,t),g(t,n),g(e,r),v&&v.m(e,null),g(e,a),g(e,i),u=!0,f||(c=[M(t,"dragstart",s[13]),M(i,"dragstart",s[15]),M(i,"dragend",s[16]),M(e,"click",s[17])],f=!0)},p(b,[m]){(!u||m&16)&&l!==(l=b[4].name+"")&&de(n,l),_?_.p&&(!u||m&2048)&&jt(_,o,b,b[11],u?Bt(o,b[11],m,null):Ct(b[11]),null):v&&v.p&&(!u||m&24)&&v.p(b,u?m:-1),(!u||m&2)&&d(e,"top",b[1]+"px"),(!u||m&8)&&d(e,"height",b[3]+"px"),(!u||m&4)&&d(e,"left",b[2]+"px"),(!u||m&1)&&d(e,"font-size",b[0]+"rem"),m&16&&se(e,"green",b[4].isDone)},i(b){u||(C(v,b),u=!0)},o(b){A(v,b),u=!1},d(b){b&&p(e),v&&v.d(b),f=!1,he(c)}}}function ft(s,e){s.dataTransfer.setData("text/plain",e)}function nl(s,e,t){let{$$slots:l={},$$scope:n}=e,{fontSize:r=1}=e,{name:a=""}=e,{offsetFromTop:i}=e,{offsetFromLeft:u=0}=e,{height:f=15}=e,{duration:c=15}=e,{task:o=null}=e,{calendarStartTime:_=""}=e;const v=Le();let b=0;function m(R){b=R.offsetY}function k(R,J){J.duration||(J.duration=10);const X=60/90,B=(R.offsetY-b)*X;v("task-duration-adjusted",{taskName:J.name,duration:Math.max(1,J.duration+B)})}const h=R=>ft(R,o.name),D=R=>ft(R,o.name),I=R=>m(R),P=R=>k(R,o),Y=()=>v("task-click",{task:o});return s.$$set=R=>{"fontSize"in R&&t(0,r=R.fontSize),"name"in R&&t(8,a=R.name),"offsetFromTop"in R&&t(1,i=R.offsetFromTop),"offsetFromLeft"in R&&t(2,u=R.offsetFromLeft),"height"in R&&t(3,f=R.height),"duration"in R&&t(9,c=R.duration),"task"in R&&t(4,o=R.task),"calendarStartTime"in R&&t(10,_=R.calendarStartTime),"$$scope"in R&&t(11,n=R.$$scope)},[r,i,u,f,o,v,m,k,a,c,_,n,l,h,D,I,P,Y]}class ut extends Ve{constructor(e){super();Se(this,e,nl,sl,we,{fontSize:0,name:8,offsetFromTop:1,offsetFromLeft:2,height:3,duration:9,task:4,calendarStartTime:10})}}function ct(s,e,t){const l=s.slice();return l[12]=e[t],l[14]=t,l}function dt(s,e,t){const l=s.slice();return l[15]=e[t],l[14]=t,l}function ht(s){let e,t,l,n=s[4],r=[];for(let f=0;f<n.length;f+=1)r[f]=_t(dt(s,n,f));let a=s[0],i=[];for(let f=0;f<a.length;f+=1)i[f]=pt(ct(s,a,f));const u=f=>A(i[f],1,1,()=>{i[f]=null});return{c(){for(let f=0;f<r.length;f+=1)r[f].c();e=U();for(let f=0;f<i.length;f+=1)i[f].c();t=ue()},l(f){for(let c=0;c<r.length;c+=1)r[c].l(f);e=z(f);for(let c=0;c<i.length;c+=1)i[c].l(f);t=ue()},m(f,c){for(let o=0;o<r.length;o+=1)r[o].m(f,c);O(f,e,c);for(let o=0;o<i.length;o+=1)i[o].m(f,c);O(f,t,c),l=!0},p(f,c){if(c&16){n=f[4];let o;for(o=0;o<n.length;o+=1){const _=dt(f,n,o);r[o]?r[o].p(_,c):(r[o]=_t(_),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}if(c&41){a=f[0];let o;for(o=0;o<a.length;o+=1){const _=ct(f,a,o);i[o]?(i[o].p(_,c),C(i[o],1)):(i[o]=pt(_),i[o].c(),C(i[o],1),i[o].m(t.parentNode,t))}for(oe(),o=a.length;o<i.length;o+=1)u(o);fe()}},i(f){if(!l){for(let c=0;c<a.length;c+=1)C(i[c]);l=!0}},o(f){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)A(i[c]);l=!1},d(f){Ne(r,f),f&&p(e),Ne(i,f),f&&p(t)}}}function _t(s){let e,t=s[15].substring(0,5)+"",l;return{c(){e=T("div"),l=L(t),this.h()},l(n){e=w(n,"DIV",{class:!0,style:!0});var r=N(e);l=W(r,t),r.forEach(p),this.h()},h(){y(e,"class","time-indicator svelte-xbksim"),d(e,"top",30+mt*s[14]+"px")},m(n,r){O(n,e,r),g(e,l)},p:Pe,d(n){n&&p(e)}}}function pt(s){let e,t;return e=new ut({props:{task:s[12],offsetFromTop:s[5](s[12]),height:s[12].duration*s[3]||30,fontSize:.8,offsetFromLeft:30}}),e.$on("task-click",s[7]),e.$on("task-duration-adjusted",s[8]),{c(){ve(e.$$.fragment)},l(l){ke(e.$$.fragment,l)},m(l,n){ge(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.task=l[12]),n&1&&(r.offsetFromTop=l[5](l[12])),n&1&&(r.height=l[12].duration*l[3]||30),e.$set(r)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){be(e,l)}}}function rl(s){let e,t,l,n=s[2]()+"",r,a,i,u,f,c=s[1]&&ht(s);return{c(){e=T("div"),t=T("div"),l=T("div"),r=L(n),a=U(),c&&c.c(),this.h()},l(o){e=w(o,"DIV",{style:!0,class:!0});var _=N(e);t=w(_,"DIV",{id:!0,style:!0,class:!0});var v=N(t);l=w(v,"DIV",{style:!0,class:!0});var b=N(l);r=W(b,n),b.forEach(p),a=z(v),c&&c.l(v),v.forEach(p),_.forEach(p),this.h()},h(){d(l,"margin-top","27px"),d(l,"font-weight","600"),y(l,"class","svelte-xbksim"),y(t,"id","calendar-day-container"),d(t,"position","relative"),d(t,"width","12vw"),d(t,"height","1000px"),y(t,"class","svelte-xbksim"),d(e,"overflow-y","scroll"),d(e,"overflow-x","hidden"),d(e,"height","77vh"),y(e,"class","svelte-xbksim")},m(o,_){O(o,e,_),g(e,t),g(t,l),g(l,r),g(t,a),c&&c.m(t,null),i=!0,u||(f=[M(t,"drop",s[9]),M(t,"dragover",il)],u=!0)},p(o,[_]){o[1]?c?(c.p(o,_),_&2&&C(c,1)):(c=ht(o),c.c(),C(c,1),c.m(t,null)):c&&(oe(),A(c,1,1,()=>{c=null}),fe())},i(o){i||(C(c),i=!0)},o(o){A(c),i=!1},d(o){o&&p(e),c&&c.d(),u=!1,he(f)}}}const mt=80;function il(s){s.preventDefault(),s.dataTransfer.dropEffect="move"}function al(s,e,t){let{scheduledTasks:l}=e;const n=Le(),r=Me,a=80/60;let i=[],u="";function f(){const m=new Date,k=m.getHours()*60;for(const D of l){const I=D.startTime.substring(0,2),P=parseInt(I)*60,Y=P+D.duration;P<k&&k<Y&&t(1,u=`${I}:00`)}if(!u){const D=m.getHours();t(1,u=`${D<10?"0":""}${D}:00`)}let h=m.getHours();for(let D=0;D<16;D++)h===24&&(h=0),h<10?i.push("0"+h+":00"):i.push(h+":00"),h+=1}f();function c({startTime:m}){const k=m.slice(0,2),h=m.slice(3,5);return(Number(k)+Number(h)/60-parseInt(u.substring(0,2)))*mt}function o(m){console.log("drop detected"),m.preventDefault();var h=document.getElementById("calendar-day-container").getBoundingClientRect();h.left,h.top;const D=90;let I=m.layerY/D;const P=I-Math.floor(I),Y=Math.trunc(I);let R=P*60,J;R<10?J=`0${R.toPrecision(1)}`:J=R.toPrecision(2),console.log("calendarStartTime =",u);const X=parseInt(u.substring(0,2));let B=X+Y;B<10&&(B=`0${B}`),console.log("origin =",X);const V=`${B}:${J}`;console.log("scheduledTime =",V),n("task-scheduled",{taskName:m.dataTransfer.getData("text/plain"),timeOfDay:V,dateScheduled:r()})}function _(m){Ee.call(this,s,m)}function v(m){Ee.call(this,s,m)}const b=m=>o(m);return s.$$set=m=>{"scheduledTasks"in m&&t(0,l=m.scheduledTasks)},[l,u,r,a,i,c,o,_,v,b]}class ol extends Ve{constructor(e){super();Se(this,e,al,rl,we,{scheduledTasks:0})}}function vt(s,e,t){const l=s.slice();return l[4]=e[t],l[6]=t,l}function kt(s){let e,t,l,n=s[4].startDate+"",r,a,i,u,f,c;return i=new ut({props:{task:s[4],fontSize:.8,offsetFromTop:20,height:s[4].duration*s[1]||15}}),i.$on("task-click",s[2]),i.$on("task-duration-adjusted",s[3]),{c(){e=T("div"),t=T("div"),l=T("b"),r=L(n),a=U(),ve(i.$$.fragment),u=U(),f=T("div"),this.h()},l(o){e=w(o,"DIV",{style:!0,class:!0});var _=N(e);t=w(_,"DIV",{class:!0});var v=N(t);l=w(v,"B",{class:!0});var b=N(l);r=W(b,n),b.forEach(p),v.forEach(p),a=z(_),ke(i.$$.fragment,_),_.forEach(p),u=z(o),f=w(o,"DIV",{class:!0}),N(f).forEach(p),this.h()},h(){y(l,"class","svelte-d8tb0p"),y(t,"class","svelte-d8tb0p"),d(e,"position","relative"),d(e,"height",gt+(s[4].duration*s[1]||15)+"px"),d(e,"margin-top","25px"),y(e,"class","svelte-d8tb0p"),y(f,"class","broken-axis svelte-d8tb0p")},m(o,_){O(o,e,_),g(e,t),g(t,l),g(l,r),g(e,a),ge(i,e,null),O(o,u,_),O(o,f,_),c=!0},p(o,_){(!c||_&1)&&n!==(n=o[4].startDate+"")&&de(r,n);const v={};_&1&&(v.task=o[4]),_&1&&(v.height=o[4].duration*o[1]||15),i.$set(v),(!c||_&1)&&d(e,"height",gt+(o[4].duration*o[1]||15)+"px")},i(o){c||(C(i.$$.fragment,o),c=!0)},o(o){A(i.$$.fragment,o),c=!1},d(o){o&&p(e),be(i),o&&p(u),o&&p(f)}}}function fl(s){let e,t,l,n=s[0],r=[];for(let i=0;i<n.length;i+=1)r[i]=kt(vt(s,n,i));const a=i=>A(r[i],1,1,()=>{r[i]=null});return{c(){e=T("div"),t=T("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=w(i,"DIV",{style:!0,class:!0});var u=N(e);t=w(u,"DIV",{style:!0,class:!0});var f=N(t);for(let c=0;c<r.length;c+=1)r[c].l(f);f.forEach(p),u.forEach(p),this.h()},h(){d(t,"width","12vw"),d(t,"margin-left","0px"),d(t,"margin-top","27px"),d(t,"position","relative"),d(t,"height","1600px"),y(t,"class","svelte-d8tb0p"),d(e,"height","77vh"),d(e,"overflow-y","scroll"),d(e,"overflow-x","hidden"),y(e,"class","svelte-d8tb0p")},m(i,u){O(i,e,u),g(e,t);for(let f=0;f<r.length;f+=1)r[f].m(t,null);l=!0},p(i,[u]){if(u&3){n=i[0];let f;for(f=0;f<n.length;f+=1){const c=vt(i,n,f);r[f]?(r[f].p(c,u),C(r[f],1)):(r[f]=kt(c),r[f].c(),C(r[f],1),r[f].m(t,null))}for(oe(),f=n.length;f<r.length;f+=1)a(f);fe()}},i(i){if(!l){for(let u=0;u<n.length;u+=1)C(r[u]);l=!0}},o(i){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)A(r[u]);l=!1},d(i){i&&p(e),Ne(r,i)}}}const gt=20;function ul(s,e,t){let{futureScheduledTasks:l}=e;const n=90/60;function r(i){Ee.call(this,s,i)}function a(i){Ee.call(this,s,i)}return s.$$set=i=>{"futureScheduledTasks"in i&&t(0,l=i.futureScheduledTasks)},[l,n,r,a]}class cl extends Ve{constructor(e){super();Se(this,e,ul,fl,we,{futureScheduledTasks:0})}}function bt(s,e,t){const l=s.slice();return l[49]=e[t],l}function Dt(s){let e,t;return e=new Gt({props:{isOpen:s[8],taskObject:s[9]}}),e.$on("card-close",s[21]),e.$on("task-done",s[22]),e.$on("task-delete",s[23]),e.$on("task-repeat",s[18]),e.$on("task-schedule",s[18]),e.$on("task-title-update",s[18]),e.$on("task-notes-update",s[18]),{c(){ve(e.$$.fragment)},l(l){ke(e.$$.fragment,l)},m(l,n){ge(e,l,n),t=!0},p(l,n){const r={};n[0]&256&&(r.isOpen=l[8]),n[0]&512&&(r.taskObject=l[9]),e.$set(r)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){be(e,l)}}}function yt(s){let e,t,l,n,r,a=s[0],i=[];for(let c=0;c<a.length;c+=1)i[c]=wt(bt(s,a,c));const u=c=>A(i[c],1,1,()=>{i[c]=null});let f=s[7]&&Et(s);return{c(){for(let c=0;c<i.length;c+=1)i[c].c();e=U(),t=T("div"),f&&f.c(),this.h()},l(c){for(let _=0;_<i.length;_+=1)i[_].l(c);e=z(c),t=w(c,"DIV",{style:!0,class:!0});var o=N(t);f&&f.l(o),o.forEach(p),this.h()},h(){d(t,"height","200px"),y(t,"class","svelte-17oi90h")},m(c,o){for(let _=0;_<i.length;_+=1)i[_].m(c,o);O(c,e,o),O(c,t,o),f&&f.m(t,null),l=!0,n||(r=[M(t,"mouseenter",s[28]),M(t,"mouseleave",s[29])],n=!0)},p(c,o){if(o[0]&394241){a=c[0];let _;for(_=0;_<a.length;_+=1){const v=bt(c,a,_);i[_]?(i[_].p(v,o),C(i[_],1)):(i[_]=wt(v),i[_].c(),C(i[_],1),i[_].m(e.parentNode,e))}for(oe(),_=a.length;_<i.length;_+=1)u(_);fe()}c[7]?f?f.p(c,o):(f=Et(c),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},i(c){if(!l){for(let o=0;o<a.length;o+=1)C(i[o]);l=!0}},o(c){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)A(i[o]);l=!1},d(c){Ne(i,c),c&&p(e),c&&p(t),f&&f.d(),n=!1,he(r)}}}function Tt(s){let e,t,l,n;function r(...a){return s[25](s[49],...a)}return t=new ot({props:{taskObject:s[49],depth:1}}),t.$on("task-click",s[24]),t.$on("task-create",r),t.$on("task-done",s[18]),t.$on("task-delete",s[18]),t.$on("task-repeating",s[18]),{c(){e=T("div"),ve(t.$$.fragment),l=U(),this.h()},l(a){e=w(a,"DIV",{class:!0});var i=N(e);ke(t.$$.fragment,i),l=z(i),i.forEach(p),this.h()},h(){y(e,"class","task-container svelte-17oi90h")},m(a,i){O(a,e,i),ge(t,e,null),g(e,l),n=!0},p(a,i){s=a;const u={};i[0]&1&&(u.taskObject=s[49]),t.$set(u)},i(a){n||(C(t.$$.fragment,a),n=!0)},o(a){A(t.$$.fragment,a),n=!1},d(a){a&&p(e),be(t)}}}function wt(s){let e,t,l=!s[49].isDeleted&&Tt(s);return{c(){l&&l.c(),e=ue()},l(n){l&&l.l(n),e=ue()},m(n,r){l&&l.m(n,r),O(n,e,r),t=!0},p(n,r){n[49].isDeleted?l&&(oe(),A(l,1,1,()=>{l=null}),fe()):l?(l.p(n,r),r[0]&1&&C(l,1)):(l=Tt(n),l.c(),C(l,1),l.m(e.parentNode,e))},i(n){t||(C(l),t=!0)},o(n){A(l),t=!1},d(n){l&&l.d(n),n&&p(e)}}}function Et(s){let e;function t(r,a){return r[6]?dl:hl}let l=t(s),n=l(s);return{c(){n.c(),e=ue()},l(r){n.l(r),e=ue()},m(r,a){n.m(r,a),O(r,e,a)},p(r,a){l===(l=t(r))&&n?n.p(r,a):(n.d(1),n=l(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){n.d(r),r&&p(e)}}}function dl(s){let e,t,l,n;return{c(){e=T("div"),t=T("input"),this.h()},l(r){e=w(r,"DIV",{style:!0,class:!0});var a=N(e);t=w(a,"INPUT",{placeholder:!0,class:!0}),a.forEach(p),this.h()},h(){y(t,"placeholder","Type task..."),y(t,"class","svelte-17oi90h"),d(e,"display","flex"),d(e,"align-content","center"),d(e,"justify-items","center"),y(e,"class","svelte-17oi90h")},m(r,a){O(r,e,a),g(e,t),ne(t,s[5]),l||(n=[M(t,"input",s[27]),M(t,"keypress",s[16])],l=!0)},p(r,a){a[0]&32&&t.value!==r[5]&&ne(t,r[5])},d(r){r&&p(e),l=!1,he(n)}}}function hl(s){let e,t,l,n;return{c(){e=T("div"),t=L("New task"),this.h()},l(r){e=w(r,"DIV",{style:!0,class:!0});var a=N(e);t=W(a,"New task"),a.forEach(p),this.h()},h(){d(e,"font-size","1.5rem"),d(e,"color","grey"),y(e,"class","svelte-17oi90h")},m(r,a){O(r,e,a),g(e,t),l||(n=M(e,"click",s[26]),l=!0)},p:Pe,d(r){r&&p(e),l=!1,n()}}}function _l(s){let e=s[9],t,l,n,r,a,i,u=(s[3]?"music_note":"music_off")+"",f,c,o,_,v,b,m,k,h,D,I,P,Y,R,J,X=Dt(s),B=s[0]&&yt(s);return k=new ol({props:{scheduledTasks:s[4]}}),k.$on("task-scheduled",s[30]),k.$on("task-duration-adjusted",s[31]),k.$on("task-click",s[32]),D=new cl({props:{futureScheduledTasks:s[1]}}),D.$on("task-duration-adjusted",s[33]),D.$on("task-click",s[34]),{c(){X.c(),t=U(),l=T("div"),n=T("div"),r=U(),a=T("div"),i=T("span"),f=L(u),c=U(),o=T("div"),_=T("div"),v=T("div"),B&&B.c(),b=U(),m=T("div"),ve(k.$$.fragment),h=U(),ve(D.$$.fragment),I=U(),P=T("audio"),this.h()},l(V){X.l(V),t=z(V),l=w(V,"DIV",{id:!0,style:!0,class:!0});var q=N(l);n=w(q,"DIV",{style:!0,class:!0}),N(n).forEach(p),r=z(q),a=w(q,"DIV",{style:!0,class:!0});var le=N(a);i=w(le,"SPAN",{class:!0,style:!0});var S=N(i);f=W(S,u),S.forEach(p),le.forEach(p),c=z(q),o=w(q,"DIV",{style:!0,class:!0});var re=N(o);_=w(re,"DIV",{class:!0});var _e=N(_);v=w(_e,"DIV",{class:!0});var Q=N(v);B&&B.l(Q),Q.forEach(p),_e.forEach(p),b=z(re),m=w(re,"DIV",{class:!0});var pe=N(m);ke(k.$$.fragment,pe),h=z(pe),ke(D.$$.fragment,pe),pe.forEach(p),re.forEach(p),q.forEach(p),I=z(V),P=w(V,"AUDIO",{class:!0}),N(P).forEach(p),this.h()},h(){d(n,"height","100px"),y(n,"class","svelte-17oi90h"),y(i,"class","material-icons svelte-17oi90h"),d(i,"margin-left","auto"),d(i,"margin-right","0"),d(i,"color","white"),d(a,"position","absolute"),d(a,"top","30px"),d(a,"left","30px"),y(a,"class","svelte-17oi90h"),y(v,"class","todo-list svelte-17oi90h"),y(_,"class","fixed-height-container-for-scrolling svelte-17oi90h"),y(m,"class","calendar-section-container svelte-17oi90h"),d(o,"display","flex"),d(o,"padding-left","0"),d(o,"padding-top","0px"),y(o,"class","svelte-17oi90h"),y(l,"id","background-image-holder"),d(l,"height","100vh"),d(l,"padding-left","120px"),d(l,"padding-right","120px"),y(l,"class","svelte-17oi90h"),y(P,"class","svelte-17oi90h")},m(V,q){X.m(V,q),O(V,t,q),O(V,l,q),g(l,n),g(l,r),g(l,a),g(a,i),g(i,f),g(l,c),g(l,o),g(o,_),g(_,v),B&&B.m(v,null),g(o,b),g(o,m),ge(k,m,null),g(m,h),ge(D,m,null),O(V,I,q),O(V,P,q),s[35](P),Y=!0,R||(J=M(a,"click",s[11]),R=!0)},p(V,q){q[0]&512&&we(e,e=V[9])?(oe(),A(X,1,1,Pe),fe(),X=Dt(V),X.c(),C(X),X.m(t.parentNode,t)):X.p(V,q),(!Y||q[0]&8)&&u!==(u=(V[3]?"music_note":"music_off")+"")&&de(f,u),V[0]?B?(B.p(V,q),q[0]&1&&C(B,1)):(B=yt(V),B.c(),C(B,1),B.m(v,null)):B&&(oe(),A(B,1,1,()=>{B=null}),fe());const le={};q[0]&16&&(le.scheduledTasks=V[4]),k.$set(le);const S={};q[0]&2&&(S.futureScheduledTasks=V[1]),D.$set(S)},i(V){Y||(C(X),C(B),C(k.$$.fragment,V),C(D.$$.fragment,V),Y=!0)},o(V){A(X),A(B),A(k.$$.fragment,V),A(D.$$.fragment,V),Y=!1},d(V){X.d(V),V&&p(t),V&&p(l),B&&B.d(),be(k),be(D),V&&p(I),V&&p(P),s[35](null),R=!1,J()}}}function gl({params:s}){return{props:{userID:s.user}}}function It(s){return Math.floor(Math.random()*s)}function Ue({node:s,fulfilsCriteria:e,applyFunc:t}){e(s)&&t(s);for(const l of s.children)Ue({node:l,fulfilsCriteria:e,applyFunc:t})}function pl(s,e,t){let{userID:l}=e;const n=`users/${l}`;let r,a=["illiyard-moor.mp3","ms-leafre-lofi.mp3"],i,u=!1,f=["https://i.imgur.com/rzkUMW8.jpeg","https://i.imgur.com/ShnqIpJ.jpeg"],c;Ft(()=>{c=f[It(2)];const E=document.getElementById("background-image-holder");E.style["background-image"]=`url(${c})`,r=a[It(2)],t(2,i.src=r,i)});let o=null,_="",v=Me(),b=[],m=[],k="",h=!1,D=!1,I=!1,P={};function Y({task:E}){t(9,P=E),t(8,I=!0)}function R(){t(2,i.volume=.1,i),i.paused?(i.play(),t(3,u=!0)):(i.pause(),t(3,u=!1))}function J(){t(4,b=[]);for(const E of o)Ue({node:E,fulfilsCriteria:H=>H.startDate===Me()&&H.startTime,applyFunc:H=>b.push(H)})}function X(){t(1,m=[]);for(const E of o)Ue({node:E,fulfilsCriteria:H=>H.startDate&&H.startTime&&H.startDate>Me(),applyFunc:H=>m.push(H)})}async function B(E){for(const H of o)Ue({node:H,fulfilsCriteria:$=>$.name===E,applyFunc:$=>$.isDone=!0});await Ie(De(ye,n),{allTasks:o})}async function V(E){console.log("deleteSubtree =",E),Ue({node:{name:"root",children:o},fulfilsCriteria:$=>$.children.filter(x=>x.name===E).length>=1,applyFunc:$=>{let x=null;for(let ee=0;ee<$.children.length;ee++)if($.children[ee].name===E){x=ee;break}x>=0&&$.children.splice(x,1)}}),await Ie(De(ye,n),{allTasks:o}),t(0,o=[...o])}async function q({taskName:E,timeOfDay:H,dateScheduled:$}){function x(ee){if(ee.name===E)return ee.startTime=H,ee.startDate=$,!0;for(const K of ee.children)if(x(K))return!0;return!1}for(const ee of o)if(x(ee)){console.log("successfully mutated allTasks, =",o);break}await Ie(De(ye,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:o}),t(0,o=[...o])}async function le({taskName:E,duration:H}){function $(x){if(x.name===E)return x.duration=H,!0;for(const ee of x.children)if($(ee))return!0;return!1}for(const x of o)if($(x)){console.log("successfully mutated allTasks, =",o);break}await Ie(De(ye,n),{allTasks:o}),t(0,o=[...o])}async function S(){const E=await Pt(De(ye,n));t(0,o=E.data().allTasks),t(20,_=E.data().lastRanRepeatAtDate)}S();function re(E){E.charCode===13&&_e()}function _e(){k||alert("You have to type something first");const E=[...o,{name:k,duration:15,children:[]}];Ie(De(ye,n),{allTasks:E}),t(0,o=[...E]),t(5,k="")}function Q(E,H){const{updatedChildren:$}=E.detail;H.children=[...$],Ie(De(ye,n),{allTasks:o}),t(0,o=[...o])}function pe(){console.log("updateFirestore()"),Ie(De(ye,n),{allTasks:o}),t(0,o=[...o])}const Te=()=>t(8,I=!1),te=()=>B(P.name),ze=()=>V(P.name),Re=E=>Y(E.detail),ie=(E,H)=>Q(H,E),Ae=()=>t(6,h=!0);function je(){k=this.value,t(5,k)}const ae=()=>t(7,D=!0),me=()=>t(7,D=!1),Z=E=>q(E.detail),We=E=>le(E.detail),j=E=>Y(E.detail),F=E=>le(E.detail),G=E=>Y(E.detail);function Oe(E){Mt[E?"unshift":"push"](()=>{i=E,t(2,i)})}return s.$$set=E=>{"userID"in E&&t(19,l=E.userID)},s.$$.update=()=>{if(s.$$.dirty[0]&1048579&&o&&(console.log("collecting scheduled tasks to be displayed..."),J(),X(),m.sort((E,H)=>{const $=new Date(E.startDate),x=new Date(H.startDate);return $.getTime()-x.getTime()}),o.sort((E,H)=>!!E.isDone-!!H.isDone),_!==v)){let $=function(K){K.repeatsOnDaysOfWeek&&K.repeatsOnDaysOfWeek[E.getDay()]&&K.lastCompletionDate!==v&&(K.isDone=!1,K.startDate=v,K.startTime||H.push(K));for(const ce of K.children)$(ce)},x=function(K){if(K.daysBeforeRepeating){const ce=new Date(`node.lastCompletionDate/${2022}`),Be=new Date().getTime()-ce.getTime();Math.ceil(Be/(1e3*3600*24))>=K.daysBeforeRepeating&&(K.isDone=!1,K.startDate=v,H.push(K))}for(const ce of K.children)x(ce)};console.log("running repeating task algorithm");const E=new Date,H=[];for(const K of o)$(K);for(const K of o)x(K);console.log("pool for resolve conflict =",H);let ee=1440;for(const K of H){ee-=K.duration||5;const ce=ee/60,Ce=parseInt(ce),Be=ce-Ce,Fe=Ce;let He=Math.round(Be*60);He<10&&(He=`0${He}`),K.startTime=`${Fe}:${He}`,console.log(`habit ${K.name} starts =`,K.startTime)}Ie(De(ye,n),{allTasks:o,lastRanRepeatAtDate:v}),t(0,o=[...o])}},[o,m,i,u,b,k,h,D,I,P,Y,R,B,V,q,le,re,Q,pe,l,_,Te,te,ze,Re,ie,Ae,je,ae,me,Z,We,j,F,G,Oe]}class bl extends Ve{constructor(e){super();Se(this,e,pl,_l,we,{userID:19},null,[-1,-1])}}export{bl as default,gl as load};
