var jt=Object.defineProperty;var Xe=Object.getOwnPropertySymbols;var Ct=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable;var Ge=(s,e,t)=>e in s?jt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Je=(s,e)=>{for(var t in e||(e={}))Ct.call(e,t)&&Ge(s,t,e[t]);if(Xe)for(var t of Xe(e))Bt.call(e,t)&&Ge(s,t,e[t]);return s};import{S as Se,i as Re,s as we,t as L,h as W,g as R,d as p,k as A,m as H,j as oe,e as I,w as ve,c as E,a as S,x as ke,f as d,y as ge,K as b,q as P,o as K,B as be,b as T,_ as te,n as fe,p as ue,$ as Ie,X as ne,Y as z,Z as ce,l as de,a0 as Le,a1 as Qe,L as Pe,a2 as Pt,a3 as Ee,M as Ft,O as Mt,P as Ut,Q as zt,v as At,a4 as Oe,N as De,I as Ht,W as Lt}from"../../chunks/vendor-94da56df.js";import{d as ye}from"../../chunks/db-66132ac0.js";function Fe(){const s=new Date;let e=s.getDate(),t=s.getMonth()+1;return e<10&&(e="0"+e),t<10&&(t="0"+t),`${t}/${e}`}function Ze(s,e,t){const l=s.slice();return l[1]=e[t],l}function $e(s){let e;return{c(){e=L("(Repeats)")},l(t){e=W(t,"(Repeats)")},m(t,l){R(t,e,l)},d(t){t&&p(e)}}}function xe(s){let e;return{c(){e=L("(Completed)")},l(t){e=W(t,"(Completed)")},m(t,l){R(t,e,l)},d(t){t&&p(e)}}}function et(s){let e,t=s[0].startDate+"",l,r,n=s[0].startTime+"",a,i;return{c(){e=L("("),l=L(t),r=A(),a=L(n),i=L(")")},l(u){e=W(u,"("),l=W(u,t),r=H(u),a=W(u,n),i=W(u,")")},m(u,f){R(u,e,f),R(u,l,f),R(u,r,f),R(u,a,f),R(u,i,f)},p(u,f){f&1&&t!==(t=u[0].startDate+"")&&oe(l,t),f&1&&n!==(n=u[0].startTime+"")&&oe(a,n)},d(u){u&&p(e),u&&p(l),u&&p(r),u&&p(a),u&&p(i)}}}function tt(s){let e,t,l,r;return t=new lt({props:{taskObject:s[1]}}),{c(){e=I("div"),ve(t.$$.fragment),l=A(),this.h()},l(n){e=E(n,"DIV",{style:!0});var a=S(e);ke(t.$$.fragment,a),l=H(a),a.forEach(p),this.h()},h(){d(e,"margin-left","12px")},m(n,a){R(n,e,a),ge(t,e,null),b(e,l),r=!0},p(n,a){const i={};a&1&&(i.taskObject=n[1]),t.$set(i)},i(n){r||(P(t.$$.fragment,n),r=!0)},o(n){K(t.$$.fragment,n),r=!1},d(n){n&&p(e),be(t)}}}function Wt(s){let e,t=s[0].name+"",l,r,n,a,i,u,f=s[0].isRepeating&&$e(),c=s[0].isDone&&xe(),o=s[0].startDate&&s[0].startTime&&et(s),h=s[0].children,v=[];for(let k=0;k<h.length;k+=1)v[k]=tt(Ze(s,h,k));const y=k=>K(v[k],1,1,()=>{v[k]=null});return{c(){e=I("div"),l=L(t),r=A(),f&&f.c(),n=A(),c&&c.c(),a=A(),o&&o.c(),i=A();for(let k=0;k<v.length;k+=1)v[k].c();this.h()},l(k){e=E(k,"DIV",{class:!0});var m=S(e);l=W(m,t),r=H(m),f&&f.l(m),n=H(m),c&&c.l(m),a=H(m),o&&o.l(m),i=H(m);for(let _=0;_<v.length;_+=1)v[_].l(m);m.forEach(p),this.h()},h(){T(e,"class","svelte-10bdwqk"),te(e,"task-completed",s[0].isDone),te(e,"task-scheduled",!s[0].isDone&&s[0].startDate&&s[0].startTime)},m(k,m){R(k,e,m),b(e,l),b(e,r),f&&f.m(e,null),b(e,n),c&&c.m(e,null),b(e,a),o&&o.m(e,null),b(e,i);for(let _=0;_<v.length;_+=1)v[_].m(e,null);u=!0},p(k,[m]){if((!u||m&1)&&t!==(t=k[0].name+"")&&oe(l,t),k[0].isRepeating?f||(f=$e(),f.c(),f.m(e,n)):f&&(f.d(1),f=null),k[0].isDone?c||(c=xe(),c.c(),c.m(e,a)):c&&(c.d(1),c=null),k[0].startDate&&k[0].startTime?o?o.p(k,m):(o=et(k),o.c(),o.m(e,i)):o&&(o.d(1),o=null),m&1){h=k[0].children;let _;for(_=0;_<h.length;_+=1){const D=Ze(k,h,_);v[_]?(v[_].p(D,m),P(v[_],1)):(v[_]=tt(D),v[_].c(),P(v[_],1),v[_].m(e,null))}for(fe(),_=h.length;_<v.length;_+=1)y(_);ue()}m&1&&te(e,"task-completed",k[0].isDone),m&1&&te(e,"task-scheduled",!k[0].isDone&&k[0].startDate&&k[0].startTime)},i(k){if(!u){for(let m=0;m<h.length;m+=1)P(v[m]);u=!0}},o(k){v=v.filter(Boolean);for(let m=0;m<v.length;m+=1)K(v[m]);u=!1},d(k){k&&p(e),f&&f.d(),c&&c.d(),o&&o.d(),Ie(v,k)}}}function Kt(s,e,t){let{taskObject:l}=e;return s.$$set=r=>{"taskObject"in r&&t(0,l=r.taskObject)},[l]}class lt extends Se{constructor(e){super();Re(this,e,Kt,Wt,we,{taskObject:0})}}function st(s,e,t){const l=s.slice();return l[27]=e[t],l}function nt(s){let e,t,l,r,n,a,i,u,f,c,o,h,v,y,k,m,_,D,g,O,B,w,G,Y,M,j,q,ee,V,re,_e,$=!s[0].isDone&&s[0].startTime&&s[0].startDate&&rt(s);function pe(C,U){if(C[0].daysBeforeRepeating)return qt;if(C[0].repeatsOnDaysOfWeek)return Yt}let Te=pe(s),se=Te&&Te(s);function Me(C,U){return C[4]?Xt:Gt}let je=Me(s),ie=je(s);function Ue(C,U){return C[5]?Jt:Qt}let Ce=Ue(s),ae=Ce(s),me=s[0].children,Z=[];for(let C=0;C<me.length;C+=1)Z[C]=it(st(s,me,C));const Ke=C=>K(Z[C],1,1,()=>{Z[C]=null});return{c(){e=I("div"),t=I("div"),l=I("input"),r=A(),n=I("span"),a=L("close"),i=A(),u=I("div"),$&&$.c(),f=A(),c=I("div"),se&&se.c(),o=A(),h=I("div"),v=I("textarea"),y=A(),k=I("div"),m=I("div"),ie.c(),_=A(),ae.c(),D=A(),g=I("div"),O=I("button"),B=L("Delete"),w=A(),G=I("button"),Y=L("Done"),M=A(),j=I("div"),q=L("Full task history:"),ee=A();for(let C=0;C<Z.length;C+=1)Z[C].c();this.h()},l(C){e=E(C,"DIV",{class:!0});var U=S(e);t=E(U,"DIV",{style:!0,class:!0});var Q=S(t);l=E(Q,"INPUT",{type:!0,class:!0,style:!0}),r=H(Q),n=E(Q,"SPAN",{class:!0,style:!0});var Ve=S(n);a=W(Ve,"close"),Ve.forEach(p),Q.forEach(p),i=H(U),u=E(U,"DIV",{class:!0,style:!0});var ze=S(u);$&&$.l(ze),ze.forEach(p),f=H(U),c=E(U,"DIV",{class:!0,style:!0});var Ae=S(c);se&&se.l(Ae),Ae.forEach(p),o=H(U),h=E(U,"DIV",{stle:!0,class:!0});var N=S(h);v=E(N,"TEXTAREA",{rows:!0,placeholder:!0,style:!0,class:!0}),S(v).forEach(p),N.forEach(p),y=H(U),k=E(U,"DIV",{style:!0,class:!0});var F=S(k);m=E(F,"DIV",{class:!0});var J=S(m);ie.l(J),_=H(J),ae.l(J),J.forEach(p),D=H(F),g=E(F,"DIV",{style:!0,class:!0});var x=S(g);O=E(x,"BUTTON",{class:!0});var le=S(O);B=W(le,"Delete"),le.forEach(p),w=H(x),G=E(x,"BUTTON",{class:!0});var X=S(G);Y=W(X,"Done"),X.forEach(p),x.forEach(p),F.forEach(p),M=H(U),j=E(U,"DIV",{style:!0,class:!0});var he=S(j);q=W(he,"Full task history:"),he.forEach(p),ee=H(U);for(let Ne=0;Ne<Z.length;Ne+=1)Z[Ne].l(U);U.forEach(p),this.h()},h(){T(l,"type","text"),T(l,"class","google-calendar-event-title svelte-bv1cfr"),d(l,"width","96%"),d(l,"margin-left","10px"),T(n,"class","material-icons svelte-bv1cfr"),d(n,"margin-left","auto"),d(n,"margin-right","0"),d(t,"display","flex"),T(t,"class","svelte-bv1cfr"),T(u,"class","google-calendar-event-time svelte-bv1cfr"),d(u,"margin-top","4px"),d(u,"margin-left","10px"),T(c,"class","google-calendar-event-detail svelte-bv1cfr"),d(c,"margin-top","12px"),d(c,"margin-left","16px"),T(v,"rows","5"),T(v,"placeholder","notes"),d(v,"margin-left","10px"),d(v,"width","100%"),d(v,"max-width","97%"),T(v,"class","svelte-bv1cfr"),T(h,"stle","float: left; width: 80%"),T(h,"class","svelte-bv1cfr"),T(m,"class","svelte-bv1cfr"),T(O,"class","svelte-bv1cfr"),T(G,"class","svelte-bv1cfr"),d(g,"margin-left","auto"),d(g,"margin-right","16px"),T(g,"class","svelte-bv1cfr"),d(k,"display","flex"),d(k,"margin-left","10px"),T(k,"class","svelte-bv1cfr"),d(j,"font-size","1rem"),d(j,"margin-top","12px"),d(j,"margin-left","12px"),d(j,"font-weight","600"),T(j,"class","svelte-bv1cfr"),T(e,"class","detailed-card svelte-bv1cfr")},m(C,U){R(C,e,U),b(e,t),b(t,l),ne(l,s[8]),b(t,r),b(t,n),b(n,a),b(e,i),b(e,u),$&&$.m(u,null),b(e,f),b(e,c),se&&se.m(c,null),b(e,o),b(e,h),b(h,v),ne(v,s[7]),b(e,y),b(e,k),b(k,m),ie.m(m,null),b(m,_),ae.m(m,null),b(k,D),b(k,g),b(g,O),b(O,B),b(g,w),b(g,G),b(G,Y),b(e,M),b(e,j),b(j,q),b(e,ee);for(let Q=0;Q<Z.length;Q+=1)Z[Q].m(e,null);V=!0,re||(_e=[z(l,"input",s[14]),z(l,"input",s[11]),z(n,"click",s[15]),z(v,"input",s[16]),z(v,"input",s[10]),z(O,"click",s[22]),z(G,"click",s[23])],re=!0)},p(C,U){if(U&256&&l.value!==C[8]&&ne(l,C[8]),!C[0].isDone&&C[0].startTime&&C[0].startDate?$?$.p(C,U):($=rt(C),$.c(),$.m(u,null)):$&&($.d(1),$=null),Te===(Te=pe(C))&&se?se.p(C,U):(se&&se.d(1),se=Te&&Te(C),se&&(se.c(),se.m(c,null))),U&128&&ne(v,C[7]),je===(je=Me(C))&&ie?ie.p(C,U):(ie.d(1),ie=je(C),ie&&(ie.c(),ie.m(m,_))),Ce===(Ce=Ue(C))&&ae?ae.p(C,U):(ae.d(1),ae=Ce(C),ae&&(ae.c(),ae.m(m,null))),U&1){me=C[0].children;let Q;for(Q=0;Q<me.length;Q+=1){const Ve=st(C,me,Q);Z[Q]?(Z[Q].p(Ve,U),P(Z[Q],1)):(Z[Q]=it(Ve),Z[Q].c(),P(Z[Q],1),Z[Q].m(e,null))}for(fe(),Q=me.length;Q<Z.length;Q+=1)Ke(Q);ue()}},i(C){if(!V){for(let U=0;U<me.length;U+=1)P(Z[U]);V=!0}},o(C){Z=Z.filter(Boolean);for(let U=0;U<Z.length;U+=1)K(Z[U]);V=!1},d(C){C&&p(e),$&&$.d(),se&&se.d(),ie.d(),ae.d(),Ie(Z,C),re=!1,ce(_e)}}}function rt(s){let e,t=s[0].startDate+" "+s[0].startTime+"",l;return{c(){e=L("Scheduled for "),l=L(t)},l(r){e=W(r,"Scheduled for "),l=W(r,t)},m(r,n){R(r,e,n),R(r,l,n)},p(r,n){n&1&&t!==(t=r[0].startDate+" "+r[0].startTime+"")&&oe(l,t)},d(r){r&&p(e),r&&p(l)}}}function Yt(s){let e,t=s[0].repeatsOnDaysOfWeek+"",l;return{c(){e=L("Repeats "),l=L(t)},l(r){e=W(r,"Repeats "),l=W(r,t)},m(r,n){R(r,e,n),R(r,l,n)},p(r,n){n&1&&t!==(t=r[0].repeatsOnDaysOfWeek+"")&&oe(l,t)},d(r){r&&p(e),r&&p(l)}}}function qt(s){let e,t=s[0].daysBeforeRepeating+"",l,r,n=(s[0].completionCount||0)+"",a,i;return{c(){e=L("Repeats every "),l=L(t),r=L(" days, completed "),a=L(n),i=L(" times")},l(u){e=W(u,"Repeats every "),l=W(u,t),r=W(u," days, completed "),a=W(u,n),i=W(u," times")},m(u,f){R(u,e,f),R(u,l,f),R(u,r,f),R(u,a,f),R(u,i,f)},p(u,f){f&1&&t!==(t=u[0].daysBeforeRepeating+"")&&oe(l,t),f&1&&n!==(n=(u[0].completionCount||0)+"")&&oe(a,n)},d(u){u&&p(e),u&&p(l),u&&p(r),u&&p(a),u&&p(i)}}}function Xt(s){let e,t,l,r,n;return{c(){e=I("input"),t=A(),l=I("input"),this.h()},l(a){e=E(a,"INPUT",{placeholder:!0,style:!0,class:!0}),t=H(a),l=E(a,"INPUT",{placeholder:!0,style:!0,class:!0}),this.h()},h(){T(e,"placeholder","12/31"),d(e,"width","40px"),T(e,"class","svelte-bv1cfr"),T(l,"placeholder","19:45"),d(l,"width","40px"),T(l,"class","svelte-bv1cfr")},m(a,i){R(a,e,i),ne(e,s[2]),R(a,t,i),R(a,l,i),ne(l,s[3]),r||(n=[z(e,"input",s[18]),z(l,"input",s[19]),z(l,"keypress",s[13])],r=!0)},p(a,i){i&4&&e.value!==a[2]&&ne(e,a[2]),i&8&&l.value!==a[3]&&ne(l,a[3])},d(a){a&&p(e),a&&p(t),a&&p(l),r=!1,ce(n)}}}function Gt(s){let e,t,l,r;return{c(){e=I("button"),t=L("Schedule"),this.h()},l(n){e=E(n,"BUTTON",{class:!0});var a=S(e);t=W(a,"Schedule"),a.forEach(p),this.h()},h(){T(e,"class","svelte-bv1cfr")},m(n,a){R(n,e,a),b(e,t),l||(r=z(e,"click",s[17]),l=!0)},p:Pe,d(n){n&&p(e),l=!1,r()}}}function Jt(s){let e,t,l,r,n,a;return{c(){e=I("div"),t=L("Repeats every "),l=I("input"),r=L(" days"),this.h()},l(i){e=E(i,"DIV",{style:!0,class:!0});var u=S(e);t=W(u,"Repeats every "),l=E(u,"INPUT",{style:!0,placeholder:!0,class:!0}),r=W(u," days"),u.forEach(p),this.h()},h(){d(l,"width","20px"),T(l,"placeholder","0"),T(l,"class","svelte-bv1cfr"),d(e,"display","flex"),T(e,"class","svelte-bv1cfr")},m(i,u){R(i,e,u),b(e,t),b(e,l),ne(l,s[6]),b(e,r),n||(a=[z(l,"input",s[21]),z(l,"keypress",s[12])],n=!0)},p(i,u){u&64&&l.value!==i[6]&&ne(l,i[6])},d(i){i&&p(e),n=!1,ce(a)}}}function Qt(s){let e,t,l,r;return{c(){e=I("button"),t=L("Repeat task"),this.h()},l(n){e=E(n,"BUTTON",{style:!0,class:!0});var a=S(e);t=W(a,"Repeat task"),a.forEach(p),this.h()},h(){d(e,"margin-left","0px"),T(e,"class","svelte-bv1cfr")},m(n,a){R(n,e,a),b(e,t),l||(r=z(e,"click",s[20]),l=!0)},p:Pe,d(n){n&&p(e),l=!1,r()}}}function it(s){let e,t,l,r;return t=new lt({props:{taskObject:s[27]}}),{c(){e=I("div"),ve(t.$$.fragment),l=A(),this.h()},l(n){e=E(n,"DIV",{style:!0,class:!0});var a=S(e);ke(t.$$.fragment,a),l=H(a),a.forEach(p),this.h()},h(){d(e,"margin-left","12px"),T(e,"class","svelte-bv1cfr")},m(n,a){R(n,e,a),ge(t,e,null),b(e,l),r=!0},p(n,a){const i={};a&1&&(i.taskObject=n[27]),t.$set(i)},i(n){r||(P(t.$$.fragment,n),r=!0)},o(n){K(t.$$.fragment,n),r=!1},d(n){n&&p(e),be(t)}}}function Zt(s){let e,t,l=s[1]&&nt(s);return{c(){l&&l.c(),e=de()},l(r){l&&l.l(r),e=de()},m(r,n){l&&l.m(r,n),R(r,e,n),t=!0},p(r,[n]){r[1]?l?(l.p(r,n),n&2&&P(l,1)):(l=nt(r),l.c(),P(l,1),l.m(e.parentNode,e)):l&&(fe(),K(l,1,1,()=>{l=null}),ue())},i(r){t||(P(l),t=!0)},o(r){K(l),t=!1},d(r){l&&l.d(r),r&&p(e)}}}function $t(s,e,t){let{taskObject:l}=e,{isOpen:r=!1}=e,n,a,i=!1,u=!1,f=7;const c=Le();let o=l.notes||"",h=l.name||"";const v=Qe.throttle(V=>{t(7,o=V.target.value),k()},500),y=Qe.throttle(V=>{t(8,h=V.target.value),m()},500);function k(){t(0,l.notes=o,l),c("task-notes-update")}function m(){t(0,l.name=h,l),c("task-title-update")}function _(V){V.charCode===13&&(f?(t(0,l.daysBeforeRepeating=f,l),t(0,l.startDate=Fe(),l),t(0,l.startTime="23:30",l)):(alert("Task is reset and will no longer repeat"),t(0,l.daysBeforeRepeating=0,l)),c("task-repeat"),t(6,f=0),t(5,u=!1))}function D(V){V.charCode===13&&(!n||!a?alert("Need BOTH date and time"):(t(0,l.startDate=n,l),t(0,l.startTime=a,l)),c("task-schedule"),t(2,n=""),t(3,a=""))}function g(){h=this.value,t(8,h)}const O=()=>c("card-close");function B(){o=this.value,t(7,o)}const w=()=>t(4,i=!0);function G(){n=this.value,t(2,n)}function Y(){a=this.value,t(3,a)}const M=()=>t(5,u=!0);function j(){f=this.value,t(6,f)}const q=()=>c("task-delete"),ee=()=>c("task-done");return s.$$set=V=>{"taskObject"in V&&t(0,l=V.taskObject),"isOpen"in V&&t(1,r=V.isOpen)},[l,r,n,a,i,u,f,o,h,c,v,y,_,D,g,O,B,w,G,Y,M,j,q,ee]}class xt extends Se{constructor(e){super();Re(this,e,$t,Zt,we,{taskObject:0,isOpen:1})}}function at(s,e,t){const l=s.slice();return l[32]=e[t],l[34]=t,l}function ot(s){let e,t,l,r,n,a,i,u,f;function c(_,D){return _[2]?el:tl}let o=c(s),h=o(s),v=s[0].children,y=[];for(let _=0;_<v.length;_+=1)y[_]=ft(at(s,v,_));const k=_=>K(y[_],1,1,()=>{y[_]=null});let m=s[4]&&ut(s);return{c(){e=I("div"),t=I("div"),l=I("div"),h.c(),r=A(),n=I("div");for(let _=0;_<y.length;_+=1)y[_].c();a=A(),m&&m.c(),this.h()},l(_){e=E(_,"DIV",{draggable:!0,class:!0,style:!0});var D=S(e);t=E(D,"DIV",{class:!0});var g=S(t);l=E(g,"DIV",{style:!0,class:!0});var O=S(l);h.l(O),O.forEach(p),g.forEach(p),r=H(D),n=E(D,"DIV",{style:!0});var B=S(n);for(let w=0;w<y.length;w+=1)y[w].l(B);a=H(B),m&&m.l(B),B.forEach(p),D.forEach(p),this.h()},h(){d(l,"font-size",1.7*.76**s[1]+"rem"),d(l,"font-family","aktiv-grotesk, sans-serif"),T(l,"class","keep-on-same-line name-of-task svelte-t4v7r0"),te(l,"scheduled-orange",!s[0].isDone&&s[0].startTime&&s[0].startDate),te(l,"crossed-out",s[0].isDone),T(t,"class","current-task-flexbox svelte-t4v7r0"),d(n,"margin-top",20*.7**s[1]+"px"),T(e,"draggable","true"),T(e,"class","scheduled-task svelte-t4v7r0"),d(e,"margin-left",(s[1]===1?"0":"20")+"px"),d(e,"margin-bottom","10px"),d(e,"width",350*.8**s[1]+"px"),d(e,"height",s[0].duration&&!s[7]&&s[0].duration*90/60>s[0].children.length*60*.7**s[1]&&s[0].duration*90/60>60*.65**s[1]?`${s[0].duration*90/60}px`:""),d(e,"padding-left",10*.8**s[1]+"px"),te(e,"black-duration-line",!s[0].isDone&&!(s[0].startTime&&s[0].startDate)),te(e,"orange-duration-line",!s[0].isDone&&s[0].startTime&&s[0].startDate),te(e,"green-duration-line",s[0].isDone)},m(_,D){R(_,e,D),b(e,t),b(t,l),h.m(l,null),b(e,r),b(e,n);for(let g=0;g<y.length;g+=1)y[g].m(n,null);b(n,a),m&&m.m(n,null),i=!0,u||(f=[z(e,"dragstart",Pt(s[23])),z(e,"pointerleave",s[13])],u=!0)},p(_,D){if(o===(o=c(_))&&h?h.p(_,D):(h.d(1),h=o(_),h&&(h.c(),h.m(l,null))),(!i||D[0]&2)&&d(l,"font-size",1.7*.76**_[1]+"rem"),D[0]&1&&te(l,"scheduled-orange",!_[0].isDone&&_[0].startTime&&_[0].startDate),D[0]&1&&te(l,"crossed-out",_[0].isDone),D[0]&515){v=_[0].children;let g;for(g=0;g<v.length;g+=1){const O=at(_,v,g);y[g]?(y[g].p(O,D),P(y[g],1)):(y[g]=ft(O),y[g].c(),P(y[g],1),y[g].m(n,a))}for(fe(),g=v.length;g<y.length;g+=1)k(g);ue()}_[4]?m?m.p(_,D):(m=ut(_),m.c(),m.m(n,null)):m&&(m.d(1),m=null),(!i||D[0]&2)&&d(n,"margin-top",20*.7**_[1]+"px"),(!i||D[0]&2)&&d(e,"margin-left",(_[1]===1?"0":"20")+"px"),(!i||D[0]&2)&&d(e,"width",350*.8**_[1]+"px"),(!i||D[0]&131)&&d(e,"height",_[0].duration&&!_[7]&&_[0].duration*90/60>_[0].children.length*60*.7**_[1]&&_[0].duration*90/60>60*.65**_[1]?`${_[0].duration*90/60}px`:""),(!i||D[0]&2)&&d(e,"padding-left",10*.8**_[1]+"px"),D[0]&1&&te(e,"black-duration-line",!_[0].isDone&&!(_[0].startTime&&_[0].startDate)),D[0]&1&&te(e,"orange-duration-line",!_[0].isDone&&_[0].startTime&&_[0].startDate),D[0]&1&&te(e,"green-duration-line",_[0].isDone)},i(_){if(!i){for(let D=0;D<v.length;D+=1)P(y[D]);i=!0}},o(_){y=y.filter(Boolean);for(let D=0;D<y.length;D+=1)K(y[D]);i=!1},d(_){_&&p(e),h.d(),Ie(y,_),m&&m.d(),u=!1,ce(f)}}}function el(s){let e,t,l;return{c(){e=I("input")},l(r){e=E(r,"INPUT",{})},m(r,n){R(r,e,n),ne(e,s[3]),t||(l=[z(e,"input",s[15]),z(e,"keypress",s[11])],t=!0)},p(r,n){n[0]&8&&e.value!==r[3]&&ne(e,r[3])},d(r){r&&p(e),t=!1,ce(l)}}}function tl(s){let e,t=s[0].name+"",l,r,n;return{c(){e=I("div"),l=L(t),this.h()},l(a){e=E(a,"DIV",{class:!0,style:!0});var i=S(e);l=W(i,t),i.forEach(p),this.h()},h(){T(e,"class","truncate svelte-t4v7r0"),d(e,"width",350*.85**s[1]+"px")},m(a,i){R(a,e,i),b(e,l),r||(n=[z(e,"click",s[14]),z(e,"pointerenter",s[12])],r=!0)},p(a,i){i[0]&1&&t!==(t=a[0].name+"")&&oe(l,t),i[0]&2&&d(e,"width",350*.85**a[1]+"px")},d(a){a&&p(e),r=!1,ce(n)}}}function ft(s){let e,t;function l(...r){return s[16](s[34],...r)}return e=new ct({props:{taskObject:s[32],depth:s[1]+1}}),e.$on("task-create",l),e.$on("task-click",s[17]),e.$on("task-done",s[18]),e.$on("task-delete",s[19]),e.$on("task-repeating",s[20]),{c(){ve(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,n){ge(e,r,n),t=!0},p(r,n){s=r;const a={};n[0]&1&&(a.taskObject=s[32]),n[0]&2&&(a.depth=s[1]+1),e.$set(a)},i(r){t||(P(e.$$.fragment,r),t=!0)},o(r){K(e.$$.fragment,r),t=!1},d(r){be(e,r)}}}function ut(s){let e;function t(n,a){return n[5]?ll:sl}let l=t(s),r=l(s);return{c(){r.c(),e=de()},l(n){r.l(n),e=de()},m(n,a){r.m(n,a),R(n,e,a)},p(n,a){l===(l=t(n))&&r?r.p(n,a):(r.d(1),r=l(n),r&&(r.c(),r.m(e.parentNode,e)))},d(n){r.d(n),n&&p(e)}}}function ll(s){let e,t,l,r;return{c(){e=I("div"),t=I("input"),this.h()},l(n){e=E(n,"DIV",{style:!0});var a=S(e);t=E(a,"INPUT",{placeholder:!0,style:!0}),a.forEach(p),this.h()},h(){T(t,"placeholder","Type sub-task"),d(t,"width","100%"),d(t,"margin-left","5px"),d(e,"display","flex"),d(e,"align-items","center"),d(e,"margin-left","20px")},m(n,a){R(n,e,a),b(e,t),ne(t,s[6]),l||(r=[z(t,"input",s[22]),z(t,"keypress",s[10])],l=!0)},p(n,a){a[0]&64&&t.value!==n[6]&&ne(t,n[6])},d(n){n&&p(e),l=!1,ce(r)}}}function sl(s){let e,t,l,r;return{c(){e=I("div"),t=L("new sub-task"),this.h()},l(n){e=E(n,"DIV",{style:!0});var a=S(e);t=W(a,"new sub-task"),a.forEach(p),this.h()},h(){d(e,"margin-left","20px"),d(e,"margin-right","20px"),d(e,"margin-bottom","10px"),d(e,"border-left","2px solid grey"),d(e,"color","grey"),d(e,"padding-left","5px"),d(e,"padding-bottom",8*.68**(s[1]+1)+"px"),d(e,"font-size",1.5*.85**(s[1]+1)+"rem")},m(n,a){R(n,e,a),b(e,t),l||(r=z(e,"click",s[21]),l=!0)},p(n,a){a[0]&2&&d(e,"padding-bottom",8*.68**(n[1]+1)+"px"),a[0]&2&&d(e,"font-size",1.5*.85**(n[1]+1)+"rem")},d(n){n&&p(e),l=!1,r()}}}function nl(s){let e,t,l=!s[0].isDeleted&&!s[0].isDone&&!(s[0].startTime&&s[0].startDate)&&ot(s);return{c(){l&&l.c(),e=de()},l(r){l&&l.l(r),e=de()},m(r,n){l&&l.m(r,n),R(r,e,n),t=!0},p(r,n){!r[0].isDeleted&&!r[0].isDone&&!(r[0].startTime&&r[0].startDate)?l?(l.p(r,n),n[0]&1&&P(l,1)):(l=ot(r),l.c(),P(l,1),l.m(e.parentNode,e)):l&&(fe(),K(l,1,1,()=>{l=null}),ue())},i(r){t||(P(l),t=!0)},o(r){K(l),t=!1},d(r){l&&l.d(r),r&&p(e)}}}function rl(s,e){s.dataTransfer.setData("text/plain",e)}function il(s,e,t){let l,{taskObject:r}=e,{depth:n}=e;const a=Le();let i=!1,u="",f=!1,c=!1,o="";function h(V,re){const _e=Je({},r.children[re]);_e.children=V.detail.updatedChildren;const $=[...r.children];$[re]=_e,m($)}function v(V){V.charCode===13&&(o&&k(o),t(6,o=""),t(5,c=!1))}function y(V){if(V.charCode===13){if(!u){alert("Task name can't be empty.");return}t(0,r.name=u,r),a("task-done",{}),t(3,u=""),t(2,i=!1)}}function k(V){m([...r.children,{name:V,children:[]}])}function m(V){a("task-create",{updatedChildren:V})}function _(){t(4,f=!0)}function D(){t(4,f=!1)}const g=()=>a("task-click",{task:r});function O(){u=this.value,t(3,u)}const B=(V,re)=>h(re,V);function w(V){Ee.call(this,s,V)}function G(V){Ee.call(this,s,V)}function Y(V){Ee.call(this,s,V)}function M(V){Ee.call(this,s,V)}const j=()=>t(5,c=!0);function q(){o=this.value,t(6,o)}const ee=V=>rl(V,r.name);return s.$$set=V=>{"taskObject"in V&&t(0,r=V.taskObject),"depth"in V&&t(1,n=V.depth)},s.$$.update=()=>{s.$$.dirty[0]&1&&t(7,l=r.children.filter(V=>V.duration).length>0)},[r,n,i,u,f,c,o,l,a,h,v,y,_,D,g,O,B,w,G,Y,M,j,q,ee]}class ct extends Se{constructor(e){super();Re(this,e,il,nl,we,{taskObject:0,depth:1},null,[-1,-1])}}function al(s){let e,t,l;return{c(){e=I("div"),this.h()},l(r){e=E(r,"DIV",{style:!0,draggable:!0});var n=S(e);n.forEach(p),this.h()},h(){d(e,"height",s[3]-20-10+"px"),d(e,"width","11vw"),T(e,"draggable","true")},m(r,n){R(r,e,n),t||(l=z(e,"dragstart",s[14]),t=!0)},p(r,n){n&8&&d(e,"height",r[3]-20-10+"px")},d(r){r&&p(e),t=!1,l()}}}function ol(s){let e,t,l=s[4].name+"",r,n,a,i,u,f,c;const o=s[12].default,h=Ft(o,s,s[11],null),v=h||al(s);return{c(){e=I("div"),t=I("div"),r=L(l),n=A(),v&&v.c(),a=A(),i=I("div"),this.h()},l(y){e=E(y,"DIV",{class:!0,style:!0});var k=S(e);t=E(k,"DIV",{draggable:!0,style:!0});var m=S(t);r=W(m,l),m.forEach(p),n=H(k),v&&v.l(k),a=H(k),i=E(k,"DIV",{draggable:!0,style:!0});var _=S(i);_.forEach(p),k.forEach(p),this.h()},h(){T(t,"draggable","true"),d(t,"width","11vw"),T(i,"draggable","true"),d(i,"height","8px"),d(i,"width","11vw"),d(i,"position","absolute"),d(i,"bottom","0"),d(i,"left","-3px"),d(i,"cursor","ns-resize"),T(e,"class","scheduled-task svelte-1at2tfe"),d(e,"top",s[1]+"px"),d(e,"height",s[3]+"px"),d(e,"left",s[2]+"px"),d(e,"font-size",s[0]+"rem"),te(e,"green",s[4].isDone)},m(y,k){R(y,e,k),b(e,t),b(t,r),b(e,n),v&&v.m(e,null),b(e,a),b(e,i),u=!0,f||(c=[z(t,"dragstart",s[13]),z(i,"dragstart",s[15]),z(i,"dragend",s[16]),z(e,"click",s[17])],f=!0)},p(y,[k]){(!u||k&16)&&l!==(l=y[4].name+"")&&oe(r,l),h?h.p&&(!u||k&2048)&&Mt(h,o,y,y[11],u?zt(o,y[11],k,null):Ut(y[11]),null):v&&v.p&&(!u||k&24)&&v.p(y,u?k:-1),(!u||k&2)&&d(e,"top",y[1]+"px"),(!u||k&8)&&d(e,"height",y[3]+"px"),(!u||k&4)&&d(e,"left",y[2]+"px"),(!u||k&1)&&d(e,"font-size",y[0]+"rem"),k&16&&te(e,"green",y[4].isDone)},i(y){u||(P(v,y),u=!0)},o(y){K(v,y),u=!1},d(y){y&&p(e),v&&v.d(y),f=!1,ce(c)}}}function dt(s,e){s.dataTransfer.setData("text/plain",e)}function fl(s,e,t){let{$$slots:l={},$$scope:r}=e,{fontSize:n=1}=e,{offsetFromTop:a}=e,{offsetFromLeft:i=0}=e,{height:u=15}=e,{duration:f=15}=e,{calendarStartTime:c=""}=e,{name:o=""}=e,{task:h=null}=e;const v=Le();let y=0;function k(w){y=w.offsetY}function m(w,G){G.duration||(G.duration=10);const Y=60/90,M=(w.offsetY-y)*Y;v("task-duration-adjusted",{taskName:G.name,duration:Math.max(1,G.duration+M)})}const _=w=>dt(w,h.name),D=w=>dt(w,h.name),g=w=>k(w),O=w=>m(w,h),B=()=>v("task-click",{task:h});return s.$$set=w=>{"fontSize"in w&&t(0,n=w.fontSize),"offsetFromTop"in w&&t(1,a=w.offsetFromTop),"offsetFromLeft"in w&&t(2,i=w.offsetFromLeft),"height"in w&&t(3,u=w.height),"duration"in w&&t(8,f=w.duration),"calendarStartTime"in w&&t(9,c=w.calendarStartTime),"name"in w&&t(10,o=w.name),"task"in w&&t(4,h=w.task),"$$scope"in w&&t(11,r=w.$$scope)},[n,a,i,u,h,v,k,m,f,c,o,r,l,_,D,g,O,B]}class ht extends Se{constructor(e){super();Re(this,e,fl,ol,we,{fontSize:0,offsetFromTop:1,offsetFromLeft:2,height:3,duration:8,calendarStartTime:9,name:10,task:4})}}function _t(s,e,t){const l=s.slice();return l[16]=e[t],l[18]=t,l}function pt(s,e,t){const l=s.slice();return l[19]=e[t],l[18]=t,l}function mt(s,e,t){const l=s.slice();return l[16]=e[t],l[21]=e,l[22]=t,l}function vt(s){let e,t,l,r,n=s[16].name+"",a,i,u;function f(){s[9].call(t,s[21],s[22])}function c(){return s[10](s[16])}return{c(){e=I("div"),t=I("input"),l=A(),r=I("div"),a=L(n),this.h()},l(o){e=E(o,"DIV",{style:!0,class:!0});var h=S(e);t=E(h,"INPUT",{type:!0,class:!0}),l=H(h),r=E(h,"DIV",{style:!0,class:!0});var v=S(r);a=W(v,n),v.forEach(p),h.forEach(p),this.h()},h(){T(t,"type","checkbox"),T(t,"class","svelte-1ksya56"),d(r,"font-size","0.82rem"),T(r,"class","svelte-1ksya56"),d(e,"display","flex"),d(e,"align-items","center"),T(e,"class","svelte-1ksya56"),te(e,"green-text",s[16].isDone),te(e,"red-text",!s[16].isDone)},m(o,h){R(o,e,h),b(e,t),t.checked=s[16].isDone,b(e,l),b(e,r),b(r,a),i||(u=[z(t,"change",f),z(t,"click",c)],i=!0)},p(o,h){s=o,h&4&&(t.checked=s[16].isDone),h&4&&n!==(n=s[16].name+"")&&oe(a,n),h&4&&te(e,"green-text",s[16].isDone),h&4&&te(e,"red-text",!s[16].isDone)},d(o){o&&p(e),i=!1,ce(u)}}}function kt(s){let e,t,l,r=s[5],n=[];for(let f=0;f<r.length;f+=1)n[f]=gt(pt(s,r,f));let a=s[0],i=[];for(let f=0;f<a.length;f+=1)i[f]=bt(_t(s,a,f));const u=f=>K(i[f],1,1,()=>{i[f]=null});return{c(){for(let f=0;f<n.length;f+=1)n[f].c();e=A();for(let f=0;f<i.length;f+=1)i[f].c();t=de()},l(f){for(let c=0;c<n.length;c+=1)n[c].l(f);e=H(f);for(let c=0;c<i.length;c+=1)i[c].l(f);t=de()},m(f,c){for(let o=0;o<n.length;o+=1)n[o].m(f,c);R(f,e,c);for(let o=0;o<i.length;o+=1)i[o].m(f,c);R(f,t,c),l=!0},p(f,c){if(c&32){r=f[5];let o;for(o=0;o<r.length;o+=1){const h=pt(f,r,o);n[o]?n[o].p(h,c):(n[o]=gt(h),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}if(c&145){a=f[0];let o;for(o=0;o<a.length;o+=1){const h=_t(f,a,o);i[o]?(i[o].p(h,c),P(i[o],1)):(i[o]=bt(h),i[o].c(),P(i[o],1),i[o].m(t.parentNode,t))}for(fe(),o=a.length;o<i.length;o+=1)u(o);ue()}},i(f){if(!l){for(let c=0;c<a.length;c+=1)P(i[c]);l=!0}},o(f){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)K(i[c]);l=!1},d(f){Ie(n,f),f&&p(e),Ie(i,f),f&&p(t)}}}function gt(s){let e,t=s[19].substring(0,5)+"",l;return{c(){e=I("div"),l=L(t),this.h()},l(r){e=E(r,"DIV",{class:!0,style:!0});var n=S(e);l=W(n,t),n.forEach(p),this.h()},h(){T(e,"class","time-indicator svelte-1ksya56"),d(e,"top",We*s[18]+"px")},m(r,n){R(r,e,n),b(e,l)},p:Pe,d(r){r&&p(e)}}}function bt(s){let e,t;return e=new ht({props:{task:s[16],offsetFromTop:s[7](s[16]),height:s[16].duration*s[4]||30,fontSize:.8,offsetFromLeft:30}}),e.$on("task-click",s[11]),e.$on("task-duration-adjusted",s[12]),{c(){ve(e.$$.fragment)},l(l){ke(e.$$.fragment,l)},m(l,r){ge(e,l,r),t=!0},p(l,r){const n={};r&1&&(n.task=l[16]),r&1&&(n.offsetFromTop=l[7](l[16])),r&1&&(n.height=l[16].duration*l[4]||30),e.$set(n)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){K(e.$$.fragment,l),t=!1},d(l){be(e,l)}}}function ul(s){let e,t,l,r,n,a,i,u=s[3]()+"",f,c,o,h,v,y,k=s[2],m=[];for(let D=0;D<k.length;D+=1)m[D]=vt(mt(s,k,D));let _=s[1]&&kt(s);return{c(){e=I("div"),t=I("div"),l=L("Passed tasks:"),r=A();for(let D=0;D<m.length;D+=1)m[D].c();n=A(),a=I("div"),i=I("div"),f=L(u),c=A(),o=I("div"),_&&_.c(),this.h()},l(D){e=E(D,"DIV",{style:!0,class:!0});var g=S(e);t=E(g,"DIV",{style:!0,class:!0});var O=S(t);l=W(O,"Passed tasks:"),O.forEach(p),r=H(g);for(let Y=0;Y<m.length;Y+=1)m[Y].l(g);n=H(g),a=E(g,"DIV",{style:!0,class:!0});var B=S(a);i=E(B,"DIV",{style:!0,class:!0});var w=S(i);f=W(w,u),w.forEach(p),c=H(B),o=E(B,"DIV",{id:!0,style:!0,class:!0});var G=S(o);_&&_.l(G),G.forEach(p),B.forEach(p),g.forEach(p),this.h()},h(){d(t,"margin-top","8px"),d(t,"font-weight","600"),T(t,"class","svelte-1ksya56"),d(i,"margin-top",0+"px"),d(i,"font-weight","600"),T(i,"class","svelte-1ksya56"),T(o,"id","calendar-day-container"),d(o,"position","relative"),d(o,"height",We*Dt+"px"),d(o,"width","12vw"),T(o,"class","svelte-1ksya56"),d(a,"overflow-y","scroll"),d(a,"overflow-x","hidden"),d(a,"height","60vh"),d(a,"margin-top","12px"),T(a,"class","svelte-1ksya56"),d(e,"height","77vh"),T(e,"class","svelte-1ksya56")},m(D,g){R(D,e,g),b(e,t),b(t,l),b(e,r);for(let O=0;O<m.length;O+=1)m[O].m(e,null);b(e,n),b(e,a),b(a,i),b(i,f),b(a,c),b(a,o),_&&_.m(o,null),h=!0,v||(y=[z(o,"drop",s[13]),z(o,"dragover",cl)],v=!0)},p(D,[g]){if(g&68){k=D[2];let O;for(O=0;O<k.length;O+=1){const B=mt(D,k,O);m[O]?m[O].p(B,g):(m[O]=vt(B),m[O].c(),m[O].m(e,n))}for(;O<m.length;O+=1)m[O].d(1);m.length=k.length}D[1]?_?(_.p(D,g),g&2&&P(_,1)):(_=kt(D),_.c(),P(_,1),_.m(o,null)):_&&(fe(),K(_,1,1,()=>{_=null}),ue())},i(D){h||(P(_),h=!0)},o(D){K(_),h=!1},d(D){D&&p(e),Ie(m,D),_&&_.d(),v=!1,ce(y)}}}const We=80,Dt=16;function cl(s){s.preventDefault(),s.dataTransfer.dropEffect="move"}function dl(s,e,t){let{scheduledTasksToday:l}=e;const r=Le(),n=Fe,a=80/60;let i=[],u="",f;function c(g){console.log("task =",g),r("task-done",{taskName:g.name})}function o(){const g=new Date,O=g.getHours()*60;for(const w of l){const G=w.startTime.substring(0,2),Y=parseInt(G)*60,M=Y+w.duration;Y<O&&O<M&&t(1,u=`${G}:00`)}if(!u){const w=g.getHours();t(1,u=`${w<10?"0":""}${w}:00`)}let B=g.getHours();for(let w=0;w<Dt;w++)B===24&&(B=0),B<10?i.push("0"+B+":00"):i.push(B+":00"),B+=1}o();function h({startTime:g}){const O=g.slice(0,2),B=g.slice(3,5);return(Number(O)+Number(B)/60-parseInt(u.substring(0,2)))*We}function v(g){console.log("drop detected"),g.preventDefault();var B=document.getElementById("calendar-day-container").getBoundingClientRect();B.left,B.top;let w=g.layerY/We;const G=w-Math.floor(w),Y=Math.trunc(w);let M=G*60,j;M<10?j=`0${M.toPrecision(1)}`:j=M.toPrecision(2);const q=parseInt(u.substring(0,2));let ee=q+Y;ee<10&&(ee=`0${ee}`),console.log("origin =",q);const V=`${ee}:${j}`;console.log("scheduledTime =",V),r("task-scheduled",{taskName:g.dataTransfer.getData("text/plain"),timeOfDay:V,dateScheduled:n()})}function y(g,O){g[O].isDone=this.checked,t(2,f),t(1,u),t(0,l)}const k=g=>c(g);function m(g){Ee.call(this,s,g)}function _(g){Ee.call(this,s,g)}const D=g=>v(g);return s.$$set=g=>{"scheduledTasksToday"in g&&t(0,l=g.scheduledTasksToday)},s.$$.update=()=>{s.$$.dirty&3&&u&&t(2,f=l.filter(g=>g.startTime<u))},[l,u,f,n,a,i,c,h,v,y,k,m,_,D]}class hl extends Se{constructor(e){super();Re(this,e,dl,ul,we,{scheduledTasksToday:0})}}function yt(s,e,t){const l=s.slice();return l[4]=e[t],l[6]=t,l}function Tt(s){let e,t,l,r=s[4].startDate+"",n,a,i,u,f,c;return i=new ht({props:{task:s[4],fontSize:.8,offsetFromTop:20,height:s[4].duration*s[1]||15}}),i.$on("task-click",s[2]),i.$on("task-duration-adjusted",s[3]),{c(){e=I("div"),t=I("div"),l=I("b"),n=L(r),a=A(),ve(i.$$.fragment),u=A(),f=I("div"),this.h()},l(o){e=E(o,"DIV",{style:!0,class:!0});var h=S(e);t=E(h,"DIV",{class:!0});var v=S(t);l=E(v,"B",{class:!0});var y=S(l);n=W(y,r),y.forEach(p),v.forEach(p),a=H(h),ke(i.$$.fragment,h),h.forEach(p),u=H(o),f=E(o,"DIV",{class:!0}),S(f).forEach(p),this.h()},h(){T(l,"class","svelte-d8tb0p"),T(t,"class","svelte-d8tb0p"),d(e,"position","relative"),d(e,"height",wt+(s[4].duration*s[1]||15)+"px"),d(e,"margin-top","25px"),T(e,"class","svelte-d8tb0p"),T(f,"class","broken-axis svelte-d8tb0p")},m(o,h){R(o,e,h),b(e,t),b(t,l),b(l,n),b(e,a),ge(i,e,null),R(o,u,h),R(o,f,h),c=!0},p(o,h){(!c||h&1)&&r!==(r=o[4].startDate+"")&&oe(n,r);const v={};h&1&&(v.task=o[4]),h&1&&(v.height=o[4].duration*o[1]||15),i.$set(v),(!c||h&1)&&d(e,"height",wt+(o[4].duration*o[1]||15)+"px")},i(o){c||(P(i.$$.fragment,o),c=!0)},o(o){K(i.$$.fragment,o),c=!1},d(o){o&&p(e),be(i),o&&p(u),o&&p(f)}}}function _l(s){let e,t,l,r=s[0],n=[];for(let i=0;i<r.length;i+=1)n[i]=Tt(yt(s,r,i));const a=i=>K(n[i],1,1,()=>{n[i]=null});return{c(){e=I("div"),t=I("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=E(i,"DIV",{style:!0,class:!0});var u=S(e);t=E(u,"DIV",{style:!0,class:!0});var f=S(t);for(let c=0;c<n.length;c+=1)n[c].l(f);f.forEach(p),u.forEach(p),this.h()},h(){d(t,"width","12vw"),d(t,"margin-left","0px"),d(t,"margin-top","27px"),d(t,"position","relative"),d(t,"height","1600px"),T(t,"class","svelte-d8tb0p"),d(e,"height","77vh"),d(e,"overflow-y","scroll"),d(e,"overflow-x","hidden"),T(e,"class","svelte-d8tb0p")},m(i,u){R(i,e,u),b(e,t);for(let f=0;f<n.length;f+=1)n[f].m(t,null);l=!0},p(i,[u]){if(u&3){r=i[0];let f;for(f=0;f<r.length;f+=1){const c=yt(i,r,f);n[f]?(n[f].p(c,u),P(n[f],1)):(n[f]=Tt(c),n[f].c(),P(n[f],1),n[f].m(t,null))}for(fe(),f=r.length;f<n.length;f+=1)a(f);ue()}},i(i){if(!l){for(let u=0;u<r.length;u+=1)P(n[u]);l=!0}},o(i){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)K(n[u]);l=!1},d(i){i&&p(e),Ie(n,i)}}}const wt=20;function pl(s,e,t){let{futureScheduledTasks:l}=e;const r=90/60;function n(i){Ee.call(this,s,i)}function a(i){Ee.call(this,s,i)}return s.$$set=i=>{"futureScheduledTasks"in i&&t(0,l=i.futureScheduledTasks)},[l,r,n,a]}class ml extends Se{constructor(e){super();Re(this,e,pl,_l,we,{futureScheduledTasks:0})}}function It(s,e,t){const l=s.slice();return l[51]=e[t],l}function Et(s){let e,t;return e=new xt({props:{isOpen:s[8],taskObject:s[9]}}),e.$on("card-close",s[21]),e.$on("task-done",s[22]),e.$on("task-delete",s[23]),e.$on("task-repeat",s[18]),e.$on("task-schedule",s[18]),e.$on("task-title-update",s[18]),e.$on("task-notes-update",s[18]),{c(){ve(e.$$.fragment)},l(l){ke(e.$$.fragment,l)},m(l,r){ge(e,l,r),t=!0},p(l,r){const n={};r[0]&256&&(n.isOpen=l[8]),r[0]&512&&(n.taskObject=l[9]),e.$set(n)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){K(e.$$.fragment,l),t=!1},d(l){be(e,l)}}}function Ot(s){let e,t,l,r,n,a=s[0],i=[];for(let c=0;c<a.length;c+=1)i[c]=Nt(It(s,a,c));const u=c=>K(i[c],1,1,()=>{i[c]=null});let f=s[7]&&St(s);return{c(){for(let c=0;c<i.length;c+=1)i[c].c();e=A(),t=I("div"),f&&f.c(),this.h()},l(c){for(let h=0;h<i.length;h+=1)i[h].l(c);e=H(c),t=E(c,"DIV",{style:!0,class:!0});var o=S(t);f&&f.l(o),o.forEach(p),this.h()},h(){d(t,"height","200px"),T(t,"class","svelte-1e5e9i8")},m(c,o){for(let h=0;h<i.length;h+=1)i[h].m(c,o);R(c,e,o),R(c,t,o),f&&f.m(t,null),l=!0,r||(n=[z(t,"mouseenter",s[28]),z(t,"mouseleave",s[29])],r=!0)},p(c,o){if(o[0]&394241){a=c[0];let h;for(h=0;h<a.length;h+=1){const v=It(c,a,h);i[h]?(i[h].p(v,o),P(i[h],1)):(i[h]=Nt(v),i[h].c(),P(i[h],1),i[h].m(e.parentNode,e))}for(fe(),h=a.length;h<i.length;h+=1)u(h);ue()}c[7]?f?f.p(c,o):(f=St(c),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},i(c){if(!l){for(let o=0;o<a.length;o+=1)P(i[o]);l=!0}},o(c){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)K(i[o]);l=!1},d(c){Ie(i,c),c&&p(e),c&&p(t),f&&f.d(),r=!1,ce(n)}}}function Vt(s){let e,t,l,r;function n(...a){return s[25](s[51],...a)}return t=new ct({props:{taskObject:s[51],depth:1}}),t.$on("task-click",s[24]),t.$on("task-create",n),t.$on("task-done",s[18]),t.$on("task-delete",s[18]),t.$on("task-repeating",s[18]),{c(){e=I("div"),ve(t.$$.fragment),l=A(),this.h()},l(a){e=E(a,"DIV",{class:!0});var i=S(e);ke(t.$$.fragment,i),l=H(i),i.forEach(p),this.h()},h(){T(e,"class","task-container svelte-1e5e9i8")},m(a,i){R(a,e,i),ge(t,e,null),b(e,l),r=!0},p(a,i){s=a;const u={};i[0]&1&&(u.taskObject=s[51]),t.$set(u)},i(a){r||(P(t.$$.fragment,a),r=!0)},o(a){K(t.$$.fragment,a),r=!1},d(a){a&&p(e),be(t)}}}function Nt(s){let e,t,l=!s[51].isDeleted&&Vt(s);return{c(){l&&l.c(),e=de()},l(r){l&&l.l(r),e=de()},m(r,n){l&&l.m(r,n),R(r,e,n),t=!0},p(r,n){r[51].isDeleted?l&&(fe(),K(l,1,1,()=>{l=null}),ue()):l?(l.p(r,n),n[0]&1&&P(l,1)):(l=Vt(r),l.c(),P(l,1),l.m(e.parentNode,e))},i(r){t||(P(l),t=!0)},o(r){K(l),t=!1},d(r){l&&l.d(r),r&&p(e)}}}function St(s){let e;function t(n,a){return n[6]?vl:kl}let l=t(s),r=l(s);return{c(){r.c(),e=de()},l(n){r.l(n),e=de()},m(n,a){r.m(n,a),R(n,e,a)},p(n,a){l===(l=t(n))&&r?r.p(n,a):(r.d(1),r=l(n),r&&(r.c(),r.m(e.parentNode,e)))},d(n){r.d(n),n&&p(e)}}}function vl(s){let e,t,l,r;return{c(){e=I("div"),t=I("input"),this.h()},l(n){e=E(n,"DIV",{style:!0,class:!0});var a=S(e);t=E(a,"INPUT",{placeholder:!0,class:!0}),a.forEach(p),this.h()},h(){T(t,"placeholder","Type task..."),T(t,"class","svelte-1e5e9i8"),d(e,"display","flex"),d(e,"align-content","center"),d(e,"justify-items","center"),T(e,"class","svelte-1e5e9i8")},m(n,a){R(n,e,a),b(e,t),ne(t,s[5]),l||(r=[z(t,"input",s[27]),z(t,"keypress",s[16])],l=!0)},p(n,a){a[0]&32&&t.value!==n[5]&&ne(t,n[5])},d(n){n&&p(e),l=!1,ce(r)}}}function kl(s){let e,t,l,r;return{c(){e=I("div"),t=L("New task"),this.h()},l(n){e=E(n,"DIV",{style:!0,class:!0});var a=S(e);t=W(a,"New task"),a.forEach(p),this.h()},h(){d(e,"font-size","1.5rem"),d(e,"color","grey"),T(e,"class","svelte-1e5e9i8")},m(n,a){R(n,e,a),b(e,t),l||(r=z(e,"click",s[26]),l=!0)},p:Pe,d(n){n&&p(e),l=!1,r()}}}function gl(s){let e=s[9],t,l,r,n,a,i,u=(s[3]?"music_note":"music_off")+"",f,c,o,h,v,y,k,m,_,D,g,O,B,w,G,Y=Et(s),M=s[0]&&Ot(s);return m=new hl({props:{scheduledTasksToday:s[4]}}),m.$on("task-done",s[30]),m.$on("task-scheduled",s[31]),m.$on("task-duration-adjusted",s[32]),m.$on("task-click",s[33]),D=new ml({props:{futureScheduledTasks:s[1]}}),D.$on("task-duration-adjusted",s[34]),D.$on("task-click",s[35]),{c(){Y.c(),t=A(),l=I("div"),r=I("div"),n=A(),a=I("div"),i=I("span"),f=L(u),c=A(),o=I("div"),h=I("div"),v=I("div"),M&&M.c(),y=A(),k=I("div"),ve(m.$$.fragment),_=A(),ve(D.$$.fragment),g=A(),O=I("audio"),this.h()},l(j){Y.l(j),t=H(j),l=E(j,"DIV",{id:!0,style:!0,class:!0});var q=S(l);r=E(q,"DIV",{style:!0,class:!0}),S(r).forEach(p),n=H(q),a=E(q,"DIV",{style:!0,class:!0});var ee=S(a);i=E(ee,"SPAN",{class:!0,style:!0});var V=S(i);f=W(V,u),V.forEach(p),ee.forEach(p),c=H(q),o=E(q,"DIV",{style:!0,class:!0});var re=S(o);h=E(re,"DIV",{class:!0});var _e=S(h);v=E(_e,"DIV",{class:!0});var $=S(v);M&&M.l($),$.forEach(p),_e.forEach(p),y=H(re),k=E(re,"DIV",{class:!0});var pe=S(k);ke(m.$$.fragment,pe),_=H(pe),ke(D.$$.fragment,pe),pe.forEach(p),re.forEach(p),q.forEach(p),g=H(j),O=E(j,"AUDIO",{class:!0}),S(O).forEach(p),this.h()},h(){d(r,"height","100px"),T(r,"class","svelte-1e5e9i8"),T(i,"class","material-icons svelte-1e5e9i8"),d(i,"margin-left","auto"),d(i,"margin-right","0"),d(i,"color","white"),d(a,"position","absolute"),d(a,"top","30px"),d(a,"left","30px"),T(a,"class","svelte-1e5e9i8"),T(v,"class","todo-list svelte-1e5e9i8"),T(h,"class","fixed-height-container-for-scrolling svelte-1e5e9i8"),T(k,"class","calendar-section-container svelte-1e5e9i8"),d(o,"display","flex"),d(o,"padding-left","0"),d(o,"padding-top","0px"),T(o,"class","svelte-1e5e9i8"),T(l,"id","background-image-holder"),d(l,"height","100vh"),d(l,"padding-left","120px"),d(l,"padding-right","120px"),T(l,"class","svelte-1e5e9i8"),T(O,"class","svelte-1e5e9i8")},m(j,q){Y.m(j,q),R(j,t,q),R(j,l,q),b(l,r),b(l,n),b(l,a),b(a,i),b(i,f),b(l,c),b(l,o),b(o,h),b(h,v),M&&M.m(v,null),b(o,y),b(o,k),ge(m,k,null),b(k,_),ge(D,k,null),R(j,g,q),R(j,O,q),s[36](O),B=!0,w||(G=z(a,"click",s[11]),w=!0)},p(j,q){q[0]&512&&we(e,e=j[9])?(fe(),K(Y,1,1,Pe),ue(),Y=Et(j),Y.c(),P(Y),Y.m(t.parentNode,t)):Y.p(j,q),(!B||q[0]&8)&&u!==(u=(j[3]?"music_note":"music_off")+"")&&oe(f,u),j[0]?M?(M.p(j,q),q[0]&1&&P(M,1)):(M=Ot(j),M.c(),P(M,1),M.m(v,null)):M&&(fe(),K(M,1,1,()=>{M=null}),ue());const ee={};q[0]&16&&(ee.scheduledTasksToday=j[4]),m.$set(ee);const V={};q[0]&2&&(V.futureScheduledTasks=j[1]),D.$set(V)},i(j){B||(P(Y),P(M),P(m.$$.fragment,j),P(D.$$.fragment,j),B=!0)},o(j){K(Y),K(M),K(m.$$.fragment,j),K(D.$$.fragment,j),B=!1},d(j){Y.d(j),j&&p(t),j&&p(l),M&&M.d(),be(m),be(D),j&&p(g),j&&p(O),s[36](null),w=!1,G()}}}function wl({params:s}){return{props:{userID:s.user}}}function Rt(s){return Math.floor(Math.random()*s)}function Be({node:s,fulfilsCriteria:e,applyFunc:t}){e(s)&&t(s);for(const l of s.children)Be({node:l,fulfilsCriteria:e,applyFunc:t})}function bl(s,e,t){let{userID:l}=e;const r=`users/${l}`;let n,a=["illiyard-moor.mp3","ms-leafre-lofi.mp3"],i,u=!1,f=["https://i.imgur.com/rzkUMW8.jpeg","https://i.imgur.com/ShnqIpJ.jpeg"],c;At(()=>{c=f[Rt(2)];const N=document.getElementById("background-image-holder");N.style["background-image"]=`url(${c})`,n=a[Rt(2)],t(2,i.src=n,i)});let o=null,h="",v=Fe(),y=[],k=[],m="",_=!1,D=!1,g=!1,O={};function B({task:N}){t(9,O=N),t(8,g=!0)}function w(){t(2,i.volume=.1,i),i.paused?(i.play(),t(3,u=!0)):(i.pause(),t(3,u=!1))}function G(){t(4,y=[]);for(const N of o)Be({node:N,fulfilsCriteria:F=>F.startDate===Fe()&&F.startTime,applyFunc:F=>y.push(F)})}function Y(){t(1,k=[]);for(const N of o)Be({node:N,fulfilsCriteria:F=>F.startDate&&F.startTime&&F.startDate>Fe(),applyFunc:F=>k.push(F)})}async function M(N){for(const F of o)Be({node:F,fulfilsCriteria:J=>J.name===N,applyFunc:J=>J.isDone=!J.isDone});await Oe(De(ye,r),{allTasks:o}),t(0,o=[...o])}async function j(N){console.log("deleteSubtree =",N),Be({node:{name:"root",children:o},fulfilsCriteria:J=>J.children.filter(x=>x.name===N).length>=1,applyFunc:J=>{let x=null;for(let le=0;le<J.children.length;le++)if(J.children[le].name===N){x=le;break}x>=0&&J.children.splice(x,1)}}),await Oe(De(ye,r),{allTasks:o}),t(0,o=[...o])}async function q(){Be({node:{name:"root",children:o},fulfilsCriteria:F=>F.startDate<v&&!F.isDone,applyFunc:F=>{F.startDate="",F.startTime=""}})}async function ee({taskName:N,timeOfDay:F,dateScheduled:J}){function x(le){if(le.name===N)return le.startTime=F,le.startDate=J,!0;for(const X of le.children)if(x(X))return!0;return!1}for(const le of o)if(x(le)){console.log("successfully mutated allTasks, =",o);break}await Oe(De(ye,r),{allTasks:o}),t(0,o=[...o])}async function V({taskName:N,duration:F}){function J(x){if(x.name===N)return x.duration=F,!0;for(const le of x.children)if(J(le))return!0;return!1}for(const x of o)if(J(x)){console.log("successfully mutated allTasks, =",o);break}await Oe(De(ye,r),{allTasks:o}),t(0,o=[...o])}async function re(){const N=await Ht(De(ye,r));t(0,o=N.data().allTasks),t(20,h=N.data().lastRanRepeatAtDate)}re();function _e(N){N.charCode===13&&$()}function $(){m||alert("You have to type something first");const N=[...o,{name:m,duration:15,children:[]}];Oe(De(ye,r),{allTasks:N}),t(0,o=[...N]),t(5,m="")}function pe(N,F){const{updatedChildren:J}=N.detail;F.children=[...J],Oe(De(ye,r),{allTasks:o}),t(0,o=[...o])}function Te(){console.log("updateFirestore()"),Oe(De(ye,r),{allTasks:o}),t(0,o=[...o])}const se=()=>t(8,g=!1),Me=()=>M(O.name),je=()=>j(O.name),ie=N=>B(N.detail),Ue=(N,F)=>pe(F,N),Ce=()=>t(6,_=!0);function ae(){m=this.value,t(5,m)}const me=()=>t(7,D=!0),Z=()=>t(7,D=!1),Ke=N=>M(N.detail.taskName),C=N=>ee(N.detail),U=N=>V(N.detail),Q=N=>B(N.detail),Ve=N=>V(N.detail),ze=N=>B(N.detail);function Ae(N){Lt[N?"unshift":"push"](()=>{i=N,t(2,i)})}return s.$$set=N=>{"userID"in N&&t(19,l=N.userID)},s.$$.update=()=>{if(s.$$.dirty[0]&1048579&&o&&(console.log("collecting scheduled tasks to be displayed..."),G(),Y(),k.sort((N,F)=>{const J=new Date(N.startDate),x=new Date(F.startDate);return J.getTime()-x.getTime()}),o.sort((N,F)=>!!N.isDone-!!F.isDone),h!==v)){let J=function(X){X.repeatsOnDaysOfWeek&&X.repeatsOnDaysOfWeek[N.getDay()]&&X.lastCompletionDate!==v&&(X.isDone=!1,X.startDate=v,X.startTime||F.push(X));for(const he of X.children)J(he)},x=function(X){if(X.daysBeforeRepeating){const he=new Date(`node.lastCompletionDate/${2022}`),Ye=new Date().getTime()-he.getTime();Math.ceil(Ye/(1e3*3600*24))>=X.daysBeforeRepeating&&(X.isDone=!1,X.startDate=v,X.startTime||F.push(X))}for(const he of X.children)x(he)};console.log("new day, running repeat algorithm and process un-finished tasks"),q();const N=new Date,F=[];for(const X of o)J(X);for(const X of o)x(X);console.log("pool for resolve conflict =",F);let le=1440;for(const X of F){le-=X.duration||5;const he=le/60,Ne=parseInt(he),Ye=he-Ne,qe=Ne;let He=Math.round(Ye*60);He<10&&(He=`0${He}`),X.startTime=`${qe}:${He}`,console.log(`habit ${X.name} starts =`,X.startTime)}Oe(De(ye,r),{allTasks:o,lastRanRepeatAtDate:v}),t(0,o=[...o])}},[o,k,i,u,y,m,_,D,g,O,B,w,M,j,ee,V,_e,pe,Te,l,h,se,Me,je,ie,Ue,Ce,ae,me,Z,Ke,C,U,Q,Ve,ze,Ae]}class Il extends Se{constructor(e){super();Re(this,e,bl,gl,we,{userID:19},null,[-1,-1])}}export{Il as default,wl as load};
