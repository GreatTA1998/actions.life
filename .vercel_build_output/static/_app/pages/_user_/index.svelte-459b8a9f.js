var wt=Object.defineProperty;var Ke=Object.getOwnPropertySymbols;var Et=Object.prototype.hasOwnProperty,It=Object.prototype.propertyIsEnumerable;var Ye=(l,e,t)=>e in l?wt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Ge=(l,e)=>{for(var t in e||(e={}))Et.call(e,t)&&Ye(l,t,e[t]);if(Ke)for(var t of Ke(e))It.call(e,t)&&Ye(l,t,e[t]);return l};import{S as Se,i as Re,s as We,t as H,h as L,g as V,d as h,k as P,m as M,j as ce,e as w,w as ke,c as E,a as I,x as ge,f as d,y as ve,Q as _,q as z,o as G,B as be,b as S,_ as Q,n as he,p as pe,$ as Ce,X as oe,Y as A,Z as _e,l as de,a0 as Me,a1 as Nt,R as qe,a2 as Vt,a3 as Be,F as jt,G as St,H as Rt,I as Wt,v as Ct,a4 as Ie,N as Oe,M as Bt,W as zt}from"../../chunks/vendor-28ca87d0.js";import{d as Te}from"../../chunks/db-00a3d57f.js";function Ue(){const l=new Date;let e=l.getDate(),t=l.getMonth()+1;return e<10&&(e="0"+e),t<10&&(t="0"+t),`${t}/${e}`}function Xe(l,e,t){const s=l.slice();return s[1]=e[t],s}function Je(l){let e;return{c(){e=H("(Repeats)")},l(t){e=L(t,"(Repeats)")},m(t,s){V(t,e,s)},d(t){t&&h(e)}}}function Qe(l){let e;return{c(){e=H("(Completed)")},l(t){e=L(t,"(Completed)")},m(t,s){V(t,e,s)},d(t){t&&h(e)}}}function Ze(l){let e,t=l[0].startDate+"",s,n,a=l[0].startTime+"",i,r;return{c(){e=H("("),s=H(t),n=P(),i=H(a),r=H(")")},l(c){e=L(c,"("),s=L(c,t),n=M(c),i=L(c,a),r=L(c,")")},m(c,f){V(c,e,f),V(c,s,f),V(c,n,f),V(c,i,f),V(c,r,f)},p(c,f){f&1&&t!==(t=c[0].startDate+"")&&ce(s,t),f&1&&a!==(a=c[0].startTime+"")&&ce(i,a)},d(c){c&&h(e),c&&h(s),c&&h(n),c&&h(i),c&&h(r)}}}function $e(l){let e,t,s,n;return t=new xe({props:{taskObject:l[1]}}),{c(){e=w("div"),ke(t.$$.fragment),s=P(),this.h()},l(a){e=E(a,"DIV",{style:!0});var i=I(e);ge(t.$$.fragment,i),s=M(i),i.forEach(h),this.h()},h(){d(e,"margin-left","12px")},m(a,i){V(a,e,i),ve(t,e,null),_(e,s),n=!0},p(a,i){const r={};i&1&&(r.taskObject=a[1]),t.$set(r)},i(a){n||(z(t.$$.fragment,a),n=!0)},o(a){G(t.$$.fragment,a),n=!1},d(a){a&&h(e),be(t)}}}function Ft(l){let e,t=l[0].name+"",s,n,a,i,r,c,f=l[0].isRepeating&&Je(),o=l[0].isDone&&Qe(),u=l[0].startDate&&l[0].startTime&&Ze(l),m=l[0].children,g=[];for(let p=0;p<m.length;p+=1)g[p]=$e(Xe(l,m,p));const D=p=>G(g[p],1,1,()=>{g[p]=null});return{c(){e=w("div"),s=H(t),n=P(),f&&f.c(),a=P(),o&&o.c(),i=P(),u&&u.c(),r=P();for(let p=0;p<g.length;p+=1)g[p].c();this.h()},l(p){e=E(p,"DIV",{class:!0});var k=I(e);s=L(k,t),n=M(k),f&&f.l(k),a=M(k),o&&o.l(k),i=M(k),u&&u.l(k),r=M(k);for(let O=0;O<g.length;O+=1)g[O].l(k);k.forEach(h),this.h()},h(){S(e,"class","svelte-10bdwqk"),Q(e,"task-completed",l[0].isDone),Q(e,"task-scheduled",l[0].startDate&&l[0].startTime)},m(p,k){V(p,e,k),_(e,s),_(e,n),f&&f.m(e,null),_(e,a),o&&o.m(e,null),_(e,i),u&&u.m(e,null),_(e,r);for(let O=0;O<g.length;O+=1)g[O].m(e,null);c=!0},p(p,[k]){if((!c||k&1)&&t!==(t=p[0].name+"")&&ce(s,t),p[0].isRepeating?f||(f=Je(),f.c(),f.m(e,a)):f&&(f.d(1),f=null),p[0].isDone?o||(o=Qe(),o.c(),o.m(e,i)):o&&(o.d(1),o=null),p[0].startDate&&p[0].startTime?u?u.p(p,k):(u=Ze(p),u.c(),u.m(e,r)):u&&(u.d(1),u=null),k&1){m=p[0].children;let O;for(O=0;O<m.length;O+=1){const N=Xe(p,m,O);g[O]?(g[O].p(N,k),z(g[O],1)):(g[O]=$e(N),g[O].c(),z(g[O],1),g[O].m(e,null))}for(he(),O=m.length;O<g.length;O+=1)D(O);pe()}k&1&&Q(e,"task-completed",p[0].isDone),k&1&&Q(e,"task-scheduled",p[0].startDate&&p[0].startTime)},i(p){if(!c){for(let k=0;k<m.length;k+=1)z(g[k]);c=!0}},o(p){g=g.filter(Boolean);for(let k=0;k<g.length;k+=1)G(g[k]);c=!1},d(p){p&&h(e),f&&f.d(),o&&o.d(),u&&u.d(),Ce(g,p)}}}function Ut(l,e,t){let{taskObject:s}=e;return l.$$set=n=>{"taskObject"in n&&t(0,s=n.taskObject)},[s]}class xe extends Se{constructor(e){super();Re(this,e,Ut,Ft,We,{taskObject:0})}}function et(l,e,t){const s=l.slice();return s[30]=e[t],s}function tt(l){let e,t,s,n=l[0].name+"",a,i,r,c,f,o,u,m,g,D,p,k,O,N,v,y,q,T,K,B,R,U,Z,se,le,F,X,ae,W=!l[0].isDone&&l[0].startTime&&l[0].startDate&&lt(l);function Y(C,b){if(C[0].daysBeforeRepeating)return Mt;if(C[0].repeatsOnDaysOfWeek)return Pt}let re=Y(l),ee=re&&re(l);function me(C,b){return C[4]?qt:At}let De=me(l),ie=De(l);function Ve(C,b){return C[5]?Ht:Lt}let ze=Ve(l),fe=ze(l),ye=l[0].children,x=[];for(let C=0;C<ye.length;C+=1)x[C]=st(et(l,ye,C));const Ae=C=>G(x[C],1,1,()=>{x[C]=null});return{c(){e=w("div"),t=w("div"),s=w("div"),a=H(n),i=P(),r=w("span"),c=H("close"),f=P(),o=w("div"),W&&W.c(),u=P(),m=w("div"),ee&&ee.c(),g=P(),D=w("textarea"),p=P(),k=w("div"),O=w("div"),ie.c(),N=P(),fe.c(),v=P(),y=w("div"),q=w("button"),T=H("Delete"),K=P(),B=w("button"),R=H("Done"),U=P(),Z=w("div"),se=H("Full task history"),le=P();for(let C=0;C<x.length;C+=1)x[C].c();this.h()},l(C){e=E(C,"DIV",{class:!0});var b=I(e);t=E(b,"DIV",{style:!0});var j=I(t);s=E(j,"DIV",{class:!0,style:!0});var $=I(s);a=L($,n),$.forEach(h),i=M(j),r=E(j,"SPAN",{class:!0,style:!0});var te=I(r);c=L(te,"close"),te.forEach(h),j.forEach(h),f=M(b),o=E(b,"DIV",{class:!0,style:!0});var ne=I(o);W&&W.l(ne),ne.forEach(h),u=M(b),m=E(b,"DIV",{class:!0,style:!0});var J=I(m);ee&&ee.l(J),J.forEach(h),g=M(b),D=E(b,"TEXTAREA",{cols:!0,placeholder:!0,style:!0}),I(D).forEach(h),p=M(b),k=E(b,"DIV",{style:!0});var ue=I(k);O=E(ue,"DIV",{});var we=I(O);ie.l(we),N=M(we),fe.l(we),we.forEach(h),v=M(ue),y=E(ue,"DIV",{style:!0});var Ee=I(y);q=E(Ee,"BUTTON",{});var Fe=I(q);T=L(Fe,"Delete"),Fe.forEach(h),K=M(Ee),B=E(Ee,"BUTTON",{});var je=I(B);R=L(je,"Done"),je.forEach(h),Ee.forEach(h),ue.forEach(h),U=M(b),Z=E(b,"DIV",{style:!0});var Le=I(Z);se=L(Le,"Full task history"),Le.forEach(h),le=M(b);for(let He=0;He<x.length;He+=1)x[He].l(b);b.forEach(h),this.h()},h(){S(s,"class","google-calendar-event-title svelte-1382weo"),d(s,"margin-top","10px"),d(s,"margin-left","10px"),S(r,"class","material-icons"),d(r,"margin-left","auto"),d(r,"margin-right","0"),d(t,"display","flex"),S(o,"class","google-calendar-event-time svelte-1382weo"),d(o,"margin-top","4px"),d(o,"margin-left","10px"),S(m,"class","google-calendar-event-detail svelte-1382weo"),d(m,"margin-top","12px"),d(m,"margin-left","16px"),S(D,"cols","48"),S(D,"placeholder","notes"),d(D,"margin-left","10px"),d(y,"margin-left","auto"),d(y,"margin-right","16px"),d(k,"display","flex"),d(k,"margin-left","10px"),d(Z,"font-size","1rem"),d(Z,"margin-top","12px"),d(Z,"margin-left","12px"),S(e,"class","detailed-card svelte-1382weo")},m(C,b){V(C,e,b),_(e,t),_(t,s),_(s,a),_(t,i),_(t,r),_(r,c),_(e,f),_(e,o),W&&W.m(o,null),_(e,u),_(e,m),ee&&ee.m(m,null),_(e,g),_(e,D),oe(D,l[7]),_(e,p),_(e,k),_(k,O),ie.m(O,null),_(O,N),fe.m(O,null),_(k,v),_(k,y),_(y,q),_(q,T),_(y,K),_(y,B),_(B,R),_(e,U),_(e,Z),_(Z,se),_(e,le);for(let j=0;j<x.length;j+=1)x[j].m(e,null);F=!0,X||(ae=[A(r,"click",l[13]),A(D,"input",l[14]),A(D,"input",l[9]),A(q,"click",l[27]),A(B,"click",l[28])],X=!0)},p(C,b){if((!F||b[0]&1)&&n!==(n=C[0].name+"")&&ce(a,n),!C[0].isDone&&C[0].startTime&&C[0].startDate?W?W.p(C,b):(W=lt(C),W.c(),W.m(o,null)):W&&(W.d(1),W=null),re===(re=Y(C))&&ee?ee.p(C,b):(ee&&ee.d(1),ee=re&&re(C),ee&&(ee.c(),ee.m(m,null))),b[0]&128&&oe(D,C[7]),De===(De=me(C))&&ie?ie.p(C,b):(ie.d(1),ie=De(C),ie&&(ie.c(),ie.m(O,N))),ze===(ze=Ve(C))&&fe?fe.p(C,b):(fe.d(1),fe=ze(C),fe&&(fe.c(),fe.m(O,null))),b[0]&1){ye=C[0].children;let j;for(j=0;j<ye.length;j+=1){const $=et(C,ye,j);x[j]?(x[j].p($,b),z(x[j],1)):(x[j]=st($),x[j].c(),z(x[j],1),x[j].m(e,null))}for(he(),j=ye.length;j<x.length;j+=1)Ae(j);pe()}},i(C){if(!F){for(let b=0;b<ye.length;b+=1)z(x[b]);F=!0}},o(C){x=x.filter(Boolean);for(let b=0;b<x.length;b+=1)G(x[b]);F=!1},d(C){C&&h(e),W&&W.d(),ee&&ee.d(),ie.d(),fe.d(),Ce(x,C),X=!1,_e(ae)}}}function lt(l){let e,t=l[0].startDate+" "+l[0].startTime+"",s;return{c(){e=H("Scheduled for "),s=H(t)},l(n){e=L(n,"Scheduled for "),s=L(n,t)},m(n,a){V(n,e,a),V(n,s,a)},p(n,a){a[0]&1&&t!==(t=n[0].startDate+" "+n[0].startTime+"")&&ce(s,t)},d(n){n&&h(e),n&&h(s)}}}function Pt(l){let e,t=l[0].repeatsOnDaysOfWeek+"",s;return{c(){e=H("Repeats "),s=H(t)},l(n){e=L(n,"Repeats "),s=L(n,t)},m(n,a){V(n,e,a),V(n,s,a)},p(n,a){a[0]&1&&t!==(t=n[0].repeatsOnDaysOfWeek+"")&&ce(s,t)},d(n){n&&h(e),n&&h(s)}}}function Mt(l){let e,t=l[0].daysBeforeRepeating+"",s,n,a=(l[0].completionCount||0)+"",i,r;return{c(){e=H("Repeats every "),s=H(t),n=H(" days, completed "),i=H(a),r=H(" times")},l(c){e=L(c,"Repeats every "),s=L(c,t),n=L(c," days, completed "),i=L(c,a),r=L(c," times")},m(c,f){V(c,e,f),V(c,s,f),V(c,n,f),V(c,i,f),V(c,r,f)},p(c,f){f[0]&1&&t!==(t=c[0].daysBeforeRepeating+"")&&ce(s,t),f[0]&1&&a!==(a=(c[0].completionCount||0)+"")&&ce(i,a)},d(c){c&&h(e),c&&h(s),c&&h(n),c&&h(i),c&&h(r)}}}function qt(l){let e,t,s,n,a;return{c(){e=w("input"),t=P(),s=w("input"),this.h()},l(i){e=E(i,"INPUT",{placeholder:!0,style:!0}),t=M(i),s=E(i,"INPUT",{placeholder:!0,style:!0}),this.h()},h(){S(e,"placeholder","12/31"),d(e,"width","40px"),S(s,"placeholder","19:45"),d(s,"width","40px")},m(i,r){V(i,e,r),oe(e,l[2]),V(i,t,r),V(i,s,r),oe(s,l[3]),n||(a=[A(e,"input",l[16]),A(s,"input",l[17]),A(s,"keypress",l[12])],n=!0)},p(i,r){r[0]&4&&e.value!==i[2]&&oe(e,i[2]),r[0]&8&&s.value!==i[3]&&oe(s,i[3])},d(i){i&&h(e),i&&h(t),i&&h(s),n=!1,_e(a)}}}function At(l){let e,t,s,n;return{c(){e=w("button"),t=H("Schedule")},l(a){e=E(a,"BUTTON",{});var i=I(e);t=L(i,"Schedule"),i.forEach(h)},m(a,i){V(a,e,i),_(e,t),s||(n=A(e,"click",l[15]),s=!0)},p:qe,d(a){a&&h(e),s=!1,n()}}}function Ht(l){let e,t,s,n,a,i,r,c,f,o,u,m,g,D,p,k,O,N,v,y,q,T,K,B,R,U,Z,se,le;return{c(){e=w("div"),t=H("Repeats every "),s=w("input"),n=H(" days"),a=P(),i=w("div"),r=w("div"),c=w("button"),f=H("M"),o=P(),u=w("button"),m=H("T"),g=P(),D=w("button"),p=H("W"),k=P(),O=w("button"),N=H("R"),v=P(),y=w("button"),q=H("F"),T=P(),K=w("button"),B=H("S"),R=P(),U=w("button"),Z=H("S"),this.h()},l(F){e=E(F,"DIV",{style:!0});var X=I(e);t=L(X,"Repeats every "),s=E(X,"INPUT",{style:!0,placeholder:!0}),n=L(X," days"),X.forEach(h),a=M(F),i=E(F,"DIV",{style:!0});var ae=I(i);r=E(ae,"DIV",{});var W=I(r);c=E(W,"BUTTON",{class:!0});var Y=I(c);f=L(Y,"M"),Y.forEach(h),o=M(W),u=E(W,"BUTTON",{class:!0});var re=I(u);m=L(re,"T"),re.forEach(h),g=M(W),D=E(W,"BUTTON",{class:!0});var ee=I(D);p=L(ee,"W"),ee.forEach(h),k=M(W),O=E(W,"BUTTON",{class:!0});var me=I(O);N=L(me,"R"),me.forEach(h),v=M(W),y=E(W,"BUTTON",{class:!0});var De=I(y);q=L(De,"F"),De.forEach(h),T=M(W),K=E(W,"BUTTON",{class:!0});var ie=I(K);B=L(ie,"S"),ie.forEach(h),R=M(W),U=E(W,"BUTTON",{class:!0});var Ve=I(U);Z=L(Ve,"S"),Ve.forEach(h),W.forEach(h),ae.forEach(h),this.h()},h(){d(s,"width","20px"),S(s,"placeholder","0"),d(e,"display","flex"),S(c,"class","svelte-1382weo"),Q(c,"selected",l[0].repeatsOnDaysOfWeek&&l[0].repeatsOnDaysOfWeek[0]),S(u,"class","svelte-1382weo"),Q(u,"selected",l[0].repeatsOnDaysOfWeek&&l[0].repeatsOnDaysOfWeek[1]),S(D,"class","svelte-1382weo"),Q(D,"selected",l[0].repeatsOnDaysOfWeek&&l[0].repeatsOnDaysOfWeek[2]),S(O,"class","svelte-1382weo"),Q(O,"selected",l[0].repeatsOnDaysOfWeek&&l[0].repeatsOnDaysOfWeek[3]),S(y,"class","svelte-1382weo"),Q(y,"selected",l[0].repeatsOnDaysOfWeek&&l[0].repeatsOnDaysOfWeek[4]),S(K,"class","svelte-1382weo"),Q(K,"selected",l[0].repeatsOnDaysOfWeek&&l[0].repeatsOnDaysOfWeek[5]),S(U,"class","svelte-1382weo"),Q(U,"selected",l[0].repeatsOnDaysOfWeek&&l[0].repeatsOnDaysOfWeek[6]),d(i,"display","flex")},m(F,X){V(F,e,X),_(e,t),_(e,s),oe(s,l[6]),_(e,n),V(F,a,X),V(F,i,X),_(i,r),_(r,c),_(c,f),_(r,o),_(r,u),_(u,m),_(r,g),_(r,D),_(D,p),_(r,k),_(r,O),_(O,N),_(r,v),_(r,y),_(y,q),_(r,T),_(r,K),_(K,B),_(r,R),_(r,U),_(U,Z),se||(le=[A(s,"input",l[19]),A(s,"keypress",l[11]),A(c,"click",l[20]),A(u,"click",l[21]),A(D,"click",l[22]),A(O,"click",l[23]),A(y,"click",l[24]),A(K,"click",l[25]),A(U,"click",l[26])],se=!0)},p(F,X){X[0]&64&&s.value!==F[6]&&oe(s,F[6]),X[0]&1&&Q(c,"selected",F[0].repeatsOnDaysOfWeek&&F[0].repeatsOnDaysOfWeek[0]),X[0]&1&&Q(u,"selected",F[0].repeatsOnDaysOfWeek&&F[0].repeatsOnDaysOfWeek[1]),X[0]&1&&Q(D,"selected",F[0].repeatsOnDaysOfWeek&&F[0].repeatsOnDaysOfWeek[2]),X[0]&1&&Q(O,"selected",F[0].repeatsOnDaysOfWeek&&F[0].repeatsOnDaysOfWeek[3]),X[0]&1&&Q(y,"selected",F[0].repeatsOnDaysOfWeek&&F[0].repeatsOnDaysOfWeek[4]),X[0]&1&&Q(K,"selected",F[0].repeatsOnDaysOfWeek&&F[0].repeatsOnDaysOfWeek[5]),X[0]&1&&Q(U,"selected",F[0].repeatsOnDaysOfWeek&&F[0].repeatsOnDaysOfWeek[6])},d(F){F&&h(e),F&&h(a),F&&h(i),se=!1,_e(le)}}}function Lt(l){let e,t,s,n;return{c(){e=w("button"),t=H("Repeat task"),this.h()},l(a){e=E(a,"BUTTON",{style:!0});var i=I(e);t=L(i,"Repeat task"),i.forEach(h),this.h()},h(){d(e,"margin-left","0px")},m(a,i){V(a,e,i),_(e,t),s||(n=A(e,"click",l[18]),s=!0)},p:qe,d(a){a&&h(e),s=!1,n()}}}function st(l){let e,t,s,n;return t=new xe({props:{taskObject:l[30]}}),{c(){e=w("div"),ke(t.$$.fragment),s=P(),this.h()},l(a){e=E(a,"DIV",{style:!0});var i=I(e);ge(t.$$.fragment,i),s=M(i),i.forEach(h),this.h()},h(){d(e,"margin-left","12px")},m(a,i){V(a,e,i),ve(t,e,null),_(e,s),n=!0},p(a,i){const r={};i[0]&1&&(r.taskObject=a[30]),t.$set(r)},i(a){n||(z(t.$$.fragment,a),n=!0)},o(a){G(t.$$.fragment,a),n=!1},d(a){a&&h(e),be(t)}}}function Kt(l){let e,t,s=l[1]&&tt(l);return{c(){s&&s.c(),e=de()},l(n){s&&s.l(n),e=de()},m(n,a){s&&s.m(n,a),V(n,e,a),t=!0},p(n,a){n[1]?s?(s.p(n,a),a[0]&2&&z(s,1)):(s=tt(n),s.c(),z(s,1),s.m(e.parentNode,e)):s&&(he(),G(s,1,1,()=>{s=null}),pe())},i(n){t||(z(s),t=!0)},o(n){G(s),t=!1},d(n){s&&s.d(n),n&&h(e)}}}function Yt(l,e,t){let{taskObject:s}=e,{isOpen:n=!1}=e,a,i,r=!1,c=!1,f=7;const o=Me();let u=s.notes||"";const m=Nt.throttle(W=>{t(7,u=W.target.value),D()},500);function g({dayNumber:W}){s.repeatsOnDaysOfWeek||t(0,s.repeatsOnDaysOfWeek=[!1,!1,!1,!1,!1,!1,!1],s),t(0,s.repeatsOnDaysOfWeek[W-1]=!s.repeatsOnDaysOfWeek[W-1],s),o("task-repeat")}function D(){t(0,s.notes=u,s),o("task-notes-update")}function p(W){W.charCode===13&&(f?t(0,s.daysBeforeRepeating=f,s):(alert("Task is reset and will no longer repeat"),t(0,s.daysBeforeRepeating=0,s)),o("task-repeat"),t(6,f=0),t(5,c=!1))}function k(W){W.charCode===13&&(!a||!i?alert("Need BOTH date and time"):(t(0,s.startDate=a,s),t(0,s.startTime=i,s)),o("task-schedule"),t(2,a=""),t(3,i=""))}const O=()=>o("card-close");function N(){u=this.value,t(7,u)}const v=()=>t(4,r=!0);function y(){a=this.value,t(2,a)}function q(){i=this.value,t(3,i)}const T=()=>t(5,c=!0);function K(){f=this.value,t(6,f)}const B=()=>g({dayNumber:1}),R=()=>g({dayNumber:2}),U=()=>g({dayNumber:3}),Z=()=>g({dayNumber:4}),se=()=>g({dayNumber:5}),le=()=>g({dayNumber:6}),F=()=>g({dayNumber:7}),X=()=>o("task-delete"),ae=()=>o("task-done");return l.$$set=W=>{"taskObject"in W&&t(0,s=W.taskObject),"isOpen"in W&&t(1,n=W.isOpen)},[s,n,a,i,r,c,f,u,o,m,g,p,k,O,N,v,y,q,T,K,B,R,U,Z,se,le,F,X,ae]}class nt extends Se{constructor(e){super();Re(this,e,Yt,Kt,We,{taskObject:0,isOpen:1},null,[-1,-1])}}function at(l,e,t){const s=l.slice();return s[36]=e[t],s[38]=t,s}function rt(l){let e,t,s,n,a,i,r,c,f,o,u;function m(v,y){return v[3]?Gt:Xt}let g=m(l),D=g(l);a=new nt({props:{isOpen:l[2],taskObject:l[0]}}),a.$on("card-close",l[18]),a.$on("task-done",l[15]),a.$on("task-notes-update",l[19]),a.$on("task-repeat",l[20]),a.$on("task-schedule",l[21]);let p=l[0].children,k=[];for(let v=0;v<p.length;v+=1)k[v]=it(at(l,p,v));const O=v=>G(k[v],1,1,()=>{k[v]=null});let N=l[5]&&ot(l);return{c(){e=w("div"),t=w("div"),s=w("div"),D.c(),n=P(),ke(a.$$.fragment),i=P(),r=w("div");for(let v=0;v<k.length;v+=1)k[v].c();c=P(),N&&N.c(),this.h()},l(v){e=E(v,"DIV",{draggable:!0,class:!0,style:!0});var y=I(e);t=E(y,"DIV",{class:!0});var q=I(t);s=E(q,"DIV",{style:!0,class:!0});var T=I(s);D.l(T),T.forEach(h),n=M(q),ge(a.$$.fragment,q),q.forEach(h),i=M(y),r=E(y,"DIV",{style:!0});var K=I(r);for(let B=0;B<k.length;B+=1)k[B].l(K);c=M(K),N&&N.l(K),K.forEach(h),y.forEach(h),this.h()},h(){d(s,"font-size",1.5*.85**l[1]+"rem"),d(s,"font-family","aktiv-grotesk, sans-serif"),S(s,"class","keep-on-same-line name-of-task svelte-t4v7r0"),Q(s,"scheduled-orange",!l[0].isDone&&l[0].startTime&&l[0].startDate),Q(s,"crossed-out",l[0].isDone),S(t,"class","current-task-flexbox svelte-t4v7r0"),d(r,"margin-top",20*.7**l[1]+"px"),S(e,"draggable","true"),S(e,"class","scheduled-task svelte-t4v7r0"),d(e,"margin-left",(l[1]===1?"0":"20")+"px"),d(e,"margin-bottom","10px"),d(e,"width",350*.8**l[1]+"px"),d(e,"height",l[0].duration&&!l[8]&&l[0].duration*90/60>l[0].children.length*60*.7**l[1]&&l[0].duration*90/60>60*.65**l[1]?`${l[0].duration*90/60}px`:"100%"),d(e,"padding-left",10*.8**l[1]+"px"),Q(e,"black-duration-line",!l[0].isDone&&!(l[0].startTime&&l[0].startDate)),Q(e,"orange-duration-line",!l[0].isDone&&l[0].startTime&&l[0].startDate),Q(e,"green-duration-line",l[0].isDone)},m(v,y){V(v,e,y),_(e,t),_(t,s),D.m(s,null),_(t,n),ve(a,t,null),_(e,i),_(e,r);for(let q=0;q<k.length;q+=1)k[q].m(r,null);_(r,c),N&&N.m(r,null),f=!0,o||(u=[A(e,"dragstart",Vt(l[28])),A(e,"pointerleave",l[14])],o=!0)},p(v,y){g===(g=m(v))&&D?D.p(v,y):(D.d(1),D=g(v),D&&(D.c(),D.m(s,null))),(!f||y[0]&2)&&d(s,"font-size",1.5*.85**v[1]+"rem"),y[0]&1&&Q(s,"scheduled-orange",!v[0].isDone&&v[0].startTime&&v[0].startDate),y[0]&1&&Q(s,"crossed-out",v[0].isDone);const q={};if(y[0]&4&&(q.isOpen=v[2]),y[0]&1&&(q.taskObject=v[0]),a.$set(q),y[0]&1027){p=v[0].children;let T;for(T=0;T<p.length;T+=1){const K=at(v,p,T);k[T]?(k[T].p(K,y),z(k[T],1)):(k[T]=it(K),k[T].c(),z(k[T],1),k[T].m(r,c))}for(he(),T=p.length;T<k.length;T+=1)O(T);pe()}v[5]?N?N.p(v,y):(N=ot(v),N.c(),N.m(r,null)):N&&(N.d(1),N=null),(!f||y[0]&2)&&d(r,"margin-top",20*.7**v[1]+"px"),(!f||y[0]&2)&&d(e,"margin-left",(v[1]===1?"0":"20")+"px"),(!f||y[0]&2)&&d(e,"width",350*.8**v[1]+"px"),(!f||y[0]&259)&&d(e,"height",v[0].duration&&!v[8]&&v[0].duration*90/60>v[0].children.length*60*.7**v[1]&&v[0].duration*90/60>60*.65**v[1]?`${v[0].duration*90/60}px`:"100%"),(!f||y[0]&2)&&d(e,"padding-left",10*.8**v[1]+"px"),y[0]&1&&Q(e,"black-duration-line",!v[0].isDone&&!(v[0].startTime&&v[0].startDate)),y[0]&1&&Q(e,"orange-duration-line",!v[0].isDone&&v[0].startTime&&v[0].startDate),y[0]&1&&Q(e,"green-duration-line",v[0].isDone)},i(v){if(!f){z(a.$$.fragment,v);for(let y=0;y<p.length;y+=1)z(k[y]);f=!0}},o(v){G(a.$$.fragment,v),k=k.filter(Boolean);for(let y=0;y<k.length;y+=1)G(k[y]);f=!1},d(v){v&&h(e),D.d(),be(a),Ce(k,v),N&&N.d(),o=!1,_e(u)}}}function Gt(l){let e,t,s;return{c(){e=w("input")},l(n){e=E(n,"INPUT",{})},m(n,a){V(n,e,a),oe(e,l[4]),t||(s=[A(e,"input",l[17]),A(e,"keypress",l[12])],t=!0)},p(n,a){a[0]&16&&e.value!==n[4]&&oe(e,n[4])},d(n){n&&h(e),t=!1,_e(s)}}}function Xt(l){let e,t=l[0].name+"",s,n,a;return{c(){e=w("div"),s=H(t),this.h()},l(i){e=E(i,"DIV",{class:!0,style:!0});var r=I(e);s=L(r,t),r.forEach(h),this.h()},h(){S(e,"class","truncate svelte-t4v7r0"),d(e,"width",350*.85**l[1]+"px")},m(i,r){V(i,e,r),_(e,s),n||(a=[A(e,"click",l[16]),A(e,"pointerenter",l[13])],n=!0)},p(i,r){r[0]&1&&t!==(t=i[0].name+"")&&ce(s,t),r[0]&2&&d(e,"width",350*.85**i[1]+"px")},d(i){i&&h(e),n=!1,_e(a)}}}function it(l){let e,t;function s(...n){return l[22](l[38],...n)}return e=new ft({props:{taskObject:l[36],depth:l[1]+1}}),e.$on("task-create",s),e.$on("task-done",l[23]),e.$on("task-delete",l[24]),e.$on("task-repeating",l[25]),{c(){ke(e.$$.fragment)},l(n){ge(e.$$.fragment,n)},m(n,a){ve(e,n,a),t=!0},p(n,a){l=n;const i={};a[0]&1&&(i.taskObject=l[36]),a[0]&2&&(i.depth=l[1]+1),e.$set(i)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}function ot(l){let e;function t(a,i){return a[6]?Jt:Qt}let s=t(l),n=s(l);return{c(){n.c(),e=de()},l(a){n.l(a),e=de()},m(a,i){n.m(a,i),V(a,e,i)},p(a,i){s===(s=t(a))&&n?n.p(a,i):(n.d(1),n=s(a),n&&(n.c(),n.m(e.parentNode,e)))},d(a){n.d(a),a&&h(e)}}}function Jt(l){let e,t,s,n;return{c(){e=w("div"),t=w("input"),this.h()},l(a){e=E(a,"DIV",{style:!0});var i=I(e);t=E(i,"INPUT",{placeholder:!0,style:!0}),i.forEach(h),this.h()},h(){S(t,"placeholder","Type sub-task"),d(t,"width","100%"),d(t,"margin-left","5px"),d(e,"display","flex"),d(e,"align-items","center"),d(e,"margin-left","20px")},m(a,i){V(a,e,i),_(e,t),oe(t,l[7]),s||(n=[A(t,"input",l[27]),A(t,"keypress",l[11])],s=!0)},p(a,i){i[0]&128&&t.value!==a[7]&&oe(t,a[7])},d(a){a&&h(e),s=!1,_e(n)}}}function Qt(l){let e,t,s,n,a;return{c(){e=w("div"),t=w("div"),s=H("new sub-task"),this.h()},l(i){e=E(i,"DIV",{style:!0});var r=I(e);t=E(r,"DIV",{style:!0});var c=I(t);s=L(c,"new sub-task"),c.forEach(h),r.forEach(h),this.h()},h(){d(t,"border-left","2px solid grey"),d(t,"color","grey"),d(t,"padding-left","5px"),d(t,"padding-bottom",8*.68**(l[1]+1)+"px"),d(t,"font-size",1.5*.85**(l[1]+1)+"rem"),d(e,"display","flex"),d(e,"align-items","center"),d(e,"margin-left","20px")},m(i,r){V(i,e,r),_(e,t),_(t,s),n||(a=A(t,"click",l[26]),n=!0)},p(i,r){r[0]&2&&d(t,"padding-bottom",8*.68**(i[1]+1)+"px"),r[0]&2&&d(t,"font-size",1.5*.85**(i[1]+1)+"rem")},d(i){i&&h(e),n=!1,a()}}}function Zt(l){let e,t,s=!l[0].isDeleted&&!l[0].isDone&&!(l[0].startTime&&l[0].startDate)&&rt(l);return{c(){s&&s.c(),e=de()},l(n){s&&s.l(n),e=de()},m(n,a){s&&s.m(n,a),V(n,e,a),t=!0},p(n,a){!n[0].isDeleted&&!n[0].isDone&&!(n[0].startTime&&n[0].startDate)?s?(s.p(n,a),a[0]&1&&z(s,1)):(s=rt(n),s.c(),z(s,1),s.m(e.parentNode,e)):s&&(he(),G(s,1,1,()=>{s=null}),pe())},i(n){t||(z(s),t=!0)},o(n){G(s),t=!1},d(n){s&&s.d(n),n&&h(e)}}}function $t(l,e){l.dataTransfer.setData("text/plain",e)}function xt(l,e,t){let s,{taskObject:n}=e,{depth:a}=e,i=!1;const r=Me();let c=!1,f="",o=!1,u=!1,m="";function g(Y,re){const ee=Ge({},n.children[re]);ee.children=Y.detail.updatedChildren;const me=[...n.children];me[re]=ee,O(me)}function D(Y){Y.charCode===13&&(m&&k(m),t(7,m=""),t(6,u=!1))}function p(Y){if(Y.charCode===13){if(!f){alert("Task name can't be empty.");return}t(0,n.name=f,n),r("task-done",{}),t(4,f=""),t(3,c=!1)}}function k(Y){O([...n.children,{name:Y,children:[]}])}function O(Y){r("task-create",{updatedChildren:Y})}function N(){t(5,o=!0)}function v(){t(5,o=!1)}function y(){t(0,n.isDone=!n.isDone,n),n.isRepeating&&(n.isDone?(t(0,n.completionCount=n.completionCount+1||1,n),t(0,n.lastCompletionDate=Ue(),n)):(t(0,n.completionCount=n.completionCount-1||0,n),t(0,n.lastCompletionDate="",n))),r("task-done",{})}const q=()=>t(2,i=!0);function T(){f=this.value,t(4,f)}const K=()=>t(2,i=!1),B=()=>r("task-done"),R=()=>r("task-done"),U=()=>r("task-done"),Z=(Y,re)=>g(re,Y);function se(Y){Be.call(this,l,Y)}function le(Y){Be.call(this,l,Y)}function F(Y){Be.call(this,l,Y)}const X=()=>t(6,u=!0);function ae(){m=this.value,t(7,m)}const W=Y=>$t(Y,n.name);return l.$$set=Y=>{"taskObject"in Y&&t(0,n=Y.taskObject),"depth"in Y&&t(1,a=Y.depth)},l.$$.update=()=>{l.$$.dirty[0]&1&&t(8,s=n.children.filter(Y=>Y.duration).length>0)},[n,a,i,c,f,o,u,m,s,r,g,D,p,N,v,y,q,T,K,B,R,U,Z,se,le,F,X,ae,W]}class ft extends Se{constructor(e){super();Re(this,e,xt,Zt,We,{taskObject:0,depth:1},null,[-1,-1])}}function el(l){let e,t,s;return{c(){e=w("div"),this.h()},l(n){e=E(n,"DIV",{style:!0,draggable:!0});var a=I(e);a.forEach(h),this.h()},h(){d(e,"height",l[3]-20-10+"px"),d(e,"width","11vw"),S(e,"draggable","true")},m(n,a){V(n,e,a),t||(s=A(e,"dragstart",l[14]),t=!0)},p(n,a){a&8&&d(e,"height",n[3]-20-10+"px")},d(n){n&&h(e),t=!1,s()}}}function tl(l){let e,t,s=l[4].name+"",n,a,i,r,c,f,o;const u=l[12].default,m=jt(u,l,l[11],null),g=m||el(l);return{c(){e=w("div"),t=w("div"),n=H(s),a=P(),g&&g.c(),i=P(),r=w("div"),this.h()},l(D){e=E(D,"DIV",{class:!0,style:!0});var p=I(e);t=E(p,"DIV",{draggable:!0,style:!0});var k=I(t);n=L(k,s),k.forEach(h),a=M(p),g&&g.l(p),i=M(p),r=E(p,"DIV",{draggable:!0,style:!0});var O=I(r);O.forEach(h),p.forEach(h),this.h()},h(){S(t,"draggable","true"),d(t,"width","11vw"),S(r,"draggable","true"),d(r,"height","8px"),d(r,"width","11vw"),d(r,"position","absolute"),d(r,"bottom","0"),d(r,"left","-3px"),d(r,"cursor","ns-resize"),S(e,"class","scheduled-task svelte-1ups3a0"),d(e,"top",l[1]+"px"),d(e,"height",l[3]+"px"),d(e,"left",l[2]+"px"),d(e,"font-size",l[0]+"rem")},m(D,p){V(D,e,p),_(e,t),_(t,n),_(e,a),g&&g.m(e,null),_(e,i),_(e,r),c=!0,f||(o=[A(t,"dragstart",l[13]),A(r,"dragstart",l[15]),A(r,"dragend",l[16]),A(e,"click",l[17])],f=!0)},p(D,[p]){(!c||p&16)&&s!==(s=D[4].name+"")&&ce(n,s),m?m.p&&(!c||p&2048)&&St(m,u,D,D[11],c?Wt(u,D[11],p,null):Rt(D[11]),null):g&&g.p&&(!c||p&24)&&g.p(D,c?p:-1),(!c||p&2)&&d(e,"top",D[1]+"px"),(!c||p&8)&&d(e,"height",D[3]+"px"),(!c||p&4)&&d(e,"left",D[2]+"px"),(!c||p&1)&&d(e,"font-size",D[0]+"rem")},i(D){c||(z(g,D),c=!0)},o(D){G(g,D),c=!1},d(D){D&&h(e),g&&g.d(D),f=!1,_e(o)}}}function ut(l,e){l.dataTransfer.setData("text/plain",e)}function ll(l,e,t){let{$$slots:s={},$$scope:n}=e,{fontSize:a=1}=e,{name:i=""}=e,{offsetFromTop:r}=e,{offsetFromLeft:c=0}=e,{height:f=15}=e,{duration:o=15}=e,{task:u=null}=e,{calendarStartTime:m=""}=e;const g=Me();let D=0;function p(T){D=T.offsetY}function k(T,K){K.duration||(K.duration=10);const B=60/90,R=(T.offsetY-D)*B;g("task-duration-adjusted",{taskName:K.name,duration:Math.max(1,K.duration+R)})}const O=T=>ut(T,u.name),N=T=>ut(T,u.name),v=T=>p(T),y=T=>k(T,u),q=()=>g("task-click",{task:u});return l.$$set=T=>{"fontSize"in T&&t(0,a=T.fontSize),"name"in T&&t(8,i=T.name),"offsetFromTop"in T&&t(1,r=T.offsetFromTop),"offsetFromLeft"in T&&t(2,c=T.offsetFromLeft),"height"in T&&t(3,f=T.height),"duration"in T&&t(9,o=T.duration),"task"in T&&t(4,u=T.task),"calendarStartTime"in T&&t(10,m=T.calendarStartTime),"$$scope"in T&&t(11,n=T.$$scope)},[a,r,c,f,u,g,p,k,i,o,m,n,s,O,N,v,y,q]}class ct extends Se{constructor(e){super();Re(this,e,ll,tl,We,{fontSize:0,name:8,offsetFromTop:1,offsetFromLeft:2,height:3,duration:9,task:4,calendarStartTime:10})}}function dt(l,e,t){const s=l.slice();return s[12]=e[t],s[14]=t,s}function ht(l,e,t){const s=l.slice();return s[15]=e[t],s[14]=t,s}function pt(l){let e,t,s,n=l[3],a=[];for(let f=0;f<n.length;f+=1)a[f]=_t(ht(l,n,f));let i=l[0],r=[];for(let f=0;f<i.length;f+=1)r[f]=mt(dt(l,i,f));const c=f=>G(r[f],1,1,()=>{r[f]=null});return{c(){for(let f=0;f<a.length;f+=1)a[f].c();e=P();for(let f=0;f<r.length;f+=1)r[f].c();t=de()},l(f){for(let o=0;o<a.length;o+=1)a[o].l(f);e=M(f);for(let o=0;o<r.length;o+=1)r[o].l(f);t=de()},m(f,o){for(let u=0;u<a.length;u+=1)a[u].m(f,o);V(f,e,o);for(let u=0;u<r.length;u+=1)r[u].m(f,o);V(f,t,o),s=!0},p(f,o){if(o&8){n=f[3];let u;for(u=0;u<n.length;u+=1){const m=ht(f,n,u);a[u]?a[u].p(m,o):(a[u]=_t(m),a[u].c(),a[u].m(e.parentNode,e))}for(;u<a.length;u+=1)a[u].d(1);a.length=n.length}if(o&49){i=f[0];let u;for(u=0;u<i.length;u+=1){const m=dt(f,i,u);r[u]?(r[u].p(m,o),z(r[u],1)):(r[u]=mt(m),r[u].c(),z(r[u],1),r[u].m(t.parentNode,t))}for(he(),u=i.length;u<r.length;u+=1)c(u);pe()}},i(f){if(!s){for(let o=0;o<i.length;o+=1)z(r[o]);s=!0}},o(f){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)G(r[o]);s=!1},d(f){Ce(a,f),f&&h(e),Ce(r,f),f&&h(t)}}}function _t(l){let e,t=l[15].substring(0,5)+"",s;return{c(){e=w("div"),s=H(t),this.h()},l(n){e=E(n,"DIV",{class:!0,style:!0});var a=I(e);s=L(a,t),a.forEach(h),this.h()},h(){S(e,"class","time-indicator svelte-ti334g"),d(e,"top",30+60*l[14]+"px")},m(n,a){V(n,e,a),_(e,s)},p:qe,d(n){n&&h(e)}}}function mt(l){let e,t;return e=new ct({props:{task:l[12],offsetFromTop:l[5](l[12]),height:l[12].duration*l[4]||30,fontSize:.8,offsetFromLeft:30}}),e.$on("task-click",l[7]),e.$on("task-duration-adjusted",l[8]),{c(){ke(e.$$.fragment)},l(s){ge(e.$$.fragment,s)},m(s,n){ve(e,s,n),t=!0},p(s,n){const a={};n&1&&(a.task=s[12]),n&1&&(a.offsetFromTop=s[5](s[12])),n&1&&(a.height=s[12].duration*s[4]||30),e.$set(a)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){G(e.$$.fragment,s),t=!1},d(s){be(e,s)}}}function sl(l){let e,t,s,n=l[2]()+"",a,i,r,c,f,o=l[1]&&pt(l);return{c(){e=w("div"),t=w("div"),s=w("div"),a=H(n),i=P(),o&&o.c(),this.h()},l(u){e=E(u,"DIV",{style:!0,class:!0});var m=I(e);t=E(m,"DIV",{id:!0,style:!0,class:!0});var g=I(t);s=E(g,"DIV",{style:!0,class:!0});var D=I(s);a=L(D,n),D.forEach(h),i=M(g),o&&o.l(g),g.forEach(h),m.forEach(h),this.h()},h(){d(s,"margin-top","27px"),d(s,"font-weight","600"),S(s,"class","svelte-ti334g"),S(t,"id","calendar-day-container"),d(t,"position","relative"),d(t,"width","12vw"),d(t,"height","1000px"),S(t,"class","svelte-ti334g"),d(e,"overflow-y","scroll"),d(e,"overflow-x","hidden"),d(e,"height","77vh"),S(e,"class","svelte-ti334g")},m(u,m){V(u,e,m),_(e,t),_(t,s),_(s,a),_(t,i),o&&o.m(t,null),r=!0,c||(f=[A(t,"drop",l[9]),A(t,"dragover",nl)],c=!0)},p(u,[m]){u[1]?o?(o.p(u,m),m&2&&z(o,1)):(o=pt(u),o.c(),z(o,1),o.m(t,null)):o&&(he(),G(o,1,1,()=>{o=null}),pe())},i(u){r||(z(o),r=!0)},o(u){G(o),r=!1},d(u){u&&h(e),o&&o.d(),c=!1,_e(f)}}}function nl(l){l.preventDefault(),l.dataTransfer.dropEffect="move"}function al(l,e,t){let{scheduledTasks:s}=e;const n=Me(),a=Ue;let i=[],r=90/60,c="";function f(){const p=new Date,k=p.getHours()*60;for(const N of s){const v=N.startTime.substring(0,2),y=parseInt(v)*60,q=y+N.duration;y<k&&k<q&&t(1,c=`${v}:00`)}c||t(1,c=`${p.toLocaleTimeString().substring(0,2)}:00`);let O=p.getHours();for(let N=0;N<16;N++)O===24&&(O=0),O<10?i.push("0"+O+":00"):i.push(O+":00"),O+=1}f();function o({startTime:p}){const k=p.slice(0,2),O=p.slice(3,5);return(Number(k)+Number(O)/60-parseInt(c.substring(0,2)))*90}function u(p){console.log("drop detected"),p.preventDefault();var O=document.getElementById("calendar-day-container").getBoundingClientRect();O.left,O.top;const N=90;let v=p.layerY/N;const y=v-Math.floor(v),q=Math.trunc(v);let T=y*60,K;T<10?K=`0${T.toPrecision(1)}`:K=T.toPrecision(2);let R=parseInt(c.substring(0,2))+q;R<10&&(R=`0${R}`);const U=`${R}:${K}`;console.log("scheduledTime =",U),n("task-scheduled",{taskName:p.dataTransfer.getData("text/plain"),timeOfDay:U,dateScheduled:a()})}function m(p){Be.call(this,l,p)}function g(p){Be.call(this,l,p)}const D=p=>u(p);return l.$$set=p=>{"scheduledTasks"in p&&t(0,s=p.scheduledTasks)},[s,c,a,i,r,o,u,m,g,D]}class rl extends Se{constructor(e){super();Re(this,e,al,sl,We,{scheduledTasks:0})}}function kt(l,e,t){const s=l.slice();return s[4]=e[t],s[6]=t,s}function gt(l){let e,t,s=l[4].startDate+"",n,a,i,r,c,f;return i=new ct({props:{task:l[4],fontSize:.8,offsetFromTop:20+100*l[6],height:l[4].duration*l[1]||15}}),i.$on("task-click",l[2]),i.$on("task-duration-adjusted",l[3]),{c(){e=w("div"),t=w("b"),n=H(s),a=P(),ke(i.$$.fragment),r=P(),c=w("div"),this.h()},l(o){e=E(o,"DIV",{style:!0,class:!0});var u=I(e);t=E(u,"B",{class:!0});var m=I(t);n=L(m,s),m.forEach(h),u.forEach(h),a=M(o),ge(i.$$.fragment,o),r=M(o),c=E(o,"DIV",{class:!0,style:!0});var g=I(c);g.forEach(h),this.h()},h(){S(t,"class","svelte-ko0je8"),d(e,"position","absolute"),d(e,"top",100*l[6]+"px"),S(e,"class","svelte-ko0je8"),S(c,"class","scheduled-task svelte-ko0je8"),d(c,"top",70+100*l[6]+"px"),d(c,"height",15+"px"),d(c,"border-left","2px dashed black")},m(o,u){V(o,e,u),_(e,t),_(t,n),V(o,a,u),ve(i,o,u),V(o,r,u),V(o,c,u),f=!0},p(o,u){(!f||u&1)&&s!==(s=o[4].startDate+"")&&ce(n,s);const m={};u&1&&(m.task=o[4]),u&1&&(m.height=o[4].duration*o[1]||15),i.$set(m)},i(o){f||(z(i.$$.fragment,o),f=!0)},o(o){G(i.$$.fragment,o),f=!1},d(o){o&&h(e),o&&h(a),be(i,o),o&&h(r),o&&h(c)}}}function il(l){let e,t,s,n=l[0],a=[];for(let r=0;r<n.length;r+=1)a[r]=gt(kt(l,n,r));const i=r=>G(a[r],1,1,()=>{a[r]=null});return{c(){e=w("div"),t=w("div");for(let r=0;r<a.length;r+=1)a[r].c();this.h()},l(r){e=E(r,"DIV",{style:!0,class:!0});var c=I(e);t=E(c,"DIV",{style:!0,class:!0});var f=I(t);for(let o=0;o<a.length;o+=1)a[o].l(f);f.forEach(h),c.forEach(h),this.h()},h(){d(t,"width","12vw"),d(t,"margin-left","0px"),d(t,"margin-top","27px"),d(t,"position","relative"),d(t,"height","1600px"),S(t,"class","svelte-ko0je8"),d(e,"height","77vh"),d(e,"overflow-y","scroll"),d(e,"overflow-x","hidden"),S(e,"class","svelte-ko0je8")},m(r,c){V(r,e,c),_(e,t);for(let f=0;f<a.length;f+=1)a[f].m(t,null);s=!0},p(r,[c]){if(c&3){n=r[0];let f;for(f=0;f<n.length;f+=1){const o=kt(r,n,f);a[f]?(a[f].p(o,c),z(a[f],1)):(a[f]=gt(o),a[f].c(),z(a[f],1),a[f].m(t,null))}for(he(),f=n.length;f<a.length;f+=1)i(f);pe()}},i(r){if(!s){for(let c=0;c<n.length;c+=1)z(a[c]);s=!0}},o(r){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)G(a[c]);s=!1},d(r){r&&h(e),Ce(a,r)}}}function ol(l,e,t){let{futureScheduledTasks:s}=e;const n=90/60;function a(r){Be.call(this,l,r)}function i(r){Be.call(this,l,r)}return l.$$set=r=>{"futureScheduledTasks"in r&&t(0,s=r.futureScheduledTasks)},[s,n,a,i]}class fl extends Se{constructor(e){super();Re(this,e,ol,il,We,{futureScheduledTasks:0})}}function vt(l,e,t){const s=l.slice();return s[46]=e[t],s}function bt(l){let e,t,s,n,a,i=l[0],r=[];for(let o=0;o<i.length;o+=1)r[o]=yt(vt(l,i,o));const c=o=>G(r[o],1,1,()=>{r[o]=null});let f=l[7]&&Ot(l);return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=P(),t=w("div"),f&&f.c(),this.h()},l(o){for(let m=0;m<r.length;m+=1)r[m].l(o);e=M(o),t=E(o,"DIV",{style:!0,class:!0});var u=I(t);f&&f.l(u),u.forEach(h),this.h()},h(){d(t,"height","100px"),S(t,"class","svelte-1q1xb5z")},m(o,u){for(let m=0;m<r.length;m+=1)r[m].m(o,u);V(o,e,u),V(o,t,u),f&&f.m(t,null),s=!0,n||(a=[A(t,"mouseenter",l[24]),A(t,"mouseleave",l[25])],n=!0)},p(o,u){if(u[0]&393217){i=o[0];let m;for(m=0;m<i.length;m+=1){const g=vt(o,i,m);r[m]?(r[m].p(g,u),z(r[m],1)):(r[m]=yt(g),r[m].c(),z(r[m],1),r[m].m(e.parentNode,e))}for(he(),m=i.length;m<r.length;m+=1)c(m);pe()}o[7]?f?f.p(o,u):(f=Ot(o),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},i(o){if(!s){for(let u=0;u<i.length;u+=1)z(r[u]);s=!0}},o(o){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)G(r[u]);s=!1},d(o){Ce(r,o),o&&h(e),o&&h(t),f&&f.d(),n=!1,_e(a)}}}function Dt(l){let e,t,s,n;function a(...i){return l[21](l[46],...i)}return t=new ft({props:{taskObject:l[46],depth:1}}),t.$on("task-create",a),t.$on("task-done",l[18]),t.$on("task-delete",l[18]),t.$on("task-repeating",l[18]),{c(){e=w("div"),ke(t.$$.fragment),s=P(),this.h()},l(i){e=E(i,"DIV",{class:!0});var r=I(e);ge(t.$$.fragment,r),s=M(r),r.forEach(h),this.h()},h(){S(e,"class","task-container svelte-1q1xb5z")},m(i,r){V(i,e,r),ve(t,e,null),_(e,s),n=!0},p(i,r){l=i;const c={};r[0]&1&&(c.taskObject=l[46]),t.$set(c)},i(i){n||(z(t.$$.fragment,i),n=!0)},o(i){G(t.$$.fragment,i),n=!1},d(i){i&&h(e),be(t)}}}function yt(l){let e,t,s=!l[46].isDeleted&&Dt(l);return{c(){s&&s.c(),e=de()},l(n){s&&s.l(n),e=de()},m(n,a){s&&s.m(n,a),V(n,e,a),t=!0},p(n,a){n[46].isDeleted?s&&(he(),G(s,1,1,()=>{s=null}),pe()):s?(s.p(n,a),a[0]&1&&z(s,1)):(s=Dt(n),s.c(),z(s,1),s.m(e.parentNode,e))},i(n){t||(z(s),t=!0)},o(n){G(s),t=!1},d(n){s&&s.d(n),n&&h(e)}}}function Ot(l){let e;function t(a,i){return a[6]?ul:cl}let s=t(l),n=s(l);return{c(){n.c(),e=de()},l(a){n.l(a),e=de()},m(a,i){n.m(a,i),V(a,e,i)},p(a,i){s===(s=t(a))&&n?n.p(a,i):(n.d(1),n=s(a),n&&(n.c(),n.m(e.parentNode,e)))},d(a){n.d(a),a&&h(e)}}}function ul(l){let e,t,s,n;return{c(){e=w("div"),t=w("input"),this.h()},l(a){e=E(a,"DIV",{style:!0,class:!0});var i=I(e);t=E(i,"INPUT",{placeholder:!0,class:!0}),i.forEach(h),this.h()},h(){S(t,"placeholder","Type task..."),S(t,"class","svelte-1q1xb5z"),d(e,"display","flex"),d(e,"align-content","center"),d(e,"justify-items","center"),S(e,"class","svelte-1q1xb5z")},m(a,i){V(a,e,i),_(e,t),oe(t,l[5]),s||(n=[A(t,"input",l[23]),A(t,"keypress",l[16])],s=!0)},p(a,i){i[0]&32&&t.value!==a[5]&&oe(t,a[5])},d(a){a&&h(e),s=!1,_e(n)}}}function cl(l){let e,t,s,n;return{c(){e=w("div"),t=H("New task"),this.h()},l(a){e=E(a,"DIV",{style:!0,class:!0});var i=I(e);t=L(i,"New task"),i.forEach(h),this.h()},h(){d(e,"font-size","1.5rem"),d(e,"color","grey"),S(e,"class","svelte-1q1xb5z")},m(a,i){V(a,e,i),_(e,t),s||(n=A(e,"click",l[22]),s=!0)},p:qe,d(a){a&&h(e),s=!1,n()}}}function dl(l){let e,t,s,n,a,i=(l[3]?"music_note":"music_off")+"",r,c,f,o,u,m,g,D,p,k,O,N,v,y,q,T,K,B=l[0]&&bt(l);return D=new nt({props:{isOpen:l[8],taskObject:l[9]}}),D.$on("card-close",l[26]),D.$on("task-done",l[27]),D.$on("task-delete",l[28]),k=new rl({props:{scheduledTasks:l[4]}}),k.$on("task-scheduled",l[29]),k.$on("task-duration-adjusted",l[30]),k.$on("task-click",l[31]),N=new fl({props:{futureScheduledTasks:l[1]}}),N.$on("task-duration-adjusted",l[32]),N.$on("task-click",l[33]),{c(){e=w("div"),t=w("div"),s=P(),n=w("div"),a=w("span"),r=H(i),c=P(),f=w("div"),o=w("div"),u=w("div"),B&&B.c(),m=P(),g=w("div"),ke(D.$$.fragment),p=P(),ke(k.$$.fragment),O=P(),ke(N.$$.fragment),v=P(),y=w("audio"),this.h()},l(R){e=E(R,"DIV",{id:!0,style:!0,class:!0});var U=I(e);t=E(U,"DIV",{style:!0,class:!0}),I(t).forEach(h),s=M(U),n=E(U,"DIV",{style:!0,class:!0});var Z=I(n);a=E(Z,"SPAN",{class:!0,style:!0});var se=I(a);r=L(se,i),se.forEach(h),Z.forEach(h),c=M(U),f=E(U,"DIV",{style:!0,class:!0});var le=I(f);o=E(le,"DIV",{class:!0,style:!0});var F=I(o);u=E(F,"DIV",{class:!0});var X=I(u);B&&B.l(X),X.forEach(h),F.forEach(h),m=M(le),g=E(le,"DIV",{class:!0});var ae=I(g);ge(D.$$.fragment,ae),p=M(ae),ge(k.$$.fragment,ae),O=M(ae),ge(N.$$.fragment,ae),ae.forEach(h),le.forEach(h),U.forEach(h),v=M(R),y=E(R,"AUDIO",{class:!0}),I(y).forEach(h),this.h()},h(){d(t,"height","100px"),S(t,"class","svelte-1q1xb5z"),S(a,"class","material-icons svelte-1q1xb5z"),d(a,"margin-left","auto"),d(a,"margin-right","0"),d(a,"color","white"),d(n,"position","absolute"),d(n,"top","30px"),d(n,"left","30px"),S(n,"class","svelte-1q1xb5z"),S(u,"class","todo-list svelte-1q1xb5z"),S(o,"class","fixed-height-container-for-scrolling svelte-1q1xb5z"),d(o,"background-color","white"),d(o,"border","1px solid green"),d(o,"border-top-left-radius","20px"),d(o,"border-bottom-left-radius","20px"),d(o,"padding-top","14px"),d(o,"padding-left","30px"),S(g,"class","calendar-section-container svelte-1q1xb5z"),d(f,"display","flex"),d(f,"padding-left","0"),d(f,"padding-top","0px"),S(f,"class","svelte-1q1xb5z"),S(e,"id","background-image-holder"),d(e,"height","100vh"),d(e,"padding-left","120px"),d(e,"padding-right","120px"),S(e,"class","svelte-1q1xb5z"),S(y,"class","svelte-1q1xb5z")},m(R,U){V(R,e,U),_(e,t),_(e,s),_(e,n),_(n,a),_(a,r),_(e,c),_(e,f),_(f,o),_(o,u),B&&B.m(u,null),_(f,m),_(f,g),ve(D,g,null),_(g,p),ve(k,g,null),_(g,O),ve(N,g,null),V(R,v,U),V(R,y,U),l[34](y),q=!0,T||(K=A(n,"click",l[11]),T=!0)},p(R,U){(!q||U[0]&8)&&i!==(i=(R[3]?"music_note":"music_off")+"")&&ce(r,i),R[0]?B?(B.p(R,U),U[0]&1&&z(B,1)):(B=bt(R),B.c(),z(B,1),B.m(u,null)):B&&(he(),G(B,1,1,()=>{B=null}),pe());const Z={};U[0]&256&&(Z.isOpen=R[8]),U[0]&512&&(Z.taskObject=R[9]),D.$set(Z);const se={};U[0]&16&&(se.scheduledTasks=R[4]),k.$set(se);const le={};U[0]&2&&(le.futureScheduledTasks=R[1]),N.$set(le)},i(R){q||(z(B),z(D.$$.fragment,R),z(k.$$.fragment,R),z(N.$$.fragment,R),q=!0)},o(R){G(B),G(D.$$.fragment,R),G(k.$$.fragment,R),G(N.$$.fragment,R),q=!1},d(R){R&&h(e),B&&B.d(),be(D),be(k),be(N),R&&h(v),R&&h(y),l[34](null),T=!1,K()}}}function kl({params:l}){return{props:{userID:l.user}}}const Ne="users/GxBbopqXHW0qgjKEwU4z";function Tt(l){return Math.floor(Math.random()*l)}function Pe({node:l,fulfilsCriteria:e,applyFunc:t}){e(l)&&t(l);for(const s of l.children)Pe({node:s,fulfilsCriteria:e,applyFunc:t})}function hl(l,e,t){let{userID:s}=e,n,a=["illiyard-moor.mp3","ms-leafre-lofi.mp3"],i,r=!1,c=["https://i.imgur.com/rzkUMW8.jpeg","https://i.imgur.com/ShnqIpJ.jpeg"],f;Ct(()=>{f=c[Tt(2)];const b=document.getElementById("background-image-holder");b.style["background-image"]=`url(${f})`,n=a[Tt(2)],t(2,i.src=n,i)});let o=null,u="",m=Ue(),g=[],D=[],p="",k=!1,O=!1,N=!1,v={};function y({task:b}){t(9,v=b),t(8,N=!0)}function q(){t(2,i.volume=.1,i),i.paused?(i.play(),t(3,r=!0)):(i.pause(),t(3,r=!1))}function T(){t(4,g=[]);for(const b of o)Pe({node:b,fulfilsCriteria:j=>j.startDate===Ue()&&j.startTime,applyFunc:j=>g.push(j)})}function K(){t(1,D=[]);for(const b of o)Pe({node:b,fulfilsCriteria:j=>j.startDate&&j.startTime&&j.startDate>Ue(),applyFunc:j=>D.push(j)})}async function B(b){for(const j of o)Pe({node:j,fulfilsCriteria:$=>$.name===b,applyFunc:$=>$.isDone=!0});await Ie(Oe(Te,Ne),{allTasks:o}),console.log("updated")}async function R(b){Pe({node:{name:"root",children:o},fulfilsCriteria:$=>$.children.filter(te=>te.name===b).length>=1,applyFunc:$=>{let te;for(let ne=0;ne<$.children.length;ne++)if($.children[ne].name===b){te=ne;break}te&&$.children.splice(te,1)}}),await Ie(Oe(Te,Ne),{allTasks:o}),t(0,o=[...o])}async function U({taskName:b,timeOfDay:j,dateScheduled:$}){function te(ne){if(ne.name===b)return ne.startTime=j,ne.startDate=$,!0;for(const J of ne.children)if(te(J))return!0;return!1}for(const ne of o)if(te(ne)){console.log("successfully mutated allTasks, =",o);break}await Ie(Oe(Te,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:o}),t(0,o=[...o])}async function Z({taskName:b,duration:j}){function $(te){if(te.name===b)return te.duration=j,!0;for(const ne of te.children)if($(ne))return!0;return!1}for(const te of o)if($(te)){console.log("successfully mutated allTasks, =",o);break}await Ie(Oe(Te,Ne),{allTasks:o}),t(0,o=[...o])}async function se(){const b=await Bt(Oe(Te,Ne));t(0,o=b.data().allTasks),t(20,u=b.data().lastRanRepeatAtDate)}se();function le(b){b.charCode===13&&F()}function F(){p||alert("You have to type something first");const b=[...o,{name:p,duration:15,children:[]}];Ie(Oe(Te,Ne),{allTasks:b}),t(0,o=[...b]),t(5,p=""),isTypingNewTask=!1}function X(b,j){const{updatedChildren:$}=b.detail;j.children=[...$],Ie(Oe(Te,Ne),{allTasks:o}),t(0,o=[...o])}function ae(){console.log("updateFirestore()"),Ie(Oe(Te,Ne),{allTasks:o}),t(0,o=[...o])}const W=(b,j)=>X(j,b),Y=()=>t(6,k=!0);function re(){p=this.value,t(5,p)}const ee=()=>t(7,O=!0),me=()=>t(7,O=!1),De=()=>t(8,N=!1),ie=()=>B(v.name),Ve=()=>R(v.name),ze=b=>U(b.detail),fe=b=>Z(b.detail),ye=b=>y(b.detail),x=b=>Z(b.detail),Ae=b=>y(b.detail);function C(b){zt[b?"unshift":"push"](()=>{i=b,t(2,i)})}return l.$$set=b=>{"userID"in b&&t(19,s=b.userID)},l.$$.update=()=>{if(l.$$.dirty[0]&1048579&&o&&(console.log("collecting scheduled tasks to be displayed..."),T(),K(),D.sort((b,j)=>{const $=new Date(b.startDate),te=new Date(j.startDate);return $.getTime()-te.getTime()}),o.sort((b,j)=>!!b.isDone-!!j.isDone),u!==m)){let $=function(J){J.repeatsOnDaysOfWeek&&J.repeatsOnDaysOfWeek[b.getDay()]&&J.lastCompletionDate!==m&&(J.isDone=!1,J.startDate=m,J.startTime||j.push(J));for(const ue of J.children)$(ue)},te=function(J){if(J.daysBeforeRepeating){const ue=new Date(`node.lastCompletionDate/${2022}`),Ee=new Date().getTime()-ue.getTime();Math.ceil(Ee/(1e3*3600*24))>=J.daysBeforeRepeating&&(J.isDone=!1,J.startDate=m,j.push(J))}for(const ue of J.children)te(ue)};console.log("running repeating task algorithm");const b=new Date,j=[];for(const J of o)$(J);for(const J of o)te(J);console.log("pool for resolve conflict =",j);let ne=1440;for(const J of j){ne-=J.duration||5;const ue=ne/60,we=parseInt(ue),Ee=ue-we,Fe=we;let je=Math.round(Ee*60);je<10&&(je=`0${je}`),J.startTime=`${Fe}:${je}`,console.log(`habit ${J.name} starts =`,J.startTime)}Ie(Oe(Te,Ne),{allTasks:o,lastRanRepeatAtDate:m}),t(0,o=[...o])}},[o,D,i,r,g,p,k,O,N,v,y,q,B,R,U,Z,le,X,ae,s,u,W,Y,re,ee,me,De,ie,Ve,ze,fe,ye,x,Ae,C]}class gl extends Se{constructor(e){super();Re(this,e,hl,dl,We,{userID:19},null,[-1,-1])}}export{gl as default,kl as load};
