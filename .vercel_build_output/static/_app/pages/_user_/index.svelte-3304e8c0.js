var St=Object.defineProperty;var Xe=Object.getOwnPropertySymbols;var Ct=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable;var Ge=(s,e,t)=>e in s?St(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Je=(s,e)=>{for(var t in e||(e={}))Ct.call(e,t)&&Ge(s,t,e[t]);if(Xe)for(var t of Xe(e))Rt.call(e,t)&&Ge(s,t,e[t]);return s};import{S as Ne,i as Se,s as ye,t as z,k as L,h as A,m as W,g as V,j as ie,d as p,e as I,w as ke,c as E,a as C,x as ge,f as _,y as be,K as D,q as P,o as K,B as De,b as T,_ as te,n as fe,p as ue,$ as Te,L as Be,X as ne,Y as H,Z as ce,l as de,a0 as Le,a1 as Qe,a2 as jt,a3 as we,M as Bt,O as Pt,P as Ft,Q as Mt,v as Ut,a4 as Ce,N as Ie,I as zt,W as At}from"../../chunks/vendor-94da56df.js";import{d as Ee}from"../../chunks/db-66132ac0.js";function Pe(){const s=new Date;let e=s.getDate(),t=s.getMonth()+1;return e<10&&(e="0"+e),t<10&&(t="0"+t),`${t}/${e}`}function Ze(s,e,t){const l=s.slice();return l[1]=e[t],l}function Ht(s){let e;return{c(){e=z("(completed)")},l(t){e=A(t,"(completed)")},m(t,l){V(t,e,l)},p:Be,d(t){t&&p(e)}}}function Lt(s){let e,t=s[0].daysBeforeRepeating+"",l,r,n=(s[0].completionCount||0)+"",a,i;return{c(){e=z("(repeats every "),l=z(t),r=z(` days)\r
    (completed `),a=z(n),i=z(" times)")},l(f){e=A(f,"(repeats every "),l=A(f,t),r=A(f,` days)\r
    (completed `),a=A(f,n),i=A(f," times)")},m(f,u){V(f,e,u),V(f,l,u),V(f,r,u),V(f,a,u),V(f,i,u)},p(f,u){u&1&&t!==(t=f[0].daysBeforeRepeating+"")&&ie(l,t),u&1&&n!==(n=(f[0].completionCount||0)+"")&&ie(a,n)},d(f){f&&p(e),f&&p(l),f&&p(r),f&&p(a),f&&p(i)}}}function $e(s){let e,t=s[0].startDate+"",l,r,n=s[0].startTime+"",a,i;return{c(){e=z("(scheduled "),l=z(t),r=L(),a=z(n),i=z(")")},l(f){e=A(f,"(scheduled "),l=A(f,t),r=W(f),a=A(f,n),i=A(f,")")},m(f,u){V(f,e,u),V(f,l,u),V(f,r,u),V(f,a,u),V(f,i,u)},p(f,u){u&1&&t!==(t=f[0].startDate+"")&&ie(l,t),u&1&&n!==(n=f[0].startTime+"")&&ie(a,n)},d(f){f&&p(e),f&&p(l),f&&p(r),f&&p(a),f&&p(i)}}}function xe(s){let e,t,l,r;return t=new et({props:{taskObject:s[1]}}),{c(){e=I("div"),ke(t.$$.fragment),l=L(),this.h()},l(n){e=E(n,"DIV",{style:!0});var a=C(e);ge(t.$$.fragment,a),l=W(a),a.forEach(p),this.h()},h(){_(e,"margin-left","12px")},m(n,a){V(n,e,a),be(t,e,null),D(e,l),r=!0},p(n,a){const i={};a&1&&(i.taskObject=n[1]),t.$set(i)},i(n){r||(P(t.$$.fragment,n),r=!0)},o(n){K(t.$$.fragment,n),r=!1},d(n){n&&p(e),De(t)}}}function Wt(s){let e,t=s[0].name+"",l,r,n,a,i;function f(k,m){if(k[0].daysBeforeRepeating)return Lt;if(k[0].isDone)return Ht}let u=f(s),c=u&&u(s),o=s[0].startDate&&s[0].startTime&&$e(s),d=s[0].children,v=[];for(let k=0;k<d.length;k+=1)v[k]=xe(Ze(s,d,k));const y=k=>K(v[k],1,1,()=>{v[k]=null});return{c(){e=I("div"),l=z(t),r=L(),c&&c.c(),n=L(),o&&o.c(),a=L();for(let k=0;k<v.length;k+=1)v[k].c();this.h()},l(k){e=E(k,"DIV",{class:!0});var m=C(e);l=A(m,t),r=W(m),c&&c.l(m),n=W(m),o&&o.l(m),a=W(m);for(let h=0;h<v.length;h+=1)v[h].l(m);m.forEach(p),this.h()},h(){T(e,"class","svelte-10bdwqk"),te(e,"task-completed",s[0].isDone),te(e,"task-scheduled",!s[0].isDone&&s[0].startDate&&s[0].startTime)},m(k,m){V(k,e,m),D(e,l),D(e,r),c&&c.m(e,null),D(e,n),o&&o.m(e,null),D(e,a);for(let h=0;h<v.length;h+=1)v[h].m(e,null);i=!0},p(k,[m]){if((!i||m&1)&&t!==(t=k[0].name+"")&&ie(l,t),u===(u=f(k))&&c?c.p(k,m):(c&&c.d(1),c=u&&u(k),c&&(c.c(),c.m(e,n))),k[0].startDate&&k[0].startTime?o?o.p(k,m):(o=$e(k),o.c(),o.m(e,a)):o&&(o.d(1),o=null),m&1){d=k[0].children;let h;for(h=0;h<d.length;h+=1){const b=Ze(k,d,h);v[h]?(v[h].p(b,m),P(v[h],1)):(v[h]=xe(b),v[h].c(),P(v[h],1),v[h].m(e,null))}for(fe(),h=d.length;h<v.length;h+=1)y(h);ue()}m&1&&te(e,"task-completed",k[0].isDone),m&1&&te(e,"task-scheduled",!k[0].isDone&&k[0].startDate&&k[0].startTime)},i(k){if(!i){for(let m=0;m<d.length;m+=1)P(v[m]);i=!0}},o(k){v=v.filter(Boolean);for(let m=0;m<v.length;m+=1)K(v[m]);i=!1},d(k){k&&p(e),c&&c.d(),o&&o.d(),Te(v,k)}}}function Kt(s,e,t){let{taskObject:l}=e;return s.$$set=r=>{"taskObject"in r&&t(0,l=r.taskObject)},[l]}class et extends Ne{constructor(e){super();Se(this,e,Kt,Wt,ye,{taskObject:0})}}function tt(s,e,t){const l=s.slice();return l[27]=e[t],l}function lt(s){let e,t,l,r,n,a,i,f,u,c,o,d,v,y,k,m,h,b,g,O,B,w,J,Y,M,R,q,ee,N,re,_e,$=!s[0].isDone&&s[0].startTime&&s[0].startDate&&st(s);function pe(j,U){if(j[0].daysBeforeRepeating)return qt;if(j[0].repeatsOnDaysOfWeek)return Yt}let me=pe(s),se=me&&me(s);function Me(j,U){return j[4]?Xt:Gt}let Re=Me(s),ae=Re(s);function Ue(j,U){return j[5]?Jt:Qt}let je=Ue(s),oe=je(s),ve=s[0].children,Z=[];for(let j=0;j<ve.length;j+=1)Z[j]=nt(tt(s,ve,j));const Ke=j=>K(Z[j],1,1,()=>{Z[j]=null});return{c(){e=I("div"),t=I("div"),l=I("input"),r=L(),n=I("span"),a=z("close"),i=L(),f=I("div"),$&&$.c(),u=L(),c=I("div"),se&&se.c(),o=L(),d=I("div"),v=I("textarea"),y=L(),k=I("div"),m=I("div"),ae.c(),h=L(),oe.c(),b=L(),g=I("div"),O=I("button"),B=z("Delete"),w=L(),J=I("button"),Y=z("Done"),M=L(),R=I("div"),q=z("Full task history:"),ee=L();for(let j=0;j<Z.length;j+=1)Z[j].c();this.h()},l(j){e=E(j,"DIV",{class:!0});var U=C(e);t=E(U,"DIV",{style:!0,class:!0});var Q=C(t);l=E(Q,"INPUT",{type:!0,class:!0,style:!0}),r=W(Q),n=E(Q,"SPAN",{class:!0,style:!0});var Oe=C(n);a=A(Oe,"close"),Oe.forEach(p),Q.forEach(p),i=W(U),f=E(U,"DIV",{class:!0,style:!0});var ze=C(f);$&&$.l(ze),ze.forEach(p),u=W(U),c=E(U,"DIV",{class:!0,style:!0});var Ae=C(c);se&&se.l(Ae),Ae.forEach(p),o=W(U),d=E(U,"DIV",{stle:!0,class:!0});var S=C(d);v=E(S,"TEXTAREA",{rows:!0,placeholder:!0,style:!0,class:!0}),C(v).forEach(p),S.forEach(p),y=W(U),k=E(U,"DIV",{style:!0,class:!0});var F=C(k);m=E(F,"DIV",{class:!0});var X=C(m);ae.l(X),h=W(X),oe.l(X),X.forEach(p),b=W(F),g=E(F,"DIV",{style:!0,class:!0});var x=C(g);O=E(x,"BUTTON",{class:!0});var le=C(O);B=A(le,"Delete"),le.forEach(p),w=W(x),J=E(x,"BUTTON",{class:!0});var G=C(J);Y=A(G,"Done"),G.forEach(p),x.forEach(p),F.forEach(p),M=W(U),R=E(U,"DIV",{style:!0,class:!0});var he=C(R);q=A(he,"Full task history:"),he.forEach(p),ee=W(U);for(let Ve=0;Ve<Z.length;Ve+=1)Z[Ve].l(U);U.forEach(p),this.h()},h(){T(l,"type","text"),T(l,"class","google-calendar-event-title svelte-bv1cfr"),_(l,"width","96%"),_(l,"margin-left","10px"),T(n,"class","material-icons svelte-bv1cfr"),_(n,"margin-left","auto"),_(n,"margin-right","0"),_(t,"display","flex"),T(t,"class","svelte-bv1cfr"),T(f,"class","google-calendar-event-time svelte-bv1cfr"),_(f,"margin-top","4px"),_(f,"margin-left","10px"),T(c,"class","google-calendar-event-detail svelte-bv1cfr"),_(c,"margin-top","12px"),_(c,"margin-left","16px"),T(v,"rows","5"),T(v,"placeholder","notes"),_(v,"margin-left","10px"),_(v,"width","100%"),_(v,"max-width","97%"),T(v,"class","svelte-bv1cfr"),T(d,"stle","float: left; width: 80%"),T(d,"class","svelte-bv1cfr"),T(m,"class","svelte-bv1cfr"),T(O,"class","svelte-bv1cfr"),T(J,"class","svelte-bv1cfr"),_(g,"margin-left","auto"),_(g,"margin-right","16px"),T(g,"class","svelte-bv1cfr"),_(k,"display","flex"),_(k,"margin-left","10px"),T(k,"class","svelte-bv1cfr"),_(R,"font-size","1rem"),_(R,"margin-top","12px"),_(R,"margin-left","12px"),_(R,"font-weight","600"),T(R,"class","svelte-bv1cfr"),T(e,"class","detailed-card svelte-bv1cfr")},m(j,U){V(j,e,U),D(e,t),D(t,l),ne(l,s[8]),D(t,r),D(t,n),D(n,a),D(e,i),D(e,f),$&&$.m(f,null),D(e,u),D(e,c),se&&se.m(c,null),D(e,o),D(e,d),D(d,v),ne(v,s[7]),D(e,y),D(e,k),D(k,m),ae.m(m,null),D(m,h),oe.m(m,null),D(k,b),D(k,g),D(g,O),D(O,B),D(g,w),D(g,J),D(J,Y),D(e,M),D(e,R),D(R,q),D(e,ee);for(let Q=0;Q<Z.length;Q+=1)Z[Q].m(e,null);N=!0,re||(_e=[H(l,"input",s[14]),H(l,"input",s[11]),H(n,"click",s[15]),H(v,"input",s[16]),H(v,"input",s[10]),H(O,"click",s[22]),H(J,"click",s[23])],re=!0)},p(j,U){if(U&256&&l.value!==j[8]&&ne(l,j[8]),!j[0].isDone&&j[0].startTime&&j[0].startDate?$?$.p(j,U):($=st(j),$.c(),$.m(f,null)):$&&($.d(1),$=null),me===(me=pe(j))&&se?se.p(j,U):(se&&se.d(1),se=me&&me(j),se&&(se.c(),se.m(c,null))),U&128&&ne(v,j[7]),Re===(Re=Me(j))&&ae?ae.p(j,U):(ae.d(1),ae=Re(j),ae&&(ae.c(),ae.m(m,h))),je===(je=Ue(j))&&oe?oe.p(j,U):(oe.d(1),oe=je(j),oe&&(oe.c(),oe.m(m,null))),U&1){ve=j[0].children;let Q;for(Q=0;Q<ve.length;Q+=1){const Oe=tt(j,ve,Q);Z[Q]?(Z[Q].p(Oe,U),P(Z[Q],1)):(Z[Q]=nt(Oe),Z[Q].c(),P(Z[Q],1),Z[Q].m(e,null))}for(fe(),Q=ve.length;Q<Z.length;Q+=1)Ke(Q);ue()}},i(j){if(!N){for(let U=0;U<ve.length;U+=1)P(Z[U]);N=!0}},o(j){Z=Z.filter(Boolean);for(let U=0;U<Z.length;U+=1)K(Z[U]);N=!1},d(j){j&&p(e),$&&$.d(),se&&se.d(),ae.d(),oe.d(),Te(Z,j),re=!1,ce(_e)}}}function st(s){let e,t=s[0].startDate+" "+s[0].startTime+"",l;return{c(){e=z("Scheduled for "),l=z(t)},l(r){e=A(r,"Scheduled for "),l=A(r,t)},m(r,n){V(r,e,n),V(r,l,n)},p(r,n){n&1&&t!==(t=r[0].startDate+" "+r[0].startTime+"")&&ie(l,t)},d(r){r&&p(e),r&&p(l)}}}function Yt(s){let e,t=s[0].repeatsOnDaysOfWeek+"",l;return{c(){e=z("Repeats "),l=z(t)},l(r){e=A(r,"Repeats "),l=A(r,t)},m(r,n){V(r,e,n),V(r,l,n)},p(r,n){n&1&&t!==(t=r[0].repeatsOnDaysOfWeek+"")&&ie(l,t)},d(r){r&&p(e),r&&p(l)}}}function qt(s){let e,t=s[0].daysBeforeRepeating+"",l,r,n=(s[0].completionCount||0)+"",a,i;return{c(){e=z("Repeats every "),l=z(t),r=z(" days, completed "),a=z(n),i=z(" times")},l(f){e=A(f,"Repeats every "),l=A(f,t),r=A(f," days, completed "),a=A(f,n),i=A(f," times")},m(f,u){V(f,e,u),V(f,l,u),V(f,r,u),V(f,a,u),V(f,i,u)},p(f,u){u&1&&t!==(t=f[0].daysBeforeRepeating+"")&&ie(l,t),u&1&&n!==(n=(f[0].completionCount||0)+"")&&ie(a,n)},d(f){f&&p(e),f&&p(l),f&&p(r),f&&p(a),f&&p(i)}}}function Xt(s){let e,t,l,r,n;return{c(){e=I("input"),t=L(),l=I("input"),this.h()},l(a){e=E(a,"INPUT",{placeholder:!0,style:!0,class:!0}),t=W(a),l=E(a,"INPUT",{placeholder:!0,style:!0,class:!0}),this.h()},h(){T(e,"placeholder",Pe()),_(e,"width","40px"),T(e,"class","svelte-bv1cfr"),T(l,"placeholder","13:00"),_(l,"width","40px"),T(l,"class","svelte-bv1cfr")},m(a,i){V(a,e,i),ne(e,s[2]),V(a,t,i),V(a,l,i),ne(l,s[3]),r||(n=[H(e,"input",s[18]),H(l,"input",s[19]),H(l,"keypress",s[13])],r=!0)},p(a,i){i&4&&e.value!==a[2]&&ne(e,a[2]),i&8&&l.value!==a[3]&&ne(l,a[3])},d(a){a&&p(e),a&&p(t),a&&p(l),r=!1,ce(n)}}}function Gt(s){let e,t,l,r;return{c(){e=I("button"),t=z("Schedule"),this.h()},l(n){e=E(n,"BUTTON",{class:!0});var a=C(e);t=A(a,"Schedule"),a.forEach(p),this.h()},h(){T(e,"class","svelte-bv1cfr")},m(n,a){V(n,e,a),D(e,t),l||(r=H(e,"click",s[17]),l=!0)},p:Be,d(n){n&&p(e),l=!1,r()}}}function Jt(s){let e,t,l,r,n,a;return{c(){e=I("div"),t=z("Repeats every "),l=I("input"),r=z(" days"),this.h()},l(i){e=E(i,"DIV",{style:!0,class:!0});var f=C(e);t=A(f,"Repeats every "),l=E(f,"INPUT",{style:!0,placeholder:!0,class:!0}),r=A(f," days"),f.forEach(p),this.h()},h(){_(l,"width","20px"),T(l,"placeholder","0"),T(l,"class","svelte-bv1cfr"),_(e,"display","flex"),T(e,"class","svelte-bv1cfr")},m(i,f){V(i,e,f),D(e,t),D(e,l),ne(l,s[6]),D(e,r),n||(a=[H(l,"input",s[21]),H(l,"keypress",s[12])],n=!0)},p(i,f){f&64&&l.value!==i[6]&&ne(l,i[6])},d(i){i&&p(e),n=!1,ce(a)}}}function Qt(s){let e,t,l,r;return{c(){e=I("button"),t=z("Repeat task"),this.h()},l(n){e=E(n,"BUTTON",{style:!0,class:!0});var a=C(e);t=A(a,"Repeat task"),a.forEach(p),this.h()},h(){_(e,"margin-left","0px"),T(e,"class","svelte-bv1cfr")},m(n,a){V(n,e,a),D(e,t),l||(r=H(e,"click",s[20]),l=!0)},p:Be,d(n){n&&p(e),l=!1,r()}}}function nt(s){let e,t,l,r;return t=new et({props:{taskObject:s[27]}}),{c(){e=I("div"),ke(t.$$.fragment),l=L(),this.h()},l(n){e=E(n,"DIV",{style:!0,class:!0});var a=C(e);ge(t.$$.fragment,a),l=W(a),a.forEach(p),this.h()},h(){_(e,"margin-left","12px"),T(e,"class","svelte-bv1cfr")},m(n,a){V(n,e,a),be(t,e,null),D(e,l),r=!0},p(n,a){const i={};a&1&&(i.taskObject=n[27]),t.$set(i)},i(n){r||(P(t.$$.fragment,n),r=!0)},o(n){K(t.$$.fragment,n),r=!1},d(n){n&&p(e),De(t)}}}function Zt(s){let e,t,l=s[1]&&lt(s);return{c(){l&&l.c(),e=de()},l(r){l&&l.l(r),e=de()},m(r,n){l&&l.m(r,n),V(r,e,n),t=!0},p(r,[n]){r[1]?l?(l.p(r,n),n&2&&P(l,1)):(l=lt(r),l.c(),P(l,1),l.m(e.parentNode,e)):l&&(fe(),K(l,1,1,()=>{l=null}),ue())},i(r){t||(P(l),t=!0)},o(r){K(l),t=!1},d(r){l&&l.d(r),r&&p(e)}}}function $t(s,e,t){let{taskObject:l}=e,{isOpen:r=!1}=e,n,a,i=!1,f=!1,u=7;const c=Le();let o=l.notes||"",d=l.name||"";const v=Qe.throttle(N=>{t(7,o=N.target.value),k()},500),y=Qe.throttle(N=>{t(8,d=N.target.value),m()},500);function k(){t(0,l.notes=o,l),c("task-notes-update")}function m(){t(0,l.name=d,l),c("task-title-update")}function h(N){N.charCode===13&&(u?(t(0,l.daysBeforeRepeating=u,l),t(0,l.startDate=Pe(),l),t(0,l.startTime="23:30",l)):(alert("Task is reset and will no longer repeat"),t(0,l.daysBeforeRepeating=0,l)),c("task-repeat"),t(6,u=0),t(5,f=!1))}function b(N){N.charCode===13&&(!n&&!a?(t(0,l.startDate="",l),t(0,l.startTime="",l)):!n||!a?alert("Need BOTH date and time"):(t(0,l.startDate=n,l),t(0,l.startTime=a,l)),c("task-schedule"),t(2,n=""),t(3,a=""))}function g(){d=this.value,t(8,d)}const O=()=>c("card-close");function B(){o=this.value,t(7,o)}const w=()=>t(4,i=!0);function J(){n=this.value,t(2,n)}function Y(){a=this.value,t(3,a)}const M=()=>t(5,f=!0);function R(){u=this.value,t(6,u)}const q=()=>c("task-delete"),ee=()=>c("task-done");return s.$$set=N=>{"taskObject"in N&&t(0,l=N.taskObject),"isOpen"in N&&t(1,r=N.isOpen)},[l,r,n,a,i,f,u,o,d,c,v,y,h,b,g,O,B,w,J,Y,M,R,q,ee]}class xt extends Ne{constructor(e){super();Se(this,e,$t,Zt,ye,{taskObject:0,isOpen:1})}}function rt(s,e,t){const l=s.slice();return l[32]=e[t],l[34]=t,l}function it(s){let e,t,l,r,n,a,i,f,u;function c(h,b){return h[2]?el:tl}let o=c(s),d=o(s),v=s[0].children,y=[];for(let h=0;h<v.length;h+=1)y[h]=at(rt(s,v,h));const k=h=>K(y[h],1,1,()=>{y[h]=null});let m=s[4]&&ot(s);return{c(){e=I("div"),t=I("div"),l=I("div"),d.c(),r=L(),n=I("div");for(let h=0;h<y.length;h+=1)y[h].c();a=L(),m&&m.c(),this.h()},l(h){e=E(h,"DIV",{draggable:!0,class:!0,style:!0});var b=C(e);t=E(b,"DIV",{class:!0});var g=C(t);l=E(g,"DIV",{style:!0,class:!0});var O=C(l);d.l(O),O.forEach(p),g.forEach(p),r=W(b),n=E(b,"DIV",{style:!0});var B=C(n);for(let w=0;w<y.length;w+=1)y[w].l(B);a=W(B),m&&m.l(B),B.forEach(p),b.forEach(p),this.h()},h(){_(l,"font-size",1.7*.76**s[1]+"rem"),_(l,"font-family","aktiv-grotesk, sans-serif"),T(l,"class","keep-on-same-line name-of-task svelte-t4v7r0"),te(l,"scheduled-orange",!s[0].isDone&&s[0].startTime&&s[0].startDate),te(l,"crossed-out",s[0].isDone),T(t,"class","current-task-flexbox svelte-t4v7r0"),_(n,"margin-top",20*.7**s[1]+"px"),T(e,"draggable","true"),T(e,"class","scheduled-task svelte-t4v7r0"),_(e,"margin-left",(s[1]===1?"0":"20")+"px"),_(e,"margin-bottom","10px"),_(e,"width",350*.8**s[1]+"px"),_(e,"height",s[0].duration&&!s[7]&&s[0].duration*90/60>s[0].children.length*60*.7**s[1]&&s[0].duration*90/60>60*.65**s[1]?`${s[0].duration*90/60}px`:""),_(e,"padding-left",10*.8**s[1]+"px"),te(e,"black-duration-line",!s[0].isDone&&!(s[0].startTime&&s[0].startDate)),te(e,"orange-duration-line",!s[0].isDone&&s[0].startTime&&s[0].startDate),te(e,"green-duration-line",s[0].isDone)},m(h,b){V(h,e,b),D(e,t),D(t,l),d.m(l,null),D(e,r),D(e,n);for(let g=0;g<y.length;g+=1)y[g].m(n,null);D(n,a),m&&m.m(n,null),i=!0,f||(u=[H(e,"dragstart",jt(s[23])),H(e,"pointerleave",s[13])],f=!0)},p(h,b){if(o===(o=c(h))&&d?d.p(h,b):(d.d(1),d=o(h),d&&(d.c(),d.m(l,null))),(!i||b[0]&2)&&_(l,"font-size",1.7*.76**h[1]+"rem"),b[0]&1&&te(l,"scheduled-orange",!h[0].isDone&&h[0].startTime&&h[0].startDate),b[0]&1&&te(l,"crossed-out",h[0].isDone),b[0]&515){v=h[0].children;let g;for(g=0;g<v.length;g+=1){const O=rt(h,v,g);y[g]?(y[g].p(O,b),P(y[g],1)):(y[g]=at(O),y[g].c(),P(y[g],1),y[g].m(n,a))}for(fe(),g=v.length;g<y.length;g+=1)k(g);ue()}h[4]?m?m.p(h,b):(m=ot(h),m.c(),m.m(n,null)):m&&(m.d(1),m=null),(!i||b[0]&2)&&_(n,"margin-top",20*.7**h[1]+"px"),(!i||b[0]&2)&&_(e,"margin-left",(h[1]===1?"0":"20")+"px"),(!i||b[0]&2)&&_(e,"width",350*.8**h[1]+"px"),(!i||b[0]&131)&&_(e,"height",h[0].duration&&!h[7]&&h[0].duration*90/60>h[0].children.length*60*.7**h[1]&&h[0].duration*90/60>60*.65**h[1]?`${h[0].duration*90/60}px`:""),(!i||b[0]&2)&&_(e,"padding-left",10*.8**h[1]+"px"),b[0]&1&&te(e,"black-duration-line",!h[0].isDone&&!(h[0].startTime&&h[0].startDate)),b[0]&1&&te(e,"orange-duration-line",!h[0].isDone&&h[0].startTime&&h[0].startDate),b[0]&1&&te(e,"green-duration-line",h[0].isDone)},i(h){if(!i){for(let b=0;b<v.length;b+=1)P(y[b]);i=!0}},o(h){y=y.filter(Boolean);for(let b=0;b<y.length;b+=1)K(y[b]);i=!1},d(h){h&&p(e),d.d(),Te(y,h),m&&m.d(),f=!1,ce(u)}}}function el(s){let e,t,l;return{c(){e=I("input")},l(r){e=E(r,"INPUT",{})},m(r,n){V(r,e,n),ne(e,s[3]),t||(l=[H(e,"input",s[15]),H(e,"keypress",s[11])],t=!0)},p(r,n){n[0]&8&&e.value!==r[3]&&ne(e,r[3])},d(r){r&&p(e),t=!1,ce(l)}}}function tl(s){let e,t=s[0].name+"",l,r,n;return{c(){e=I("div"),l=z(t),this.h()},l(a){e=E(a,"DIV",{class:!0,style:!0});var i=C(e);l=A(i,t),i.forEach(p),this.h()},h(){T(e,"class","truncate svelte-t4v7r0"),_(e,"width",350*.85**s[1]+"px")},m(a,i){V(a,e,i),D(e,l),r||(n=[H(e,"click",s[14]),H(e,"pointerenter",s[12])],r=!0)},p(a,i){i[0]&1&&t!==(t=a[0].name+"")&&ie(l,t),i[0]&2&&_(e,"width",350*.85**a[1]+"px")},d(a){a&&p(e),r=!1,ce(n)}}}function at(s){let e,t;function l(...r){return s[16](s[34],...r)}return e=new ft({props:{taskObject:s[32],depth:s[1]+1}}),e.$on("task-create",l),e.$on("task-click",s[17]),e.$on("task-done",s[18]),e.$on("task-delete",s[19]),e.$on("task-repeating",s[20]),{c(){ke(e.$$.fragment)},l(r){ge(e.$$.fragment,r)},m(r,n){be(e,r,n),t=!0},p(r,n){s=r;const a={};n[0]&1&&(a.taskObject=s[32]),n[0]&2&&(a.depth=s[1]+1),e.$set(a)},i(r){t||(P(e.$$.fragment,r),t=!0)},o(r){K(e.$$.fragment,r),t=!1},d(r){De(e,r)}}}function ot(s){let e;function t(n,a){return n[5]?ll:sl}let l=t(s),r=l(s);return{c(){r.c(),e=de()},l(n){r.l(n),e=de()},m(n,a){r.m(n,a),V(n,e,a)},p(n,a){l===(l=t(n))&&r?r.p(n,a):(r.d(1),r=l(n),r&&(r.c(),r.m(e.parentNode,e)))},d(n){r.d(n),n&&p(e)}}}function ll(s){let e,t,l,r;return{c(){e=I("div"),t=I("input"),this.h()},l(n){e=E(n,"DIV",{style:!0});var a=C(e);t=E(a,"INPUT",{placeholder:!0,style:!0}),a.forEach(p),this.h()},h(){T(t,"placeholder","Type sub-task"),_(t,"width","100%"),_(t,"margin-left","5px"),_(e,"display","flex"),_(e,"align-items","center"),_(e,"margin-left","20px")},m(n,a){V(n,e,a),D(e,t),ne(t,s[6]),l||(r=[H(t,"input",s[22]),H(t,"keypress",s[10])],l=!0)},p(n,a){a[0]&64&&t.value!==n[6]&&ne(t,n[6])},d(n){n&&p(e),l=!1,ce(r)}}}function sl(s){let e,t,l,r;return{c(){e=I("div"),t=z("new sub-task"),this.h()},l(n){e=E(n,"DIV",{style:!0});var a=C(e);t=A(a,"new sub-task"),a.forEach(p),this.h()},h(){_(e,"margin-left","20px"),_(e,"margin-right","20px"),_(e,"margin-bottom","10px"),_(e,"border-left","2px solid grey"),_(e,"color","grey"),_(e,"padding-left","5px"),_(e,"padding-bottom",8*.68**(s[1]+1)+"px"),_(e,"font-size",1.5*.85**(s[1]+1)+"rem")},m(n,a){V(n,e,a),D(e,t),l||(r=H(e,"click",s[21]),l=!0)},p(n,a){a[0]&2&&_(e,"padding-bottom",8*.68**(n[1]+1)+"px"),a[0]&2&&_(e,"font-size",1.5*.85**(n[1]+1)+"rem")},d(n){n&&p(e),l=!1,r()}}}function nl(s){let e,t,l=!s[0].isDeleted&&!s[0].isDone&&!(s[0].startTime&&s[0].startDate)&&it(s);return{c(){l&&l.c(),e=de()},l(r){l&&l.l(r),e=de()},m(r,n){l&&l.m(r,n),V(r,e,n),t=!0},p(r,n){!r[0].isDeleted&&!r[0].isDone&&!(r[0].startTime&&r[0].startDate)?l?(l.p(r,n),n[0]&1&&P(l,1)):(l=it(r),l.c(),P(l,1),l.m(e.parentNode,e)):l&&(fe(),K(l,1,1,()=>{l=null}),ue())},i(r){t||(P(l),t=!0)},o(r){K(l),t=!1},d(r){l&&l.d(r),r&&p(e)}}}function rl(s,e){s.dataTransfer.setData("text/plain",e)}function il(s,e,t){let l,{taskObject:r}=e,{depth:n}=e;const a=Le();let i=!1,f="",u=!1,c=!1,o="";function d(N,re){const _e=Je({},r.children[re]);_e.children=N.detail.updatedChildren;const $=[...r.children];$[re]=_e,m($)}function v(N){N.charCode===13&&(o&&k(o),t(6,o=""),t(5,c=!1))}function y(N){if(N.charCode===13){if(!f){alert("Task name can't be empty.");return}t(0,r.name=f,r),a("task-done",{}),t(3,f=""),t(2,i=!1)}}function k(N){m([...r.children,{name:N,children:[]}])}function m(N){a("task-create",{updatedChildren:N})}function h(){t(4,u=!0)}function b(){t(4,u=!1)}const g=()=>a("task-click",{task:r});function O(){f=this.value,t(3,f)}const B=(N,re)=>d(re,N);function w(N){we.call(this,s,N)}function J(N){we.call(this,s,N)}function Y(N){we.call(this,s,N)}function M(N){we.call(this,s,N)}const R=()=>t(5,c=!0);function q(){o=this.value,t(6,o)}const ee=N=>rl(N,r.name);return s.$$set=N=>{"taskObject"in N&&t(0,r=N.taskObject),"depth"in N&&t(1,n=N.depth)},s.$$.update=()=>{s.$$.dirty[0]&1&&t(7,l=r.children.filter(N=>N.duration).length>0)},[r,n,i,f,u,c,o,l,a,d,v,y,h,b,g,O,B,w,J,Y,M,R,q,ee]}class ft extends Ne{constructor(e){super();Se(this,e,il,nl,ye,{taskObject:0,depth:1},null,[-1,-1])}}function al(s){let e,t,l;return{c(){e=I("div"),this.h()},l(r){e=E(r,"DIV",{style:!0,draggable:!0});var n=C(e);n.forEach(p),this.h()},h(){_(e,"height",s[3]-20-10+"px"),_(e,"width","11vw"),T(e,"draggable","true")},m(r,n){V(r,e,n),t||(l=H(e,"dragstart",s[14]),t=!0)},p(r,n){n&8&&_(e,"height",r[3]-20-10+"px")},d(r){r&&p(e),t=!1,l()}}}function ol(s){let e,t,l=s[4].name+"",r,n,a,i,f,u,c;const o=s[12].default,d=Bt(o,s,s[11],null),v=d||al(s);return{c(){e=I("div"),t=I("div"),r=z(l),n=L(),v&&v.c(),a=L(),i=I("div"),this.h()},l(y){e=E(y,"DIV",{class:!0,style:!0});var k=C(e);t=E(k,"DIV",{draggable:!0,style:!0});var m=C(t);r=A(m,l),m.forEach(p),n=W(k),v&&v.l(k),a=W(k),i=E(k,"DIV",{draggable:!0,style:!0});var h=C(i);h.forEach(p),k.forEach(p),this.h()},h(){T(t,"draggable","true"),_(t,"width","11vw"),T(i,"draggable","true"),_(i,"height","8px"),_(i,"width","11vw"),_(i,"position","absolute"),_(i,"bottom","0"),_(i,"left","-3px"),_(i,"cursor","ns-resize"),T(e,"class","scheduled-task svelte-1at2tfe"),_(e,"top",s[1]+"px"),_(e,"height",s[3]+"px"),_(e,"left",s[2]+"px"),_(e,"font-size",s[0]+"rem"),te(e,"green",s[4].isDone)},m(y,k){V(y,e,k),D(e,t),D(t,r),D(e,n),v&&v.m(e,null),D(e,a),D(e,i),f=!0,u||(c=[H(t,"dragstart",s[13]),H(i,"dragstart",s[15]),H(i,"dragend",s[16]),H(e,"click",s[17])],u=!0)},p(y,[k]){(!f||k&16)&&l!==(l=y[4].name+"")&&ie(r,l),d?d.p&&(!f||k&2048)&&Pt(d,o,y,y[11],f?Mt(o,y[11],k,null):Ft(y[11]),null):v&&v.p&&(!f||k&24)&&v.p(y,f?k:-1),(!f||k&2)&&_(e,"top",y[1]+"px"),(!f||k&8)&&_(e,"height",y[3]+"px"),(!f||k&4)&&_(e,"left",y[2]+"px"),(!f||k&1)&&_(e,"font-size",y[0]+"rem"),k&16&&te(e,"green",y[4].isDone)},i(y){f||(P(v,y),f=!0)},o(y){K(v,y),f=!1},d(y){y&&p(e),v&&v.d(y),u=!1,ce(c)}}}function ut(s,e){s.dataTransfer.setData("text/plain",e)}function fl(s,e,t){let{$$slots:l={},$$scope:r}=e,{fontSize:n=1}=e,{offsetFromTop:a}=e,{offsetFromLeft:i=0}=e,{height:f=15}=e,{duration:u=15}=e,{calendarStartTime:c=""}=e,{name:o=""}=e,{task:d=null}=e;const v=Le();let y=0;function k(w){y=w.offsetY}function m(w,J){J.duration||(J.duration=10);const Y=60/90,M=(w.offsetY-y)*Y;v("task-duration-adjusted",{taskName:J.name,duration:Math.max(1,J.duration+M)})}const h=w=>ut(w,d.name),b=w=>ut(w,d.name),g=w=>k(w),O=w=>m(w,d),B=()=>v("task-click",{task:d});return s.$$set=w=>{"fontSize"in w&&t(0,n=w.fontSize),"offsetFromTop"in w&&t(1,a=w.offsetFromTop),"offsetFromLeft"in w&&t(2,i=w.offsetFromLeft),"height"in w&&t(3,f=w.height),"duration"in w&&t(8,u=w.duration),"calendarStartTime"in w&&t(9,c=w.calendarStartTime),"name"in w&&t(10,o=w.name),"task"in w&&t(4,d=w.task),"$$scope"in w&&t(11,r=w.$$scope)},[n,a,i,f,d,v,k,m,u,c,o,r,l,h,b,g,O,B]}class ct extends Ne{constructor(e){super();Se(this,e,fl,ol,ye,{fontSize:0,offsetFromTop:1,offsetFromLeft:2,height:3,duration:8,calendarStartTime:9,name:10,task:4})}}function dt(s,e,t){const l=s.slice();return l[16]=e[t],l[18]=t,l}function ht(s,e,t){const l=s.slice();return l[19]=e[t],l[18]=t,l}function _t(s,e,t){const l=s.slice();return l[16]=e[t],l[21]=e,l[22]=t,l}function pt(s){let e,t,l,r,n=s[16].name+"",a,i,f;function u(){s[9].call(t,s[21],s[22])}function c(){return s[10](s[16])}return{c(){e=I("div"),t=I("input"),l=L(),r=I("div"),a=z(n),this.h()},l(o){e=E(o,"DIV",{style:!0,class:!0});var d=C(e);t=E(d,"INPUT",{type:!0,class:!0}),l=W(d),r=E(d,"DIV",{style:!0,class:!0});var v=C(r);a=A(v,n),v.forEach(p),d.forEach(p),this.h()},h(){T(t,"type","checkbox"),T(t,"class","svelte-1ksya56"),_(r,"font-size","0.82rem"),T(r,"class","svelte-1ksya56"),_(e,"display","flex"),_(e,"align-items","center"),T(e,"class","svelte-1ksya56"),te(e,"green-text",s[16].isDone),te(e,"red-text",!s[16].isDone)},m(o,d){V(o,e,d),D(e,t),t.checked=s[16].isDone,D(e,l),D(e,r),D(r,a),i||(f=[H(t,"change",u),H(t,"click",c)],i=!0)},p(o,d){s=o,d&4&&(t.checked=s[16].isDone),d&4&&n!==(n=s[16].name+"")&&ie(a,n),d&4&&te(e,"green-text",s[16].isDone),d&4&&te(e,"red-text",!s[16].isDone)},d(o){o&&p(e),i=!1,ce(f)}}}function mt(s){let e,t,l,r=s[5],n=[];for(let u=0;u<r.length;u+=1)n[u]=vt(ht(s,r,u));let a=s[0],i=[];for(let u=0;u<a.length;u+=1)i[u]=kt(dt(s,a,u));const f=u=>K(i[u],1,1,()=>{i[u]=null});return{c(){for(let u=0;u<n.length;u+=1)n[u].c();e=L();for(let u=0;u<i.length;u+=1)i[u].c();t=de()},l(u){for(let c=0;c<n.length;c+=1)n[c].l(u);e=W(u);for(let c=0;c<i.length;c+=1)i[c].l(u);t=de()},m(u,c){for(let o=0;o<n.length;o+=1)n[o].m(u,c);V(u,e,c);for(let o=0;o<i.length;o+=1)i[o].m(u,c);V(u,t,c),l=!0},p(u,c){if(c&32){r=u[5];let o;for(o=0;o<r.length;o+=1){const d=ht(u,r,o);n[o]?n[o].p(d,c):(n[o]=vt(d),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}if(c&145){a=u[0];let o;for(o=0;o<a.length;o+=1){const d=dt(u,a,o);i[o]?(i[o].p(d,c),P(i[o],1)):(i[o]=kt(d),i[o].c(),P(i[o],1),i[o].m(t.parentNode,t))}for(fe(),o=a.length;o<i.length;o+=1)f(o);ue()}},i(u){if(!l){for(let c=0;c<a.length;c+=1)P(i[c]);l=!0}},o(u){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)K(i[c]);l=!1},d(u){Te(n,u),u&&p(e),Te(i,u),u&&p(t)}}}function vt(s){let e,t=s[19].substring(0,5)+"",l;return{c(){e=I("div"),l=z(t),this.h()},l(r){e=E(r,"DIV",{class:!0,style:!0});var n=C(e);l=A(n,t),n.forEach(p),this.h()},h(){T(e,"class","time-indicator svelte-1ksya56"),_(e,"top",We*s[18]+"px")},m(r,n){V(r,e,n),D(e,l)},p:Be,d(r){r&&p(e)}}}function kt(s){let e,t;return e=new ct({props:{task:s[16],offsetFromTop:s[7](s[16]),height:s[16].duration*s[4]||30,fontSize:.8,offsetFromLeft:30}}),e.$on("task-click",s[11]),e.$on("task-duration-adjusted",s[12]),{c(){ke(e.$$.fragment)},l(l){ge(e.$$.fragment,l)},m(l,r){be(e,l,r),t=!0},p(l,r){const n={};r&1&&(n.task=l[16]),r&1&&(n.offsetFromTop=l[7](l[16])),r&1&&(n.height=l[16].duration*l[4]||30),e.$set(n)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){K(e.$$.fragment,l),t=!1},d(l){De(e,l)}}}function ul(s){let e,t,l,r,n,a,i,f=s[3]()+"",u,c,o,d,v,y,k=s[2],m=[];for(let b=0;b<k.length;b+=1)m[b]=pt(_t(s,k,b));let h=s[1]&&mt(s);return{c(){e=I("div"),t=I("div"),l=z("Passed tasks:"),r=L();for(let b=0;b<m.length;b+=1)m[b].c();n=L(),a=I("div"),i=I("div"),u=z(f),c=L(),o=I("div"),h&&h.c(),this.h()},l(b){e=E(b,"DIV",{style:!0,class:!0});var g=C(e);t=E(g,"DIV",{style:!0,class:!0});var O=C(t);l=A(O,"Passed tasks:"),O.forEach(p),r=W(g);for(let Y=0;Y<m.length;Y+=1)m[Y].l(g);n=W(g),a=E(g,"DIV",{style:!0,class:!0});var B=C(a);i=E(B,"DIV",{style:!0,class:!0});var w=C(i);u=A(w,f),w.forEach(p),c=W(B),o=E(B,"DIV",{id:!0,style:!0,class:!0});var J=C(o);h&&h.l(J),J.forEach(p),B.forEach(p),g.forEach(p),this.h()},h(){_(t,"margin-top","26px"),_(t,"font-weight","600"),T(t,"class","svelte-1ksya56"),_(i,"font-weight","600"),T(i,"class","svelte-1ksya56"),T(o,"id","calendar-day-container"),_(o,"position","relative"),_(o,"height",We*gt+"px"),_(o,"width","12vw"),T(o,"class","svelte-1ksya56"),_(a,"overflow-y","scroll"),_(a,"overflow-x","hidden"),_(a,"height","46vh"),_(a,"margin-top","12px"),T(a,"class","svelte-1ksya56"),_(e,"height","50vh"),T(e,"class","svelte-1ksya56")},m(b,g){V(b,e,g),D(e,t),D(t,l),D(e,r);for(let O=0;O<m.length;O+=1)m[O].m(e,null);D(e,n),D(e,a),D(a,i),D(i,u),D(a,c),D(a,o),h&&h.m(o,null),d=!0,v||(y=[H(o,"drop",s[13]),H(o,"dragover",cl)],v=!0)},p(b,[g]){if(g&68){k=b[2];let O;for(O=0;O<k.length;O+=1){const B=_t(b,k,O);m[O]?m[O].p(B,g):(m[O]=pt(B),m[O].c(),m[O].m(e,n))}for(;O<m.length;O+=1)m[O].d(1);m.length=k.length}b[1]?h?(h.p(b,g),g&2&&P(h,1)):(h=mt(b),h.c(),P(h,1),h.m(o,null)):h&&(fe(),K(h,1,1,()=>{h=null}),ue())},i(b){d||(P(h),d=!0)},o(b){K(h),d=!1},d(b){b&&p(e),Te(m,b),h&&h.d(),v=!1,ce(y)}}}const We=80,gt=16;function cl(s){s.preventDefault(),s.dataTransfer.dropEffect="move"}function dl(s,e,t){let{scheduledTasksToday:l}=e;const r=Le(),n=Pe,a=80/60;let i=[],f="",u;function c(g){console.log("task =",g),r("task-done",{taskName:g.name})}function o(){const g=new Date,O=g.getHours()*60;for(const w of l){const J=w.startTime.substring(0,2),Y=parseInt(J)*60,M=Y+w.duration;Y<O&&O<M&&t(1,f=`${J}:00`)}if(!f){const w=g.getHours();t(1,f=`${w<10?"0":""}${w}:00`)}let B=g.getHours();for(let w=0;w<gt;w++)B===24&&(B=0),B<10?i.push("0"+B+":00"):i.push(B+":00"),B+=1}o();function d({startTime:g}){const O=g.slice(0,2),B=g.slice(3,5);return(Number(O)+Number(B)/60-parseInt(f.substring(0,2)))*We}function v(g){console.log("drop detected"),g.preventDefault();var B=document.getElementById("calendar-day-container").getBoundingClientRect();B.left,B.top;let w=g.layerY/We;const J=w-Math.floor(w),Y=Math.trunc(w);let M=J*60,R;M<10?R=`0${M.toPrecision(1)}`:R=M.toPrecision(2);const q=parseInt(f.substring(0,2));let ee=q+Y;ee<10&&(ee=`0${ee}`),console.log("origin =",q);const N=`${ee}:${R}`;console.log("scheduledTime =",N),r("task-scheduled",{taskName:g.dataTransfer.getData("text/plain"),timeOfDay:N,dateScheduled:n()})}function y(g,O){g[O].isDone=this.checked,t(2,u),t(1,f),t(0,l)}const k=g=>c(g);function m(g){we.call(this,s,g)}function h(g){we.call(this,s,g)}const b=g=>v(g);return s.$$set=g=>{"scheduledTasksToday"in g&&t(0,l=g.scheduledTasksToday)},s.$$.update=()=>{s.$$.dirty&3&&f&&t(2,u=l.filter(g=>g.startTime<f))},[l,f,u,n,a,i,c,d,v,y,k,m,h,b]}class hl extends Ne{constructor(e){super();Se(this,e,dl,ul,ye,{scheduledTasksToday:0})}}function bt(s,e,t){const l=s.slice();return l[4]=e[t],l[6]=t,l}function Dt(s){let e,t,l,r=s[4].startDate+"",n,a,i,f,u,c;return i=new ct({props:{task:s[4],fontSize:.8,offsetFromTop:20,height:s[4].duration*s[1]||15}}),i.$on("task-click",s[2]),i.$on("task-duration-adjusted",s[3]),{c(){e=I("div"),t=I("div"),l=I("b"),n=z(r),a=L(),ke(i.$$.fragment),f=L(),u=I("div"),this.h()},l(o){e=E(o,"DIV",{style:!0,class:!0});var d=C(e);t=E(d,"DIV",{class:!0});var v=C(t);l=E(v,"B",{class:!0});var y=C(l);n=A(y,r),y.forEach(p),v.forEach(p),a=W(d),ge(i.$$.fragment,d),d.forEach(p),f=W(o),u=E(o,"DIV",{class:!0}),C(u).forEach(p),this.h()},h(){T(l,"class","svelte-d8tb0p"),T(t,"class","svelte-d8tb0p"),_(e,"position","relative"),_(e,"height",yt+(s[4].duration*s[1]||15)+"px"),_(e,"margin-top","25px"),T(e,"class","svelte-d8tb0p"),T(u,"class","broken-axis svelte-d8tb0p")},m(o,d){V(o,e,d),D(e,t),D(t,l),D(l,n),D(e,a),be(i,e,null),V(o,f,d),V(o,u,d),c=!0},p(o,d){(!c||d&1)&&r!==(r=o[4].startDate+"")&&ie(n,r);const v={};d&1&&(v.task=o[4]),d&1&&(v.height=o[4].duration*o[1]||15),i.$set(v),(!c||d&1)&&_(e,"height",yt+(o[4].duration*o[1]||15)+"px")},i(o){c||(P(i.$$.fragment,o),c=!0)},o(o){K(i.$$.fragment,o),c=!1},d(o){o&&p(e),De(i),o&&p(f),o&&p(u)}}}function _l(s){let e,t,l,r=s[0],n=[];for(let i=0;i<r.length;i+=1)n[i]=Dt(bt(s,r,i));const a=i=>K(n[i],1,1,()=>{n[i]=null});return{c(){e=I("div"),t=I("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=E(i,"DIV",{style:!0,class:!0});var f=C(e);t=E(f,"DIV",{style:!0,class:!0});var u=C(t);for(let c=0;c<n.length;c+=1)n[c].l(u);u.forEach(p),f.forEach(p),this.h()},h(){_(t,"width","12vw"),_(t,"margin-left","0px"),_(t,"margin-top","27px"),_(t,"position","relative"),_(t,"height","1600px"),T(t,"class","svelte-d8tb0p"),_(e,"height","60vh"),_(e,"overflow-y","scroll"),_(e,"overflow-x","hidden"),T(e,"class","svelte-d8tb0p")},m(i,f){V(i,e,f),D(e,t);for(let u=0;u<n.length;u+=1)n[u].m(t,null);l=!0},p(i,[f]){if(f&3){r=i[0];let u;for(u=0;u<r.length;u+=1){const c=bt(i,r,u);n[u]?(n[u].p(c,f),P(n[u],1)):(n[u]=Dt(c),n[u].c(),P(n[u],1),n[u].m(t,null))}for(fe(),u=r.length;u<n.length;u+=1)a(u);ue()}},i(i){if(!l){for(let f=0;f<r.length;f+=1)P(n[f]);l=!0}},o(i){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)K(n[f]);l=!1},d(i){i&&p(e),Te(n,i)}}}const yt=20;function pl(s,e,t){let{futureScheduledTasks:l}=e;const r=90/60;function n(i){we.call(this,s,i)}function a(i){we.call(this,s,i)}return s.$$set=i=>{"futureScheduledTasks"in i&&t(0,l=i.futureScheduledTasks)},[l,r,n,a]}class ml extends Ne{constructor(e){super();Se(this,e,pl,_l,ye,{futureScheduledTasks:0})}}function Tt(s,e,t){const l=s.slice();return l[51]=e[t],l}function wt(s){let e,t;return e=new xt({props:{isOpen:s[8],taskObject:s[9]}}),e.$on("card-close",s[21]),e.$on("task-done",s[22]),e.$on("task-delete",s[23]),e.$on("task-repeat",s[18]),e.$on("task-schedule",s[18]),e.$on("task-title-update",s[18]),e.$on("task-notes-update",s[18]),{c(){ke(e.$$.fragment)},l(l){ge(e.$$.fragment,l)},m(l,r){be(e,l,r),t=!0},p(l,r){const n={};r[0]&256&&(n.isOpen=l[8]),r[0]&512&&(n.taskObject=l[9]),e.$set(n)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){K(e.$$.fragment,l),t=!1},d(l){De(e,l)}}}function It(s){let e,t,l,r,n,a=s[0],i=[];for(let c=0;c<a.length;c+=1)i[c]=Ot(Tt(s,a,c));const f=c=>K(i[c],1,1,()=>{i[c]=null});let u=s[7]&&Vt(s);return{c(){for(let c=0;c<i.length;c+=1)i[c].c();e=L(),t=I("div"),u&&u.c(),this.h()},l(c){for(let d=0;d<i.length;d+=1)i[d].l(c);e=W(c),t=E(c,"DIV",{style:!0,class:!0});var o=C(t);u&&u.l(o),o.forEach(p),this.h()},h(){_(t,"height","200px"),T(t,"class","svelte-1e5e9i8")},m(c,o){for(let d=0;d<i.length;d+=1)i[d].m(c,o);V(c,e,o),V(c,t,o),u&&u.m(t,null),l=!0,r||(n=[H(t,"mouseenter",s[28]),H(t,"mouseleave",s[29])],r=!0)},p(c,o){if(o[0]&394241){a=c[0];let d;for(d=0;d<a.length;d+=1){const v=Tt(c,a,d);i[d]?(i[d].p(v,o),P(i[d],1)):(i[d]=Ot(v),i[d].c(),P(i[d],1),i[d].m(e.parentNode,e))}for(fe(),d=a.length;d<i.length;d+=1)f(d);ue()}c[7]?u?u.p(c,o):(u=Vt(c),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},i(c){if(!l){for(let o=0;o<a.length;o+=1)P(i[o]);l=!0}},o(c){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)K(i[o]);l=!1},d(c){Te(i,c),c&&p(e),c&&p(t),u&&u.d(),r=!1,ce(n)}}}function Et(s){let e,t,l,r;function n(...a){return s[25](s[51],...a)}return t=new ft({props:{taskObject:s[51],depth:1}}),t.$on("task-click",s[24]),t.$on("task-create",n),t.$on("task-done",s[18]),t.$on("task-delete",s[18]),t.$on("task-repeating",s[18]),{c(){e=I("div"),ke(t.$$.fragment),l=L(),this.h()},l(a){e=E(a,"DIV",{class:!0});var i=C(e);ge(t.$$.fragment,i),l=W(i),i.forEach(p),this.h()},h(){T(e,"class","task-container svelte-1e5e9i8")},m(a,i){V(a,e,i),be(t,e,null),D(e,l),r=!0},p(a,i){s=a;const f={};i[0]&1&&(f.taskObject=s[51]),t.$set(f)},i(a){r||(P(t.$$.fragment,a),r=!0)},o(a){K(t.$$.fragment,a),r=!1},d(a){a&&p(e),De(t)}}}function Ot(s){let e,t,l=!s[51].isDeleted&&Et(s);return{c(){l&&l.c(),e=de()},l(r){l&&l.l(r),e=de()},m(r,n){l&&l.m(r,n),V(r,e,n),t=!0},p(r,n){r[51].isDeleted?l&&(fe(),K(l,1,1,()=>{l=null}),ue()):l?(l.p(r,n),n[0]&1&&P(l,1)):(l=Et(r),l.c(),P(l,1),l.m(e.parentNode,e))},i(r){t||(P(l),t=!0)},o(r){K(l),t=!1},d(r){l&&l.d(r),r&&p(e)}}}function Vt(s){let e;function t(n,a){return n[6]?vl:kl}let l=t(s),r=l(s);return{c(){r.c(),e=de()},l(n){r.l(n),e=de()},m(n,a){r.m(n,a),V(n,e,a)},p(n,a){l===(l=t(n))&&r?r.p(n,a):(r.d(1),r=l(n),r&&(r.c(),r.m(e.parentNode,e)))},d(n){r.d(n),n&&p(e)}}}function vl(s){let e,t,l,r;return{c(){e=I("div"),t=I("input"),this.h()},l(n){e=E(n,"DIV",{style:!0,class:!0});var a=C(e);t=E(a,"INPUT",{placeholder:!0,class:!0}),a.forEach(p),this.h()},h(){T(t,"placeholder","Type task..."),T(t,"class","svelte-1e5e9i8"),_(e,"display","flex"),_(e,"align-content","center"),_(e,"justify-items","center"),T(e,"class","svelte-1e5e9i8")},m(n,a){V(n,e,a),D(e,t),ne(t,s[5]),l||(r=[H(t,"input",s[27]),H(t,"keypress",s[16])],l=!0)},p(n,a){a[0]&32&&t.value!==n[5]&&ne(t,n[5])},d(n){n&&p(e),l=!1,ce(r)}}}function kl(s){let e,t,l,r;return{c(){e=I("div"),t=z("New task"),this.h()},l(n){e=E(n,"DIV",{style:!0,class:!0});var a=C(e);t=A(a,"New task"),a.forEach(p),this.h()},h(){_(e,"font-size","1.5rem"),_(e,"color","grey"),T(e,"class","svelte-1e5e9i8")},m(n,a){V(n,e,a),D(e,t),l||(r=H(e,"click",s[26]),l=!0)},p:Be,d(n){n&&p(e),l=!1,r()}}}function gl(s){let e=s[9],t,l,r,n,a,i,f=(s[3]?"music_note":"music_off")+"",u,c,o,d,v,y,k,m,h,b,g,O,B,w,J,Y=wt(s),M=s[0]&&It(s);return m=new hl({props:{scheduledTasksToday:s[4]}}),m.$on("task-done",s[30]),m.$on("task-scheduled",s[31]),m.$on("task-duration-adjusted",s[32]),m.$on("task-click",s[33]),b=new ml({props:{futureScheduledTasks:s[1]}}),b.$on("task-duration-adjusted",s[34]),b.$on("task-click",s[35]),{c(){Y.c(),t=L(),l=I("div"),r=I("div"),n=L(),a=I("div"),i=I("span"),u=z(f),c=L(),o=I("div"),d=I("div"),v=I("div"),M&&M.c(),y=L(),k=I("div"),ke(m.$$.fragment),h=L(),ke(b.$$.fragment),g=L(),O=I("audio"),this.h()},l(R){Y.l(R),t=W(R),l=E(R,"DIV",{id:!0,style:!0,class:!0});var q=C(l);r=E(q,"DIV",{style:!0,class:!0}),C(r).forEach(p),n=W(q),a=E(q,"DIV",{style:!0,class:!0});var ee=C(a);i=E(ee,"SPAN",{class:!0,style:!0});var N=C(i);u=A(N,f),N.forEach(p),ee.forEach(p),c=W(q),o=E(q,"DIV",{style:!0,class:!0});var re=C(o);d=E(re,"DIV",{class:!0});var _e=C(d);v=E(_e,"DIV",{class:!0});var $=C(v);M&&M.l($),$.forEach(p),_e.forEach(p),y=W(re),k=E(re,"DIV",{class:!0});var pe=C(k);ge(m.$$.fragment,pe),h=W(pe),ge(b.$$.fragment,pe),pe.forEach(p),re.forEach(p),q.forEach(p),g=W(R),O=E(R,"AUDIO",{class:!0}),C(O).forEach(p),this.h()},h(){_(r,"height","100px"),T(r,"class","svelte-1e5e9i8"),T(i,"class","material-icons svelte-1e5e9i8"),_(i,"margin-left","auto"),_(i,"margin-right","0"),_(i,"color","white"),_(a,"position","absolute"),_(a,"top","30px"),_(a,"left","30px"),T(a,"class","svelte-1e5e9i8"),T(v,"class","todo-list svelte-1e5e9i8"),T(d,"class","fixed-height-container-for-scrolling svelte-1e5e9i8"),T(k,"class","calendar-section-container svelte-1e5e9i8"),_(o,"display","flex"),_(o,"padding-left","0"),_(o,"padding-top","0px"),T(o,"class","svelte-1e5e9i8"),T(l,"id","background-image-holder"),_(l,"height","100vh"),_(l,"padding-left","120px"),_(l,"padding-right","120px"),T(l,"class","svelte-1e5e9i8"),T(O,"class","svelte-1e5e9i8")},m(R,q){Y.m(R,q),V(R,t,q),V(R,l,q),D(l,r),D(l,n),D(l,a),D(a,i),D(i,u),D(l,c),D(l,o),D(o,d),D(d,v),M&&M.m(v,null),D(o,y),D(o,k),be(m,k,null),D(k,h),be(b,k,null),V(R,g,q),V(R,O,q),s[36](O),B=!0,w||(J=H(a,"click",s[11]),w=!0)},p(R,q){q[0]&512&&ye(e,e=R[9])?(fe(),K(Y,1,1,Be),ue(),Y=wt(R),Y.c(),P(Y),Y.m(t.parentNode,t)):Y.p(R,q),(!B||q[0]&8)&&f!==(f=(R[3]?"music_note":"music_off")+"")&&ie(u,f),R[0]?M?(M.p(R,q),q[0]&1&&P(M,1)):(M=It(R),M.c(),P(M,1),M.m(v,null)):M&&(fe(),K(M,1,1,()=>{M=null}),ue());const ee={};q[0]&16&&(ee.scheduledTasksToday=R[4]),m.$set(ee);const N={};q[0]&2&&(N.futureScheduledTasks=R[1]),b.$set(N)},i(R){B||(P(Y),P(M),P(m.$$.fragment,R),P(b.$$.fragment,R),B=!0)},o(R){K(Y),K(M),K(m.$$.fragment,R),K(b.$$.fragment,R),B=!1},d(R){Y.d(R),R&&p(t),R&&p(l),M&&M.d(),De(m),De(b),R&&p(g),R&&p(O),s[36](null),w=!1,J()}}}function wl({params:s}){return{props:{userID:s.user}}}function Nt(s){return Math.floor(Math.random()*s)}function Fe({node:s,fulfilsCriteria:e,applyFunc:t}){e(s)&&t(s);for(const l of s.children)Fe({node:l,fulfilsCriteria:e,applyFunc:t})}function bl(s,e,t){let{userID:l}=e;const r=`users/${l}`;let n,a=["illiyard-moor.mp3","ms-leafre-lofi.mp3"],i,f=!1,u=["https://i.imgur.com/rzkUMW8.jpeg","https://i.imgur.com/ShnqIpJ.jpeg"],c;Ut(()=>{c=u[Nt(2)];const S=document.getElementById("background-image-holder");S.style["background-image"]=`url(${c})`,n=a[Nt(2)],t(2,i.src=n,i)});let o=null,d="",v=Pe(),y=[],k=[],m="",h=!1,b=!1,g=!1,O={};function B({task:S}){t(9,O=S),t(8,g=!0)}function w(){t(2,i.volume=.1,i),i.paused?(i.play(),t(3,f=!0)):(i.pause(),t(3,f=!1))}function J(){t(4,y=[]);for(const S of o)Fe({node:S,fulfilsCriteria:F=>F.startDate===Pe()&&F.startTime,applyFunc:F=>y.push(F)})}function Y(){t(1,k=[]);for(const S of o)Fe({node:S,fulfilsCriteria:F=>F.startDate&&F.startTime&&F.startDate>Pe(),applyFunc:F=>k.push(F)})}async function M(S){for(const F of o)Fe({node:F,fulfilsCriteria:X=>X.name===S,applyFunc:X=>{X.isDone=!X.isDone,X.isDone?X.completionCount=X.completionCount+1||1:X.completionCount=X.completionCount-1||0}});await Ce(Ie(Ee,r),{allTasks:o}),t(0,o=[...o])}async function R(S){console.log("deleteSubtree =",S),Fe({node:{name:"root",children:o},fulfilsCriteria:X=>X.children.filter(x=>x.name===S).length>=1,applyFunc:X=>{let x=null;for(let le=0;le<X.children.length;le++)if(X.children[le].name===S){x=le;break}x>=0&&X.children.splice(x,1)}}),await Ce(Ie(Ee,r),{allTasks:o}),t(0,o=[...o])}async function q(){Fe({node:{name:"root",children:o},fulfilsCriteria:F=>F.startDate<v&&!F.isDone,applyFunc:F=>{F.startDate="",F.startTime=""}})}async function ee({taskName:S,timeOfDay:F,dateScheduled:X}){function x(le){if(le.name===S)return le.startTime=F,le.startDate=X,!0;for(const G of le.children)if(x(G))return!0;return!1}for(const le of o)if(x(le)){console.log("successfully mutated allTasks, =",o);break}await Ce(Ie(Ee,r),{allTasks:o}),t(0,o=[...o])}async function N({taskName:S,duration:F}){function X(x){if(x.name===S)return x.duration=F,!0;for(const le of x.children)if(X(le))return!0;return!1}for(const x of o)if(X(x)){console.log("successfully mutated allTasks, =",o);break}await Ce(Ie(Ee,r),{allTasks:o}),t(0,o=[...o])}async function re(){const S=await zt(Ie(Ee,r));t(0,o=S.data().allTasks),t(20,d=S.data().lastRanRepeatAtDate)}re();function _e(S){S.charCode===13&&$()}function $(){m||alert("You have to type something first");const S=[...o,{name:m,duration:15,children:[]}];Ce(Ie(Ee,r),{allTasks:S}),t(0,o=[...S]),t(5,m="")}function pe(S,F){const{updatedChildren:X}=S.detail;F.children=[...X],me()}function me(){Ce(Ie(Ee,r),{allTasks:o}),t(0,o=[...o])}const se=()=>t(8,g=!1),Me=()=>M(O.name),Re=()=>R(O.name),ae=S=>B(S.detail),Ue=(S,F)=>pe(F,S),je=()=>t(6,h=!0);function oe(){m=this.value,t(5,m)}const ve=()=>t(7,b=!0),Z=()=>t(7,b=!1),Ke=S=>M(S.detail.taskName),j=S=>ee(S.detail),U=S=>N(S.detail),Q=S=>B(S.detail),Oe=S=>N(S.detail),ze=S=>B(S.detail);function Ae(S){At[S?"unshift":"push"](()=>{i=S,t(2,i)})}return s.$$set=S=>{"userID"in S&&t(19,l=S.userID)},s.$$.update=()=>{if(s.$$.dirty[0]&1048579&&o&&(console.log("collecting scheduled tasks to be displayed..."),J(),Y(),k.sort((S,F)=>{const X=new Date(S.startDate),x=new Date(F.startDate);return X.getTime()-x.getTime()}),o.sort((S,F)=>!!S.isDone-!!F.isDone),d!==v)){let X=function(G){G.repeatsOnDaysOfWeek&&G.repeatsOnDaysOfWeek[S.getDay()]&&G.lastCompletionDate!==v&&(G.isDone=!1,G.startDate=v,G.startTime||F.push(G));for(const he of G.children)X(he)},x=function(G){if(G.daysBeforeRepeating){const he=new Date(`node.lastCompletionDate/${2022}`),Ye=new Date().getTime()-he.getTime();Math.ceil(Ye/(1e3*3600*24))>=G.daysBeforeRepeating&&(G.isDone=!1,G.startDate=v,G.startTime||F.push(G))}for(const he of G.children)x(he)};console.log("new day, running repeat algorithm and process un-finished tasks"),q();const S=new Date,F=[];for(const G of o)X(G);for(const G of o)x(G);console.log("pool for resolve conflict =",F);let le=1440;for(const G of F){le-=G.duration||5;const he=le/60,Ve=parseInt(he),Ye=he-Ve,qe=Ve;let He=Math.round(Ye*60);He<10&&(He=`0${He}`),G.startTime=`${qe}:${He}`,console.log(`habit ${G.name} starts =`,G.startTime)}Ce(Ie(Ee,r),{allTasks:o,lastRanRepeatAtDate:v}),t(0,o=[...o])}},[o,k,i,f,y,m,h,b,g,O,B,w,M,R,ee,N,_e,pe,me,l,d,se,Me,Re,ae,Ue,je,oe,ve,Z,Ke,j,U,Q,Oe,ze,Ae]}class Il extends Ne{constructor(e){super();Se(this,e,bl,gl,ye,{userID:19},null,[-1,-1])}}export{Il as default,wl as load};
