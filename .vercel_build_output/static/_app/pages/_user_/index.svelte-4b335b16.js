var Vt=Object.defineProperty;var Ye=Object.getOwnPropertySymbols;var St=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable;var qe=(s,e,t)=>e in s?Vt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Xe=(s,e)=>{for(var t in e||(e={}))St.call(e,t)&&qe(s,t,e[t]);if(Ye)for(var t of Ye(e))Nt.call(e,t)&&qe(s,t,e[t]);return s};import{S as Ve,i as Se,s as we,t as W,h as K,g as I,d as m,k as U,m as z,j as de,e as y,w as ve,c as w,a as S,x as ke,f as d,y as ge,K as g,q as C,o as A,B as be,b as T,_ as se,n as oe,p as fe,$ as Ne,X as ne,Y as M,Z as he,l as ue,a0 as Le,a1 as Ge,L as Pe,a2 as Rt,a3 as Ee,M as jt,O as Ct,P as Bt,Q as Ft,v as Pt,a4 as Ie,N as De,I as Mt,W as Ut}from"../../chunks/vendor-94da56df.js";import{d as Te}from"../../chunks/db-66132ac0.js";function Me(){const s=new Date;let e=s.getDate(),t=s.getMonth()+1;return e<10&&(e="0"+e),t<10&&(t="0"+t),`${t}/${e}`}function Je(s,e,t){const l=s.slice();return l[1]=e[t],l}function Qe(s){let e;return{c(){e=W("(Repeats)")},l(t){e=K(t,"(Repeats)")},m(t,l){I(t,e,l)},d(t){t&&m(e)}}}function Ze(s){let e;return{c(){e=W("(Completed)")},l(t){e=K(t,"(Completed)")},m(t,l){I(t,e,l)},d(t){t&&m(e)}}}function $e(s){let e,t=s[0].startDate+"",l,r,n=s[0].startTime+"",a,i;return{c(){e=W("("),l=W(t),r=U(),a=W(n),i=W(")")},l(c){e=K(c,"("),l=K(c,t),r=z(c),a=K(c,n),i=K(c,")")},m(c,f){I(c,e,f),I(c,l,f),I(c,r,f),I(c,a,f),I(c,i,f)},p(c,f){f&1&&t!==(t=c[0].startDate+"")&&de(l,t),f&1&&n!==(n=c[0].startTime+"")&&de(a,n)},d(c){c&&m(e),c&&m(l),c&&m(r),c&&m(a),c&&m(i)}}}function xe(s){let e,t,l,r;return t=new et({props:{taskObject:s[1]}}),{c(){e=y("div"),ve(t.$$.fragment),l=U(),this.h()},l(n){e=w(n,"DIV",{style:!0});var a=S(e);ke(t.$$.fragment,a),l=z(a),a.forEach(m),this.h()},h(){d(e,"margin-left","12px")},m(n,a){I(n,e,a),ge(t,e,null),g(e,l),r=!0},p(n,a){const i={};a&1&&(i.taskObject=n[1]),t.$set(i)},i(n){r||(C(t.$$.fragment,n),r=!0)},o(n){A(t.$$.fragment,n),r=!1},d(n){n&&m(e),be(t)}}}function zt(s){let e,t=s[0].name+"",l,r,n,a,i,c,f=s[0].isRepeating&&Qe(),u=s[0].isDone&&Ze(),o=s[0].startDate&&s[0].startTime&&$e(s),_=s[0].children,v=[];for(let p=0;p<_.length;p+=1)v[p]=xe(Je(s,_,p));const b=p=>A(v[p],1,1,()=>{v[p]=null});return{c(){e=y("div"),l=W(t),r=U(),f&&f.c(),n=U(),u&&u.c(),a=U(),o&&o.c(),i=U();for(let p=0;p<v.length;p+=1)v[p].c();this.h()},l(p){e=w(p,"DIV",{class:!0});var k=S(e);l=K(k,t),r=z(k),f&&f.l(k),n=z(k),u&&u.l(k),a=z(k),o&&o.l(k),i=z(k);for(let h=0;h<v.length;h+=1)v[h].l(k);k.forEach(m),this.h()},h(){T(e,"class","svelte-10bdwqk"),se(e,"task-completed",s[0].isDone),se(e,"task-scheduled",!s[0].isDone&&s[0].startDate&&s[0].startTime)},m(p,k){I(p,e,k),g(e,l),g(e,r),f&&f.m(e,null),g(e,n),u&&u.m(e,null),g(e,a),o&&o.m(e,null),g(e,i);for(let h=0;h<v.length;h+=1)v[h].m(e,null);c=!0},p(p,[k]){if((!c||k&1)&&t!==(t=p[0].name+"")&&de(l,t),p[0].isRepeating?f||(f=Qe(),f.c(),f.m(e,n)):f&&(f.d(1),f=null),p[0].isDone?u||(u=Ze(),u.c(),u.m(e,a)):u&&(u.d(1),u=null),p[0].startDate&&p[0].startTime?o?o.p(p,k):(o=$e(p),o.c(),o.m(e,i)):o&&(o.d(1),o=null),k&1){_=p[0].children;let h;for(h=0;h<_.length;h+=1){const D=Je(p,_,h);v[h]?(v[h].p(D,k),C(v[h],1)):(v[h]=xe(D),v[h].c(),C(v[h],1),v[h].m(e,null))}for(oe(),h=_.length;h<v.length;h+=1)b(h);fe()}k&1&&se(e,"task-completed",p[0].isDone),k&1&&se(e,"task-scheduled",!p[0].isDone&&p[0].startDate&&p[0].startTime)},i(p){if(!c){for(let k=0;k<_.length;k+=1)C(v[k]);c=!0}},o(p){v=v.filter(Boolean);for(let k=0;k<v.length;k+=1)A(v[k]);c=!1},d(p){p&&m(e),f&&f.d(),u&&u.d(),o&&o.d(),Ne(v,p)}}}function At(s,e,t){let{taskObject:l}=e;return s.$$set=r=>{"taskObject"in r&&t(0,l=r.taskObject)},[l]}class et extends Ve{constructor(e){super();Se(this,e,At,zt,we,{taskObject:0})}}function tt(s,e,t){const l=s.slice();return l[27]=e[t],l}function lt(s){let e,t,l,r,n,a,i,c,f,u,o,_,v,b,p,k,h,D,V,F,Y,N,Z,X,P,R,q,le,O,re,_e,J=!s[0].isDone&&s[0].startTime&&s[0].startDate&&st(s);function pe(j,B){if(j[0].daysBeforeRepeating)return Lt;if(j[0].repeatsOnDaysOfWeek)return Ht}let ye=pe(s),te=ye&&ye(s);function ze(j,B){return j[4]?Wt:Kt}let Re=ze(s),ie=Re(s);function Ae(j,B){return j[5]?Yt:qt}let je=Ae(s),ae=je(s),me=s[0].children,Q=[];for(let j=0;j<me.length;j+=1)Q[j]=nt(tt(s,me,j));const Ke=j=>A(Q[j],1,1,()=>{Q[j]=null});return{c(){e=y("div"),t=y("div"),l=y("input"),r=U(),n=y("span"),a=W("close"),i=U(),c=y("div"),J&&J.c(),f=U(),u=y("div"),te&&te.c(),o=U(),_=y("div"),v=y("textarea"),b=U(),p=y("div"),k=y("div"),ie.c(),h=U(),ae.c(),D=U(),V=y("div"),F=y("button"),Y=W("Delete"),N=U(),Z=y("button"),X=W("Done"),P=U(),R=y("div"),q=W("Full task history:"),le=U();for(let j=0;j<Q.length;j+=1)Q[j].c();this.h()},l(j){e=w(j,"DIV",{class:!0});var B=S(e);t=w(B,"DIV",{style:!0,class:!0});var G=S(t);l=w(G,"INPUT",{type:!0,class:!0,style:!0}),r=z(G),n=w(G,"SPAN",{class:!0,style:!0});var Oe=S(n);a=K(Oe,"close"),Oe.forEach(m),G.forEach(m),i=z(B),c=w(B,"DIV",{class:!0,style:!0});var E=S(c);J&&J.l(E),E.forEach(m),f=z(B),u=w(B,"DIV",{class:!0,style:!0});var H=S(u);te&&te.l(H),H.forEach(m),o=z(B),_=w(B,"DIV",{stle:!0,class:!0});var $=S(_);v=w($,"TEXTAREA",{rows:!0,placeholder:!0,style:!0,class:!0}),S(v).forEach(m),$.forEach(m),b=z(B),p=w(B,"DIV",{style:!0,class:!0});var x=S(p);k=w(x,"DIV",{class:!0});var ee=S(k);ie.l(ee),h=z(ee),ae.l(ee),ee.forEach(m),D=z(x),V=w(x,"DIV",{style:!0,class:!0});var L=S(V);F=w(L,"BUTTON",{class:!0});var ce=S(F);Y=K(ce,"Delete"),ce.forEach(m),N=z(L),Z=w(L,"BUTTON",{class:!0});var Ce=S(Z);X=K(Ce,"Done"),Ce.forEach(m),L.forEach(m),x.forEach(m),P=z(B),R=w(B,"DIV",{style:!0,class:!0});var Be=S(R);q=K(Be,"Full task history:"),Be.forEach(m),le=z(B);for(let Fe=0;Fe<Q.length;Fe+=1)Q[Fe].l(B);B.forEach(m),this.h()},h(){T(l,"type","text"),T(l,"class","google-calendar-event-title svelte-bv1cfr"),d(l,"width","96%"),d(l,"margin-left","10px"),T(n,"class","material-icons svelte-bv1cfr"),d(n,"margin-left","auto"),d(n,"margin-right","0"),d(t,"display","flex"),T(t,"class","svelte-bv1cfr"),T(c,"class","google-calendar-event-time svelte-bv1cfr"),d(c,"margin-top","4px"),d(c,"margin-left","10px"),T(u,"class","google-calendar-event-detail svelte-bv1cfr"),d(u,"margin-top","12px"),d(u,"margin-left","16px"),T(v,"rows","5"),T(v,"placeholder","notes"),d(v,"margin-left","10px"),d(v,"width","100%"),d(v,"max-width","97%"),T(v,"class","svelte-bv1cfr"),T(_,"stle","float: left; width: 80%"),T(_,"class","svelte-bv1cfr"),T(k,"class","svelte-bv1cfr"),T(F,"class","svelte-bv1cfr"),T(Z,"class","svelte-bv1cfr"),d(V,"margin-left","auto"),d(V,"margin-right","16px"),T(V,"class","svelte-bv1cfr"),d(p,"display","flex"),d(p,"margin-left","10px"),T(p,"class","svelte-bv1cfr"),d(R,"font-size","1rem"),d(R,"margin-top","12px"),d(R,"margin-left","12px"),d(R,"font-weight","600"),T(R,"class","svelte-bv1cfr"),T(e,"class","detailed-card svelte-bv1cfr")},m(j,B){I(j,e,B),g(e,t),g(t,l),ne(l,s[8]),g(t,r),g(t,n),g(n,a),g(e,i),g(e,c),J&&J.m(c,null),g(e,f),g(e,u),te&&te.m(u,null),g(e,o),g(e,_),g(_,v),ne(v,s[7]),g(e,b),g(e,p),g(p,k),ie.m(k,null),g(k,h),ae.m(k,null),g(p,D),g(p,V),g(V,F),g(F,Y),g(V,N),g(V,Z),g(Z,X),g(e,P),g(e,R),g(R,q),g(e,le);for(let G=0;G<Q.length;G+=1)Q[G].m(e,null);O=!0,re||(_e=[M(l,"input",s[14]),M(l,"input",s[11]),M(n,"click",s[15]),M(v,"input",s[16]),M(v,"input",s[10]),M(F,"click",s[22]),M(Z,"click",s[23])],re=!0)},p(j,B){if(B&256&&l.value!==j[8]&&ne(l,j[8]),!j[0].isDone&&j[0].startTime&&j[0].startDate?J?J.p(j,B):(J=st(j),J.c(),J.m(c,null)):J&&(J.d(1),J=null),ye===(ye=pe(j))&&te?te.p(j,B):(te&&te.d(1),te=ye&&ye(j),te&&(te.c(),te.m(u,null))),B&128&&ne(v,j[7]),Re===(Re=ze(j))&&ie?ie.p(j,B):(ie.d(1),ie=Re(j),ie&&(ie.c(),ie.m(k,h))),je===(je=Ae(j))&&ae?ae.p(j,B):(ae.d(1),ae=je(j),ae&&(ae.c(),ae.m(k,null))),B&1){me=j[0].children;let G;for(G=0;G<me.length;G+=1){const Oe=tt(j,me,G);Q[G]?(Q[G].p(Oe,B),C(Q[G],1)):(Q[G]=nt(Oe),Q[G].c(),C(Q[G],1),Q[G].m(e,null))}for(oe(),G=me.length;G<Q.length;G+=1)Ke(G);fe()}},i(j){if(!O){for(let B=0;B<me.length;B+=1)C(Q[B]);O=!0}},o(j){Q=Q.filter(Boolean);for(let B=0;B<Q.length;B+=1)A(Q[B]);O=!1},d(j){j&&m(e),J&&J.d(),te&&te.d(),ie.d(),ae.d(),Ne(Q,j),re=!1,he(_e)}}}function st(s){let e,t=s[0].startDate+" "+s[0].startTime+"",l;return{c(){e=W("Scheduled for "),l=W(t)},l(r){e=K(r,"Scheduled for "),l=K(r,t)},m(r,n){I(r,e,n),I(r,l,n)},p(r,n){n&1&&t!==(t=r[0].startDate+" "+r[0].startTime+"")&&de(l,t)},d(r){r&&m(e),r&&m(l)}}}function Ht(s){let e,t=s[0].repeatsOnDaysOfWeek+"",l;return{c(){e=W("Repeats "),l=W(t)},l(r){e=K(r,"Repeats "),l=K(r,t)},m(r,n){I(r,e,n),I(r,l,n)},p(r,n){n&1&&t!==(t=r[0].repeatsOnDaysOfWeek+"")&&de(l,t)},d(r){r&&m(e),r&&m(l)}}}function Lt(s){let e,t=s[0].daysBeforeRepeating+"",l,r,n=(s[0].completionCount||0)+"",a,i;return{c(){e=W("Repeats every "),l=W(t),r=W(" days, completed "),a=W(n),i=W(" times")},l(c){e=K(c,"Repeats every "),l=K(c,t),r=K(c," days, completed "),a=K(c,n),i=K(c," times")},m(c,f){I(c,e,f),I(c,l,f),I(c,r,f),I(c,a,f),I(c,i,f)},p(c,f){f&1&&t!==(t=c[0].daysBeforeRepeating+"")&&de(l,t),f&1&&n!==(n=(c[0].completionCount||0)+"")&&de(a,n)},d(c){c&&m(e),c&&m(l),c&&m(r),c&&m(a),c&&m(i)}}}function Wt(s){let e,t,l,r,n;return{c(){e=y("input"),t=U(),l=y("input"),this.h()},l(a){e=w(a,"INPUT",{placeholder:!0,style:!0,class:!0}),t=z(a),l=w(a,"INPUT",{placeholder:!0,style:!0,class:!0}),this.h()},h(){T(e,"placeholder","12/31"),d(e,"width","40px"),T(e,"class","svelte-bv1cfr"),T(l,"placeholder","19:45"),d(l,"width","40px"),T(l,"class","svelte-bv1cfr")},m(a,i){I(a,e,i),ne(e,s[2]),I(a,t,i),I(a,l,i),ne(l,s[3]),r||(n=[M(e,"input",s[18]),M(l,"input",s[19]),M(l,"keypress",s[13])],r=!0)},p(a,i){i&4&&e.value!==a[2]&&ne(e,a[2]),i&8&&l.value!==a[3]&&ne(l,a[3])},d(a){a&&m(e),a&&m(t),a&&m(l),r=!1,he(n)}}}function Kt(s){let e,t,l,r;return{c(){e=y("button"),t=W("Schedule"),this.h()},l(n){e=w(n,"BUTTON",{class:!0});var a=S(e);t=K(a,"Schedule"),a.forEach(m),this.h()},h(){T(e,"class","svelte-bv1cfr")},m(n,a){I(n,e,a),g(e,t),l||(r=M(e,"click",s[17]),l=!0)},p:Pe,d(n){n&&m(e),l=!1,r()}}}function Yt(s){let e,t,l,r,n,a;return{c(){e=y("div"),t=W("Repeats every "),l=y("input"),r=W(" days"),this.h()},l(i){e=w(i,"DIV",{style:!0,class:!0});var c=S(e);t=K(c,"Repeats every "),l=w(c,"INPUT",{style:!0,placeholder:!0,class:!0}),r=K(c," days"),c.forEach(m),this.h()},h(){d(l,"width","20px"),T(l,"placeholder","0"),T(l,"class","svelte-bv1cfr"),d(e,"display","flex"),T(e,"class","svelte-bv1cfr")},m(i,c){I(i,e,c),g(e,t),g(e,l),ne(l,s[6]),g(e,r),n||(a=[M(l,"input",s[21]),M(l,"keypress",s[12])],n=!0)},p(i,c){c&64&&l.value!==i[6]&&ne(l,i[6])},d(i){i&&m(e),n=!1,he(a)}}}function qt(s){let e,t,l,r;return{c(){e=y("button"),t=W("Repeat task"),this.h()},l(n){e=w(n,"BUTTON",{style:!0,class:!0});var a=S(e);t=K(a,"Repeat task"),a.forEach(m),this.h()},h(){d(e,"margin-left","0px"),T(e,"class","svelte-bv1cfr")},m(n,a){I(n,e,a),g(e,t),l||(r=M(e,"click",s[20]),l=!0)},p:Pe,d(n){n&&m(e),l=!1,r()}}}function nt(s){let e,t,l,r;return t=new et({props:{taskObject:s[27]}}),{c(){e=y("div"),ve(t.$$.fragment),l=U(),this.h()},l(n){e=w(n,"DIV",{style:!0,class:!0});var a=S(e);ke(t.$$.fragment,a),l=z(a),a.forEach(m),this.h()},h(){d(e,"margin-left","12px"),T(e,"class","svelte-bv1cfr")},m(n,a){I(n,e,a),ge(t,e,null),g(e,l),r=!0},p(n,a){const i={};a&1&&(i.taskObject=n[27]),t.$set(i)},i(n){r||(C(t.$$.fragment,n),r=!0)},o(n){A(t.$$.fragment,n),r=!1},d(n){n&&m(e),be(t)}}}function Xt(s){let e,t,l=s[1]&&lt(s);return{c(){l&&l.c(),e=ue()},l(r){l&&l.l(r),e=ue()},m(r,n){l&&l.m(r,n),I(r,e,n),t=!0},p(r,[n]){r[1]?l?(l.p(r,n),n&2&&C(l,1)):(l=lt(r),l.c(),C(l,1),l.m(e.parentNode,e)):l&&(oe(),A(l,1,1,()=>{l=null}),fe())},i(r){t||(C(l),t=!0)},o(r){A(l),t=!1},d(r){l&&l.d(r),r&&m(e)}}}function Gt(s,e,t){let{taskObject:l}=e,{isOpen:r=!1}=e,n,a,i=!1,c=!1,f=7;const u=Le();let o=l.notes||"",_=l.name||"";const v=Ge.throttle(O=>{t(7,o=O.target.value),p()},500),b=Ge.throttle(O=>{t(8,_=O.target.value),k()},500);function p(){t(0,l.notes=o,l),u("task-notes-update")}function k(){t(0,l.name=_,l),u("task-title-update")}function h(O){O.charCode===13&&(f?(t(0,l.daysBeforeRepeating=f,l),t(0,l.startDate=Me(),l),t(0,l.startTime="23:30",l)):(alert("Task is reset and will no longer repeat"),t(0,l.daysBeforeRepeating=0,l)),u("task-repeat"),t(6,f=0),t(5,c=!1))}function D(O){O.charCode===13&&(!n||!a?alert("Need BOTH date and time"):(t(0,l.startDate=n,l),t(0,l.startTime=a,l)),u("task-schedule"),t(2,n=""),t(3,a=""))}function V(){_=this.value,t(8,_)}const F=()=>u("card-close");function Y(){o=this.value,t(7,o)}const N=()=>t(4,i=!0);function Z(){n=this.value,t(2,n)}function X(){a=this.value,t(3,a)}const P=()=>t(5,c=!0);function R(){f=this.value,t(6,f)}const q=()=>u("task-delete"),le=()=>u("task-done");return s.$$set=O=>{"taskObject"in O&&t(0,l=O.taskObject),"isOpen"in O&&t(1,r=O.isOpen)},[l,r,n,a,i,c,f,o,_,u,v,b,h,D,V,F,Y,N,Z,X,P,R,q,le]}class Jt extends Ve{constructor(e){super();Se(this,e,Gt,Xt,we,{taskObject:0,isOpen:1})}}function rt(s,e,t){const l=s.slice();return l[32]=e[t],l[34]=t,l}function it(s){let e,t,l,r,n,a,i,c,f;function u(h,D){return h[2]?Qt:Zt}let o=u(s),_=o(s),v=s[0].children,b=[];for(let h=0;h<v.length;h+=1)b[h]=at(rt(s,v,h));const p=h=>A(b[h],1,1,()=>{b[h]=null});let k=s[4]&&ot(s);return{c(){e=y("div"),t=y("div"),l=y("div"),_.c(),r=U(),n=y("div");for(let h=0;h<b.length;h+=1)b[h].c();a=U(),k&&k.c(),this.h()},l(h){e=w(h,"DIV",{draggable:!0,class:!0,style:!0});var D=S(e);t=w(D,"DIV",{class:!0});var V=S(t);l=w(V,"DIV",{style:!0,class:!0});var F=S(l);_.l(F),F.forEach(m),V.forEach(m),r=z(D),n=w(D,"DIV",{style:!0});var Y=S(n);for(let N=0;N<b.length;N+=1)b[N].l(Y);a=z(Y),k&&k.l(Y),Y.forEach(m),D.forEach(m),this.h()},h(){d(l,"font-size",1.5*.85**s[1]+"rem"),d(l,"font-family","aktiv-grotesk, sans-serif"),T(l,"class","keep-on-same-line name-of-task svelte-t4v7r0"),se(l,"scheduled-orange",!s[0].isDone&&s[0].startTime&&s[0].startDate),se(l,"crossed-out",s[0].isDone),T(t,"class","current-task-flexbox svelte-t4v7r0"),d(n,"margin-top",20*.7**s[1]+"px"),T(e,"draggable","true"),T(e,"class","scheduled-task svelte-t4v7r0"),d(e,"margin-left",(s[1]===1?"0":"20")+"px"),d(e,"margin-bottom","10px"),d(e,"width",350*.8**s[1]+"px"),d(e,"height",s[0].duration&&!s[7]&&s[0].duration*90/60>s[0].children.length*60*.7**s[1]&&s[0].duration*90/60>60*.65**s[1]?`${s[0].duration*90/60}px`:""),d(e,"padding-left",10*.8**s[1]+"px"),se(e,"black-duration-line",!s[0].isDone&&!(s[0].startTime&&s[0].startDate)),se(e,"orange-duration-line",!s[0].isDone&&s[0].startTime&&s[0].startDate),se(e,"green-duration-line",s[0].isDone)},m(h,D){I(h,e,D),g(e,t),g(t,l),_.m(l,null),g(e,r),g(e,n);for(let V=0;V<b.length;V+=1)b[V].m(n,null);g(n,a),k&&k.m(n,null),i=!0,c||(f=[M(e,"dragstart",Rt(s[23])),M(e,"pointerleave",s[13])],c=!0)},p(h,D){if(o===(o=u(h))&&_?_.p(h,D):(_.d(1),_=o(h),_&&(_.c(),_.m(l,null))),(!i||D[0]&2)&&d(l,"font-size",1.5*.85**h[1]+"rem"),D[0]&1&&se(l,"scheduled-orange",!h[0].isDone&&h[0].startTime&&h[0].startDate),D[0]&1&&se(l,"crossed-out",h[0].isDone),D[0]&515){v=h[0].children;let V;for(V=0;V<v.length;V+=1){const F=rt(h,v,V);b[V]?(b[V].p(F,D),C(b[V],1)):(b[V]=at(F),b[V].c(),C(b[V],1),b[V].m(n,a))}for(oe(),V=v.length;V<b.length;V+=1)p(V);fe()}h[4]?k?k.p(h,D):(k=ot(h),k.c(),k.m(n,null)):k&&(k.d(1),k=null),(!i||D[0]&2)&&d(n,"margin-top",20*.7**h[1]+"px"),(!i||D[0]&2)&&d(e,"margin-left",(h[1]===1?"0":"20")+"px"),(!i||D[0]&2)&&d(e,"width",350*.8**h[1]+"px"),(!i||D[0]&131)&&d(e,"height",h[0].duration&&!h[7]&&h[0].duration*90/60>h[0].children.length*60*.7**h[1]&&h[0].duration*90/60>60*.65**h[1]?`${h[0].duration*90/60}px`:""),(!i||D[0]&2)&&d(e,"padding-left",10*.8**h[1]+"px"),D[0]&1&&se(e,"black-duration-line",!h[0].isDone&&!(h[0].startTime&&h[0].startDate)),D[0]&1&&se(e,"orange-duration-line",!h[0].isDone&&h[0].startTime&&h[0].startDate),D[0]&1&&se(e,"green-duration-line",h[0].isDone)},i(h){if(!i){for(let D=0;D<v.length;D+=1)C(b[D]);i=!0}},o(h){b=b.filter(Boolean);for(let D=0;D<b.length;D+=1)A(b[D]);i=!1},d(h){h&&m(e),_.d(),Ne(b,h),k&&k.d(),c=!1,he(f)}}}function Qt(s){let e,t,l;return{c(){e=y("input")},l(r){e=w(r,"INPUT",{})},m(r,n){I(r,e,n),ne(e,s[3]),t||(l=[M(e,"input",s[15]),M(e,"keypress",s[11])],t=!0)},p(r,n){n[0]&8&&e.value!==r[3]&&ne(e,r[3])},d(r){r&&m(e),t=!1,he(l)}}}function Zt(s){let e,t=s[0].name+"",l,r,n;return{c(){e=y("div"),l=W(t),this.h()},l(a){e=w(a,"DIV",{class:!0,style:!0});var i=S(e);l=K(i,t),i.forEach(m),this.h()},h(){T(e,"class","truncate svelte-t4v7r0"),d(e,"width",350*.85**s[1]+"px")},m(a,i){I(a,e,i),g(e,l),r||(n=[M(e,"click",s[14]),M(e,"pointerenter",s[12])],r=!0)},p(a,i){i[0]&1&&t!==(t=a[0].name+"")&&de(l,t),i[0]&2&&d(e,"width",350*.85**a[1]+"px")},d(a){a&&m(e),r=!1,he(n)}}}function at(s){let e,t;function l(...r){return s[16](s[34],...r)}return e=new ft({props:{taskObject:s[32],depth:s[1]+1}}),e.$on("task-create",l),e.$on("task-click",s[17]),e.$on("task-done",s[18]),e.$on("task-delete",s[19]),e.$on("task-repeating",s[20]),{c(){ve(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,n){ge(e,r,n),t=!0},p(r,n){s=r;const a={};n[0]&1&&(a.taskObject=s[32]),n[0]&2&&(a.depth=s[1]+1),e.$set(a)},i(r){t||(C(e.$$.fragment,r),t=!0)},o(r){A(e.$$.fragment,r),t=!1},d(r){be(e,r)}}}function ot(s){let e;function t(n,a){return n[5]?$t:xt}let l=t(s),r=l(s);return{c(){r.c(),e=ue()},l(n){r.l(n),e=ue()},m(n,a){r.m(n,a),I(n,e,a)},p(n,a){l===(l=t(n))&&r?r.p(n,a):(r.d(1),r=l(n),r&&(r.c(),r.m(e.parentNode,e)))},d(n){r.d(n),n&&m(e)}}}function $t(s){let e,t,l,r;return{c(){e=y("div"),t=y("input"),this.h()},l(n){e=w(n,"DIV",{style:!0});var a=S(e);t=w(a,"INPUT",{placeholder:!0,style:!0}),a.forEach(m),this.h()},h(){T(t,"placeholder","Type sub-task"),d(t,"width","100%"),d(t,"margin-left","5px"),d(e,"display","flex"),d(e,"align-items","center"),d(e,"margin-left","20px")},m(n,a){I(n,e,a),g(e,t),ne(t,s[6]),l||(r=[M(t,"input",s[22]),M(t,"keypress",s[10])],l=!0)},p(n,a){a[0]&64&&t.value!==n[6]&&ne(t,n[6])},d(n){n&&m(e),l=!1,he(r)}}}function xt(s){let e,t,l,r;return{c(){e=y("div"),t=W("new sub-task"),this.h()},l(n){e=w(n,"DIV",{style:!0});var a=S(e);t=K(a,"new sub-task"),a.forEach(m),this.h()},h(){d(e,"margin-left","20px"),d(e,"margin-right","20px"),d(e,"margin-bottom","10px"),d(e,"border-left","2px solid grey"),d(e,"color","grey"),d(e,"padding-left","5px"),d(e,"padding-bottom",8*.68**(s[1]+1)+"px"),d(e,"font-size",1.5*.85**(s[1]+1)+"rem")},m(n,a){I(n,e,a),g(e,t),l||(r=M(e,"click",s[21]),l=!0)},p(n,a){a[0]&2&&d(e,"padding-bottom",8*.68**(n[1]+1)+"px"),a[0]&2&&d(e,"font-size",1.5*.85**(n[1]+1)+"rem")},d(n){n&&m(e),l=!1,r()}}}function el(s){let e,t,l=!s[0].isDeleted&&!s[0].isDone&&!(s[0].startTime&&s[0].startDate)&&it(s);return{c(){l&&l.c(),e=ue()},l(r){l&&l.l(r),e=ue()},m(r,n){l&&l.m(r,n),I(r,e,n),t=!0},p(r,n){!r[0].isDeleted&&!r[0].isDone&&!(r[0].startTime&&r[0].startDate)?l?(l.p(r,n),n[0]&1&&C(l,1)):(l=it(r),l.c(),C(l,1),l.m(e.parentNode,e)):l&&(oe(),A(l,1,1,()=>{l=null}),fe())},i(r){t||(C(l),t=!0)},o(r){A(l),t=!1},d(r){l&&l.d(r),r&&m(e)}}}function tl(s,e){s.dataTransfer.setData("text/plain",e)}function ll(s,e,t){let l,{taskObject:r}=e,{depth:n}=e;const a=Le();let i=!1,c="",f=!1,u=!1,o="";function _(O,re){const _e=Xe({},r.children[re]);_e.children=O.detail.updatedChildren;const J=[...r.children];J[re]=_e,k(J)}function v(O){O.charCode===13&&(o&&p(o),t(6,o=""),t(5,u=!1))}function b(O){if(O.charCode===13){if(!c){alert("Task name can't be empty.");return}t(0,r.name=c,r),a("task-done",{}),t(3,c=""),t(2,i=!1)}}function p(O){k([...r.children,{name:O,children:[]}])}function k(O){a("task-create",{updatedChildren:O})}function h(){t(4,f=!0)}function D(){t(4,f=!1)}const V=()=>a("task-click",{task:r});function F(){c=this.value,t(3,c)}const Y=(O,re)=>_(re,O);function N(O){Ee.call(this,s,O)}function Z(O){Ee.call(this,s,O)}function X(O){Ee.call(this,s,O)}function P(O){Ee.call(this,s,O)}const R=()=>t(5,u=!0);function q(){o=this.value,t(6,o)}const le=O=>tl(O,r.name);return s.$$set=O=>{"taskObject"in O&&t(0,r=O.taskObject),"depth"in O&&t(1,n=O.depth)},s.$$.update=()=>{s.$$.dirty[0]&1&&t(7,l=r.children.filter(O=>O.duration).length>0)},[r,n,i,c,f,u,o,l,a,_,v,b,h,D,V,F,Y,N,Z,X,P,R,q,le]}class ft extends Ve{constructor(e){super();Se(this,e,ll,el,we,{taskObject:0,depth:1},null,[-1,-1])}}function sl(s){let e,t,l;return{c(){e=y("div"),this.h()},l(r){e=w(r,"DIV",{style:!0,draggable:!0});var n=S(e);n.forEach(m),this.h()},h(){d(e,"height",s[3]-20-10+"px"),d(e,"width","11vw"),T(e,"draggable","true")},m(r,n){I(r,e,n),t||(l=M(e,"dragstart",s[14]),t=!0)},p(r,n){n&8&&d(e,"height",r[3]-20-10+"px")},d(r){r&&m(e),t=!1,l()}}}function nl(s){let e,t,l=s[4].name+"",r,n,a,i,c,f,u;const o=s[12].default,_=jt(o,s,s[11],null),v=_||sl(s);return{c(){e=y("div"),t=y("div"),r=W(l),n=U(),v&&v.c(),a=U(),i=y("div"),this.h()},l(b){e=w(b,"DIV",{class:!0,style:!0});var p=S(e);t=w(p,"DIV",{draggable:!0,style:!0});var k=S(t);r=K(k,l),k.forEach(m),n=z(p),v&&v.l(p),a=z(p),i=w(p,"DIV",{draggable:!0,style:!0});var h=S(i);h.forEach(m),p.forEach(m),this.h()},h(){T(t,"draggable","true"),d(t,"width","11vw"),T(i,"draggable","true"),d(i,"height","8px"),d(i,"width","11vw"),d(i,"position","absolute"),d(i,"bottom","0"),d(i,"left","-3px"),d(i,"cursor","ns-resize"),T(e,"class","scheduled-task svelte-1at2tfe"),d(e,"top",s[1]+"px"),d(e,"height",s[3]+"px"),d(e,"left",s[2]+"px"),d(e,"font-size",s[0]+"rem"),se(e,"green",s[4].isDone)},m(b,p){I(b,e,p),g(e,t),g(t,r),g(e,n),v&&v.m(e,null),g(e,a),g(e,i),c=!0,f||(u=[M(t,"dragstart",s[13]),M(i,"dragstart",s[15]),M(i,"dragend",s[16]),M(e,"click",s[17])],f=!0)},p(b,[p]){(!c||p&16)&&l!==(l=b[4].name+"")&&de(r,l),_?_.p&&(!c||p&2048)&&Ct(_,o,b,b[11],c?Ft(o,b[11],p,null):Bt(b[11]),null):v&&v.p&&(!c||p&24)&&v.p(b,c?p:-1),(!c||p&2)&&d(e,"top",b[1]+"px"),(!c||p&8)&&d(e,"height",b[3]+"px"),(!c||p&4)&&d(e,"left",b[2]+"px"),(!c||p&1)&&d(e,"font-size",b[0]+"rem"),p&16&&se(e,"green",b[4].isDone)},i(b){c||(C(v,b),c=!0)},o(b){A(v,b),c=!1},d(b){b&&m(e),v&&v.d(b),f=!1,he(u)}}}function ut(s,e){s.dataTransfer.setData("text/plain",e)}function rl(s,e,t){let{$$slots:l={},$$scope:r}=e,{fontSize:n=1}=e,{name:a=""}=e,{offsetFromTop:i}=e,{offsetFromLeft:c=0}=e,{height:f=15}=e,{duration:u=15}=e,{task:o=null}=e,{calendarStartTime:_=""}=e;const v=Le();let b=0;function p(N){b=N.offsetY}function k(N,Z){Z.duration||(Z.duration=10);const X=60/90,P=(N.offsetY-b)*X;v("task-duration-adjusted",{taskName:Z.name,duration:Math.max(1,Z.duration+P)})}const h=N=>ut(N,o.name),D=N=>ut(N,o.name),V=N=>p(N),F=N=>k(N,o),Y=()=>v("task-click",{task:o});return s.$$set=N=>{"fontSize"in N&&t(0,n=N.fontSize),"name"in N&&t(8,a=N.name),"offsetFromTop"in N&&t(1,i=N.offsetFromTop),"offsetFromLeft"in N&&t(2,c=N.offsetFromLeft),"height"in N&&t(3,f=N.height),"duration"in N&&t(9,u=N.duration),"task"in N&&t(4,o=N.task),"calendarStartTime"in N&&t(10,_=N.calendarStartTime),"$$scope"in N&&t(11,r=N.$$scope)},[n,i,c,f,o,v,p,k,a,u,_,r,l,h,D,V,F,Y]}class ct extends Ve{constructor(e){super();Se(this,e,rl,nl,we,{fontSize:0,name:8,offsetFromTop:1,offsetFromLeft:2,height:3,duration:9,task:4,calendarStartTime:10})}}function dt(s,e,t){const l=s.slice();return l[12]=e[t],l[14]=t,l}function ht(s,e,t){const l=s.slice();return l[15]=e[t],l[14]=t,l}function _t(s){let e,t,l,r=s[4],n=[];for(let f=0;f<r.length;f+=1)n[f]=pt(ht(s,r,f));let a=s[0],i=[];for(let f=0;f<a.length;f+=1)i[f]=mt(dt(s,a,f));const c=f=>A(i[f],1,1,()=>{i[f]=null});return{c(){for(let f=0;f<n.length;f+=1)n[f].c();e=U();for(let f=0;f<i.length;f+=1)i[f].c();t=ue()},l(f){for(let u=0;u<n.length;u+=1)n[u].l(f);e=z(f);for(let u=0;u<i.length;u+=1)i[u].l(f);t=ue()},m(f,u){for(let o=0;o<n.length;o+=1)n[o].m(f,u);I(f,e,u);for(let o=0;o<i.length;o+=1)i[o].m(f,u);I(f,t,u),l=!0},p(f,u){if(u&16){r=f[4];let o;for(o=0;o<r.length;o+=1){const _=ht(f,r,o);n[o]?n[o].p(_,u):(n[o]=pt(_),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}if(u&41){a=f[0];let o;for(o=0;o<a.length;o+=1){const _=dt(f,a,o);i[o]?(i[o].p(_,u),C(i[o],1)):(i[o]=mt(_),i[o].c(),C(i[o],1),i[o].m(t.parentNode,t))}for(oe(),o=a.length;o<i.length;o+=1)c(o);fe()}},i(f){if(!l){for(let u=0;u<a.length;u+=1)C(i[u]);l=!0}},o(f){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)A(i[u]);l=!1},d(f){Ne(n,f),f&&m(e),Ne(i,f),f&&m(t)}}}function pt(s){let e,t=s[15].substring(0,5)+"",l;return{c(){e=y("div"),l=W(t),this.h()},l(r){e=w(r,"DIV",{class:!0,style:!0});var n=S(e);l=K(n,t),n.forEach(m),this.h()},h(){T(e,"class","time-indicator svelte-xbksim"),d(e,"top",30+We*s[14]+"px")},m(r,n){I(r,e,n),g(e,l)},p:Pe,d(r){r&&m(e)}}}function mt(s){let e,t;return e=new ct({props:{task:s[12],offsetFromTop:s[5](s[12]),height:s[12].duration*s[3]||30,fontSize:.8,offsetFromLeft:30}}),e.$on("task-click",s[7]),e.$on("task-duration-adjusted",s[8]),{c(){ve(e.$$.fragment)},l(l){ke(e.$$.fragment,l)},m(l,r){ge(e,l,r),t=!0},p(l,r){const n={};r&1&&(n.task=l[12]),r&1&&(n.offsetFromTop=l[5](l[12])),r&1&&(n.height=l[12].duration*l[3]||30),e.$set(n)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){be(e,l)}}}function il(s){let e,t,l,r=s[2]()+"",n,a,i,c,f,u=s[1]&&_t(s);return{c(){e=y("div"),t=y("div"),l=y("div"),n=W(r),a=U(),u&&u.c(),this.h()},l(o){e=w(o,"DIV",{style:!0,class:!0});var _=S(e);t=w(_,"DIV",{id:!0,style:!0,class:!0});var v=S(t);l=w(v,"DIV",{style:!0,class:!0});var b=S(l);n=K(b,r),b.forEach(m),a=z(v),u&&u.l(v),v.forEach(m),_.forEach(m),this.h()},h(){d(l,"margin-top","27px"),d(l,"font-weight","600"),T(l,"class","svelte-xbksim"),T(t,"id","calendar-day-container"),d(t,"position","relative"),d(t,"width","12vw"),d(t,"height",We*vt+"px"),T(t,"class","svelte-xbksim"),d(e,"overflow-y","scroll"),d(e,"overflow-x","hidden"),d(e,"height","77vh"),T(e,"class","svelte-xbksim")},m(o,_){I(o,e,_),g(e,t),g(t,l),g(l,n),g(t,a),u&&u.m(t,null),i=!0,c||(f=[M(t,"drop",s[9]),M(t,"dragover",al)],c=!0)},p(o,[_]){o[1]?u?(u.p(o,_),_&2&&C(u,1)):(u=_t(o),u.c(),C(u,1),u.m(t,null)):u&&(oe(),A(u,1,1,()=>{u=null}),fe())},i(o){i||(C(u),i=!0)},o(o){A(u),i=!1},d(o){o&&m(e),u&&u.d(),c=!1,he(f)}}}const We=80,vt=16;function al(s){s.preventDefault(),s.dataTransfer.dropEffect="move"}function ol(s,e,t){let{scheduledTasks:l}=e;const r=Le(),n=Me,a=80/60;let i=[],c="";function f(){const p=new Date,k=p.getHours()*60;for(const D of l){const V=D.startTime.substring(0,2),F=parseInt(V)*60,Y=F+D.duration;F<k&&k<Y&&t(1,c=`${V}:00`)}if(!c){const D=p.getHours();t(1,c=`${D<10?"0":""}${D}:00`)}let h=p.getHours();for(let D=0;D<vt;D++)h===24&&(h=0),h<10?i.push("0"+h+":00"):i.push(h+":00"),h+=1}f();function u({startTime:p}){const k=p.slice(0,2),h=p.slice(3,5);return(Number(k)+Number(h)/60-parseInt(c.substring(0,2)))*We}function o(p){console.log("drop detected"),p.preventDefault();var h=document.getElementById("calendar-day-container").getBoundingClientRect();h.left,h.top;let D=p.layerY/We;const V=D-Math.floor(D),F=Math.trunc(D);let Y=V*60,N;Y<10?N=`0${Y.toPrecision(1)}`:N=Y.toPrecision(2),console.log("calendarStartTime =",c);const Z=parseInt(c.substring(0,2));let X=Z+F;X<10&&(X=`0${X}`),console.log("origin =",Z);const P=`${X}:${N}`;console.log("scheduledTime =",P),r("task-scheduled",{taskName:p.dataTransfer.getData("text/plain"),timeOfDay:P,dateScheduled:n()})}function _(p){Ee.call(this,s,p)}function v(p){Ee.call(this,s,p)}const b=p=>o(p);return s.$$set=p=>{"scheduledTasks"in p&&t(0,l=p.scheduledTasks)},[l,c,n,a,i,u,o,_,v,b]}class fl extends Ve{constructor(e){super();Se(this,e,ol,il,we,{scheduledTasks:0})}}function kt(s,e,t){const l=s.slice();return l[4]=e[t],l[6]=t,l}function gt(s){let e,t,l,r=s[4].startDate+"",n,a,i,c,f,u;return i=new ct({props:{task:s[4],fontSize:.8,offsetFromTop:20,height:s[4].duration*s[1]||15}}),i.$on("task-click",s[2]),i.$on("task-duration-adjusted",s[3]),{c(){e=y("div"),t=y("div"),l=y("b"),n=W(r),a=U(),ve(i.$$.fragment),c=U(),f=y("div"),this.h()},l(o){e=w(o,"DIV",{style:!0,class:!0});var _=S(e);t=w(_,"DIV",{class:!0});var v=S(t);l=w(v,"B",{class:!0});var b=S(l);n=K(b,r),b.forEach(m),v.forEach(m),a=z(_),ke(i.$$.fragment,_),_.forEach(m),c=z(o),f=w(o,"DIV",{class:!0}),S(f).forEach(m),this.h()},h(){T(l,"class","svelte-d8tb0p"),T(t,"class","svelte-d8tb0p"),d(e,"position","relative"),d(e,"height",bt+(s[4].duration*s[1]||15)+"px"),d(e,"margin-top","25px"),T(e,"class","svelte-d8tb0p"),T(f,"class","broken-axis svelte-d8tb0p")},m(o,_){I(o,e,_),g(e,t),g(t,l),g(l,n),g(e,a),ge(i,e,null),I(o,c,_),I(o,f,_),u=!0},p(o,_){(!u||_&1)&&r!==(r=o[4].startDate+"")&&de(n,r);const v={};_&1&&(v.task=o[4]),_&1&&(v.height=o[4].duration*o[1]||15),i.$set(v),(!u||_&1)&&d(e,"height",bt+(o[4].duration*o[1]||15)+"px")},i(o){u||(C(i.$$.fragment,o),u=!0)},o(o){A(i.$$.fragment,o),u=!1},d(o){o&&m(e),be(i),o&&m(c),o&&m(f)}}}function ul(s){let e,t,l,r=s[0],n=[];for(let i=0;i<r.length;i+=1)n[i]=gt(kt(s,r,i));const a=i=>A(n[i],1,1,()=>{n[i]=null});return{c(){e=y("div"),t=y("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=w(i,"DIV",{style:!0,class:!0});var c=S(e);t=w(c,"DIV",{style:!0,class:!0});var f=S(t);for(let u=0;u<n.length;u+=1)n[u].l(f);f.forEach(m),c.forEach(m),this.h()},h(){d(t,"width","12vw"),d(t,"margin-left","0px"),d(t,"margin-top","27px"),d(t,"position","relative"),d(t,"height","1600px"),T(t,"class","svelte-d8tb0p"),d(e,"height","77vh"),d(e,"overflow-y","scroll"),d(e,"overflow-x","hidden"),T(e,"class","svelte-d8tb0p")},m(i,c){I(i,e,c),g(e,t);for(let f=0;f<n.length;f+=1)n[f].m(t,null);l=!0},p(i,[c]){if(c&3){r=i[0];let f;for(f=0;f<r.length;f+=1){const u=kt(i,r,f);n[f]?(n[f].p(u,c),C(n[f],1)):(n[f]=gt(u),n[f].c(),C(n[f],1),n[f].m(t,null))}for(oe(),f=r.length;f<n.length;f+=1)a(f);fe()}},i(i){if(!l){for(let c=0;c<r.length;c+=1)C(n[c]);l=!0}},o(i){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)A(n[c]);l=!1},d(i){i&&m(e),Ne(n,i)}}}const bt=20;function cl(s,e,t){let{futureScheduledTasks:l}=e;const r=90/60;function n(i){Ee.call(this,s,i)}function a(i){Ee.call(this,s,i)}return s.$$set=i=>{"futureScheduledTasks"in i&&t(0,l=i.futureScheduledTasks)},[l,r,n,a]}class dl extends Ve{constructor(e){super();Se(this,e,cl,ul,we,{futureScheduledTasks:0})}}function Dt(s,e,t){const l=s.slice();return l[49]=e[t],l}function Tt(s){let e,t;return e=new Jt({props:{isOpen:s[8],taskObject:s[9]}}),e.$on("card-close",s[21]),e.$on("task-done",s[22]),e.$on("task-delete",s[23]),e.$on("task-repeat",s[18]),e.$on("task-schedule",s[18]),e.$on("task-title-update",s[18]),e.$on("task-notes-update",s[18]),{c(){ve(e.$$.fragment)},l(l){ke(e.$$.fragment,l)},m(l,r){ge(e,l,r),t=!0},p(l,r){const n={};r[0]&256&&(n.isOpen=l[8]),r[0]&512&&(n.taskObject=l[9]),e.$set(n)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){be(e,l)}}}function yt(s){let e,t,l,r,n,a=s[0],i=[];for(let u=0;u<a.length;u+=1)i[u]=Et(Dt(s,a,u));const c=u=>A(i[u],1,1,()=>{i[u]=null});let f=s[7]&&It(s);return{c(){for(let u=0;u<i.length;u+=1)i[u].c();e=U(),t=y("div"),f&&f.c(),this.h()},l(u){for(let _=0;_<i.length;_+=1)i[_].l(u);e=z(u),t=w(u,"DIV",{style:!0,class:!0});var o=S(t);f&&f.l(o),o.forEach(m),this.h()},h(){d(t,"height","200px"),T(t,"class","svelte-1ih468c")},m(u,o){for(let _=0;_<i.length;_+=1)i[_].m(u,o);I(u,e,o),I(u,t,o),f&&f.m(t,null),l=!0,r||(n=[M(t,"mouseenter",s[28]),M(t,"mouseleave",s[29])],r=!0)},p(u,o){if(o[0]&394241){a=u[0];let _;for(_=0;_<a.length;_+=1){const v=Dt(u,a,_);i[_]?(i[_].p(v,o),C(i[_],1)):(i[_]=Et(v),i[_].c(),C(i[_],1),i[_].m(e.parentNode,e))}for(oe(),_=a.length;_<i.length;_+=1)c(_);fe()}u[7]?f?f.p(u,o):(f=It(u),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},i(u){if(!l){for(let o=0;o<a.length;o+=1)C(i[o]);l=!0}},o(u){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)A(i[o]);l=!1},d(u){Ne(i,u),u&&m(e),u&&m(t),f&&f.d(),r=!1,he(n)}}}function wt(s){let e,t,l,r;function n(...a){return s[25](s[49],...a)}return t=new ft({props:{taskObject:s[49],depth:1}}),t.$on("task-click",s[24]),t.$on("task-create",n),t.$on("task-done",s[18]),t.$on("task-delete",s[18]),t.$on("task-repeating",s[18]),{c(){e=y("div"),ve(t.$$.fragment),l=U(),this.h()},l(a){e=w(a,"DIV",{class:!0});var i=S(e);ke(t.$$.fragment,i),l=z(i),i.forEach(m),this.h()},h(){T(e,"class","task-container svelte-1ih468c")},m(a,i){I(a,e,i),ge(t,e,null),g(e,l),r=!0},p(a,i){s=a;const c={};i[0]&1&&(c.taskObject=s[49]),t.$set(c)},i(a){r||(C(t.$$.fragment,a),r=!0)},o(a){A(t.$$.fragment,a),r=!1},d(a){a&&m(e),be(t)}}}function Et(s){let e,t,l=!s[49].isDeleted&&wt(s);return{c(){l&&l.c(),e=ue()},l(r){l&&l.l(r),e=ue()},m(r,n){l&&l.m(r,n),I(r,e,n),t=!0},p(r,n){r[49].isDeleted?l&&(oe(),A(l,1,1,()=>{l=null}),fe()):l?(l.p(r,n),n[0]&1&&C(l,1)):(l=wt(r),l.c(),C(l,1),l.m(e.parentNode,e))},i(r){t||(C(l),t=!0)},o(r){A(l),t=!1},d(r){l&&l.d(r),r&&m(e)}}}function It(s){let e;function t(n,a){return n[6]?hl:_l}let l=t(s),r=l(s);return{c(){r.c(),e=ue()},l(n){r.l(n),e=ue()},m(n,a){r.m(n,a),I(n,e,a)},p(n,a){l===(l=t(n))&&r?r.p(n,a):(r.d(1),r=l(n),r&&(r.c(),r.m(e.parentNode,e)))},d(n){r.d(n),n&&m(e)}}}function hl(s){let e,t,l,r;return{c(){e=y("div"),t=y("input"),this.h()},l(n){e=w(n,"DIV",{style:!0,class:!0});var a=S(e);t=w(a,"INPUT",{placeholder:!0,class:!0}),a.forEach(m),this.h()},h(){T(t,"placeholder","Type task..."),T(t,"class","svelte-1ih468c"),d(e,"display","flex"),d(e,"align-content","center"),d(e,"justify-items","center"),T(e,"class","svelte-1ih468c")},m(n,a){I(n,e,a),g(e,t),ne(t,s[5]),l||(r=[M(t,"input",s[27]),M(t,"keypress",s[16])],l=!0)},p(n,a){a[0]&32&&t.value!==n[5]&&ne(t,n[5])},d(n){n&&m(e),l=!1,he(r)}}}function _l(s){let e,t,l,r;return{c(){e=y("div"),t=W("New task"),this.h()},l(n){e=w(n,"DIV",{style:!0,class:!0});var a=S(e);t=K(a,"New task"),a.forEach(m),this.h()},h(){d(e,"font-size","1.5rem"),d(e,"color","grey"),T(e,"class","svelte-1ih468c")},m(n,a){I(n,e,a),g(e,t),l||(r=M(e,"click",s[26]),l=!0)},p:Pe,d(n){n&&m(e),l=!1,r()}}}function pl(s){let e=s[9],t,l,r,n,a,i,c=(s[3]?"music_note":"music_off")+"",f,u,o,_,v,b,p,k,h,D,V,F,Y,N,Z,X=Tt(s),P=s[0]&&yt(s);return k=new fl({props:{scheduledTasks:s[4]}}),k.$on("task-scheduled",s[30]),k.$on("task-duration-adjusted",s[31]),k.$on("task-click",s[32]),D=new dl({props:{futureScheduledTasks:s[1]}}),D.$on("task-duration-adjusted",s[33]),D.$on("task-click",s[34]),{c(){X.c(),t=U(),l=y("div"),r=y("div"),n=U(),a=y("div"),i=y("span"),f=W(c),u=U(),o=y("div"),_=y("div"),v=y("div"),P&&P.c(),b=U(),p=y("div"),ve(k.$$.fragment),h=U(),ve(D.$$.fragment),V=U(),F=y("audio"),this.h()},l(R){X.l(R),t=z(R),l=w(R,"DIV",{id:!0,style:!0,class:!0});var q=S(l);r=w(q,"DIV",{style:!0,class:!0}),S(r).forEach(m),n=z(q),a=w(q,"DIV",{style:!0,class:!0});var le=S(a);i=w(le,"SPAN",{class:!0,style:!0});var O=S(i);f=K(O,c),O.forEach(m),le.forEach(m),u=z(q),o=w(q,"DIV",{style:!0,class:!0});var re=S(o);_=w(re,"DIV",{class:!0});var _e=S(_);v=w(_e,"DIV",{class:!0});var J=S(v);P&&P.l(J),J.forEach(m),_e.forEach(m),b=z(re),p=w(re,"DIV",{class:!0});var pe=S(p);ke(k.$$.fragment,pe),h=z(pe),ke(D.$$.fragment,pe),pe.forEach(m),re.forEach(m),q.forEach(m),V=z(R),F=w(R,"AUDIO",{class:!0}),S(F).forEach(m),this.h()},h(){d(r,"height","100px"),T(r,"class","svelte-1ih468c"),T(i,"class","material-icons svelte-1ih468c"),d(i,"margin-left","auto"),d(i,"margin-right","0"),d(i,"color","white"),d(a,"position","absolute"),d(a,"top","30px"),d(a,"left","30px"),T(a,"class","svelte-1ih468c"),T(v,"class","todo-list svelte-1ih468c"),T(_,"class","fixed-height-container-for-scrolling svelte-1ih468c"),T(p,"class","calendar-section-container svelte-1ih468c"),d(o,"display","flex"),d(o,"padding-left","0"),d(o,"padding-top","0px"),T(o,"class","svelte-1ih468c"),T(l,"id","background-image-holder"),d(l,"height","100vh"),d(l,"padding-left","120px"),d(l,"padding-right","120px"),T(l,"class","svelte-1ih468c"),T(F,"class","svelte-1ih468c")},m(R,q){X.m(R,q),I(R,t,q),I(R,l,q),g(l,r),g(l,n),g(l,a),g(a,i),g(i,f),g(l,u),g(l,o),g(o,_),g(_,v),P&&P.m(v,null),g(o,b),g(o,p),ge(k,p,null),g(p,h),ge(D,p,null),I(R,V,q),I(R,F,q),s[35](F),Y=!0,N||(Z=M(a,"click",s[11]),N=!0)},p(R,q){q[0]&512&&we(e,e=R[9])?(oe(),A(X,1,1,Pe),fe(),X=Tt(R),X.c(),C(X),X.m(t.parentNode,t)):X.p(R,q),(!Y||q[0]&8)&&c!==(c=(R[3]?"music_note":"music_off")+"")&&de(f,c),R[0]?P?(P.p(R,q),q[0]&1&&C(P,1)):(P=yt(R),P.c(),C(P,1),P.m(v,null)):P&&(oe(),A(P,1,1,()=>{P=null}),fe());const le={};q[0]&16&&(le.scheduledTasks=R[4]),k.$set(le);const O={};q[0]&2&&(O.futureScheduledTasks=R[1]),D.$set(O)},i(R){Y||(C(X),C(P),C(k.$$.fragment,R),C(D.$$.fragment,R),Y=!0)},o(R){A(X),A(P),A(k.$$.fragment,R),A(D.$$.fragment,R),Y=!1},d(R){X.d(R),R&&m(t),R&&m(l),P&&P.d(),be(k),be(D),R&&m(V),R&&m(F),s[35](null),N=!1,Z()}}}function bl({params:s}){return{props:{userID:s.user}}}function Ot(s){return Math.floor(Math.random()*s)}function Ue({node:s,fulfilsCriteria:e,applyFunc:t}){e(s)&&t(s);for(const l of s.children)Ue({node:l,fulfilsCriteria:e,applyFunc:t})}function ml(s,e,t){let{userID:l}=e;const r=`users/${l}`;let n,a=["illiyard-moor.mp3","ms-leafre-lofi.mp3"],i,c=!1,f=["https://i.imgur.com/rzkUMW8.jpeg","https://i.imgur.com/ShnqIpJ.jpeg"],u;Pt(()=>{u=f[Ot(2)];const E=document.getElementById("background-image-holder");E.style["background-image"]=`url(${u})`,n=a[Ot(2)],t(2,i.src=n,i)});let o=null,_="",v=Me(),b=[],p=[],k="",h=!1,D=!1,V=!1,F={};function Y({task:E}){t(9,F=E),t(8,V=!0)}function N(){t(2,i.volume=.1,i),i.paused?(i.play(),t(3,c=!0)):(i.pause(),t(3,c=!1))}function Z(){t(4,b=[]);for(const E of o)Ue({node:E,fulfilsCriteria:H=>H.startDate===Me()&&H.startTime,applyFunc:H=>b.push(H)})}function X(){t(1,p=[]);for(const E of o)Ue({node:E,fulfilsCriteria:H=>H.startDate&&H.startTime&&H.startDate>Me(),applyFunc:H=>p.push(H)})}async function P(E){for(const H of o)Ue({node:H,fulfilsCriteria:$=>$.name===E,applyFunc:$=>$.isDone=!0});await Ie(De(Te,r),{allTasks:o})}async function R(E){console.log("deleteSubtree =",E),Ue({node:{name:"root",children:o},fulfilsCriteria:$=>$.children.filter(x=>x.name===E).length>=1,applyFunc:$=>{let x=null;for(let ee=0;ee<$.children.length;ee++)if($.children[ee].name===E){x=ee;break}x>=0&&$.children.splice(x,1)}}),await Ie(De(Te,r),{allTasks:o}),t(0,o=[...o])}async function q({taskName:E,timeOfDay:H,dateScheduled:$}){function x(ee){if(ee.name===E)return ee.startTime=H,ee.startDate=$,!0;for(const L of ee.children)if(x(L))return!0;return!1}for(const ee of o)if(x(ee)){console.log("successfully mutated allTasks, =",o);break}await Ie(De(Te,r),{allTasks:o}),t(0,o=[...o])}async function le({taskName:E,duration:H}){function $(x){if(x.name===E)return x.duration=H,!0;for(const ee of x.children)if($(ee))return!0;return!1}for(const x of o)if($(x)){console.log("successfully mutated allTasks, =",o);break}await Ie(De(Te,r),{allTasks:o}),t(0,o=[...o])}async function O(){const E=await Mt(De(Te,r));t(0,o=E.data().allTasks),t(20,_=E.data().lastRanRepeatAtDate)}O();function re(E){E.charCode===13&&_e()}function _e(){k||alert("You have to type something first");const E=[...o,{name:k,duration:15,children:[]}];Ie(De(Te,r),{allTasks:E}),t(0,o=[...E]),t(5,k="")}function J(E,H){const{updatedChildren:$}=E.detail;H.children=[...$],Ie(De(Te,r),{allTasks:o}),t(0,o=[...o])}function pe(){console.log("updateFirestore()"),Ie(De(Te,r),{allTasks:o}),t(0,o=[...o])}const ye=()=>t(8,V=!1),te=()=>P(F.name),ze=()=>R(F.name),Re=E=>Y(E.detail),ie=(E,H)=>J(H,E),Ae=()=>t(6,h=!0);function je(){k=this.value,t(5,k)}const ae=()=>t(7,D=!0),me=()=>t(7,D=!1),Q=E=>q(E.detail),Ke=E=>le(E.detail),j=E=>Y(E.detail),B=E=>le(E.detail),G=E=>Y(E.detail);function Oe(E){Ut[E?"unshift":"push"](()=>{i=E,t(2,i)})}return s.$$set=E=>{"userID"in E&&t(19,l=E.userID)},s.$$.update=()=>{if(s.$$.dirty[0]&1048579&&o&&(console.log("collecting scheduled tasks to be displayed..."),Z(),X(),p.sort((E,H)=>{const $=new Date(E.startDate),x=new Date(H.startDate);return $.getTime()-x.getTime()}),o.sort((E,H)=>!!E.isDone-!!H.isDone),_!==v)){let $=function(L){L.repeatsOnDaysOfWeek&&L.repeatsOnDaysOfWeek[E.getDay()]&&L.lastCompletionDate!==v&&(L.isDone=!1,L.startDate=v,L.startTime||H.push(L));for(const ce of L.children)$(ce)},x=function(L){if(L.daysBeforeRepeating){const ce=new Date(`node.lastCompletionDate/${2022}`),Be=new Date().getTime()-ce.getTime();Math.ceil(Be/(1e3*3600*24))>=L.daysBeforeRepeating&&(L.isDone=!1,L.startDate=v,L.startTime||H.push(L))}for(const ce of L.children)x(ce)};console.log("running repeating task algorithm");const E=new Date,H=[];for(const L of o)$(L);for(const L of o)x(L);console.log("pool for resolve conflict =",H);let ee=1440;for(const L of H){ee-=L.duration||5;const ce=ee/60,Ce=parseInt(ce),Be=ce-Ce,Fe=Ce;let He=Math.round(Be*60);He<10&&(He=`0${He}`),L.startTime=`${Fe}:${He}`,console.log(`habit ${L.name} starts =`,L.startTime)}Ie(De(Te,r),{allTasks:o,lastRanRepeatAtDate:v}),t(0,o=[...o])}},[o,p,i,c,b,k,h,D,V,F,Y,N,P,R,q,le,re,J,pe,l,_,ye,te,ze,Re,ie,Ae,je,ae,me,Q,Ke,j,B,G,Oe]}class Dl extends Ve{constructor(e){super();Se(this,e,ml,pl,we,{userID:19},null,[-1,-1])}}export{Dl as default,bl as load};
