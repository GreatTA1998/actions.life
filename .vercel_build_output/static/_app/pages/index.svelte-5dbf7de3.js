var ft=Object.defineProperty;var ze=Object.getOwnPropertySymbols;var dt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var Ae=(l,e,t)=>e in l?ft(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Ke=(l,e)=>{for(var t in e||(e={}))dt.call(e,t)&&Ae(l,t,e[t]);if(ze)for(var t of ze(e))ct.call(e,t)&&Ae(l,t,e[t]);return l};import{S as we,i as Ee,s as Ie,e as y,t as M,k as z,c as D,a as j,h as F,d,m as A,b as N,f,g as W,J as h,L as ae,M as U,j as de,N as ie,l as oe,K as ne,O as Se,_ as pt,P as ee,w as ye,x as De,y as Oe,Q as ht,q as te,o as re,B as Te,n as je,p as Ne,R as Ve,T as Pe,U as _t,V as mt,v as kt,W as ve,X as he,Y as vt,Z as gt}from"../chunks/vendor-ecd12436.js";function We(){const l=new Date;let e=l.getDate(),t=l.getMonth()+1;return e<10&&(e="0"+e),t<10&&(t="0"+t),`${t}/${e}`}function Me(l){let e,t,a,s=l[0].name+"",n,r,i,c,o,u,p,_,m,b,O,v,I,q,g,R,S,k,T,V,w,B;function X(H,Z){return!H[0].isDone&&H[0].startTime&&H[0].startDate?Dt:H[4]?bt:yt}let Q=X(l),L=Q(l);function P(H,Z){if(H[0].daysBeforeRepeating)return Tt;if(H[0].repeatsOnDaysOfWeek)return Ot}let G=P(l),Y=G&&G(l);function K(H,Z){return H[5]?wt:Et}let ue=K(l),se=ue(l);return{c(){e=y("div"),t=y("div"),a=y("div"),n=M(s),r=z(),i=y("span"),c=M("close"),o=z(),u=y("div"),L.c(),p=z(),_=y("div"),Y&&Y.c(),m=z(),b=y("textarea"),O=z(),v=y("div"),I=y("div"),se.c(),q=z(),g=y("div"),R=y("button"),S=M("Delete"),k=z(),T=y("button"),V=M("Done"),this.h()},l(H){e=D(H,"DIV",{class:!0});var Z=j(e);t=D(Z,"DIV",{style:!0});var fe=j(t);a=D(fe,"DIV",{class:!0,style:!0});var ce=j(a);n=F(ce,s),ce.forEach(d),r=A(fe),i=D(fe,"SPAN",{class:!0,style:!0});var pe=j(i);c=F(pe,"close"),pe.forEach(d),fe.forEach(d),o=A(Z),u=D(Z,"DIV",{class:!0,style:!0});var ge=j(u);L.l(ge),ge.forEach(d),p=A(Z),_=D(Z,"DIV",{class:!0,style:!0});var be=j(_);Y&&Y.l(be),be.forEach(d),m=A(Z),b=D(Z,"TEXTAREA",{cols:!0,placeholder:!0,style:!0}),j(b).forEach(d),O=A(Z),v=D(Z,"DIV",{style:!0});var me=j(v);I=D(me,"DIV",{});var C=j(I);se.l(C),C.forEach(d),q=A(me),g=D(me,"DIV",{style:!0});var E=j(g);R=D(E,"BUTTON",{});var J=j(R);S=F(J,"Delete"),J.forEach(d),k=A(E),T=D(E,"BUTTON",{});var x=j(T);V=F(x,"Done"),x.forEach(d),E.forEach(d),me.forEach(d),Z.forEach(d),this.h()},h(){N(a,"class","google-calendar-event-title svelte-lssk3a"),f(a,"margin-top","10px"),f(a,"margin-left","10px"),N(i,"class","material-icons"),f(i,"margin-left","auto"),f(i,"margin-right","0"),f(t,"display","flex"),N(u,"class","google-calendar-event-time svelte-lssk3a"),f(u,"margin-top","4px"),f(u,"margin-left","10px"),N(_,"class","google-calendar-event-detail svelte-lssk3a"),f(_,"margin-top","12px"),f(_,"margin-left","16px"),N(b,"cols","48"),N(b,"placeholder","notes"),f(b,"margin-left","10px"),f(g,"margin-left","auto"),f(g,"margin-right","16px"),f(v,"display","flex"),f(v,"margin-left","6px"),N(e,"class","detailed-card svelte-lssk3a")},m(H,Z){W(H,e,Z),h(e,t),h(t,a),h(a,n),h(t,r),h(t,i),h(i,c),h(e,o),h(e,u),L.m(u,null),h(e,p),h(e,_),Y&&Y.m(_,null),h(e,m),h(e,b),ae(b,l[7]),h(e,O),h(e,v),h(v,I),se.m(I,null),h(v,q),h(v,g),h(g,R),h(R,S),h(g,k),h(g,T),h(T,V),w||(B=[U(i,"click",l[13]),U(b,"input",l[17]),U(b,"input",l[9]),U(R,"click",l[27]),U(T,"click",l[28])],w=!0)},p(H,Z){Z&1&&s!==(s=H[0].name+"")&&de(n,s),Q===(Q=X(H))&&L?L.p(H,Z):(L.d(1),L=Q(H),L&&(L.c(),L.m(u,null))),G===(G=P(H))&&Y?Y.p(H,Z):(Y&&Y.d(1),Y=G&&G(H),Y&&(Y.c(),Y.m(_,null))),Z&128&&ae(b,H[7]),ue===(ue=K(H))&&se?se.p(H,Z):(se.d(1),se=ue(H),se&&(se.c(),se.m(I,null)))},d(H){H&&d(e),L.d(),Y&&Y.d(),se.d(),w=!1,ie(B)}}}function bt(l){let e,t,a,s,n;return{c(){e=y("input"),t=z(),a=y("input"),this.h()},l(r){e=D(r,"INPUT",{placeholder:!0,style:!0}),t=A(r),a=D(r,"INPUT",{placeholder:!0,style:!0}),this.h()},h(){N(e,"placeholder","12/31"),f(e,"width","40px"),N(a,"placeholder","19:45"),f(a,"width","40px")},m(r,i){W(r,e,i),ae(e,l[2]),W(r,t,i),W(r,a,i),ae(a,l[3]),s||(n=[U(e,"input",l[15]),U(a,"input",l[16]),U(a,"keypress",l[12])],s=!0)},p(r,i){i&4&&e.value!==r[2]&&ae(e,r[2]),i&8&&a.value!==r[3]&&ae(a,r[3])},d(r){r&&d(e),r&&d(t),r&&d(a),s=!1,ie(n)}}}function yt(l){let e,t,a,s;return{c(){e=y("button"),t=M("Schedule")},l(n){e=D(n,"BUTTON",{});var r=j(e);t=F(r,"Schedule"),r.forEach(d)},m(n,r){W(n,e,r),h(e,t),a||(s=U(e,"click",l[14]),a=!0)},p:ne,d(n){n&&d(e),a=!1,s()}}}function Dt(l){let e,t=l[0].startDate+" "+l[0].startTime+"",a;return{c(){e=M("Scheduled for "),a=M(t)},l(s){e=F(s,"Scheduled for "),a=F(s,t)},m(s,n){W(s,e,n),W(s,a,n)},p(s,n){n&1&&t!==(t=s[0].startDate+" "+s[0].startTime+"")&&de(a,t)},d(s){s&&d(e),s&&d(a)}}}function Ot(l){let e,t=l[0].repeatsOnDaysOfWeek+"",a;return{c(){e=M("Repeats "),a=M(t)},l(s){e=F(s,"Repeats "),a=F(s,t)},m(s,n){W(s,e,n),W(s,a,n)},p(s,n){n&1&&t!==(t=s[0].repeatsOnDaysOfWeek+"")&&de(a,t)},d(s){s&&d(e),s&&d(a)}}}function Tt(l){let e,t=l[0].daysBeforeRepeating+"",a,s,n=(l[0].completionCount||0)+"",r,i;return{c(){e=M("Repeats every "),a=M(t),s=M(" days, completed "),r=M(n),i=M(" times")},l(c){e=F(c,"Repeats every "),a=F(c,t),s=F(c," days, completed "),r=F(c,n),i=F(c," times")},m(c,o){W(c,e,o),W(c,a,o),W(c,s,o),W(c,r,o),W(c,i,o)},p(c,o){o&1&&t!==(t=c[0].daysBeforeRepeating+"")&&de(a,t),o&1&&n!==(n=(c[0].completionCount||0)+"")&&de(r,n)},d(c){c&&d(e),c&&d(a),c&&d(s),c&&d(r),c&&d(i)}}}function wt(l){let e,t,a,s,n,r,i,c,o,u,p,_,m,b,O,v,I,q,g,R,S,k,T,V,w,B,X,Q,L;return{c(){e=y("div"),t=M("Repeats every "),a=y("input"),s=M(" days"),n=z(),r=y("div"),i=y("div"),c=y("button"),o=M("M"),u=z(),p=y("button"),_=M("T"),m=z(),b=y("button"),O=M("W"),v=z(),I=y("button"),q=M("R"),g=z(),R=y("button"),S=M("F"),k=z(),T=y("button"),V=M("S"),w=z(),B=y("button"),X=M("S"),this.h()},l(P){e=D(P,"DIV",{style:!0});var G=j(e);t=F(G,"Repeats every "),a=D(G,"INPUT",{style:!0,placeholder:!0}),s=F(G," days"),G.forEach(d),n=A(P),r=D(P,"DIV",{style:!0});var Y=j(r);i=D(Y,"DIV",{});var K=j(i);c=D(K,"BUTTON",{class:!0});var ue=j(c);o=F(ue,"M"),ue.forEach(d),u=A(K),p=D(K,"BUTTON",{class:!0});var se=j(p);_=F(se,"T"),se.forEach(d),m=A(K),b=D(K,"BUTTON",{class:!0});var H=j(b);O=F(H,"W"),H.forEach(d),v=A(K),I=D(K,"BUTTON",{class:!0});var Z=j(I);q=F(Z,"R"),Z.forEach(d),g=A(K),R=D(K,"BUTTON",{class:!0});var fe=j(R);S=F(fe,"F"),fe.forEach(d),k=A(K),T=D(K,"BUTTON",{class:!0});var ce=j(T);V=F(ce,"S"),ce.forEach(d),w=A(K),B=D(K,"BUTTON",{class:!0});var pe=j(B);X=F(pe,"S"),pe.forEach(d),K.forEach(d),Y.forEach(d),this.h()},h(){f(a,"width","20px"),N(a,"placeholder","0"),f(e,"display","flex"),N(c,"class","svelte-lssk3a"),ee(c,"selected",l[0].repeatsOnDaysOfWeek&&l[0].repeatsOnDaysOfWeek[0]),N(p,"class","svelte-lssk3a"),ee(p,"selected",l[0].repeatsOnDaysOfWeek&&l[0].repeatsOnDaysOfWeek[1]),N(b,"class","svelte-lssk3a"),ee(b,"selected",l[0].repeatsOnDaysOfWeek&&l[0].repeatsOnDaysOfWeek[2]),N(I,"class","svelte-lssk3a"),ee(I,"selected",l[0].repeatsOnDaysOfWeek&&l[0].repeatsOnDaysOfWeek[3]),N(R,"class","svelte-lssk3a"),ee(R,"selected",l[0].repeatsOnDaysOfWeek&&l[0].repeatsOnDaysOfWeek[4]),N(T,"class","svelte-lssk3a"),ee(T,"selected",l[0].repeatsOnDaysOfWeek&&l[0].repeatsOnDaysOfWeek[5]),N(B,"class","svelte-lssk3a"),ee(B,"selected",l[0].repeatsOnDaysOfWeek&&l[0].repeatsOnDaysOfWeek[6]),f(r,"display","flex")},m(P,G){W(P,e,G),h(e,t),h(e,a),ae(a,l[6]),h(e,s),W(P,n,G),W(P,r,G),h(r,i),h(i,c),h(c,o),h(i,u),h(i,p),h(p,_),h(i,m),h(i,b),h(b,O),h(i,v),h(i,I),h(I,q),h(i,g),h(i,R),h(R,S),h(i,k),h(i,T),h(T,V),h(i,w),h(i,B),h(B,X),Q||(L=[U(a,"input",l[19]),U(a,"keypress",l[11]),U(c,"click",l[20]),U(p,"click",l[21]),U(b,"click",l[22]),U(I,"click",l[23]),U(R,"click",l[24]),U(T,"click",l[25]),U(B,"click",l[26])],Q=!0)},p(P,G){G&64&&a.value!==P[6]&&ae(a,P[6]),G&1&&ee(c,"selected",P[0].repeatsOnDaysOfWeek&&P[0].repeatsOnDaysOfWeek[0]),G&1&&ee(p,"selected",P[0].repeatsOnDaysOfWeek&&P[0].repeatsOnDaysOfWeek[1]),G&1&&ee(b,"selected",P[0].repeatsOnDaysOfWeek&&P[0].repeatsOnDaysOfWeek[2]),G&1&&ee(I,"selected",P[0].repeatsOnDaysOfWeek&&P[0].repeatsOnDaysOfWeek[3]),G&1&&ee(R,"selected",P[0].repeatsOnDaysOfWeek&&P[0].repeatsOnDaysOfWeek[4]),G&1&&ee(T,"selected",P[0].repeatsOnDaysOfWeek&&P[0].repeatsOnDaysOfWeek[5]),G&1&&ee(B,"selected",P[0].repeatsOnDaysOfWeek&&P[0].repeatsOnDaysOfWeek[6])},d(P){P&&d(e),P&&d(n),P&&d(r),Q=!1,ie(L)}}}function Et(l){let e,t,a,s;return{c(){e=y("button"),t=M("Repeat task"),this.h()},l(n){e=D(n,"BUTTON",{style:!0});var r=j(e);t=F(r,"Repeat task"),r.forEach(d),this.h()},h(){f(e,"margin-left","5px")},m(n,r){W(n,e,r),h(e,t),a||(s=U(e,"click",l[18]),a=!0)},p:ne,d(n){n&&d(e),a=!1,s()}}}function It(l){let e,t=l[1]&&Me(l);return{c(){t&&t.c(),e=oe()},l(a){t&&t.l(a),e=oe()},m(a,s){t&&t.m(a,s),W(a,e,s)},p(a,[s]){a[1]?t?t.p(a,s):(t=Me(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ne,o:ne,d(a){t&&t.d(a),a&&d(e)}}}function jt(l,e,t){let{taskObject:a}=e,{isOpen:s=!1}=e,n,r,i=!1,c=!1,o=7;const u=Se();let p=a.notes||"";const _=pt.throttle(K=>{t(7,p=K.target.value),b()},500);function m({dayNumber:K}){a.repeatsOnDaysOfWeek||t(0,a.repeatsOnDaysOfWeek=[!1,!1,!1,!1,!1,!1,!1],a),t(0,a.repeatsOnDaysOfWeek[K-1]=!a.repeatsOnDaysOfWeek[K-1],a),u("task-repeat")}function b(){t(0,a.notes=p,a),u("task-notes-update")}function O(K){K.charCode===13&&(o?t(0,a.daysBeforeRepeating=o,a):(alert("Task is reset and will no longer repeat"),t(0,a.daysBeforeRepeating=0,a)),u("task-repeat"),t(6,o=0),t(5,c=!1))}function v(K){K.charCode===13&&(!n||!r?alert("Need BOTH date and time"):(t(0,a.startDate=n,a),t(0,a.startTime=r,a)),u("task-schedule"),t(2,n=""),t(3,r=""))}const I=()=>u("card-close"),q=()=>t(4,i=!0);function g(){n=this.value,t(2,n)}function R(){r=this.value,t(3,r)}function S(){p=this.value,t(7,p)}const k=()=>t(5,c=!0);function T(){o=this.value,t(6,o)}const V=()=>m({dayNumber:1}),w=()=>m({dayNumber:2}),B=()=>m({dayNumber:3}),X=()=>m({dayNumber:4}),Q=()=>m({dayNumber:5}),L=()=>m({dayNumber:6}),P=()=>m({dayNumber:7}),G=()=>u("task-delete"),Y=()=>u("task-done");return l.$$set=K=>{"taskObject"in K&&t(0,a=K.taskObject),"isOpen"in K&&t(1,s=K.isOpen)},[a,s,n,r,i,c,o,p,u,_,m,O,v,I,q,g,R,S,k,T,V,w,B,X,Q,L,P,G,Y]}class Fe extends we{constructor(e){super();Ee(this,e,jt,It,Ie,{taskObject:0,isOpen:1})}}function He(l,e,t){const a=l.slice();return a[44]=e[t],a[46]=t,a}function Xe(l){let e,t,a,s,n,r,i,c,o,u,p,_,m;function b(k,T){return k[3]?Nt:Vt}let O=b(l),v=O(l);n=new Fe({props:{isOpen:l[2],taskObject:l[0]}}),n.$on("card-close",l[25]),n.$on("task-done",l[21]),n.$on("task-notes-update",l[26]),n.$on("task-repeat",l[27]),n.$on("task-schedule",l[28]);let I=l[5]&&Ge(l),q=l[0].children,g=[];for(let k=0;k<q.length;k+=1)g[k]=Ye(He(l,q,k));const R=k=>re(g[k],1,1,()=>{g[k]=null});let S=l[5]&&Le(l);return{c(){e=y("div"),t=y("div"),a=y("div"),v.c(),s=z(),ye(n.$$.fragment),r=z(),i=y("div"),I&&I.c(),c=z(),o=y("div");for(let k=0;k<g.length;k+=1)g[k].c();u=z(),S&&S.c(),this.h()},l(k){e=D(k,"DIV",{draggable:!0,class:!0,style:!0});var T=j(e);t=D(T,"DIV",{class:!0});var V=j(t);a=D(V,"DIV",{style:!0,class:!0});var w=j(a);v.l(w),w.forEach(d),s=A(V),De(n.$$.fragment,V),r=A(V),i=D(V,"DIV",{style:!0});var B=j(i);I&&I.l(B),B.forEach(d),V.forEach(d),c=A(T),o=D(T,"DIV",{style:!0});var X=j(o);for(let Q=0;Q<g.length;Q+=1)g[Q].l(X);u=A(X),S&&S.l(X),X.forEach(d),T.forEach(d),this.h()},h(){f(a,"font-size",1.5*.85**l[1]+"rem"),f(a,"font-family","aktiv-grotesk, sans-serif"),N(a,"class","keep-on-same-line name-of-task svelte-t4v7r0"),ee(a,"scheduled-orange",!l[0].isDone&&l[0].startTime&&l[0].startDate),ee(a,"crossed-out",l[0].isDone),f(i,"width",200*.9**l[1]+"px"),f(i,"height","100%"),N(t,"class","current-task-flexbox svelte-t4v7r0"),f(o,"margin-top",20*.7**l[1]+"px"),N(e,"draggable","true"),N(e,"class","scheduled-task svelte-t4v7r0"),f(e,"margin-left",(l[1]===1?"0":"20")+"px"),f(e,"margin-bottom","10px"),f(e,"width",350*.8**l[1]+"px"),f(e,"height",l[0].duration&&!l[13]&&l[0].duration*90/60>l[0].children.length*60*.7**l[1]&&l[0].duration*90/60>60*.65**l[1]?`${l[0].duration*90/60}px`:"100%"),f(e,"padding-left",10*.8**l[1]+"px"),ee(e,"black-duration-line",!l[0].isDone&&!(l[0].startTime&&l[0].startDate)),ee(e,"orange-duration-line",!l[0].isDone&&l[0].startTime&&l[0].startDate),ee(e,"green-duration-line",l[0].isDone)},m(k,T){W(k,e,T),h(e,t),h(t,a),v.m(a,null),h(t,s),Oe(n,t,null),h(t,r),h(t,i),I&&I.m(i,null),h(e,c),h(e,o);for(let V=0;V<g.length;V+=1)g[V].m(o,null);h(o,u),S&&S.m(o,null),p=!0,_||(m=[U(e,"dragstart",ht(l[39])),U(e,"pointerleave",l[20])],_=!0)},p(k,T){O===(O=b(k))&&v?v.p(k,T):(v.d(1),v=O(k),v&&(v.c(),v.m(a,null))),(!p||T[0]&2)&&f(a,"font-size",1.5*.85**k[1]+"rem"),T[0]&1&&ee(a,"scheduled-orange",!k[0].isDone&&k[0].startTime&&k[0].startDate),T[0]&1&&ee(a,"crossed-out",k[0].isDone);const V={};if(T[0]&4&&(V.isOpen=k[2]),T[0]&1&&(V.taskObject=k[0]),n.$set(V),k[5]?I?I.p(k,T):(I=Ge(k),I.c(),I.m(i,null)):I&&(I.d(1),I=null),(!p||T[0]&2)&&f(i,"width",200*.9**k[1]+"px"),T[0]&32771){q=k[0].children;let w;for(w=0;w<q.length;w+=1){const B=He(k,q,w);g[w]?(g[w].p(B,T),te(g[w],1)):(g[w]=Ye(B),g[w].c(),te(g[w],1),g[w].m(o,u))}for(je(),w=q.length;w<g.length;w+=1)R(w);Ne()}k[5]?S?S.p(k,T):(S=Le(k),S.c(),S.m(o,null)):S&&(S.d(1),S=null),(!p||T[0]&2)&&f(o,"margin-top",20*.7**k[1]+"px"),(!p||T[0]&2)&&f(e,"margin-left",(k[1]===1?"0":"20")+"px"),(!p||T[0]&2)&&f(e,"width",350*.8**k[1]+"px"),(!p||T[0]&8195)&&f(e,"height",k[0].duration&&!k[13]&&k[0].duration*90/60>k[0].children.length*60*.7**k[1]&&k[0].duration*90/60>60*.65**k[1]?`${k[0].duration*90/60}px`:"100%"),(!p||T[0]&2)&&f(e,"padding-left",10*.8**k[1]+"px"),T[0]&1&&ee(e,"black-duration-line",!k[0].isDone&&!(k[0].startTime&&k[0].startDate)),T[0]&1&&ee(e,"orange-duration-line",!k[0].isDone&&k[0].startTime&&k[0].startDate),T[0]&1&&ee(e,"green-duration-line",k[0].isDone)},i(k){if(!p){te(n.$$.fragment,k);for(let T=0;T<q.length;T+=1)te(g[T]);p=!0}},o(k){re(n.$$.fragment,k),g=g.filter(Boolean);for(let T=0;T<g.length;T+=1)re(g[T]);p=!1},d(k){k&&d(e),v.d(),Te(n),I&&I.d(),Ve(g,k),S&&S.d(),_=!1,ie(m)}}}function Nt(l){let e,t,a;return{c(){e=y("input")},l(s){e=D(s,"INPUT",{})},m(s,n){W(s,e,n),ae(e,l[4]),t||(a=[U(e,"input",l[24]),U(e,"keypress",l[18])],t=!0)},p(s,n){n[0]&16&&e.value!==s[4]&&ae(e,s[4])},d(s){s&&d(e),t=!1,ie(a)}}}function Vt(l){let e,t=l[0].name+"",a,s,n;return{c(){e=y("div"),a=M(t),this.h()},l(r){e=D(r,"DIV",{class:!0,style:!0});var i=j(e);a=F(i,t),i.forEach(d),this.h()},h(){N(e,"class","truncate svelte-t4v7r0"),f(e,"width",350*.85**l[1]+"px")},m(r,i){W(r,e,i),h(e,a),s||(n=[U(e,"click",l[23]),U(e,"pointerenter",l[19])],s=!0)},p(r,i){i[0]&1&&t!==(t=r[0].name+"")&&de(a,t),i[0]&2&&f(e,"width",350*.85**r[1]+"px")},d(r){r&&d(e),s=!1,ie(n)}}}function Ge(l){let e;function t(n,r){if(!(n[6]||n[8]||Pt||n[12]))return Rt;if(n[8])return Ct;if(n[12])return Wt}let a=t(l),s=a&&a(l);return{c(){s&&s.c(),e=oe()},l(n){s&&s.l(n),e=oe()},m(n,r){s&&s.m(n,r),W(n,e,r)},p(n,r){a===(a=t(n))&&s?s.p(n,r):(s&&s.d(1),s=a&&a(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){s&&s.d(n),n&&d(e)}}}function Wt(l){let e,t,a,s,n,r,i,c;return{c(){e=y("div"),t=y("div"),a=M("Delete"),s=z(),n=y("div"),r=M("Cancel"),this.h()},l(o){e=D(o,"DIV",{style:!0});var u=j(e);t=D(u,"DIV",{});var p=j(t);a=F(p,"Delete"),p.forEach(d),s=A(u),n=D(u,"DIV",{});var _=j(n);r=F(_,"Cancel"),_.forEach(d),u.forEach(d),this.h()},h(){f(e,"display","flex"),f(e,"align-items","center"),f(e,"justify-content","space-evenly")},m(o,u){W(o,e,u),h(e,t),h(t,a),h(e,s),h(e,n),h(n,r),i||(c=[U(t,"click",l[22]),U(n,"click",l[32])],i=!0)},p:ne,d(o){o&&d(e),i=!1,ie(c)}}}function Ct(l){let e,t,a,s,n;return{c(){e=y("input"),t=z(),a=y("input"),this.h()},l(r){e=D(r,"INPUT",{placeholder:!0,style:!0}),t=A(r),a=D(r,"INPUT",{placeholder:!0,style:!0}),this.h()},h(){N(e,"placeholder","03/14"),f(e,"width","40px"),f(e,"margin-left","14px"),N(a,"placeholder","13:00"),f(a,"width","40px")},m(r,i){W(r,e,i),ae(e,l[9]),W(r,t,i),W(r,a,i),ae(a,l[10]),s||(n=[U(e,"input",l[29]),U(a,"input",l[30]),U(a,"keypress",l[17])],s=!0)},p(r,i){i[0]&512&&e.value!==r[9]&&ae(e,r[9]),i[0]&1024&&a.value!==r[10]&&ae(a,r[10])},d(r){r&&d(e),r&&d(t),r&&d(a),s=!1,ie(n)}}}function Rt(l){return{c:ne,l:ne,m:ne,p:ne,d:ne}}function Ye(l){let e,t;function a(...s){return l[33](l[46],...s)}return e=new Qe({props:{taskObject:l[44],depth:l[1]+1}}),e.$on("task-create",a),e.$on("task-done",l[34]),e.$on("task-delete",l[35]),e.$on("task-repeating",l[36]),{c(){ye(e.$$.fragment)},l(s){De(e.$$.fragment,s)},m(s,n){Oe(e,s,n),t=!0},p(s,n){l=s;const r={};n[0]&1&&(r.taskObject=l[44]),n[0]&2&&(r.depth=l[1]+1),e.$set(r)},i(s){t||(te(e.$$.fragment,s),t=!0)},o(s){re(e.$$.fragment,s),t=!1},d(s){Te(e,s)}}}function Le(l){let e;function t(n,r){return n[6]?Bt:Ut}let a=t(l),s=a(l);return{c(){s.c(),e=oe()},l(n){s.l(n),e=oe()},m(n,r){s.m(n,r),W(n,e,r)},p(n,r){a===(a=t(n))&&s?s.p(n,r):(s.d(1),s=a(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){s.d(n),n&&d(e)}}}function Bt(l){let e,t,a,s;return{c(){e=y("div"),t=y("input"),this.h()},l(n){e=D(n,"DIV",{style:!0});var r=j(e);t=D(r,"INPUT",{placeholder:!0,style:!0}),r.forEach(d),this.h()},h(){N(t,"placeholder","Type sub-task"),f(t,"width","100%"),f(t,"margin-left","5px"),f(e,"display","flex"),f(e,"align-items","center"),f(e,"margin-left","20px")},m(n,r){W(n,e,r),h(e,t),ae(t,l[7]),a||(s=[U(t,"input",l[38]),U(t,"keypress",l[16])],a=!0)},p(n,r){r[0]&128&&t.value!==n[7]&&ae(t,n[7])},d(n){n&&d(e),a=!1,ie(s)}}}function Ut(l){let e,t,a,s,n;return{c(){e=y("div"),t=y("div"),a=M("new sub-task"),this.h()},l(r){e=D(r,"DIV",{style:!0});var i=j(e);t=D(i,"DIV",{style:!0});var c=j(t);a=F(c,"new sub-task"),c.forEach(d),i.forEach(d),this.h()},h(){f(t,"border-left","2px solid grey"),f(t,"color","grey"),f(t,"padding-left","5px"),f(t,"padding-bottom",8*.68**(l[1]+1)+"px"),f(t,"font-size",1.5*.85**(l[1]+1)+"rem"),f(e,"display","flex"),f(e,"align-items","center"),f(e,"margin-left","20px")},m(r,i){W(r,e,i),h(e,t),h(t,a),s||(n=U(t,"click",l[37]),s=!0)},p(r,i){i[0]&2&&f(t,"padding-bottom",8*.68**(r[1]+1)+"px"),i[0]&2&&f(t,"font-size",1.5*.85**(r[1]+1)+"rem")},d(r){r&&d(e),s=!1,n()}}}function St(l){let e,t,a=!l[0].isDeleted&&!l[0].isDone&&!(l[0].startTime&&l[0].startDate)&&Xe(l);return{c(){a&&a.c(),e=oe()},l(s){a&&a.l(s),e=oe()},m(s,n){a&&a.m(s,n),W(s,e,n),t=!0},p(s,n){!s[0].isDeleted&&!s[0].isDone&&!(s[0].startTime&&s[0].startDate)?a?(a.p(s,n),n[0]&1&&te(a,1)):(a=Xe(s),a.c(),te(a,1),a.m(e.parentNode,e)):a&&(je(),re(a,1,1,()=>{a=null}),Ne())},i(s){t||(te(a),t=!0)},o(s){re(a),t=!1},d(s){a&&a.d(s),s&&d(e)}}}let Pt=!1;function qt(l,e){l.dataTransfer.setData("text/plain",e)}function zt(l,e,t){let a,{taskObject:s}=e,{depth:n}=e,r=!1;const i=Se();let c=!1,o="",u=!1,p=!1,_="",m=!1,b="",O="",v=0,I=!1;function q(E,J){const x=Ke({},s.children[J]);x.children=E.detail.updatedChildren;const le=[...s.children];le[J]=x,T(le)}function g(E){E.charCode===13&&(_&&k(_),t(7,_=""),t(6,p=!1))}function R(E){E.charCode===13&&(b.length!==5||O.length!==5?(alert("Formats must be exact - date is mm:dd and time is hh:mm, resetting"),t(0,s.startDate="",s),t(0,s.scheduledTime="",s)):(t(0,s.startDate=b,s),t(0,s.startTime=O,s)),i("task-done",{}),t(8,m=!1))}function S(E){if(E.charCode===13){if(!o){alert("Task name can't be empty.");return}t(0,s.name=o,s),i("task-done",{}),t(4,o=""),t(3,c=!1)}}function k(E){T([...s.children,{name:E,children:[]}])}function T(E){i("task-create",{updatedChildren:E})}function V(){t(5,u=!0)}function w(){t(5,u=!1)}function B(){t(0,s.isDone=!s.isDone,s),s.isRepeating&&(s.isDone?(t(0,s.completionCount=s.completionCount+1||1,s),t(0,s.lastCompletionDate=We(),s)):(t(0,s.completionCount=s.completionCount-1||0,s),t(0,s.lastCompletionDate="",s))),i("task-done",{})}function X(){t(0,s.isDeleted=!s.isDeleted,s),console.log("taskObject.deleted =",s.isDeleted),i("task-delete",{})}const Q=()=>t(2,r=!0);function L(){o=this.value,t(4,o)}const P=()=>t(2,r=!1),G=()=>i("task-done"),Y=()=>i("task-done"),K=()=>i("task-done");function ue(){b=this.value,t(9,b)}function se(){O=this.value,t(10,O)}function H(){v=this.value,t(11,v)}const Z=()=>t(12,I=!1),fe=(E,J)=>q(J,E);function ce(E){Pe.call(this,l,E)}function pe(E){Pe.call(this,l,E)}function ge(E){Pe.call(this,l,E)}const be=()=>t(6,p=!0);function me(){_=this.value,t(7,_)}const C=E=>qt(E,s.name);return l.$$set=E=>{"taskObject"in E&&t(0,s=E.taskObject),"depth"in E&&t(1,n=E.depth)},l.$$.update=()=>{l.$$.dirty[0]&1&&t(13,a=s.children.filter(E=>E.duration).length>0)},[s,n,r,c,o,u,p,_,m,b,O,v,I,a,i,q,g,R,S,V,w,B,X,Q,L,P,G,Y,K,ue,se,H,Z,fe,ce,pe,ge,be,me,C]}class Qe extends we{constructor(e){super();Ee(this,e,zt,St,Ie,{taskObject:0,depth:1},null,[-1,-1])}}function Je(l,e,t){const a=l.slice();return a[17]=e[t],a[19]=t,a}function Ze(l,e,t){const a=l.slice();return a[20]=e[t],a[19]=t,a}function $e(l){let e,t=l[20]+"",a;return{c(){e=y("div"),a=M(t),this.h()},l(s){e=D(s,"DIV",{class:!0,style:!0});var n=j(e);a=F(n,t),n.forEach(d),this.h()},h(){N(e,"class","time-indicator svelte-x8u2ov"),f(e,"top",30+60*l[19]+"px")},m(s,n){W(s,e,n),h(e,a)},p:ne,d(s){s&&d(e)}}}function xe(l){let e,t,a=l[17].name+"",s,n,r,i,c,o,u,p;function _(...v){return l[8](l[17],...v)}function m(...v){return l[9](l[17],...v)}function b(...v){return l[11](l[17],...v)}function O(){return l[12](l[17])}return{c(){e=y("div"),t=y("div"),s=M(a),n=z(),r=y("div"),i=z(),c=y("div"),o=z(),this.h()},l(v){e=D(v,"DIV",{class:!0,style:!0});var I=j(e);t=D(I,"DIV",{draggable:!0,style:!0,class:!0});var q=j(t);s=F(q,a),q.forEach(d),n=A(I),r=D(I,"DIV",{style:!0,draggable:!0,class:!0});var g=j(r);g.forEach(d),i=A(I),c=D(I,"DIV",{draggable:!0,style:!0,class:!0});var R=j(c);R.forEach(d),o=A(I),I.forEach(d),this.h()},h(){N(t,"draggable","true"),f(t,"width","11vw"),N(t,"class","svelte-x8u2ov"),f(r,"height",l[17].duration*l[3]-20-10+"px"),f(r,"width","11vw"),N(r,"draggable","true"),N(r,"class","svelte-x8u2ov"),N(c,"draggable","true"),f(c,"height","8px"),f(c,"width","11vw"),f(c,"position","absolute"),f(c,"bottom","0"),f(c,"left","-3px"),f(c,"cursor","ns-resize"),N(c,"class","svelte-x8u2ov"),N(e,"class","scheduled-task svelte-x8u2ov"),f(e,"top",et(l[17])+"px"),f(e,"height",(l[17].duration*l[3]||30)+"px"),f(e,"left","30px")},m(v,I){W(v,e,I),h(e,t),h(t,s),h(e,n),h(e,r),h(e,i),h(e,c),h(e,o),u||(p=[U(t,"dragstart",_),U(r,"dragstart",m),U(c,"dragstart",l[10]),U(c,"dragend",b),U(e,"click",O)],u=!0)},p(v,I){l=v,I&1&&a!==(a=l[17].name+"")&&de(s,a),I&1&&f(r,"height",l[17].duration*l[3]-20-10+"px"),I&1&&f(e,"top",et(l[17])+"px"),I&1&&f(e,"height",(l[17].duration*l[3]||30)+"px")},d(v){v&&d(e),u=!1,ie(p)}}}function At(l){let e,t,a=l[1]()+"",s,n,r,i,c,o=l[2],u=[];for(let m=0;m<o.length;m+=1)u[m]=$e(Ze(l,o,m));let p=l[0],_=[];for(let m=0;m<p.length;m+=1)_[m]=xe(Je(l,p,m));return{c(){e=y("div"),t=y("div"),s=M(a),n=z();for(let m=0;m<u.length;m+=1)u[m].c();r=z();for(let m=0;m<_.length;m+=1)_[m].c();this.h()},l(m){e=D(m,"DIV",{id:!0,style:!0,class:!0});var b=j(e);t=D(b,"DIV",{style:!0,class:!0});var O=j(t);s=F(O,a),O.forEach(d),n=A(b);for(let v=0;v<u.length;v+=1)u[v].l(b);r=A(b);for(let v=0;v<_.length;v+=1)_[v].l(b);b.forEach(d),this.h()},h(){f(t,"margin-top","6px"),N(t,"class","svelte-x8u2ov"),N(e,"id","calendar-day-container"),f(e,"position","relative"),f(e,"width","12vw"),f(e,"overflow-y","scroll"),f(e,"overflow-x","hidden"),N(e,"class","svelte-x8u2ov")},m(m,b){W(m,e,b),h(e,t),h(t,s),h(e,n);for(let O=0;O<u.length;O+=1)u[O].m(e,null);h(e,r);for(let O=0;O<_.length;O+=1)_[O].m(e,null);i||(c=[U(e,"drop",l[13]),U(e,"dragover",Kt)],i=!0)},p(m,[b]){if(b&4){o=m[2];let O;for(O=0;O<o.length;O+=1){const v=Ze(m,o,O);u[O]?u[O].p(v,b):(u[O]=$e(v),u[O].c(),u[O].m(e,r))}for(;O<u.length;O+=1)u[O].d(1);u.length=o.length}if(b&217){p=m[0];let O;for(O=0;O<p.length;O+=1){const v=Je(m,p,O);_[O]?_[O].p(v,b):(_[O]=xe(v),_[O].c(),_[O].m(e,null))}for(;O<_.length;O+=1)_[O].d(1);_.length=p.length}},i:ne,o:ne,d(m){m&&d(e),Ve(u,m),Ve(_,m),i=!1,ie(c)}}}function et({startTime:l}){const e=l.slice(0,2),t=l.slice(3,5);return(Number(e)+Number(t)/60-8)*90}function tt(l,e){l.dataTransfer.setData("text/plain",e)}function Kt(l){l.preventDefault(),l.dataTransfer.dropEffect="move"}function Mt(l,e,t){let{scheduledTasks:a}=e;const s=Se(),n=We,r=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00","00:00","01:00","02:00"];let i=90/60,c=0;function o(g){s("task-click",{task:g})}function u(g){console.log("drop detected"),g.preventDefault();var S=document.getElementById("calendar-day-container").getBoundingClientRect();S.left,S.top;const k=90;let V=g.layerY/k;const w=V-Math.floor(V),B=Math.trunc(V);let X=w*60,Q=8+B;Q<10&&(Q=`0${Q}`),X<10?(X=X.toPrecision(1),X=`0${X}`):X=X.toPrecision(2);const L=`${Q}:${X}`;console.log("scheduledTime =",L),s("task-scheduled",{taskName:g.dataTransfer.getData("text/plain"),timeOfDay:L,dateScheduled:n()})}function p(g){c=g.offsetY}function _(g,R){R.duration||(R.duration=10);const S=60/90,k=(g.offsetY-c)*S;s("task-duration-adjusted",{taskName:R.name,duration:Math.max(1,R.duration+k)})}const m=(g,R)=>tt(R,g.name),b=(g,R)=>tt(R,g.name),O=g=>p(g),v=(g,R)=>_(R,g),I=g=>o(g),q=g=>u(g);return l.$$set=g=>{"scheduledTasks"in g&&t(0,a=g.scheduledTasks)},[a,n,r,i,o,u,p,_,m,b,O,v,I,q]}class Ft extends we{constructor(e){super();Ee(this,e,Mt,At,Ie,{scheduledTasks:0})}}function lt(l,e,t){const a=l.slice();return a[1]=e[t],a[3]=t,a}function st(l){let e,t=l[1].startDate+"",a,s,n,r=l[1].name+"",i,c,o;return{c(){e=y("div"),a=M(t),s=z(),n=y("div"),i=M(r),c=z(),o=y("div"),this.h()},l(u){e=D(u,"DIV",{style:!0,class:!0});var p=j(e);a=F(p,t),p.forEach(d),s=A(u),n=D(u,"DIV",{class:!0,style:!0});var _=j(n);i=F(_,r),_.forEach(d),c=A(u),o=D(u,"DIV",{class:!0,style:!0});var m=j(o);m.forEach(d),this.h()},h(){f(e,"position","absolute"),f(e,"top",100*l[3]+"px"),N(e,"class","svelte-ko0je8"),N(n,"class","scheduled-task svelte-ko0je8"),f(n,"top",20+100*l[3]+"px"),f(n,"height",30+"px"),f(n,"border-left","2px solid red"),N(o,"class","scheduled-task svelte-ko0je8"),f(o,"top",70+100*l[3]+"px"),f(o,"height",15+"px"),f(o,"border-left","2px dashed black")},m(u,p){W(u,e,p),h(e,a),W(u,s,p),W(u,n,p),h(n,i),W(u,c,p),W(u,o,p)},p(u,p){p&1&&t!==(t=u[1].startDate+"")&&de(a,t),p&1&&r!==(r=u[1].name+"")&&de(i,r)},d(u){u&&d(e),u&&d(s),u&&d(n),u&&d(c),u&&d(o)}}}function Ht(l){let e,t,a=l[0],s=[];for(let n=0;n<a.length;n+=1)s[n]=st(lt(l,a,n));return{c(){e=y("div"),t=y("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=D(n,"DIV",{style:!0,class:!0});var r=j(e);t=D(r,"DIV",{style:!0,class:!0});var i=j(t);for(let c=0;c<s.length;c+=1)s[c].l(i);i.forEach(d),r.forEach(d),this.h()},h(){f(t,"width","12vw"),f(t,"margin-left","0px"),f(t,"margin-top","6px"),f(t,"position","relative"),f(t,"height","1600px"),N(t,"class","svelte-ko0je8"),f(e,"height","77vh"),f(e,"overflow-y","scroll"),f(e,"overflow-x","hidden"),N(e,"class","svelte-ko0je8")},m(n,r){W(n,e,r),h(e,t);for(let i=0;i<s.length;i+=1)s[i].m(t,null)},p(n,[r]){if(r&1){a=n[0];let i;for(i=0;i<a.length;i+=1){const c=lt(n,a,i);s[i]?s[i].p(c,r):(s[i]=st(c),s[i].c(),s[i].m(t,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=a.length}},i:ne,o:ne,d(n){n&&d(e),Ve(s,n)}}}function Xt(l,e,t){let{futureScheduledTasks:a}=e;return l.$$set=s=>{"futureScheduledTasks"in s&&t(0,a=s.futureScheduledTasks)},[a]}class Gt extends we{constructor(e){super();Ee(this,e,Xt,Ht,Ie,{futureScheduledTasks:0})}}const Yt={apiKey:"AIzaSyCOVm0X6UUQQcftXf066z_0hFk497j4dNY",authDomain:"project-y-2a061.firebaseapp.com",projectId:"project-y-2a061",storageBucket:"project-y-2a061.appspot.com",messagingSenderId:"132745397287",appId:"1:132745397287:web:b34052fb4683bc85e73a02",measurementId:"G-EZSLE84PYQ"};_t(Yt);var _e=mt();function at(l,e,t){const a=l.slice();return a[43]=e[t],a}function nt(l){let e,t,a,s,n,r=l[0],i=[];for(let u=0;u<r.length;u+=1)i[u]=it(at(l,r,u));const c=u=>re(i[u],1,1,()=>{i[u]=null});let o=l[7]&&ot(l);return{c(){for(let u=0;u<i.length;u+=1)i[u].c();e=z(),t=y("div"),o&&o.c(),this.h()},l(u){for(let _=0;_<i.length;_+=1)i[_].l(u);e=A(u),t=D(u,"DIV",{style:!0,class:!0});var p=j(t);o&&o.l(p),p.forEach(d),this.h()},h(){f(t,"height","100px"),N(t,"class","svelte-1agrjel")},m(u,p){for(let _=0;_<i.length;_+=1)i[_].m(u,p);W(u,e,p),W(u,t,p),o&&o.m(t,null),a=!0,s||(n=[U(t,"mouseenter",l[23]),U(t,"mouseleave",l[24])],s=!0)},p(u,p){if(p[0]&393217){r=u[0];let _;for(_=0;_<r.length;_+=1){const m=at(u,r,_);i[_]?(i[_].p(m,p),te(i[_],1)):(i[_]=it(m),i[_].c(),te(i[_],1),i[_].m(e.parentNode,e))}for(je(),_=r.length;_<i.length;_+=1)c(_);Ne()}u[7]?o?o.p(u,p):(o=ot(u),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i(u){if(!a){for(let p=0;p<r.length;p+=1)te(i[p]);a=!0}},o(u){i=i.filter(Boolean);for(let p=0;p<i.length;p+=1)re(i[p]);a=!1},d(u){Ve(i,u),u&&d(e),u&&d(t),o&&o.d(),s=!1,ie(n)}}}function rt(l){let e,t,a,s;function n(...r){return l[20](l[43],...r)}return t=new Qe({props:{taskObject:l[43],depth:1}}),t.$on("task-create",n),t.$on("task-done",l[18]),t.$on("task-delete",l[18]),t.$on("task-repeating",l[18]),{c(){e=y("div"),ye(t.$$.fragment),a=z(),this.h()},l(r){e=D(r,"DIV",{class:!0});var i=j(e);De(t.$$.fragment,i),a=A(i),i.forEach(d),this.h()},h(){N(e,"class","task-container svelte-1agrjel")},m(r,i){W(r,e,i),Oe(t,e,null),h(e,a),s=!0},p(r,i){l=r;const c={};i[0]&1&&(c.taskObject=l[43]),t.$set(c)},i(r){s||(te(t.$$.fragment,r),s=!0)},o(r){re(t.$$.fragment,r),s=!1},d(r){r&&d(e),Te(t)}}}function it(l){let e,t,a=!l[43].isDeleted&&rt(l);return{c(){a&&a.c(),e=oe()},l(s){a&&a.l(s),e=oe()},m(s,n){a&&a.m(s,n),W(s,e,n),t=!0},p(s,n){s[43].isDeleted?a&&(je(),re(a,1,1,()=>{a=null}),Ne()):a?(a.p(s,n),n[0]&1&&te(a,1)):(a=rt(s),a.c(),te(a,1),a.m(e.parentNode,e))},i(s){t||(te(a),t=!0)},o(s){re(a),t=!1},d(s){a&&a.d(s),s&&d(e)}}}function ot(l){let e;function t(n,r){return n[6]?Lt:Qt}let a=t(l),s=a(l);return{c(){s.c(),e=oe()},l(n){s.l(n),e=oe()},m(n,r){s.m(n,r),W(n,e,r)},p(n,r){a===(a=t(n))&&s?s.p(n,r):(s.d(1),s=a(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){s.d(n),n&&d(e)}}}function Lt(l){let e,t,a,s;return{c(){e=y("div"),t=y("input"),this.h()},l(n){e=D(n,"DIV",{style:!0,class:!0});var r=j(e);t=D(r,"INPUT",{placeholder:!0,class:!0}),r.forEach(d),this.h()},h(){N(t,"placeholder","Type task..."),N(t,"class","svelte-1agrjel"),f(e,"display","flex"),f(e,"align-content","center"),f(e,"justify-items","center"),N(e,"class","svelte-1agrjel")},m(n,r){W(n,e,r),h(e,t),ae(t,l[5]),a||(s=[U(t,"input",l[22]),U(t,"keypress",l[16])],a=!0)},p(n,r){r[0]&32&&t.value!==n[5]&&ae(t,n[5])},d(n){n&&d(e),a=!1,ie(s)}}}function Qt(l){let e,t,a,s;return{c(){e=y("div"),t=M("New task"),this.h()},l(n){e=D(n,"DIV",{style:!0,class:!0});var r=j(e);t=F(r,"New task"),r.forEach(d),this.h()},h(){f(e,"font-size","1.5rem"),f(e,"color","grey"),N(e,"class","svelte-1agrjel")},m(n,r){W(n,e,r),h(e,t),a||(s=U(e,"click",l[21]),a=!0)},p:ne,d(n){n&&d(e),a=!1,s()}}}function Jt(l){let e,t,a,s,n,r=(l[3]?"music_note":"music_off")+"",i,c,o,u,p,_,m,b,O,v,I,q,g,R,S,k,T,V=l[0]&&nt(l);return b=new Fe({props:{isOpen:l[8],taskObject:l[9]}}),b.$on("card-close",l[25]),b.$on("task-done",l[26]),b.$on("task-delete",l[27]),v=new Ft({props:{scheduledTasks:l[4]}}),v.$on("task-scheduled",l[28]),v.$on("task-duration-adjusted",l[29]),v.$on("task-click",l[30]),q=new Gt({props:{futureScheduledTasks:l[1]}}),{c(){e=y("div"),t=y("div"),a=z(),s=y("div"),n=y("span"),i=M(r),c=z(),o=y("div"),u=y("div"),p=y("div"),V&&V.c(),_=z(),m=y("div"),ye(b.$$.fragment),O=z(),ye(v.$$.fragment),I=z(),ye(q.$$.fragment),g=z(),R=y("audio"),this.h()},l(w){e=D(w,"DIV",{id:!0,style:!0,class:!0});var B=j(e);t=D(B,"DIV",{style:!0,class:!0}),j(t).forEach(d),a=A(B),s=D(B,"DIV",{style:!0,class:!0});var X=j(s);n=D(X,"SPAN",{class:!0,style:!0});var Q=j(n);i=F(Q,r),Q.forEach(d),X.forEach(d),c=A(B),o=D(B,"DIV",{style:!0,class:!0});var L=j(o);u=D(L,"DIV",{class:!0,style:!0});var P=j(u);p=D(P,"DIV",{class:!0});var G=j(p);V&&V.l(G),G.forEach(d),P.forEach(d),_=A(L),m=D(L,"DIV",{style:!0,class:!0});var Y=j(m);De(b.$$.fragment,Y),O=A(Y),De(v.$$.fragment,Y),I=A(Y),De(q.$$.fragment,Y),Y.forEach(d),L.forEach(d),B.forEach(d),g=A(w),R=D(w,"AUDIO",{class:!0}),j(R).forEach(d),this.h()},h(){f(t,"height","100px"),N(t,"class","svelte-1agrjel"),N(n,"class","material-icons svelte-1agrjel"),f(n,"margin-left","auto"),f(n,"margin-right","0"),f(n,"color","white"),f(s,"position","absolute"),f(s,"top","30px"),f(s,"left","30px"),N(s,"class","svelte-1agrjel"),N(p,"class","todo-list svelte-1agrjel"),N(u,"class","fixed-height-container-for-scrolling svelte-1agrjel"),f(u,"background-color","white"),f(u,"border","2px solid green"),f(u,"border-top-left-radius","20px"),f(u,"border-bottom-left-radius","20px"),f(m,"display","flex"),f(m,"justify-content","space-evenly"),f(m,"width","30vw"),f(m,"border-left","2px dashed grey"),f(m,"background-color","white"),f(m,"border","2px solid green"),f(m,"border-top-right-radius","20px"),f(m,"border-bottom-right-radius","20px"),N(m,"class","svelte-1agrjel"),f(o,"display","flex"),f(o,"padding-left","0"),f(o,"padding-top","10px"),N(o,"class","svelte-1agrjel"),N(e,"id","background-image-holder"),f(e,"height","100vh"),f(e,"padding-left","120px"),f(e,"padding-right","120px"),N(e,"class","svelte-1agrjel"),N(R,"class","svelte-1agrjel")},m(w,B){W(w,e,B),h(e,t),h(e,a),h(e,s),h(s,n),h(n,i),h(e,c),h(e,o),h(o,u),h(u,p),V&&V.m(p,null),h(o,_),h(o,m),Oe(b,m,null),h(m,O),Oe(v,m,null),h(m,I),Oe(q,m,null),W(w,g,B),W(w,R,B),l[31](R),S=!0,k||(T=U(s,"click",l[11]),k=!0)},p(w,B){(!S||B[0]&8)&&r!==(r=(w[3]?"music_note":"music_off")+"")&&de(i,r),w[0]?V?(V.p(w,B),B[0]&1&&te(V,1)):(V=nt(w),V.c(),te(V,1),V.m(p,null)):V&&(je(),re(V,1,1,()=>{V=null}),Ne());const X={};B[0]&256&&(X.isOpen=w[8]),B[0]&512&&(X.taskObject=w[9]),b.$set(X);const Q={};B[0]&16&&(Q.scheduledTasks=w[4]),v.$set(Q);const L={};B[0]&2&&(L.futureScheduledTasks=w[1]),q.$set(L)},i(w){S||(te(V),te(b.$$.fragment,w),te(v.$$.fragment,w),te(q.$$.fragment,w),S=!0)},o(w){re(V),re(b.$$.fragment,w),re(v.$$.fragment,w),re(q.$$.fragment,w),S=!1},d(w){w&&d(e),V&&V.d(),Te(b),Te(v),Te(q),w&&d(g),w&&d(R),l[31](null),k=!1,T()}}}function ut(l){return Math.floor(Math.random()*l)}function Ce({node:l,fulfilsCriteria:e,applyFunc:t}){e(l)&&t(l);for(const a of l.children)Ce({node:a,fulfilsCriteria:e,applyFunc:t})}function Zt(l,e,t){let a,s=["illiyard-moor.mp3","ms-leafre-lofi.mp3"],n,r=!1,i=["https://i.imgur.com/rzkUMW8.jpeg","https://i.imgur.com/ShnqIpJ.jpeg"],c;kt(()=>{c=i[ut(2)];const C=document.getElementById("background-image-holder");C.style["background-image"]=`url(${c})`,a=s[ut(2)],console.log("chosenAudio =",a),t(2,n.src=a,n)});let o=null,u="",p=We(),_=[],m=[],b="",O=!1,v=!1,I=!1,q={};function g({task:C}){t(9,q=C),t(8,I=!0)}function R(){t(2,n.volume=.1,n),n.paused?(n.play(),t(3,r=!0)):(n.pause(),t(3,r=!1))}function S(){t(4,_=[]);for(const C of o)Ce({node:C,fulfilsCriteria:E=>E.startDate===We()&&E.startTime,applyFunc:E=>_.push(E)})}function k(){t(1,m=[]);for(const C of o)Ce({node:C,fulfilsCriteria:E=>E.startDate&&E.startTime&&E.startDate>We(),applyFunc:E=>m.push(E)})}async function T(C){for(const E of o)Ce({node:E,fulfilsCriteria:J=>J.name===C,applyFunc:J=>J.isDone=!0});await ve(he(_e,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:o}),console.log("updated")}async function V(C){Ce({node:{name:"root",children:o},fulfilsCriteria:J=>J.children.filter(x=>x.name===C).length>=1,applyFunc:J=>{let x;for(let le=0;le<J.children.length;le++)if(J.children[le]===C){x=le;break}J.children.splice(x,1)}}),await ve(he(_e,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:o}),t(0,o=[...o])}async function w({taskName:C,timeOfDay:E,dateScheduled:J}){function x(le){if(le.name===C)return le.startTime=E,le.startDate=J,!0;for(const $ of le.children)if(x($))return!0;return!1}for(const le of o)if(x(le)){console.log("successfully mutated allTasks, =",o);break}await ve(he(_e,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:o}),t(0,o=[...o])}async function B({taskName:C,duration:E}){function J(x){if(x.name===C)return x.duration=E,!0;for(const le of x.children)if(J(le))return!0;return!1}for(const x of o)if(J(x)){console.log("successfully mutated allTasks, =",o);break}await ve(he(_e,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:o}),t(0,o=[...o])}async function X(){const C=await vt(he(_e,"users/GxBbopqXHW0qgjKEwU4z"));t(0,o=C.data().allTasks),t(19,u=C.data().lastRanRepeatAtDate)}X();function Q(C){C.charCode===13&&L()}function L(){b||alert("You have to type something first");const C=[...o,{name:b,duration:15,children:[]}];ve(he(_e,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:C}),t(0,o=[...C]),t(5,b=""),isTypingNewTask=!1}function P(C,E){const{updatedChildren:J}=C.detail;E.children=[...J],ve(he(_e,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:o}),t(0,o=[...o])}function G(){console.log("updateFirestore()"),ve(he(_e,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:o}),t(0,o=[...o])}const Y=(C,E)=>P(E,C),K=()=>t(6,O=!0);function ue(){b=this.value,t(5,b)}const se=()=>t(7,v=!0),H=()=>t(7,v=!1),Z=()=>t(8,I=!1),fe=()=>T(q.name),ce=()=>V(q.name),pe=C=>w(C.detail),ge=C=>B(C.detail),be=C=>g(C.detail);function me(C){gt[C?"unshift":"push"](()=>{n=C,t(2,n)})}return l.$$.update=()=>{if(l.$$.dirty[0]&524291&&o&&(console.log("collecting scheduled tasks to be displayed..."),S(),k(),m.sort((C,E)=>{const J=new Date(C.startDate),x=new Date(E.startDate);return J.getTime()-x.getTime()}),o.sort((C,E)=>!!C.isDone-!!E.isDone),u!==p)){let J=function($){$.repeatsOnDaysOfWeek&&$.repeatsOnDaysOfWeek[C.getDay()]&&$.lastCompletionDate!==p&&($.isDone=!1,$.startDate=p,$.startTime||E.push($));for(const ke of $.children)J(ke)},x=function($){if($.daysBeforeRepeating){const ke=new Date(`node.lastCompletionDate/${2022}`),Ue=new Date().getTime()-ke.getTime();Math.ceil(Ue/(1e3*3600*24))>=$.daysBeforeRepeating&&($.isDone=!1,$.startDate=p,E.push($))}for(const ke of $.children)x(ke)};console.log("running repeating task algorithm");const C=new Date,E=[];for(const $ of o)J($);for(const $ of o)x($);console.log("pool for resolve conflict =",E);let le=1440;for(const $ of E){le-=$.duration||5;const ke=le/60,Be=parseInt(ke),Ue=ke-Be,qe=Be;let Re=Math.round(Ue*60);Re<10&&(Re=`0${Re}`),$.startTime=`${qe}:${Re}`,console.log(`habit ${$.name} starts =`,$.startTime)}ve(he(_e,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:o,lastRanRepeatAtDate:p}),t(0,o=[...o])}},[o,m,n,r,_,b,O,v,I,q,g,R,T,V,w,B,Q,P,G,u,Y,K,ue,se,H,Z,fe,ce,pe,ge,be,me]}class el extends we{constructor(e){super();Ee(this,e,Zt,Jt,Ie,{},null,[-1,-1])}}export{el as default};
