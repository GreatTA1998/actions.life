var nt=Object.defineProperty;var Be=Object.getOwnPropertySymbols;var rt=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable;var Ue=(s,e,t)=>e in s?nt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Pe=(s,e)=>{for(var t in e||(e={}))rt.call(e,t)&&Ue(s,t,e[t]);if(Be)for(var t of Be(e))it.call(e,t)&&Ue(s,t,e[t]);return s};import{S as De,i as Oe,s as Te,e as D,t as K,k as F,c as O,a as I,h as H,d as c,m as M,b as j,f,g as S,J as d,L as se,M as A,j as pe,N as ae,l as ne,K as x,O as We,_ as ot,P as Q,w as ke,x as ge,y as ye,Q as ft,q as Z,o as ee,B as be,n as Ee,p as we,R as je,T as qe,U as ut,V as dt,v as ct,W as me,X as he,Y as pt,Z as ht}from"../chunks/vendor-ecd12436.js";function Ve(){const s=new Date;let e=s.getDate(),t=s.getMonth()+1;return e<10&&(e="0"+e),t<10&&(t="0"+t),`${t}/${e}`}function Se(s){let e,t,a,l=s[0].name+"",n,r,i,m,o,u,h,p,T,_,V,y,b,q,k,N,U,v,w,E=!s[0].isDone&&s[0].startTime&&s[0].startDate&&Ae(s);function g(W,X){if(W[0].daysBeforeRepeating)return mt;if(W[0].repeatsOnDaysOfWeek)return _t}let R=g(s),B=R&&R(s);function L(W,X){return W[2]?vt:kt}let $=L(s),C=$(s);return{c(){e=D("div"),t=D("div"),a=D("div"),n=K(l),r=F(),i=D("span"),m=K("close"),o=F(),u=D("div"),E&&E.c(),h=F(),p=D("div"),B&&B.c(),T=F(),_=D("textarea"),V=F(),y=D("div"),b=D("div"),C.c(),q=F(),k=D("div"),N=D("button"),U=K("Done"),this.h()},l(W){e=O(W,"DIV",{class:!0});var X=I(e);t=O(X,"DIV",{style:!0});var J=I(t);a=O(J,"DIV",{class:!0,style:!0});var oe=I(a);n=H(oe,l),oe.forEach(c),r=M(J),i=O(J,"SPAN",{class:!0,style:!0});var fe=I(i);m=H(fe,"close"),fe.forEach(c),J.forEach(c),o=M(X),u=O(X,"DIV",{class:!0,style:!0});var ue=I(u);E&&E.l(ue),ue.forEach(c),h=M(X),p=O(X,"DIV",{class:!0,style:!0});var de=I(p);B&&B.l(de),de.forEach(c),T=M(X),_=O(X,"TEXTAREA",{cols:!0,placeholder:!0,style:!0}),I(_).forEach(c),V=M(X),y=O(X,"DIV",{style:!0});var re=I(y);b=O(re,"DIV",{});var ce=I(b);C.l(ce),ce.forEach(c),q=M(re),k=O(re,"DIV",{style:!0});var P=I(k);N=O(P,"BUTTON",{});var Y=I(N);U=H(Y,"Done"),Y.forEach(c),P.forEach(c),re.forEach(c),X.forEach(c),this.h()},h(){j(a,"class","google-calendar-event-title svelte-q8qe9i"),f(a,"margin-top","10px"),f(a,"margin-left","10px"),j(i,"class","material-icons"),f(i,"margin-left","auto"),f(i,"margin-right","0"),f(t,"display","flex"),j(u,"class","google-calendar-event-time svelte-q8qe9i"),f(u,"margin-top","4px"),f(u,"margin-left","10px"),j(p,"class","google-calendar-event-detail svelte-q8qe9i"),f(p,"margin-top","12px"),f(p,"margin-left","16px"),j(_,"cols","48"),j(_,"placeholder","notes"),f(_,"margin-left","10px"),f(k,"margin-left","auto"),f(k,"margin-right","16px"),f(y,"display","flex"),f(y,"margin-left","6px"),j(e,"class","detailed-card svelte-q8qe9i")},m(W,X){S(W,e,X),d(e,t),d(t,a),d(a,n),d(t,r),d(t,i),d(i,m),d(e,o),d(e,u),E&&E.m(u,null),d(e,h),d(e,p),B&&B.m(p,null),d(e,T),d(e,_),se(_,s[4]),d(e,V),d(e,y),d(y,b),C.m(b,null),d(y,q),d(y,k),d(k,N),d(N,U),v||(w=[A(i,"click",s[9]),A(_,"input",s[10]),A(_,"input",s[6]),A(N,"click",s[20])],v=!0)},p(W,X){X&1&&l!==(l=W[0].name+"")&&pe(n,l),!W[0].isDone&&W[0].startTime&&W[0].startDate?E?E.p(W,X):(E=Ae(W),E.c(),E.m(u,null)):E&&(E.d(1),E=null),R===(R=g(W))&&B?B.p(W,X):(B&&B.d(1),B=R&&R(W),B&&(B.c(),B.m(p,null))),X&16&&se(_,W[4]),$===($=L(W))&&C?C.p(W,X):(C.d(1),C=$(W),C&&(C.c(),C.m(b,null)))},d(W){W&&c(e),E&&E.d(),B&&B.d(),C.d(),v=!1,ae(w)}}}function Ae(s){let e,t=s[0].startDate+" "+s[0].startTime+"",a;return{c(){e=K("Scheduled for "),a=K(t)},l(l){e=H(l,"Scheduled for "),a=H(l,t)},m(l,n){S(l,e,n),S(l,a,n)},p(l,n){n&1&&t!==(t=l[0].startDate+" "+l[0].startTime+"")&&pe(a,t)},d(l){l&&c(e),l&&c(a)}}}function _t(s){let e,t=s[0].repeatsOnDaysOfWeek+"",a;return{c(){e=K("Repeats "),a=K(t)},l(l){e=H(l,"Repeats "),a=H(l,t)},m(l,n){S(l,e,n),S(l,a,n)},p(l,n){n&1&&t!==(t=l[0].repeatsOnDaysOfWeek+"")&&pe(a,t)},d(l){l&&c(e),l&&c(a)}}}function mt(s){let e,t=s[0].daysBeforeRepeating+"",a,l,n=(s[0].completionCount||0)+"",r,i;return{c(){e=K("Repeats every "),a=K(t),l=K(" days, completed "),r=K(n),i=K(" times")},l(m){e=H(m,"Repeats every "),a=H(m,t),l=H(m," days, completed "),r=H(m,n),i=H(m," times")},m(m,o){S(m,e,o),S(m,a,o),S(m,l,o),S(m,r,o),S(m,i,o)},p(m,o){o&1&&t!==(t=m[0].daysBeforeRepeating+"")&&pe(a,t),o&1&&n!==(n=(m[0].completionCount||0)+"")&&pe(r,n)},d(m){m&&c(e),m&&c(a),m&&c(l),m&&c(r),m&&c(i)}}}function vt(s){let e,t,a,l,n,r,i,m,o,u,h,p,T,_,V,y,b,q,k,N,U,v,w,E,g,R,B,L,$;return{c(){e=D("div"),t=K("Repeats every "),a=D("input"),l=K(" days"),n=F(),r=D("div"),i=D("div"),m=D("button"),o=K("M"),u=F(),h=D("button"),p=K("T"),T=F(),_=D("button"),V=K("W"),y=F(),b=D("button"),q=K("R"),k=F(),N=D("button"),U=K("F"),v=F(),w=D("button"),E=K("S"),g=F(),R=D("button"),B=K("S"),this.h()},l(C){e=O(C,"DIV",{style:!0});var W=I(e);t=H(W,"Repeats every "),a=O(W,"INPUT",{style:!0,placeholder:!0}),l=H(W," days"),W.forEach(c),n=M(C),r=O(C,"DIV",{style:!0});var X=I(r);i=O(X,"DIV",{});var J=I(i);m=O(J,"BUTTON",{class:!0});var oe=I(m);o=H(oe,"M"),oe.forEach(c),u=M(J),h=O(J,"BUTTON",{class:!0});var fe=I(h);p=H(fe,"T"),fe.forEach(c),T=M(J),_=O(J,"BUTTON",{class:!0});var ue=I(_);V=H(ue,"W"),ue.forEach(c),y=M(J),b=O(J,"BUTTON",{class:!0});var de=I(b);q=H(de,"R"),de.forEach(c),k=M(J),N=O(J,"BUTTON",{class:!0});var re=I(N);U=H(re,"F"),re.forEach(c),v=M(J),w=O(J,"BUTTON",{class:!0});var ce=I(w);E=H(ce,"S"),ce.forEach(c),g=M(J),R=O(J,"BUTTON",{class:!0});var P=I(R);B=H(P,"S"),P.forEach(c),J.forEach(c),X.forEach(c),this.h()},h(){f(a,"width","20px"),j(a,"placeholder","0"),f(e,"display","flex"),j(m,"class","svelte-q8qe9i"),Q(m,"selected",s[0].repeatsOnDaysOfWeek&&s[0].repeatsOnDaysOfWeek[0]),j(h,"class","svelte-q8qe9i"),Q(h,"selected",s[0].repeatsOnDaysOfWeek&&s[0].repeatsOnDaysOfWeek[1]),j(_,"class","svelte-q8qe9i"),Q(_,"selected",s[0].repeatsOnDaysOfWeek&&s[0].repeatsOnDaysOfWeek[2]),j(b,"class","svelte-q8qe9i"),Q(b,"selected",s[0].repeatsOnDaysOfWeek&&s[0].repeatsOnDaysOfWeek[3]),j(N,"class","svelte-q8qe9i"),Q(N,"selected",s[0].repeatsOnDaysOfWeek&&s[0].repeatsOnDaysOfWeek[4]),j(w,"class","svelte-q8qe9i"),Q(w,"selected",s[0].repeatsOnDaysOfWeek&&s[0].repeatsOnDaysOfWeek[5]),j(R,"class","svelte-q8qe9i"),Q(R,"selected",s[0].repeatsOnDaysOfWeek&&s[0].repeatsOnDaysOfWeek[6]),f(r,"display","flex")},m(C,W){S(C,e,W),d(e,t),d(e,a),se(a,s[3]),d(e,l),S(C,n,W),S(C,r,W),d(r,i),d(i,m),d(m,o),d(i,u),d(i,h),d(h,p),d(i,T),d(i,_),d(_,V),d(i,y),d(i,b),d(b,q),d(i,k),d(i,N),d(N,U),d(i,v),d(i,w),d(w,E),d(i,g),d(i,R),d(R,B),L||($=[A(a,"input",s[12]),A(a,"keypress",s[8]),A(m,"click",s[13]),A(h,"click",s[14]),A(_,"click",s[15]),A(b,"click",s[16]),A(N,"click",s[17]),A(w,"click",s[18]),A(R,"click",s[19])],L=!0)},p(C,W){W&8&&a.value!==C[3]&&se(a,C[3]),W&1&&Q(m,"selected",C[0].repeatsOnDaysOfWeek&&C[0].repeatsOnDaysOfWeek[0]),W&1&&Q(h,"selected",C[0].repeatsOnDaysOfWeek&&C[0].repeatsOnDaysOfWeek[1]),W&1&&Q(_,"selected",C[0].repeatsOnDaysOfWeek&&C[0].repeatsOnDaysOfWeek[2]),W&1&&Q(b,"selected",C[0].repeatsOnDaysOfWeek&&C[0].repeatsOnDaysOfWeek[3]),W&1&&Q(N,"selected",C[0].repeatsOnDaysOfWeek&&C[0].repeatsOnDaysOfWeek[4]),W&1&&Q(w,"selected",C[0].repeatsOnDaysOfWeek&&C[0].repeatsOnDaysOfWeek[5]),W&1&&Q(R,"selected",C[0].repeatsOnDaysOfWeek&&C[0].repeatsOnDaysOfWeek[6])},d(C){C&&c(e),C&&c(n),C&&c(r),L=!1,ae($)}}}function kt(s){let e,t,a,l;return{c(){e=D("button"),t=K("Repeat task"),this.h()},l(n){e=O(n,"BUTTON",{style:!0});var r=I(e);t=H(r,"Repeat task"),r.forEach(c),this.h()},h(){f(e,"margin-left","5px")},m(n,r){S(n,e,r),d(e,t),a||(l=A(e,"click",s[11]),a=!0)},p:x,d(n){n&&c(e),a=!1,l()}}}function gt(s){let e,t=s[1]&&Se(s);return{c(){t&&t.c(),e=ne()},l(a){t&&t.l(a),e=ne()},m(a,l){t&&t.m(a,l),S(a,e,l)},p(a,[l]){a[1]?t?t.p(a,l):(t=Se(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:x,o:x,d(a){t&&t.d(a),a&&c(e)}}}function yt(s,e,t){let{taskObject:a}=e,{isOpen:l=!1}=e,n=!1,r=7;const i=We();let m=a.notes||"";const o=ot.throttle(g=>{t(4,m=g.target.value),h()},500);function u({dayNumber:g}){a.repeatsOnDaysOfWeek||t(0,a.repeatsOnDaysOfWeek=[!1,!1,!1,!1,!1,!1,!1],a),t(0,a.repeatsOnDaysOfWeek[g-1]=!a.repeatsOnDaysOfWeek[g-1],a),i("task-repeat")}function h(){t(0,a.notes=m,a),i("task-notes-update")}function p(g){g.charCode===13&&(r?t(0,a.daysBeforeRepeating=r,a):(alert("Task is reset and will no longer repeat"),t(0,a.daysBeforeRepeating=0,a)),i("task-repeat"),t(3,r=0),t(2,n=!1))}const T=()=>i("card-close");function _(){m=this.value,t(4,m)}const V=()=>t(2,n=!0);function y(){r=this.value,t(3,r)}const b=()=>u({dayNumber:1}),q=()=>u({dayNumber:2}),k=()=>u({dayNumber:3}),N=()=>u({dayNumber:4}),U=()=>u({dayNumber:5}),v=()=>u({dayNumber:6}),w=()=>u({dayNumber:7}),E=()=>i("task-done");return s.$$set=g=>{"taskObject"in g&&t(0,a=g.taskObject),"isOpen"in g&&t(1,l=g.isOpen)},[a,l,n,r,m,i,o,u,p,T,_,V,y,b,q,k,N,U,v,w,E]}class ze extends De{constructor(e){super();Oe(this,e,yt,gt,Te,{taskObject:0,isOpen:1})}}function Fe(s,e,t){const a=s.slice();return a[43]=e[t],a[45]=t,a}function Me(s){let e,t,a,l,n,r,i,m,o,u,h,p,T;function _(v,w){return v[3]?bt:Dt}let V=_(s),y=V(s);n=new ze({props:{isOpen:s[2],taskObject:s[0]}}),n.$on("card-close",s[25]),n.$on("task-done",s[21]),n.$on("task-notes-update",s[26]),n.$on("task-repeat",s[27]);let b=s[5]&&Ke(s),q=s[0].children,k=[];for(let v=0;v<q.length;v+=1)k[v]=He(Fe(s,q,v));const N=v=>ee(k[v],1,1,()=>{k[v]=null});let U=s[5]&&Xe(s);return{c(){e=D("div"),t=D("div"),a=D("div"),y.c(),l=F(),ke(n.$$.fragment),r=F(),i=D("div"),b&&b.c(),m=F(),o=D("div");for(let v=0;v<k.length;v+=1)k[v].c();u=F(),U&&U.c(),this.h()},l(v){e=O(v,"DIV",{draggable:!0,class:!0,style:!0});var w=I(e);t=O(w,"DIV",{class:!0});var E=I(t);a=O(E,"DIV",{style:!0,class:!0});var g=I(a);y.l(g),g.forEach(c),l=M(E),ge(n.$$.fragment,E),r=M(E),i=O(E,"DIV",{style:!0});var R=I(i);b&&b.l(R),R.forEach(c),E.forEach(c),m=M(w),o=O(w,"DIV",{style:!0});var B=I(o);for(let L=0;L<k.length;L+=1)k[L].l(B);u=M(B),U&&U.l(B),B.forEach(c),w.forEach(c),this.h()},h(){f(a,"font-size",1.5*.85**s[1]+"rem"),f(a,"font-family","aktiv-grotesk, sans-serif"),j(a,"class","keep-on-same-line name-of-task svelte-t4v7r0"),Q(a,"scheduled-orange",!s[0].isDone&&s[0].startTime&&s[0].startDate),Q(a,"crossed-out",s[0].isDone),f(i,"width",200*.9**s[1]+"px"),f(i,"height","100%"),j(t,"class","current-task-flexbox svelte-t4v7r0"),f(o,"margin-top",20*.7**s[1]+"px"),j(e,"draggable","true"),j(e,"class","scheduled-task svelte-t4v7r0"),f(e,"margin-left",(s[1]===1?"0":"20")+"px"),f(e,"margin-bottom","10px"),f(e,"width",350*.8**s[1]+"px"),f(e,"height",s[0].duration&&!s[13]&&s[0].duration*90/60>s[0].children.length*60*.7**s[1]&&s[0].duration*90/60>60*.65**s[1]?`${s[0].duration*90/60}px`:"100%"),f(e,"padding-left",10*.8**s[1]+"px"),Q(e,"black-duration-line",!s[0].isDone&&!(s[0].startTime&&s[0].startDate)),Q(e,"orange-duration-line",!s[0].isDone&&s[0].startTime&&s[0].startDate),Q(e,"green-duration-line",s[0].isDone)},m(v,w){S(v,e,w),d(e,t),d(t,a),y.m(a,null),d(t,l),ye(n,t,null),d(t,r),d(t,i),b&&b.m(i,null),d(e,m),d(e,o);for(let E=0;E<k.length;E+=1)k[E].m(o,null);d(o,u),U&&U.m(o,null),h=!0,p||(T=[A(e,"dragstart",ft(s[38])),A(e,"pointerleave",s[20])],p=!0)},p(v,w){V===(V=_(v))&&y?y.p(v,w):(y.d(1),y=V(v),y&&(y.c(),y.m(a,null))),(!h||w[0]&2)&&f(a,"font-size",1.5*.85**v[1]+"rem"),w[0]&1&&Q(a,"scheduled-orange",!v[0].isDone&&v[0].startTime&&v[0].startDate),w[0]&1&&Q(a,"crossed-out",v[0].isDone);const E={};if(w[0]&4&&(E.isOpen=v[2]),w[0]&1&&(E.taskObject=v[0]),n.$set(E),v[5]?b?b.p(v,w):(b=Ke(v),b.c(),b.m(i,null)):b&&(b.d(1),b=null),(!h||w[0]&2)&&f(i,"width",200*.9**v[1]+"px"),w[0]&32771){q=v[0].children;let g;for(g=0;g<q.length;g+=1){const R=Fe(v,q,g);k[g]?(k[g].p(R,w),Z(k[g],1)):(k[g]=He(R),k[g].c(),Z(k[g],1),k[g].m(o,u))}for(Ee(),g=q.length;g<k.length;g+=1)N(g);we()}v[5]?U?U.p(v,w):(U=Xe(v),U.c(),U.m(o,null)):U&&(U.d(1),U=null),(!h||w[0]&2)&&f(o,"margin-top",20*.7**v[1]+"px"),(!h||w[0]&2)&&f(e,"margin-left",(v[1]===1?"0":"20")+"px"),(!h||w[0]&2)&&f(e,"width",350*.8**v[1]+"px"),(!h||w[0]&8195)&&f(e,"height",v[0].duration&&!v[13]&&v[0].duration*90/60>v[0].children.length*60*.7**v[1]&&v[0].duration*90/60>60*.65**v[1]?`${v[0].duration*90/60}px`:"100%"),(!h||w[0]&2)&&f(e,"padding-left",10*.8**v[1]+"px"),w[0]&1&&Q(e,"black-duration-line",!v[0].isDone&&!(v[0].startTime&&v[0].startDate)),w[0]&1&&Q(e,"orange-duration-line",!v[0].isDone&&v[0].startTime&&v[0].startDate),w[0]&1&&Q(e,"green-duration-line",v[0].isDone)},i(v){if(!h){Z(n.$$.fragment,v);for(let w=0;w<q.length;w+=1)Z(k[w]);h=!0}},o(v){ee(n.$$.fragment,v),k=k.filter(Boolean);for(let w=0;w<k.length;w+=1)ee(k[w]);h=!1},d(v){v&&c(e),y.d(),be(n),b&&b.d(),je(k,v),U&&U.d(),p=!1,ae(T)}}}function bt(s){let e,t,a;return{c(){e=D("input")},l(l){e=O(l,"INPUT",{})},m(l,n){S(l,e,n),se(e,s[4]),t||(a=[A(e,"input",s[24]),A(e,"keypress",s[18])],t=!0)},p(l,n){n[0]&16&&e.value!==l[4]&&se(e,l[4])},d(l){l&&c(e),t=!1,ae(a)}}}function Dt(s){let e,t=s[0].name+"",a,l,n;return{c(){e=D("div"),a=K(t),this.h()},l(r){e=O(r,"DIV",{class:!0,style:!0});var i=I(e);a=H(i,t),i.forEach(c),this.h()},h(){j(e,"class","truncate svelte-t4v7r0"),f(e,"width",350*.85**s[1]+"px")},m(r,i){S(r,e,i),d(e,a),l||(n=[A(e,"click",s[23]),A(e,"pointerenter",s[19])],l=!0)},p(r,i){i[0]&1&&t!==(t=r[0].name+"")&&pe(a,t),i[0]&2&&f(e,"width",350*.85**r[1]+"px")},d(r){r&&c(e),l=!1,ae(n)}}}function Ke(s){let e;function t(n,r){if(!(n[6]||n[8]||Vt||n[12]))return Et;if(n[8])return Tt;if(n[12])return Ot}let a=t(s),l=a&&a(s);return{c(){l&&l.c(),e=ne()},l(n){l&&l.l(n),e=ne()},m(n,r){l&&l.m(n,r),S(n,e,r)},p(n,r){a===(a=t(n))&&l?l.p(n,r):(l&&l.d(1),l=a&&a(n),l&&(l.c(),l.m(e.parentNode,e)))},d(n){l&&l.d(n),n&&c(e)}}}function Ot(s){let e,t,a,l,n,r,i,m;return{c(){e=D("div"),t=D("div"),a=K("Delete"),l=F(),n=D("div"),r=K("Cancel"),this.h()},l(o){e=O(o,"DIV",{style:!0});var u=I(e);t=O(u,"DIV",{});var h=I(t);a=H(h,"Delete"),h.forEach(c),l=M(u),n=O(u,"DIV",{});var p=I(n);r=H(p,"Cancel"),p.forEach(c),u.forEach(c),this.h()},h(){f(e,"display","flex"),f(e,"align-items","center"),f(e,"justify-content","space-evenly")},m(o,u){S(o,e,u),d(e,t),d(t,a),d(e,l),d(e,n),d(n,r),i||(m=[A(t,"click",s[22]),A(n,"click",s[31])],i=!0)},p:x,d(o){o&&c(e),i=!1,ae(m)}}}function Tt(s){let e,t,a,l,n;return{c(){e=D("input"),t=F(),a=D("input"),this.h()},l(r){e=O(r,"INPUT",{placeholder:!0,style:!0}),t=M(r),a=O(r,"INPUT",{placeholder:!0,style:!0}),this.h()},h(){j(e,"placeholder","03/14"),f(e,"width","40px"),f(e,"margin-left","14px"),j(a,"placeholder","13:00"),f(a,"width","40px")},m(r,i){S(r,e,i),se(e,s[9]),S(r,t,i),S(r,a,i),se(a,s[10]),l||(n=[A(e,"input",s[28]),A(a,"input",s[29]),A(a,"keypress",s[17])],l=!0)},p(r,i){i[0]&512&&e.value!==r[9]&&se(e,r[9]),i[0]&1024&&a.value!==r[10]&&se(a,r[10])},d(r){r&&c(e),r&&c(t),r&&c(a),l=!1,ae(n)}}}function Et(s){return{c:x,l:x,m:x,p:x,d:x}}function He(s){let e,t;function a(...l){return s[32](s[45],...l)}return e=new Ge({props:{taskObject:s[43],depth:s[1]+1}}),e.$on("task-create",a),e.$on("task-done",s[33]),e.$on("task-delete",s[34]),e.$on("task-repeating",s[35]),{c(){ke(e.$$.fragment)},l(l){ge(e.$$.fragment,l)},m(l,n){ye(e,l,n),t=!0},p(l,n){s=l;const r={};n[0]&1&&(r.taskObject=s[43]),n[0]&2&&(r.depth=s[1]+1),e.$set(r)},i(l){t||(Z(e.$$.fragment,l),t=!0)},o(l){ee(e.$$.fragment,l),t=!1},d(l){be(e,l)}}}function Xe(s){let e;function t(n,r){return n[6]?wt:It}let a=t(s),l=a(s);return{c(){l.c(),e=ne()},l(n){l.l(n),e=ne()},m(n,r){l.m(n,r),S(n,e,r)},p(n,r){a===(a=t(n))&&l?l.p(n,r):(l.d(1),l=a(n),l&&(l.c(),l.m(e.parentNode,e)))},d(n){l.d(n),n&&c(e)}}}function wt(s){let e,t,a,l;return{c(){e=D("div"),t=D("input"),this.h()},l(n){e=O(n,"DIV",{style:!0});var r=I(e);t=O(r,"INPUT",{placeholder:!0,style:!0}),r.forEach(c),this.h()},h(){j(t,"placeholder","Type sub-task"),f(t,"width","100%"),f(t,"margin-left","5px"),f(e,"display","flex"),f(e,"align-items","center"),f(e,"margin-left","20px")},m(n,r){S(n,e,r),d(e,t),se(t,s[7]),a||(l=[A(t,"input",s[37]),A(t,"keypress",s[16])],a=!0)},p(n,r){r[0]&128&&t.value!==n[7]&&se(t,n[7])},d(n){n&&c(e),a=!1,ae(l)}}}function It(s){let e,t,a,l,n;return{c(){e=D("div"),t=D("div"),a=K("new sub-task"),this.h()},l(r){e=O(r,"DIV",{style:!0});var i=I(e);t=O(i,"DIV",{style:!0});var m=I(t);a=H(m,"new sub-task"),m.forEach(c),i.forEach(c),this.h()},h(){f(t,"border-left","2px solid grey"),f(t,"color","grey"),f(t,"padding-left","5px"),f(t,"padding-bottom",8*.68**(s[1]+1)+"px"),f(t,"font-size",1.5*.85**(s[1]+1)+"rem"),f(e,"display","flex"),f(e,"align-items","center"),f(e,"margin-left","20px")},m(r,i){S(r,e,i),d(e,t),d(t,a),l||(n=A(t,"click",s[36]),l=!0)},p(r,i){i[0]&2&&f(t,"padding-bottom",8*.68**(r[1]+1)+"px"),i[0]&2&&f(t,"font-size",1.5*.85**(r[1]+1)+"rem")},d(r){r&&c(e),l=!1,n()}}}function jt(s){let e,t,a=!s[0].isDeleted&&!s[0].isDone&&!(s[0].startTime&&s[0].startDate)&&Me(s);return{c(){a&&a.c(),e=ne()},l(l){a&&a.l(l),e=ne()},m(l,n){a&&a.m(l,n),S(l,e,n),t=!0},p(l,n){!l[0].isDeleted&&!l[0].isDone&&!(l[0].startTime&&l[0].startDate)?a?(a.p(l,n),n[0]&1&&Z(a,1)):(a=Me(l),a.c(),Z(a,1),a.m(e.parentNode,e)):a&&(Ee(),ee(a,1,1,()=>{a=null}),we())},i(l){t||(Z(a),t=!0)},o(l){ee(a),t=!1},d(l){a&&a.d(l),l&&c(e)}}}let Vt=!1;function Nt(s,e){s.dataTransfer.setData("text/plain",e)}function Wt(s,e,t){let a,{taskObject:l}=e,{depth:n}=e,r=!1;const i=We();let m=!1,o="",u=!1,h=!1,p="",T=!1,_="",V="",y=0,b=!1;function q(z,G){const ie=Pe({},l.children[G]);ie.children=z.detail.updatedChildren;const ve=[...l.children];ve[G]=ie,w(ve)}function k(z){z.charCode===13&&(p&&v(p),t(7,p=""),t(6,h=!1))}function N(z){z.charCode===13&&(_.length!==5||V.length!==5?(alert("Formats must be exact - date is mm:dd and time is hh:mm, resetting"),t(0,l.startDate="",l),t(0,l.scheduledTime="",l)):(t(0,l.startDate=_,l),t(0,l.startTime=V,l)),i("task-done",{}),t(8,T=!1))}function U(z){if(z.charCode===13){if(!o){alert("Task name can't be empty.");return}t(0,l.name=o,l),i("task-done",{}),t(4,o=""),t(3,m=!1)}}function v(z){w([...l.children,{name:z,children:[]}])}function w(z){i("task-create",{updatedChildren:z})}function E(){t(5,u=!0)}function g(){t(5,u=!1)}function R(){t(0,l.isDone=!l.isDone,l),l.isRepeating&&(l.isDone?(t(0,l.completionCount=l.completionCount+1||1,l),t(0,l.lastCompletionDate=Ve(),l)):(t(0,l.completionCount=l.completionCount-1||0,l),t(0,l.lastCompletionDate="",l))),i("task-done",{})}function B(){t(0,l.isDeleted=!l.isDeleted,l),console.log("taskObject.deleted =",l.isDeleted),i("task-delete",{})}const L=()=>t(2,r=!0);function $(){o=this.value,t(4,o)}const C=()=>t(2,r=!1),W=()=>i("task-done"),X=()=>i("task-done");function J(){_=this.value,t(9,_)}function oe(){V=this.value,t(10,V)}function fe(){y=this.value,t(11,y)}const ue=()=>t(12,b=!1),de=(z,G)=>q(G,z);function re(z){qe.call(this,s,z)}function ce(z){qe.call(this,s,z)}function P(z){qe.call(this,s,z)}const Y=()=>t(6,h=!0);function te(){p=this.value,t(7,p)}const le=z=>Nt(z,l.name);return s.$$set=z=>{"taskObject"in z&&t(0,l=z.taskObject),"depth"in z&&t(1,n=z.depth)},s.$$.update=()=>{s.$$.dirty[0]&1&&t(13,a=l.children.filter(z=>z.duration).length>0)},[l,n,r,m,o,u,h,p,T,_,V,y,b,a,i,q,k,N,U,E,g,R,B,L,$,C,W,X,J,oe,fe,ue,de,re,ce,P,Y,te,le]}class Ge extends De{constructor(e){super();Oe(this,e,Wt,jt,Te,{taskObject:0,depth:1},null,[-1,-1])}}function Ye(s,e,t){const a=s.slice();return a[17]=e[t],a[19]=t,a}function Le(s,e,t){const a=s.slice();return a[20]=e[t],a[19]=t,a}function Qe(s){let e,t=s[20]+"",a;return{c(){e=D("div"),a=K(t),this.h()},l(l){e=O(l,"DIV",{class:!0,style:!0});var n=I(e);a=H(n,t),n.forEach(c),this.h()},h(){j(e,"class","time-indicator svelte-x8u2ov"),f(e,"top",30+60*s[19]+"px")},m(l,n){S(l,e,n),d(e,a)},p:x,d(l){l&&c(e)}}}function Je(s){let e,t,a=s[17].name+"",l,n,r,i,m,o,u,h;function p(...y){return s[7](s[17],...y)}function T(...y){return s[8](s[17],...y)}function _(...y){return s[10](s[17],...y)}function V(){return s[11](s[17])}return{c(){e=D("div"),t=D("div"),l=K(a),n=F(),r=D("div"),i=F(),m=D("div"),o=F(),this.h()},l(y){e=O(y,"DIV",{class:!0,style:!0});var b=I(e);t=O(b,"DIV",{draggable:!0,style:!0,class:!0});var q=I(t);l=H(q,a),q.forEach(c),n=M(b),r=O(b,"DIV",{style:!0,draggable:!0,class:!0});var k=I(r);k.forEach(c),i=M(b),m=O(b,"DIV",{draggable:!0,style:!0,class:!0});var N=I(m);N.forEach(c),o=M(b),b.forEach(c),this.h()},h(){j(t,"draggable","true"),f(t,"width","11vw"),j(t,"class","svelte-x8u2ov"),f(r,"height",s[17].duration*s[2]-20-10+"px"),f(r,"width","11vw"),j(r,"draggable","true"),j(r,"class","svelte-x8u2ov"),j(m,"draggable","true"),f(m,"height","8px"),f(m,"width","11vw"),f(m,"position","absolute"),f(m,"bottom","0"),f(m,"left","-3px"),f(m,"cursor","ns-resize"),j(m,"class","svelte-x8u2ov"),j(e,"class","scheduled-task svelte-x8u2ov"),f(e,"top",Ze(s[17])+"px"),f(e,"height",(s[17].duration*s[2]||30)+"px"),f(e,"left","30px")},m(y,b){S(y,e,b),d(e,t),d(t,l),d(e,n),d(e,r),d(e,i),d(e,m),d(e,o),u||(h=[A(t,"dragstart",p),A(r,"dragstart",T),A(m,"dragstart",s[9]),A(m,"dragend",_),A(e,"click",V)],u=!0)},p(y,b){s=y,b&1&&a!==(a=s[17].name+"")&&pe(l,a),b&1&&f(r,"height",s[17].duration*s[2]-20-10+"px"),b&1&&f(e,"top",Ze(s[17])+"px"),b&1&&f(e,"height",(s[17].duration*s[2]||30)+"px")},d(y){y&&c(e),u=!1,ae(h)}}}function qt(s){let e,t,a,l,n,r,i,m=s[1],o=[];for(let p=0;p<m.length;p+=1)o[p]=Qe(Le(s,m,p));let u=s[0],h=[];for(let p=0;p<u.length;p+=1)h[p]=Je(Ye(s,u,p));return{c(){e=D("div"),t=D("div"),a=K("Today"),l=F();for(let p=0;p<o.length;p+=1)o[p].c();n=F();for(let p=0;p<h.length;p+=1)h[p].c();this.h()},l(p){e=O(p,"DIV",{id:!0,style:!0,class:!0});var T=I(e);t=O(T,"DIV",{class:!0});var _=I(t);a=H(_,"Today"),_.forEach(c),l=M(T);for(let V=0;V<o.length;V+=1)o[V].l(T);n=M(T);for(let V=0;V<h.length;V+=1)h[V].l(T);T.forEach(c),this.h()},h(){j(t,"class","svelte-x8u2ov"),j(e,"id","calendar-day-container"),f(e,"position","relative"),f(e,"width","12vw"),f(e,"overflow-y","scroll"),f(e,"overflow-x","hidden"),j(e,"class","svelte-x8u2ov")},m(p,T){S(p,e,T),d(e,t),d(t,a),d(e,l);for(let _=0;_<o.length;_+=1)o[_].m(e,null);d(e,n);for(let _=0;_<h.length;_+=1)h[_].m(e,null);r||(i=[A(e,"drop",s[12]),A(e,"dragover",Ct)],r=!0)},p(p,[T]){if(T&2){m=p[1];let _;for(_=0;_<m.length;_+=1){const V=Le(p,m,_);o[_]?o[_].p(V,T):(o[_]=Qe(V),o[_].c(),o[_].m(e,n))}for(;_<o.length;_+=1)o[_].d(1);o.length=m.length}if(T&109){u=p[0];let _;for(_=0;_<u.length;_+=1){const V=Ye(p,u,_);h[_]?h[_].p(V,T):(h[_]=Je(V),h[_].c(),h[_].m(e,null))}for(;_<h.length;_+=1)h[_].d(1);h.length=u.length}},i:x,o:x,d(p){p&&c(e),je(o,p),je(h,p),r=!1,ae(i)}}}function Ze({startTime:s}){const e=s.slice(0,2),t=s.slice(3,5);return(Number(e)+Number(t)/60-8)*90}function $e(s,e){s.dataTransfer.setData("text/plain",e)}function Ct(s){s.preventDefault(),s.dataTransfer.dropEffect="move"}function Rt(s,e,t){let{scheduledTasks:a}=e;const l=We(),n=Ve,r=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00","00:00","01:00","02:00"];let i=90/60,m=0;function o(k){l("task-click",{task:k})}function u(k){console.log("drop detected"),k.preventDefault();var U=document.getElementById("calendar-day-container").getBoundingClientRect();U.left,U.top;const v=90;let E=k.layerY/v;const g=E-Math.floor(E),R=Math.trunc(E);let B=g*60,L=8+R;L<10&&(L=`0${L}`),B<10?(B=B.toPrecision(1),B=`0${B}`):B=B.toPrecision(2);const $=`${L}:${B}`;console.log("scheduledTime =",$),l("task-scheduled",{taskName:k.dataTransfer.getData("text/plain"),timeOfDay:$,dateScheduled:n()})}function h(k){m=k.offsetY}function p(k,N){N.duration||(N.duration=10);const U=60/90,v=(k.offsetY-m)*U;l("task-duration-adjusted",{taskName:N.name,duration:Math.max(1,N.duration+v)})}const T=(k,N)=>$e(N,k.name),_=(k,N)=>$e(N,k.name),V=k=>h(k),y=(k,N)=>p(N,k),b=k=>o(k),q=k=>u(k);return s.$$set=k=>{"scheduledTasks"in k&&t(0,a=k.scheduledTasks)},[a,r,i,o,u,h,p,T,_,V,y,b,q]}class Bt extends De{constructor(e){super();Oe(this,e,Rt,qt,Te,{scheduledTasks:0})}}function Ut(s){let e,t,a,l,n,r,i,m,o,u,h,p,T,_,V;return{c(){e=D("div"),t=D("div"),a=D("div"),l=K("Fri. Sep. 27"),n=F(),r=D("div"),i=K("Essay for Ashay"),m=F(),o=D("div"),u=F(),h=D("div"),p=K("Sat. Feb. 1"),T=F(),_=D("div"),V=K("Fly to Singapore"),this.h()},l(y){e=O(y,"DIV",{style:!0,class:!0});var b=I(e);t=O(b,"DIV",{style:!0,class:!0});var q=I(t);a=O(q,"DIV",{class:!0});var k=I(a);l=H(k,"Fri. Sep. 27"),k.forEach(c),n=M(q),r=O(q,"DIV",{class:!0,style:!0});var N=I(r);i=H(N,"Essay for Ashay"),N.forEach(c),m=M(q),o=O(q,"DIV",{class:!0,style:!0});var U=I(o);U.forEach(c),u=M(q),h=O(q,"DIV",{style:!0,class:!0});var v=I(h);p=H(v,"Sat. Feb. 1"),v.forEach(c),T=M(q),_=O(q,"DIV",{class:!0,style:!0});var w=I(_);V=H(w,"Fly to Singapore"),w.forEach(c),q.forEach(c),b.forEach(c),this.h()},h(){j(a,"class","svelte-ko0je8"),j(r,"class","scheduled-task svelte-ko0je8"),f(r,"top",20+"px"),f(r,"height",30+"px"),f(r,"border-left","2px solid red"),j(o,"class","scheduled-task svelte-ko0je8"),f(o,"top",70+"px"),f(o,"height",15+"px"),f(o,"border-left","2px dashed black"),f(h,"top","100px"),f(h,"position","absolute"),j(h,"class","svelte-ko0je8"),j(_,"class","scheduled-task svelte-ko0je8"),f(_,"top",120+"px"),f(_,"height",93+"px"),f(t,"width","12vw"),f(t,"margin-left","0px"),f(t,"margin-top","10px"),f(t,"position","relative"),f(t,"height","1600px"),j(t,"class","svelte-ko0je8"),f(e,"height","77vh"),f(e,"overflow-y","scroll"),f(e,"overflow-x","hidden"),j(e,"class","svelte-ko0je8")},m(y,b){S(y,e,b),d(e,t),d(t,a),d(a,l),d(t,n),d(t,r),d(r,i),d(t,m),d(t,o),d(t,u),d(t,h),d(h,p),d(t,T),d(t,_),d(_,V)},p:x,i:x,o:x,d(y){y&&c(e)}}}class Pt extends De{constructor(e){super();Oe(this,e,null,Ut,Te,{})}}const St={apiKey:"AIzaSyCOVm0X6UUQQcftXf066z_0hFk497j4dNY",authDomain:"project-y-2a061.firebaseapp.com",projectId:"project-y-2a061",storageBucket:"project-y-2a061.appspot.com",messagingSenderId:"132745397287",appId:"1:132745397287:web:b34052fb4683bc85e73a02",measurementId:"G-EZSLE84PYQ"};ut(St);var _e=dt();function xe(s,e,t){const a=s.slice();return a[39]=e[t],a}function et(s){let e,t,a,l,n,r=s[0],i=[];for(let u=0;u<r.length;u+=1)i[u]=st(xe(s,r,u));const m=u=>ee(i[u],1,1,()=>{i[u]=null});let o=s[6]&&lt(s);return{c(){for(let u=0;u<i.length;u+=1)i[u].c();e=F(),t=D("div"),o&&o.c(),this.h()},l(u){for(let p=0;p<i.length;p+=1)i[p].l(u);e=M(u),t=O(u,"DIV",{style:!0,class:!0});var h=I(t);o&&o.l(h),h.forEach(c),this.h()},h(){f(t,"height","100px"),j(t,"class","svelte-1agrjel")},m(u,h){for(let p=0;p<i.length;p+=1)i[p].m(u,h);S(u,e,h),S(u,t,h),o&&o.m(t,null),a=!0,l||(n=[A(t,"mouseenter",s[21]),A(t,"mouseleave",s[22])],l=!0)},p(u,h){if(h[0]&98305){r=u[0];let p;for(p=0;p<r.length;p+=1){const T=xe(u,r,p);i[p]?(i[p].p(T,h),Z(i[p],1)):(i[p]=st(T),i[p].c(),Z(i[p],1),i[p].m(e.parentNode,e))}for(Ee(),p=r.length;p<i.length;p+=1)m(p);we()}u[6]?o?o.p(u,h):(o=lt(u),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i(u){if(!a){for(let h=0;h<r.length;h+=1)Z(i[h]);a=!0}},o(u){i=i.filter(Boolean);for(let h=0;h<i.length;h+=1)ee(i[h]);a=!1},d(u){je(i,u),u&&c(e),u&&c(t),o&&o.d(),l=!1,ae(n)}}}function tt(s){let e,t,a,l;function n(...r){return s[18](s[39],...r)}return t=new Ge({props:{taskObject:s[39],depth:1}}),t.$on("task-create",n),t.$on("task-done",s[16]),t.$on("task-delete",s[16]),t.$on("task-repeating",s[16]),{c(){e=D("div"),ke(t.$$.fragment),a=F(),this.h()},l(r){e=O(r,"DIV",{class:!0});var i=I(e);ge(t.$$.fragment,i),a=M(i),i.forEach(c),this.h()},h(){j(e,"class","task-container svelte-1agrjel")},m(r,i){S(r,e,i),ye(t,e,null),d(e,a),l=!0},p(r,i){s=r;const m={};i[0]&1&&(m.taskObject=s[39]),t.$set(m)},i(r){l||(Z(t.$$.fragment,r),l=!0)},o(r){ee(t.$$.fragment,r),l=!1},d(r){r&&c(e),be(t)}}}function st(s){let e,t,a=!s[39].isDeleted&&tt(s);return{c(){a&&a.c(),e=ne()},l(l){a&&a.l(l),e=ne()},m(l,n){a&&a.m(l,n),S(l,e,n),t=!0},p(l,n){l[39].isDeleted?a&&(Ee(),ee(a,1,1,()=>{a=null}),we()):a?(a.p(l,n),n[0]&1&&Z(a,1)):(a=tt(l),a.c(),Z(a,1),a.m(e.parentNode,e))},i(l){t||(Z(a),t=!0)},o(l){ee(a),t=!1},d(l){a&&a.d(l),l&&c(e)}}}function lt(s){let e;function t(n,r){return n[5]?At:zt}let a=t(s),l=a(s);return{c(){l.c(),e=ne()},l(n){l.l(n),e=ne()},m(n,r){l.m(n,r),S(n,e,r)},p(n,r){a===(a=t(n))&&l?l.p(n,r):(l.d(1),l=a(n),l&&(l.c(),l.m(e.parentNode,e)))},d(n){l.d(n),n&&c(e)}}}function At(s){let e,t,a,l;return{c(){e=D("div"),t=D("input"),this.h()},l(n){e=O(n,"DIV",{style:!0,class:!0});var r=I(e);t=O(r,"INPUT",{placeholder:!0,class:!0}),r.forEach(c),this.h()},h(){j(t,"placeholder","Type task..."),j(t,"class","svelte-1agrjel"),f(e,"display","flex"),f(e,"align-content","center"),f(e,"justify-items","center"),j(e,"class","svelte-1agrjel")},m(n,r){S(n,e,r),d(e,t),se(t,s[4]),a||(l=[A(t,"input",s[20]),A(t,"keypress",s[14])],a=!0)},p(n,r){r[0]&16&&t.value!==n[4]&&se(t,n[4])},d(n){n&&c(e),a=!1,ae(l)}}}function zt(s){let e,t,a,l;return{c(){e=D("div"),t=K("New task"),this.h()},l(n){e=O(n,"DIV",{style:!0,class:!0});var r=I(e);t=H(r,"New task"),r.forEach(c),this.h()},h(){f(e,"font-size","1.5rem"),f(e,"color","grey"),j(e,"class","svelte-1agrjel")},m(n,r){S(n,e,r),d(e,t),a||(l=A(e,"click",s[19]),a=!0)},p:x,d(n){n&&c(e),a=!1,l()}}}function Ft(s){let e,t,a,l,n,r=(s[2]?"music_note":"music_off")+"",i,m,o,u,h,p,T,_,V,y,b,q,k,N,U,v,w,E=s[0]&&et(s);return _=new ze({props:{isOpen:s[7],taskObject:s[8]}}),_.$on("card-close",s[23]),_.$on("task-done",s[24]),y=new Bt({props:{scheduledTasks:s[3]}}),y.$on("task-scheduled",s[25]),y.$on("task-duration-adjusted",s[26]),y.$on("task-click",s[27]),q=new Pt({}),{c(){e=D("div"),t=D("div"),a=F(),l=D("div"),n=D("span"),i=K(r),m=F(),o=D("div"),u=D("div"),h=D("div"),E&&E.c(),p=F(),T=D("div"),ke(_.$$.fragment),V=F(),ke(y.$$.fragment),b=F(),ke(q.$$.fragment),k=F(),N=D("audio"),this.h()},l(g){e=O(g,"DIV",{id:!0,style:!0,class:!0});var R=I(e);t=O(R,"DIV",{style:!0,class:!0}),I(t).forEach(c),a=M(R),l=O(R,"DIV",{style:!0,class:!0});var B=I(l);n=O(B,"SPAN",{class:!0,style:!0});var L=I(n);i=H(L,r),L.forEach(c),B.forEach(c),m=M(R),o=O(R,"DIV",{style:!0,class:!0});var $=I(o);u=O($,"DIV",{class:!0,style:!0});var C=I(u);h=O(C,"DIV",{class:!0});var W=I(h);E&&E.l(W),W.forEach(c),C.forEach(c),p=M($),T=O($,"DIV",{style:!0,class:!0});var X=I(T);ge(_.$$.fragment,X),V=M(X),ge(y.$$.fragment,X),b=M(X),ge(q.$$.fragment,X),X.forEach(c),$.forEach(c),R.forEach(c),k=M(g),N=O(g,"AUDIO",{class:!0}),I(N).forEach(c),this.h()},h(){f(t,"height","100px"),j(t,"class","svelte-1agrjel"),j(n,"class","material-icons svelte-1agrjel"),f(n,"margin-left","auto"),f(n,"margin-right","0"),f(n,"color","white"),f(l,"position","absolute"),f(l,"top","30px"),f(l,"left","30px"),j(l,"class","svelte-1agrjel"),j(h,"class","todo-list svelte-1agrjel"),j(u,"class","fixed-height-container-for-scrolling svelte-1agrjel"),f(u,"background-color","white"),f(u,"border","2px solid green"),f(u,"border-top-left-radius","20px"),f(u,"border-bottom-left-radius","20px"),f(T,"display","flex"),f(T,"justify-content","space-evenly"),f(T,"width","30vw"),f(T,"border-left","2px dashed grey"),f(T,"background-color","white"),f(T,"border","2px solid green"),f(T,"border-top-right-radius","20px"),f(T,"border-bottom-right-radius","20px"),j(T,"class","svelte-1agrjel"),f(o,"display","flex"),f(o,"padding-left","0"),f(o,"padding-top","10px"),j(o,"class","svelte-1agrjel"),j(e,"id","background-image-holder"),f(e,"height","100vh"),f(e,"padding-left","120px"),f(e,"padding-right","120px"),j(e,"class","svelte-1agrjel"),j(N,"class","svelte-1agrjel")},m(g,R){S(g,e,R),d(e,t),d(e,a),d(e,l),d(l,n),d(n,i),d(e,m),d(e,o),d(o,u),d(u,h),E&&E.m(h,null),d(o,p),d(o,T),ye(_,T,null),d(T,V),ye(y,T,null),d(T,b),ye(q,T,null),S(g,k,R),S(g,N,R),s[28](N),U=!0,v||(w=A(l,"click",s[10]),v=!0)},p(g,R){(!U||R[0]&4)&&r!==(r=(g[2]?"music_note":"music_off")+"")&&pe(i,r),g[0]?E?(E.p(g,R),R[0]&1&&Z(E,1)):(E=et(g),E.c(),Z(E,1),E.m(h,null)):E&&(Ee(),ee(E,1,1,()=>{E=null}),we());const B={};R[0]&128&&(B.isOpen=g[7]),R[0]&256&&(B.taskObject=g[8]),_.$set(B);const L={};R[0]&8&&(L.scheduledTasks=g[3]),y.$set(L)},i(g){U||(Z(E),Z(_.$$.fragment,g),Z(y.$$.fragment,g),Z(q.$$.fragment,g),U=!0)},o(g){ee(E),ee(_.$$.fragment,g),ee(y.$$.fragment,g),ee(q.$$.fragment,g),U=!1},d(g){g&&c(e),E&&E.d(),be(_),be(y),be(q),g&&c(k),g&&c(N),s[28](null),v=!1,w()}}}function at(s){return Math.floor(Math.random()*s)}function Ce({node:s,fulfilsCriteria:e,applyFunc:t}){e(s)&&t(s);for(const a of s.children)Ce({node:a,fulfilsCriteria:e,applyFunc:t})}function Mt(s,e,t){let a,l=["illiyard-moor.mp3","ms-leafre-lofi.mp3"],n,r=!1,i=["https://i.imgur.com/rzkUMW8.jpeg","https://i.imgur.com/ShnqIpJ.jpeg"],m;ct(()=>{m=i[at(2)];const P=document.getElementById("background-image-holder");P.style["background-image"]=`url(${m})`,a=l[at(2)],console.log("chosenAudio =",a),t(1,n.src=a,n)});let o=null,u="",h=Ve(),p=[],T="",_=!1,V=!1,y=!1,b={};function q({task:P}){t(8,b=P),t(7,y=!0)}function k(){t(1,n.volume=.1,n),n.paused?(n.play(),t(2,r=!0)):(n.pause(),t(2,r=!1))}function N(){t(3,p=[]);for(const P of o)Ce({node:P,fulfilsCriteria:Y=>Y.startDate===Ve()&&Y.startTime,applyFunc:Y=>p.push(Y)})}async function U(P){for(const Y of o)Ce({node:Y,fulfilsCriteria:te=>te.name===P,applyFunc:te=>te.isDone=!0});await me(he(_e,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:o}),console.log("updated")}async function v({taskName:P,timeOfDay:Y,dateScheduled:te}){function le(z){if(z.name===P)return z.startTime=Y,z.startDate=te,!0;for(const G of z.children)if(le(G))return!0;return!1}for(const z of o)if(le(z)){console.log("successfully mutated allTasks, =",o);break}await me(he(_e,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:o}),t(0,o=[...o])}async function w({taskName:P,duration:Y}){function te(le){if(le.name===P)return le.duration=Y,!0;for(const z of le.children)if(te(z))return!0;return!1}for(const le of o)if(te(le)){console.log("successfully mutated allTasks, =",o);break}await me(he(_e,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:o}),t(0,o=[...o])}async function E(){const P=await pt(he(_e,"users/GxBbopqXHW0qgjKEwU4z"));t(0,o=P.data().allTasks),t(17,u=P.data().lastRanRepeatAtDate)}E();function g(P){P.charCode===13&&R()}function R(){T||alert("You have to type something first");const P=[...o,{name:T,duration:15,children:[]}];me(he(_e,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:P}),t(0,o=[...P]),t(4,T=""),isTypingNewTask=!1}function B(P,Y){const{updatedChildren:te}=P.detail;Y.children=[...te],me(he(_e,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:o}),t(0,o=[...o])}function L(){console.log("updateFirestore()"),me(he(_e,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:o}),t(0,o=[...o])}const $=(P,Y)=>B(Y,P),C=()=>t(5,_=!0);function W(){T=this.value,t(4,T)}const X=()=>t(6,V=!0),J=()=>t(6,V=!1),oe=()=>t(7,y=!1),fe=()=>U(b.name),ue=P=>v(P.detail),de=P=>w(P.detail),re=P=>q(P.detail);function ce(P){ht[P?"unshift":"push"](()=>{n=P,t(1,n)})}return s.$$.update=()=>{if(s.$$.dirty[0]&131073&&o&&(console.log("collecting scheduled tasks to be displayed..."),N(),o.sort((P,Y)=>!!P.isDone-!!Y.isDone),u!==h)){let te=function(G){G.repeatsOnDaysOfWeek&&G.repeatsOnDaysOfWeek[P.getDay()]&&G.lastCompletionDate!==h&&(G.isDone=!1,G.startDate=h,G.startTime||Y.push(G));for(const ie of G.children)te(ie)},le=function(G){if(G.daysBeforeRepeating){const ie=new Date(`node.lastCompletionDate/${2022}`),Ne=new Date().getTime()-ie.getTime();Math.ceil(Ne/(1e3*3600*24))>=G.daysBeforeRepeating&&(G.isDone=!1,G.startDate=h,Y.push(G))}for(const ie of G.children)le(ie)};console.log("running repeating task algorithm");const P=new Date,Y=[];for(const G of o)te(G);for(const G of o)le(G);console.log("pool for resolve conflict =",Y);let z=1440;for(const G of Y){z-=G.duration||5;const ie=z/60,ve=parseInt(ie),Ne=ie-ve,Re=ve;let Ie=Math.round(Ne*60);Ie<10&&(Ie=`0${Ie}`),G.startTime=`${Re}:${Ie}`,console.log(`habit ${G.name} starts =`,G.startTime)}me(he(_e,"users/GxBbopqXHW0qgjKEwU4z"),{allTasks:o,lastRanRepeatAtDate:h}),t(0,o=[...o])}},[o,n,r,p,T,_,V,y,b,q,k,U,v,w,g,B,L,u,$,C,W,X,J,oe,fe,ue,de,re,ce]}class Xt extends De{constructor(e){super();Oe(this,e,Mt,Ft,Te,{},null,[-1,-1])}}export{Xt as default};
