function Hr(){}function IE(e,t){for(const n in t)e[n]=t[n];return e}function Tf(e){return e()}function Af(){return Object.create(null)}function Gr(e){e.forEach(Tf)}function SE(e){return typeof e=="function"}function CE(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function bE(e){return Object.keys(e).length===0}function YC(e,t,n,s){if(e){const o=If(e,t,n,s);return e[0](o)}}function If(e,t,n,s){return e[1]&&s?IE(n.ctx.slice(),e[1](s(t))):n.ctx}function XC(e,t,n,s){if(e[2]&&s){const o=e[2](s(n));if(t.dirty===void 0)return o;if(typeof o=="object"){const u=[],l=Math.max(t.dirty.length,o.length);for(let f=0;f<l;f+=1)u[f]=t.dirty[f]|o[f];return u}return t.dirty|o}return t.dirty}function QC(e,t,n,s,o,u){if(o){const l=If(t,n,s,u);e.p(l,o)}}function JC(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let s=0;s<n;s++)t[s]=-1;return t}return-1}let As=!1;function RE(){As=!0}function xE(){As=!1}function NE(e,t,n,s){for(;e<t;){const o=e+(t-e>>1);n(o)<=s?e=o+1:t=o}return e}function DE(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if(e.nodeName==="HEAD"){const p=[];for(let y=0;y<t.length;y++){const E=t[y];E.claim_order!==void 0&&p.push(E)}t=p}const n=new Int32Array(t.length+1),s=new Int32Array(t.length);n[0]=-1;let o=0;for(let p=0;p<t.length;p++){const y=t[p].claim_order,E=(o>0&&t[n[o]].claim_order<=y?o+1:NE(1,o,R=>t[n[R]].claim_order,y))-1;s[p]=n[E]+1;const I=E+1;n[I]=p,o=Math.max(I,o)}const u=[],l=[];let f=t.length-1;for(let p=n[o]+1;p!=0;p=s[p-1]){for(u.push(t[p-1]);f>=p;f--)l.push(t[f]);f--}for(;f>=0;f--)l.push(t[f]);u.reverse(),l.sort((p,y)=>p.claim_order-y.claim_order);for(let p=0,y=0;p<l.length;p++){for(;y<u.length&&l[p].claim_order>=u[y].claim_order;)y++;const E=y<u.length?u[y]:null;e.insertBefore(l[p],E)}}function LE(e,t){if(As){for(DE(e),(e.actual_end_child===void 0||e.actual_end_child!==null&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild);e.actual_end_child!==null&&e.actual_end_child.claim_order===void 0;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?(t.claim_order!==void 0||t.parentNode!==e)&&e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else(t.parentNode!==e||t.nextSibling!==null)&&e.appendChild(t)}function ZC(e,t,n){As&&!n?LE(e,t):(t.parentNode!==e||t.nextSibling!=n)&&e.insertBefore(t,n||null)}function OE(e){e.parentNode.removeChild(e)}function tb(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function kE(e){return document.createElement(e)}function Za(e){return document.createTextNode(e)}function eb(){return Za(" ")}function nb(){return Za("")}function rb(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function ib(e){return function(t){t.target===this&&e.call(this,t)}}function sb(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ME(e){return Array.from(e.childNodes)}function PE(e){e.claim_info===void 0&&(e.claim_info={last_index:0,total_claimed:0})}function Sf(e,t,n,s,o=!1){PE(e);const u=(()=>{for(let l=e.claim_info.last_index;l<e.length;l++){const f=e[l];if(t(f)){const p=n(f);return p===void 0?e.splice(l,1):e[l]=p,o||(e.claim_info.last_index=l),f}}for(let l=e.claim_info.last_index-1;l>=0;l--){const f=e[l];if(t(f)){const p=n(f);return p===void 0?e.splice(l,1):e[l]=p,o?p===void 0&&e.claim_info.last_index--:e.claim_info.last_index=l,f}}return s()})();return u.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,u}function FE(e,t,n,s){return Sf(e,o=>o.nodeName===t,o=>{const u=[];for(let l=0;l<o.attributes.length;l++){const f=o.attributes[l];n[f.name]||u.push(f.name)}u.forEach(l=>o.removeAttribute(l))},()=>s(t))}function ob(e,t,n){return FE(e,t,n,kE)}function UE(e,t){return Sf(e,n=>n.nodeType===3,n=>{const s=""+t;if(n.data.startsWith(s)){if(n.data.length!==s.length)return n.splitText(s.length)}else n.data=s},()=>Za(t),!0)}function ab(e){return UE(e," ")}function ub(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function cb(e,t){e.value=t==null?"":t}function lb(e,t,n,s){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,s?"important":"")}function hb(e,t,n){e.classList[n?"add":"remove"](t)}function VE(e,t,n=!1){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,!1,t),s}let Kr;function zr(e){Kr=e}function Is(){if(!Kr)throw new Error("Function called outside component initialization");return Kr}function fb(e){Is().$$.on_mount.push(e)}function db(e){Is().$$.after_update.push(e)}function gb(){const e=Is();return(t,n)=>{const s=e.$$.callbacks[t];if(s){const o=VE(t,n);s.slice().forEach(u=>{u.call(e,o)})}}}function pb(e,t){Is().$$.context.set(e,t)}function mb(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(s=>s.call(this,t))}const jr=[],Cf=[],Ss=[],bf=[],Rf=Promise.resolve();let tu=!1;function xf(){tu||(tu=!0,Rf.then(Nf))}function yb(){return xf(),Rf}function eu(e){Ss.push(e)}const nu=new Set;let Cs=0;function Nf(){const e=Kr;do{for(;Cs<jr.length;){const t=jr[Cs];Cs++,zr(t),$E(t.$$)}for(zr(null),jr.length=0,Cs=0;Cf.length;)Cf.pop()();for(let t=0;t<Ss.length;t+=1){const n=Ss[t];nu.has(n)||(nu.add(n),n())}Ss.length=0}while(jr.length);for(;bf.length;)bf.pop()();tu=!1,nu.clear(),zr(e)}function $E(e){if(e.fragment!==null){e.update(),Gr(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(eu)}}const bs=new Set;let An;function vb(){An={r:0,c:[],p:An}}function wb(){An.r||Gr(An.c),An=An.p}function BE(e,t){e&&e.i&&(bs.delete(e),e.i(t))}function _b(e,t,n,s){if(e&&e.o){if(bs.has(e))return;bs.add(e),An.c.push(()=>{bs.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}}function Eb(e,t){const n={},s={},o={$$scope:1};let u=e.length;for(;u--;){const l=e[u],f=t[u];if(f){for(const p in l)p in f||(s[p]=1);for(const p in f)o[p]||(n[p]=f[p],o[p]=1);e[u]=f}else for(const p in l)o[p]=1}for(const l in s)l in n||(n[l]=void 0);return n}function Tb(e){return typeof e=="object"&&e!==null?e:{}}function Ab(e){e&&e.c()}function Ib(e,t){e&&e.l(t)}function qE(e,t,n,s){const{fragment:o,on_mount:u,on_destroy:l,after_update:f}=e.$$;o&&o.m(t,n),s||eu(()=>{const p=u.map(Tf).filter(SE);l?l.push(...p):Gr(p),e.$$.on_mount=[]}),f.forEach(eu)}function WE(e,t){const n=e.$$;n.fragment!==null&&(Gr(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function HE(e,t){e.$$.dirty[0]===-1&&(jr.push(e),xf(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Sb(e,t,n,s,o,u,l,f=[-1]){const p=Kr;zr(e);const y=e.$$={fragment:null,ctx:null,props:u,update:Hr,not_equal:o,bound:Af(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(p?p.$$.context:[])),callbacks:Af(),dirty:f,skip_bound:!1,root:t.target||p.$$.root};l&&l(y.root);let E=!1;if(y.ctx=n?n(e,t.props||{},(I,R,...L)=>{const P=L.length?L[0]:R;return y.ctx&&o(y.ctx[I],y.ctx[I]=P)&&(!y.skip_bound&&y.bound[I]&&y.bound[I](P),E&&HE(e,I)),R}):[],y.update(),E=!0,Gr(y.before_update),y.fragment=s?s(y.ctx):!1,t.target){if(t.hydrate){RE();const I=ME(t.target);y.fragment&&y.fragment.l(I),I.forEach(OE)}else y.fragment&&y.fragment.c();t.intro&&BE(e.$$.fragment),qE(e,t.target,t.anchor,t.customElement),xE(),Nf()}zr(p)}class Cb{$destroy(){WE(this,1),this.$destroy=Hr}$on(t,n){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}$set(t){this.$$set&&!bE(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const tr=[];function bb(e,t=Hr){let n;const s=new Set;function o(f){if(CE(e,f)&&(e=f,n)){const p=!tr.length;for(const y of s)y[1](),tr.push(y,e);if(p){for(let y=0;y<tr.length;y+=2)tr[y][0](tr[y+1]);tr.length=0}}}function u(f){o(f(e))}function l(f,p=Hr){const y=[f,p];return s.add(y),s.size===1&&(n=t(o)||Hr),f(e),()=>{s.delete(y),s.size===0&&(n(),n=null)}}return{set:o,update:u,subscribe:l}}var Yr=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ru={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var n,s="4.17.21",o=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",f="Invalid `variable` option passed into `_.template`",p="__lodash_hash_undefined__",y=500,E="__lodash_placeholder__",I=1,R=2,L=4,P=1,et=2,rt=1,xt=2,fe=4,Ut=8,de=16,re=32,Ye=64,ge=128,Er=256,Do=512,xp=30,Np="...",Dp=800,Lp=16,Wc=1,Op=2,kp=3,dn=1/0,Xe=9007199254740991,Mp=17976931348623157e292,Ni=0/0,De=4294967295,Pp=De-1,Fp=De>>>1,Up=[["ary",ge],["bind",rt],["bindKey",xt],["curry",Ut],["curryRight",de],["flip",Do],["partial",re],["partialRight",Ye],["rearg",Er]],Un="[object Arguments]",Di="[object Array]",Vp="[object AsyncFunction]",Tr="[object Boolean]",Ar="[object Date]",$p="[object DOMException]",Li="[object Error]",Oi="[object Function]",Hc="[object GeneratorFunction]",Se="[object Map]",Ir="[object Number]",Bp="[object Null]",Pe="[object Object]",Gc="[object Promise]",qp="[object Proxy]",Sr="[object RegExp]",Ce="[object Set]",Cr="[object String]",ki="[object Symbol]",Wp="[object Undefined]",br="[object WeakMap]",Hp="[object WeakSet]",Rr="[object ArrayBuffer]",Vn="[object DataView]",Lo="[object Float32Array]",Oo="[object Float64Array]",ko="[object Int8Array]",Mo="[object Int16Array]",Po="[object Int32Array]",Fo="[object Uint8Array]",Uo="[object Uint8ClampedArray]",Vo="[object Uint16Array]",$o="[object Uint32Array]",Gp=/\b__p \+= '';/g,Kp=/\b(__p \+=) '' \+/g,zp=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Kc=/&(?:amp|lt|gt|quot|#39);/g,zc=/[&<>"']/g,jp=RegExp(Kc.source),Yp=RegExp(zc.source),Xp=/<%-([\s\S]+?)%>/g,Qp=/<%([\s\S]+?)%>/g,jc=/<%=([\s\S]+?)%>/g,Jp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zp=/^\w*$/,tm=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bo=/[\\^$.*+?()[\]{}|]/g,em=RegExp(Bo.source),qo=/^\s+/,nm=/\s/,rm=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,im=/\{\n\/\* \[wrapped with (.+)\] \*/,sm=/,? & /,om=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,am=/[()=,{}\[\]\/\s]/,um=/\\(\\)?/g,cm=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Yc=/\w*$/,lm=/^[-+]0x[0-9a-f]+$/i,hm=/^0b[01]+$/i,fm=/^\[object .+?Constructor\]$/,dm=/^0o[0-7]+$/i,gm=/^(?:0|[1-9]\d*)$/,pm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mi=/($^)/,mm=/['\n\r\u2028\u2029\\]/g,Pi="\\ud800-\\udfff",ym="\\u0300-\\u036f",vm="\\ufe20-\\ufe2f",wm="\\u20d0-\\u20ff",Xc=ym+vm+wm,Qc="\\u2700-\\u27bf",Jc="a-z\\xdf-\\xf6\\xf8-\\xff",_m="\\xac\\xb1\\xd7\\xf7",Em="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Tm="\\u2000-\\u206f",Am=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Zc="A-Z\\xc0-\\xd6\\xd8-\\xde",tl="\\ufe0e\\ufe0f",el=_m+Em+Tm+Am,Wo="['\u2019]",Im="["+Pi+"]",nl="["+el+"]",Fi="["+Xc+"]",rl="\\d+",Sm="["+Qc+"]",il="["+Jc+"]",sl="[^"+Pi+el+rl+Qc+Jc+Zc+"]",Ho="\\ud83c[\\udffb-\\udfff]",Cm="(?:"+Fi+"|"+Ho+")",ol="[^"+Pi+"]",Go="(?:\\ud83c[\\udde6-\\uddff]){2}",Ko="[\\ud800-\\udbff][\\udc00-\\udfff]",$n="["+Zc+"]",al="\\u200d",ul="(?:"+il+"|"+sl+")",bm="(?:"+$n+"|"+sl+")",cl="(?:"+Wo+"(?:d|ll|m|re|s|t|ve))?",ll="(?:"+Wo+"(?:D|LL|M|RE|S|T|VE))?",hl=Cm+"?",fl="["+tl+"]?",Rm="(?:"+al+"(?:"+[ol,Go,Ko].join("|")+")"+fl+hl+")*",xm="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nm="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",dl=fl+hl+Rm,Dm="(?:"+[Sm,Go,Ko].join("|")+")"+dl,Lm="(?:"+[ol+Fi+"?",Fi,Go,Ko,Im].join("|")+")",Om=RegExp(Wo,"g"),km=RegExp(Fi,"g"),zo=RegExp(Ho+"(?="+Ho+")|"+Lm+dl,"g"),Mm=RegExp([$n+"?"+il+"+"+cl+"(?="+[nl,$n,"$"].join("|")+")",bm+"+"+ll+"(?="+[nl,$n+ul,"$"].join("|")+")",$n+"?"+ul+"+"+cl,$n+"+"+ll,Nm,xm,rl,Dm].join("|"),"g"),Pm=RegExp("["+al+Pi+Xc+tl+"]"),Fm=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Um=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Vm=-1,ft={};ft[Lo]=ft[Oo]=ft[ko]=ft[Mo]=ft[Po]=ft[Fo]=ft[Uo]=ft[Vo]=ft[$o]=!0,ft[Un]=ft[Di]=ft[Rr]=ft[Tr]=ft[Vn]=ft[Ar]=ft[Li]=ft[Oi]=ft[Se]=ft[Ir]=ft[Pe]=ft[Sr]=ft[Ce]=ft[Cr]=ft[br]=!1;var lt={};lt[Un]=lt[Di]=lt[Rr]=lt[Vn]=lt[Tr]=lt[Ar]=lt[Lo]=lt[Oo]=lt[ko]=lt[Mo]=lt[Po]=lt[Se]=lt[Ir]=lt[Pe]=lt[Sr]=lt[Ce]=lt[Cr]=lt[ki]=lt[Fo]=lt[Uo]=lt[Vo]=lt[$o]=!0,lt[Li]=lt[Oi]=lt[br]=!1;var $m={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Bm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},qm={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Wm={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Hm=parseFloat,Gm=parseInt,gl=typeof Yr=="object"&&Yr&&Yr.Object===Object&&Yr,Km=typeof self=="object"&&self&&self.Object===Object&&self,Nt=gl||Km||Function("return this")(),jo=t&&!t.nodeType&&t,gn=jo&&!0&&e&&!e.nodeType&&e,pl=gn&&gn.exports===jo,Yo=pl&&gl.process,pe=function(){try{var w=gn&&gn.require&&gn.require("util").types;return w||Yo&&Yo.binding&&Yo.binding("util")}catch{}}(),ml=pe&&pe.isArrayBuffer,yl=pe&&pe.isDate,vl=pe&&pe.isMap,wl=pe&&pe.isRegExp,_l=pe&&pe.isSet,El=pe&&pe.isTypedArray;function ie(w,A,T){switch(T.length){case 0:return w.call(A);case 1:return w.call(A,T[0]);case 2:return w.call(A,T[0],T[1]);case 3:return w.call(A,T[0],T[1],T[2])}return w.apply(A,T)}function zm(w,A,T,O){for(var W=-1,it=w==null?0:w.length;++W<it;){var It=w[W];A(O,It,T(It),w)}return O}function me(w,A){for(var T=-1,O=w==null?0:w.length;++T<O&&A(w[T],T,w)!==!1;);return w}function jm(w,A){for(var T=w==null?0:w.length;T--&&A(w[T],T,w)!==!1;);return w}function Tl(w,A){for(var T=-1,O=w==null?0:w.length;++T<O;)if(!A(w[T],T,w))return!1;return!0}function Qe(w,A){for(var T=-1,O=w==null?0:w.length,W=0,it=[];++T<O;){var It=w[T];A(It,T,w)&&(it[W++]=It)}return it}function Ui(w,A){var T=w==null?0:w.length;return!!T&&Bn(w,A,0)>-1}function Xo(w,A,T){for(var O=-1,W=w==null?0:w.length;++O<W;)if(T(A,w[O]))return!0;return!1}function gt(w,A){for(var T=-1,O=w==null?0:w.length,W=Array(O);++T<O;)W[T]=A(w[T],T,w);return W}function Je(w,A){for(var T=-1,O=A.length,W=w.length;++T<O;)w[W+T]=A[T];return w}function Qo(w,A,T,O){var W=-1,it=w==null?0:w.length;for(O&&it&&(T=w[++W]);++W<it;)T=A(T,w[W],W,w);return T}function Ym(w,A,T,O){var W=w==null?0:w.length;for(O&&W&&(T=w[--W]);W--;)T=A(T,w[W],W,w);return T}function Jo(w,A){for(var T=-1,O=w==null?0:w.length;++T<O;)if(A(w[T],T,w))return!0;return!1}var Xm=Zo("length");function Qm(w){return w.split("")}function Jm(w){return w.match(om)||[]}function Al(w,A,T){var O;return T(w,function(W,it,It){if(A(W,it,It))return O=it,!1}),O}function Vi(w,A,T,O){for(var W=w.length,it=T+(O?1:-1);O?it--:++it<W;)if(A(w[it],it,w))return it;return-1}function Bn(w,A,T){return A===A?ly(w,A,T):Vi(w,Il,T)}function Zm(w,A,T,O){for(var W=T-1,it=w.length;++W<it;)if(O(w[W],A))return W;return-1}function Il(w){return w!==w}function Sl(w,A){var T=w==null?0:w.length;return T?ea(w,A)/T:Ni}function Zo(w){return function(A){return A==null?n:A[w]}}function ta(w){return function(A){return w==null?n:w[A]}}function Cl(w,A,T,O,W){return W(w,function(it,It,ct){T=O?(O=!1,it):A(T,it,It,ct)}),T}function ty(w,A){var T=w.length;for(w.sort(A);T--;)w[T]=w[T].value;return w}function ea(w,A){for(var T,O=-1,W=w.length;++O<W;){var it=A(w[O]);it!==n&&(T=T===n?it:T+it)}return T}function na(w,A){for(var T=-1,O=Array(w);++T<w;)O[T]=A(T);return O}function ey(w,A){return gt(A,function(T){return[T,w[T]]})}function bl(w){return w&&w.slice(0,Dl(w)+1).replace(qo,"")}function se(w){return function(A){return w(A)}}function ra(w,A){return gt(A,function(T){return w[T]})}function xr(w,A){return w.has(A)}function Rl(w,A){for(var T=-1,O=w.length;++T<O&&Bn(A,w[T],0)>-1;);return T}function xl(w,A){for(var T=w.length;T--&&Bn(A,w[T],0)>-1;);return T}function ny(w,A){for(var T=w.length,O=0;T--;)w[T]===A&&++O;return O}var ry=ta($m),iy=ta(Bm);function sy(w){return"\\"+Wm[w]}function oy(w,A){return w==null?n:w[A]}function qn(w){return Pm.test(w)}function ay(w){return Fm.test(w)}function uy(w){for(var A,T=[];!(A=w.next()).done;)T.push(A.value);return T}function ia(w){var A=-1,T=Array(w.size);return w.forEach(function(O,W){T[++A]=[W,O]}),T}function Nl(w,A){return function(T){return w(A(T))}}function Ze(w,A){for(var T=-1,O=w.length,W=0,it=[];++T<O;){var It=w[T];(It===A||It===E)&&(w[T]=E,it[W++]=T)}return it}function $i(w){var A=-1,T=Array(w.size);return w.forEach(function(O){T[++A]=O}),T}function cy(w){var A=-1,T=Array(w.size);return w.forEach(function(O){T[++A]=[O,O]}),T}function ly(w,A,T){for(var O=T-1,W=w.length;++O<W;)if(w[O]===A)return O;return-1}function hy(w,A,T){for(var O=T+1;O--;)if(w[O]===A)return O;return O}function Wn(w){return qn(w)?dy(w):Xm(w)}function be(w){return qn(w)?gy(w):Qm(w)}function Dl(w){for(var A=w.length;A--&&nm.test(w.charAt(A)););return A}var fy=ta(qm);function dy(w){for(var A=zo.lastIndex=0;zo.test(w);)++A;return A}function gy(w){return w.match(zo)||[]}function py(w){return w.match(Mm)||[]}var my=function w(A){A=A==null?Nt:Hn.defaults(Nt.Object(),A,Hn.pick(Nt,Um));var T=A.Array,O=A.Date,W=A.Error,it=A.Function,It=A.Math,ct=A.Object,sa=A.RegExp,yy=A.String,ye=A.TypeError,Bi=T.prototype,vy=it.prototype,Gn=ct.prototype,qi=A["__core-js_shared__"],Wi=vy.toString,at=Gn.hasOwnProperty,wy=0,Ll=function(){var r=/[^.]+$/.exec(qi&&qi.keys&&qi.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Hi=Gn.toString,_y=Wi.call(ct),Ey=Nt._,Ty=sa("^"+Wi.call(at).replace(Bo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gi=pl?A.Buffer:n,tn=A.Symbol,Ki=A.Uint8Array,Ol=Gi?Gi.allocUnsafe:n,zi=Nl(ct.getPrototypeOf,ct),kl=ct.create,Ml=Gn.propertyIsEnumerable,ji=Bi.splice,Pl=tn?tn.isConcatSpreadable:n,Nr=tn?tn.iterator:n,pn=tn?tn.toStringTag:n,Yi=function(){try{var r=_n(ct,"defineProperty");return r({},"",{}),r}catch{}}(),Ay=A.clearTimeout!==Nt.clearTimeout&&A.clearTimeout,Iy=O&&O.now!==Nt.Date.now&&O.now,Sy=A.setTimeout!==Nt.setTimeout&&A.setTimeout,Xi=It.ceil,Qi=It.floor,oa=ct.getOwnPropertySymbols,Cy=Gi?Gi.isBuffer:n,Fl=A.isFinite,by=Bi.join,Ry=Nl(ct.keys,ct),St=It.max,Vt=It.min,xy=O.now,Ny=A.parseInt,Ul=It.random,Dy=Bi.reverse,aa=_n(A,"DataView"),Dr=_n(A,"Map"),ua=_n(A,"Promise"),Kn=_n(A,"Set"),Lr=_n(A,"WeakMap"),Or=_n(ct,"create"),Ji=Lr&&new Lr,zn={},Ly=En(aa),Oy=En(Dr),ky=En(ua),My=En(Kn),Py=En(Lr),Zi=tn?tn.prototype:n,kr=Zi?Zi.valueOf:n,Vl=Zi?Zi.toString:n;function d(r){if(yt(r)&&!G(r)&&!(r instanceof J)){if(r instanceof ve)return r;if(at.call(r,"__wrapped__"))return $h(r)}return new ve(r)}var jn=function(){function r(){}return function(i){if(!mt(i))return{};if(kl)return kl(i);r.prototype=i;var a=new r;return r.prototype=n,a}}();function ts(){}function ve(r,i){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=n}d.templateSettings={escape:Xp,evaluate:Qp,interpolate:jc,variable:"",imports:{_:d}},d.prototype=ts.prototype,d.prototype.constructor=d,ve.prototype=jn(ts.prototype),ve.prototype.constructor=ve;function J(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=De,this.__views__=[]}function Fy(){var r=new J(this.__wrapped__);return r.__actions__=Xt(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=Xt(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=Xt(this.__views__),r}function Uy(){if(this.__filtered__){var r=new J(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function Vy(){var r=this.__wrapped__.value(),i=this.__dir__,a=G(r),c=i<0,h=a?r.length:0,g=Qv(0,h,this.__views__),m=g.start,v=g.end,_=v-m,S=c?v:m-1,C=this.__iteratees__,b=C.length,N=0,M=Vt(_,this.__takeCount__);if(!a||!c&&h==_&&M==_)return ch(r,this.__actions__);var V=[];t:for(;_--&&N<M;){S+=i;for(var Y=-1,$=r[S];++Y<b;){var Q=C[Y],Z=Q.iteratee,ue=Q.type,Kt=Z($);if(ue==Op)$=Kt;else if(!Kt){if(ue==Wc)continue t;break t}}V[N++]=$}return V}J.prototype=jn(ts.prototype),J.prototype.constructor=J;function mn(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var c=r[i];this.set(c[0],c[1])}}function $y(){this.__data__=Or?Or(null):{},this.size=0}function By(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i}function qy(r){var i=this.__data__;if(Or){var a=i[r];return a===p?n:a}return at.call(i,r)?i[r]:n}function Wy(r){var i=this.__data__;return Or?i[r]!==n:at.call(i,r)}function Hy(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=Or&&i===n?p:i,this}mn.prototype.clear=$y,mn.prototype.delete=By,mn.prototype.get=qy,mn.prototype.has=Wy,mn.prototype.set=Hy;function Fe(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var c=r[i];this.set(c[0],c[1])}}function Gy(){this.__data__=[],this.size=0}function Ky(r){var i=this.__data__,a=es(i,r);if(a<0)return!1;var c=i.length-1;return a==c?i.pop():ji.call(i,a,1),--this.size,!0}function zy(r){var i=this.__data__,a=es(i,r);return a<0?n:i[a][1]}function jy(r){return es(this.__data__,r)>-1}function Yy(r,i){var a=this.__data__,c=es(a,r);return c<0?(++this.size,a.push([r,i])):a[c][1]=i,this}Fe.prototype.clear=Gy,Fe.prototype.delete=Ky,Fe.prototype.get=zy,Fe.prototype.has=jy,Fe.prototype.set=Yy;function Ue(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var c=r[i];this.set(c[0],c[1])}}function Xy(){this.size=0,this.__data__={hash:new mn,map:new(Dr||Fe),string:new mn}}function Qy(r){var i=ds(this,r).delete(r);return this.size-=i?1:0,i}function Jy(r){return ds(this,r).get(r)}function Zy(r){return ds(this,r).has(r)}function tv(r,i){var a=ds(this,r),c=a.size;return a.set(r,i),this.size+=a.size==c?0:1,this}Ue.prototype.clear=Xy,Ue.prototype.delete=Qy,Ue.prototype.get=Jy,Ue.prototype.has=Zy,Ue.prototype.set=tv;function yn(r){var i=-1,a=r==null?0:r.length;for(this.__data__=new Ue;++i<a;)this.add(r[i])}function ev(r){return this.__data__.set(r,p),this}function nv(r){return this.__data__.has(r)}yn.prototype.add=yn.prototype.push=ev,yn.prototype.has=nv;function Re(r){var i=this.__data__=new Fe(r);this.size=i.size}function rv(){this.__data__=new Fe,this.size=0}function iv(r){var i=this.__data__,a=i.delete(r);return this.size=i.size,a}function sv(r){return this.__data__.get(r)}function ov(r){return this.__data__.has(r)}function av(r,i){var a=this.__data__;if(a instanceof Fe){var c=a.__data__;if(!Dr||c.length<o-1)return c.push([r,i]),this.size=++a.size,this;a=this.__data__=new Ue(c)}return a.set(r,i),this.size=a.size,this}Re.prototype.clear=rv,Re.prototype.delete=iv,Re.prototype.get=sv,Re.prototype.has=ov,Re.prototype.set=av;function $l(r,i){var a=G(r),c=!a&&Tn(r),h=!a&&!c&&on(r),g=!a&&!c&&!h&&Jn(r),m=a||c||h||g,v=m?na(r.length,yy):[],_=v.length;for(var S in r)(i||at.call(r,S))&&!(m&&(S=="length"||h&&(S=="offset"||S=="parent")||g&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||qe(S,_)))&&v.push(S);return v}function Bl(r){var i=r.length;return i?r[wa(0,i-1)]:n}function uv(r,i){return gs(Xt(r),vn(i,0,r.length))}function cv(r){return gs(Xt(r))}function ca(r,i,a){(a!==n&&!xe(r[i],a)||a===n&&!(i in r))&&Ve(r,i,a)}function Mr(r,i,a){var c=r[i];(!(at.call(r,i)&&xe(c,a))||a===n&&!(i in r))&&Ve(r,i,a)}function es(r,i){for(var a=r.length;a--;)if(xe(r[a][0],i))return a;return-1}function lv(r,i,a,c){return en(r,function(h,g,m){i(c,h,a(h),m)}),c}function ql(r,i){return r&&Oe(i,Ct(i),r)}function hv(r,i){return r&&Oe(i,Jt(i),r)}function Ve(r,i,a){i=="__proto__"&&Yi?Yi(r,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[i]=a}function la(r,i){for(var a=-1,c=i.length,h=T(c),g=r==null;++a<c;)h[a]=g?n:Ha(r,i[a]);return h}function vn(r,i,a){return r===r&&(a!==n&&(r=r<=a?r:a),i!==n&&(r=r>=i?r:i)),r}function we(r,i,a,c,h,g){var m,v=i&I,_=i&R,S=i&L;if(a&&(m=h?a(r,c,h,g):a(r)),m!==n)return m;if(!mt(r))return r;var C=G(r);if(C){if(m=Zv(r),!v)return Xt(r,m)}else{var b=$t(r),N=b==Oi||b==Hc;if(on(r))return fh(r,v);if(b==Pe||b==Un||N&&!h){if(m=_||N?{}:Dh(r),!v)return _?qv(r,hv(m,r)):Bv(r,ql(m,r))}else{if(!lt[b])return h?r:{};m=t0(r,b,v)}}g||(g=new Re);var M=g.get(r);if(M)return M;g.set(r,m),af(r)?r.forEach(function($){m.add(we($,i,a,$,r,g))}):sf(r)&&r.forEach(function($,Q){m.set(Q,we($,i,a,Q,r,g))});var V=S?_?Na:xa:_?Jt:Ct,Y=C?n:V(r);return me(Y||r,function($,Q){Y&&(Q=$,$=r[Q]),Mr(m,Q,we($,i,a,Q,r,g))}),m}function fv(r){var i=Ct(r);return function(a){return Wl(a,r,i)}}function Wl(r,i,a){var c=a.length;if(r==null)return!c;for(r=ct(r);c--;){var h=a[c],g=i[h],m=r[h];if(m===n&&!(h in r)||!g(m))return!1}return!0}function Hl(r,i,a){if(typeof r!="function")throw new ye(l);return qr(function(){r.apply(n,a)},i)}function Pr(r,i,a,c){var h=-1,g=Ui,m=!0,v=r.length,_=[],S=i.length;if(!v)return _;a&&(i=gt(i,se(a))),c?(g=Xo,m=!1):i.length>=o&&(g=xr,m=!1,i=new yn(i));t:for(;++h<v;){var C=r[h],b=a==null?C:a(C);if(C=c||C!==0?C:0,m&&b===b){for(var N=S;N--;)if(i[N]===b)continue t;_.push(C)}else g(i,b,c)||_.push(C)}return _}var en=yh(Le),Gl=yh(fa,!0);function dv(r,i){var a=!0;return en(r,function(c,h,g){return a=!!i(c,h,g),a}),a}function ns(r,i,a){for(var c=-1,h=r.length;++c<h;){var g=r[c],m=i(g);if(m!=null&&(v===n?m===m&&!ae(m):a(m,v)))var v=m,_=g}return _}function gv(r,i,a,c){var h=r.length;for(a=z(a),a<0&&(a=-a>h?0:h+a),c=c===n||c>h?h:z(c),c<0&&(c+=h),c=a>c?0:cf(c);a<c;)r[a++]=i;return r}function Kl(r,i){var a=[];return en(r,function(c,h,g){i(c,h,g)&&a.push(c)}),a}function Dt(r,i,a,c,h){var g=-1,m=r.length;for(a||(a=n0),h||(h=[]);++g<m;){var v=r[g];i>0&&a(v)?i>1?Dt(v,i-1,a,c,h):Je(h,v):c||(h[h.length]=v)}return h}var ha=vh(),zl=vh(!0);function Le(r,i){return r&&ha(r,i,Ct)}function fa(r,i){return r&&zl(r,i,Ct)}function rs(r,i){return Qe(i,function(a){return We(r[a])})}function wn(r,i){i=rn(i,r);for(var a=0,c=i.length;r!=null&&a<c;)r=r[ke(i[a++])];return a&&a==c?r:n}function jl(r,i,a){var c=i(r);return G(r)?c:Je(c,a(r))}function Ht(r){return r==null?r===n?Wp:Bp:pn&&pn in ct(r)?Xv(r):c0(r)}function da(r,i){return r>i}function pv(r,i){return r!=null&&at.call(r,i)}function mv(r,i){return r!=null&&i in ct(r)}function yv(r,i,a){return r>=Vt(i,a)&&r<St(i,a)}function ga(r,i,a){for(var c=a?Xo:Ui,h=r[0].length,g=r.length,m=g,v=T(g),_=1/0,S=[];m--;){var C=r[m];m&&i&&(C=gt(C,se(i))),_=Vt(C.length,_),v[m]=!a&&(i||h>=120&&C.length>=120)?new yn(m&&C):n}C=r[0];var b=-1,N=v[0];t:for(;++b<h&&S.length<_;){var M=C[b],V=i?i(M):M;if(M=a||M!==0?M:0,!(N?xr(N,V):c(S,V,a))){for(m=g;--m;){var Y=v[m];if(!(Y?xr(Y,V):c(r[m],V,a)))continue t}N&&N.push(V),S.push(M)}}return S}function vv(r,i,a,c){return Le(r,function(h,g,m){i(c,a(h),g,m)}),c}function Fr(r,i,a){i=rn(i,r),r=Mh(r,i);var c=r==null?r:r[ke(Ee(i))];return c==null?n:ie(c,r,a)}function Yl(r){return yt(r)&&Ht(r)==Un}function wv(r){return yt(r)&&Ht(r)==Rr}function _v(r){return yt(r)&&Ht(r)==Ar}function Ur(r,i,a,c,h){return r===i?!0:r==null||i==null||!yt(r)&&!yt(i)?r!==r&&i!==i:Ev(r,i,a,c,Ur,h)}function Ev(r,i,a,c,h,g){var m=G(r),v=G(i),_=m?Di:$t(r),S=v?Di:$t(i);_=_==Un?Pe:_,S=S==Un?Pe:S;var C=_==Pe,b=S==Pe,N=_==S;if(N&&on(r)){if(!on(i))return!1;m=!0,C=!1}if(N&&!C)return g||(g=new Re),m||Jn(r)?Rh(r,i,a,c,h,g):jv(r,i,_,a,c,h,g);if(!(a&P)){var M=C&&at.call(r,"__wrapped__"),V=b&&at.call(i,"__wrapped__");if(M||V){var Y=M?r.value():r,$=V?i.value():i;return g||(g=new Re),h(Y,$,a,c,g)}}return N?(g||(g=new Re),Yv(r,i,a,c,h,g)):!1}function Tv(r){return yt(r)&&$t(r)==Se}function pa(r,i,a,c){var h=a.length,g=h,m=!c;if(r==null)return!g;for(r=ct(r);h--;){var v=a[h];if(m&&v[2]?v[1]!==r[v[0]]:!(v[0]in r))return!1}for(;++h<g;){v=a[h];var _=v[0],S=r[_],C=v[1];if(m&&v[2]){if(S===n&&!(_ in r))return!1}else{var b=new Re;if(c)var N=c(S,C,_,r,i,b);if(!(N===n?Ur(C,S,P|et,c,b):N))return!1}}return!0}function Xl(r){if(!mt(r)||i0(r))return!1;var i=We(r)?Ty:fm;return i.test(En(r))}function Av(r){return yt(r)&&Ht(r)==Sr}function Iv(r){return yt(r)&&$t(r)==Ce}function Sv(r){return yt(r)&&_s(r.length)&&!!ft[Ht(r)]}function Ql(r){return typeof r=="function"?r:r==null?Zt:typeof r=="object"?G(r)?th(r[0],r[1]):Zl(r):_f(r)}function ma(r){if(!Br(r))return Ry(r);var i=[];for(var a in ct(r))at.call(r,a)&&a!="constructor"&&i.push(a);return i}function Cv(r){if(!mt(r))return u0(r);var i=Br(r),a=[];for(var c in r)c=="constructor"&&(i||!at.call(r,c))||a.push(c);return a}function ya(r,i){return r<i}function Jl(r,i){var a=-1,c=Qt(r)?T(r.length):[];return en(r,function(h,g,m){c[++a]=i(h,g,m)}),c}function Zl(r){var i=La(r);return i.length==1&&i[0][2]?Oh(i[0][0],i[0][1]):function(a){return a===r||pa(a,r,i)}}function th(r,i){return ka(r)&&Lh(i)?Oh(ke(r),i):function(a){var c=Ha(a,r);return c===n&&c===i?Ga(a,r):Ur(i,c,P|et)}}function is(r,i,a,c,h){r!==i&&ha(i,function(g,m){if(h||(h=new Re),mt(g))bv(r,i,m,a,is,c,h);else{var v=c?c(Pa(r,m),g,m+"",r,i,h):n;v===n&&(v=g),ca(r,m,v)}},Jt)}function bv(r,i,a,c,h,g,m){var v=Pa(r,a),_=Pa(i,a),S=m.get(_);if(S){ca(r,a,S);return}var C=g?g(v,_,a+"",r,i,m):n,b=C===n;if(b){var N=G(_),M=!N&&on(_),V=!N&&!M&&Jn(_);C=_,N||M||V?G(v)?C=v:vt(v)?C=Xt(v):M?(b=!1,C=fh(_,!0)):V?(b=!1,C=dh(_,!0)):C=[]:Wr(_)||Tn(_)?(C=v,Tn(v)?C=lf(v):(!mt(v)||We(v))&&(C=Dh(_))):b=!1}b&&(m.set(_,C),h(C,_,c,g,m),m.delete(_)),ca(r,a,C)}function eh(r,i){var a=r.length;if(!!a)return i+=i<0?a:0,qe(i,a)?r[i]:n}function nh(r,i,a){i.length?i=gt(i,function(g){return G(g)?function(m){return wn(m,g.length===1?g[0]:g)}:g}):i=[Zt];var c=-1;i=gt(i,se(U()));var h=Jl(r,function(g,m,v){var _=gt(i,function(S){return S(g)});return{criteria:_,index:++c,value:g}});return ty(h,function(g,m){return $v(g,m,a)})}function Rv(r,i){return rh(r,i,function(a,c){return Ga(r,c)})}function rh(r,i,a){for(var c=-1,h=i.length,g={};++c<h;){var m=i[c],v=wn(r,m);a(v,m)&&Vr(g,rn(m,r),v)}return g}function xv(r){return function(i){return wn(i,r)}}function va(r,i,a,c){var h=c?Zm:Bn,g=-1,m=i.length,v=r;for(r===i&&(i=Xt(i)),a&&(v=gt(r,se(a)));++g<m;)for(var _=0,S=i[g],C=a?a(S):S;(_=h(v,C,_,c))>-1;)v!==r&&ji.call(v,_,1),ji.call(r,_,1);return r}function ih(r,i){for(var a=r?i.length:0,c=a-1;a--;){var h=i[a];if(a==c||h!==g){var g=h;qe(h)?ji.call(r,h,1):Ta(r,h)}}return r}function wa(r,i){return r+Qi(Ul()*(i-r+1))}function Nv(r,i,a,c){for(var h=-1,g=St(Xi((i-r)/(a||1)),0),m=T(g);g--;)m[c?g:++h]=r,r+=a;return m}function _a(r,i){var a="";if(!r||i<1||i>Xe)return a;do i%2&&(a+=r),i=Qi(i/2),i&&(r+=r);while(i);return a}function X(r,i){return Fa(kh(r,i,Zt),r+"")}function Dv(r){return Bl(Zn(r))}function Lv(r,i){var a=Zn(r);return gs(a,vn(i,0,a.length))}function Vr(r,i,a,c){if(!mt(r))return r;i=rn(i,r);for(var h=-1,g=i.length,m=g-1,v=r;v!=null&&++h<g;){var _=ke(i[h]),S=a;if(_==="__proto__"||_==="constructor"||_==="prototype")return r;if(h!=m){var C=v[_];S=c?c(C,_,v):n,S===n&&(S=mt(C)?C:qe(i[h+1])?[]:{})}Mr(v,_,S),v=v[_]}return r}var sh=Ji?function(r,i){return Ji.set(r,i),r}:Zt,Ov=Yi?function(r,i){return Yi(r,"toString",{configurable:!0,enumerable:!1,value:za(i),writable:!0})}:Zt;function kv(r){return gs(Zn(r))}function _e(r,i,a){var c=-1,h=r.length;i<0&&(i=-i>h?0:h+i),a=a>h?h:a,a<0&&(a+=h),h=i>a?0:a-i>>>0,i>>>=0;for(var g=T(h);++c<h;)g[c]=r[c+i];return g}function Mv(r,i){var a;return en(r,function(c,h,g){return a=i(c,h,g),!a}),!!a}function ss(r,i,a){var c=0,h=r==null?c:r.length;if(typeof i=="number"&&i===i&&h<=Fp){for(;c<h;){var g=c+h>>>1,m=r[g];m!==null&&!ae(m)&&(a?m<=i:m<i)?c=g+1:h=g}return h}return Ea(r,i,Zt,a)}function Ea(r,i,a,c){var h=0,g=r==null?0:r.length;if(g===0)return 0;i=a(i);for(var m=i!==i,v=i===null,_=ae(i),S=i===n;h<g;){var C=Qi((h+g)/2),b=a(r[C]),N=b!==n,M=b===null,V=b===b,Y=ae(b);if(m)var $=c||V;else S?$=V&&(c||N):v?$=V&&N&&(c||!M):_?$=V&&N&&!M&&(c||!Y):M||Y?$=!1:$=c?b<=i:b<i;$?h=C+1:g=C}return Vt(g,Pp)}function oh(r,i){for(var a=-1,c=r.length,h=0,g=[];++a<c;){var m=r[a],v=i?i(m):m;if(!a||!xe(v,_)){var _=v;g[h++]=m===0?0:m}}return g}function ah(r){return typeof r=="number"?r:ae(r)?Ni:+r}function oe(r){if(typeof r=="string")return r;if(G(r))return gt(r,oe)+"";if(ae(r))return Vl?Vl.call(r):"";var i=r+"";return i=="0"&&1/r==-dn?"-0":i}function nn(r,i,a){var c=-1,h=Ui,g=r.length,m=!0,v=[],_=v;if(a)m=!1,h=Xo;else if(g>=o){var S=i?null:Kv(r);if(S)return $i(S);m=!1,h=xr,_=new yn}else _=i?[]:v;t:for(;++c<g;){var C=r[c],b=i?i(C):C;if(C=a||C!==0?C:0,m&&b===b){for(var N=_.length;N--;)if(_[N]===b)continue t;i&&_.push(b),v.push(C)}else h(_,b,a)||(_!==v&&_.push(b),v.push(C))}return v}function Ta(r,i){return i=rn(i,r),r=Mh(r,i),r==null||delete r[ke(Ee(i))]}function uh(r,i,a,c){return Vr(r,i,a(wn(r,i)),c)}function os(r,i,a,c){for(var h=r.length,g=c?h:-1;(c?g--:++g<h)&&i(r[g],g,r););return a?_e(r,c?0:g,c?g+1:h):_e(r,c?g+1:0,c?h:g)}function ch(r,i){var a=r;return a instanceof J&&(a=a.value()),Qo(i,function(c,h){return h.func.apply(h.thisArg,Je([c],h.args))},a)}function Aa(r,i,a){var c=r.length;if(c<2)return c?nn(r[0]):[];for(var h=-1,g=T(c);++h<c;)for(var m=r[h],v=-1;++v<c;)v!=h&&(g[h]=Pr(g[h]||m,r[v],i,a));return nn(Dt(g,1),i,a)}function lh(r,i,a){for(var c=-1,h=r.length,g=i.length,m={};++c<h;){var v=c<g?i[c]:n;a(m,r[c],v)}return m}function Ia(r){return vt(r)?r:[]}function Sa(r){return typeof r=="function"?r:Zt}function rn(r,i){return G(r)?r:ka(r,i)?[r]:Vh(st(r))}var Pv=X;function sn(r,i,a){var c=r.length;return a=a===n?c:a,!i&&a>=c?r:_e(r,i,a)}var hh=Ay||function(r){return Nt.clearTimeout(r)};function fh(r,i){if(i)return r.slice();var a=r.length,c=Ol?Ol(a):new r.constructor(a);return r.copy(c),c}function Ca(r){var i=new r.constructor(r.byteLength);return new Ki(i).set(new Ki(r)),i}function Fv(r,i){var a=i?Ca(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function Uv(r){var i=new r.constructor(r.source,Yc.exec(r));return i.lastIndex=r.lastIndex,i}function Vv(r){return kr?ct(kr.call(r)):{}}function dh(r,i){var a=i?Ca(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function gh(r,i){if(r!==i){var a=r!==n,c=r===null,h=r===r,g=ae(r),m=i!==n,v=i===null,_=i===i,S=ae(i);if(!v&&!S&&!g&&r>i||g&&m&&_&&!v&&!S||c&&m&&_||!a&&_||!h)return 1;if(!c&&!g&&!S&&r<i||S&&a&&h&&!c&&!g||v&&a&&h||!m&&h||!_)return-1}return 0}function $v(r,i,a){for(var c=-1,h=r.criteria,g=i.criteria,m=h.length,v=a.length;++c<m;){var _=gh(h[c],g[c]);if(_){if(c>=v)return _;var S=a[c];return _*(S=="desc"?-1:1)}}return r.index-i.index}function ph(r,i,a,c){for(var h=-1,g=r.length,m=a.length,v=-1,_=i.length,S=St(g-m,0),C=T(_+S),b=!c;++v<_;)C[v]=i[v];for(;++h<m;)(b||h<g)&&(C[a[h]]=r[h]);for(;S--;)C[v++]=r[h++];return C}function mh(r,i,a,c){for(var h=-1,g=r.length,m=-1,v=a.length,_=-1,S=i.length,C=St(g-v,0),b=T(C+S),N=!c;++h<C;)b[h]=r[h];for(var M=h;++_<S;)b[M+_]=i[_];for(;++m<v;)(N||h<g)&&(b[M+a[m]]=r[h++]);return b}function Xt(r,i){var a=-1,c=r.length;for(i||(i=T(c));++a<c;)i[a]=r[a];return i}function Oe(r,i,a,c){var h=!a;a||(a={});for(var g=-1,m=i.length;++g<m;){var v=i[g],_=c?c(a[v],r[v],v,a,r):n;_===n&&(_=r[v]),h?Ve(a,v,_):Mr(a,v,_)}return a}function Bv(r,i){return Oe(r,Oa(r),i)}function qv(r,i){return Oe(r,xh(r),i)}function as(r,i){return function(a,c){var h=G(a)?zm:lv,g=i?i():{};return h(a,r,U(c,2),g)}}function Yn(r){return X(function(i,a){var c=-1,h=a.length,g=h>1?a[h-1]:n,m=h>2?a[2]:n;for(g=r.length>3&&typeof g=="function"?(h--,g):n,m&&Gt(a[0],a[1],m)&&(g=h<3?n:g,h=1),i=ct(i);++c<h;){var v=a[c];v&&r(i,v,c,g)}return i})}function yh(r,i){return function(a,c){if(a==null)return a;if(!Qt(a))return r(a,c);for(var h=a.length,g=i?h:-1,m=ct(a);(i?g--:++g<h)&&c(m[g],g,m)!==!1;);return a}}function vh(r){return function(i,a,c){for(var h=-1,g=ct(i),m=c(i),v=m.length;v--;){var _=m[r?v:++h];if(a(g[_],_,g)===!1)break}return i}}function Wv(r,i,a){var c=i&rt,h=$r(r);function g(){var m=this&&this!==Nt&&this instanceof g?h:r;return m.apply(c?a:this,arguments)}return g}function wh(r){return function(i){i=st(i);var a=qn(i)?be(i):n,c=a?a[0]:i.charAt(0),h=a?sn(a,1).join(""):i.slice(1);return c[r]()+h}}function Xn(r){return function(i){return Qo(vf(yf(i).replace(Om,"")),r,"")}}function $r(r){return function(){var i=arguments;switch(i.length){case 0:return new r;case 1:return new r(i[0]);case 2:return new r(i[0],i[1]);case 3:return new r(i[0],i[1],i[2]);case 4:return new r(i[0],i[1],i[2],i[3]);case 5:return new r(i[0],i[1],i[2],i[3],i[4]);case 6:return new r(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new r(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=jn(r.prototype),c=r.apply(a,i);return mt(c)?c:a}}function Hv(r,i,a){var c=$r(r);function h(){for(var g=arguments.length,m=T(g),v=g,_=Qn(h);v--;)m[v]=arguments[v];var S=g<3&&m[0]!==_&&m[g-1]!==_?[]:Ze(m,_);if(g-=S.length,g<a)return Ih(r,i,us,h.placeholder,n,m,S,n,n,a-g);var C=this&&this!==Nt&&this instanceof h?c:r;return ie(C,this,m)}return h}function _h(r){return function(i,a,c){var h=ct(i);if(!Qt(i)){var g=U(a,3);i=Ct(i),a=function(v){return g(h[v],v,h)}}var m=r(i,a,c);return m>-1?h[g?i[m]:m]:n}}function Eh(r){return Be(function(i){var a=i.length,c=a,h=ve.prototype.thru;for(r&&i.reverse();c--;){var g=i[c];if(typeof g!="function")throw new ye(l);if(h&&!m&&fs(g)=="wrapper")var m=new ve([],!0)}for(c=m?c:a;++c<a;){g=i[c];var v=fs(g),_=v=="wrapper"?Da(g):n;_&&Ma(_[0])&&_[1]==(ge|Ut|re|Er)&&!_[4].length&&_[9]==1?m=m[fs(_[0])].apply(m,_[3]):m=g.length==1&&Ma(g)?m[v]():m.thru(g)}return function(){var S=arguments,C=S[0];if(m&&S.length==1&&G(C))return m.plant(C).value();for(var b=0,N=a?i[b].apply(this,S):C;++b<a;)N=i[b].call(this,N);return N}})}function us(r,i,a,c,h,g,m,v,_,S){var C=i&ge,b=i&rt,N=i&xt,M=i&(Ut|de),V=i&Do,Y=N?n:$r(r);function $(){for(var Q=arguments.length,Z=T(Q),ue=Q;ue--;)Z[ue]=arguments[ue];if(M)var Kt=Qn($),ce=ny(Z,Kt);if(c&&(Z=ph(Z,c,h,M)),g&&(Z=mh(Z,g,m,M)),Q-=ce,M&&Q<S){var wt=Ze(Z,Kt);return Ih(r,i,us,$.placeholder,a,Z,wt,v,_,S-Q)}var Ne=b?a:this,Ge=N?Ne[r]:r;return Q=Z.length,v?Z=l0(Z,v):V&&Q>1&&Z.reverse(),C&&_<Q&&(Z.length=_),this&&this!==Nt&&this instanceof $&&(Ge=Y||$r(Ge)),Ge.apply(Ne,Z)}return $}function Th(r,i){return function(a,c){return vv(a,r,i(c),{})}}function cs(r,i){return function(a,c){var h;if(a===n&&c===n)return i;if(a!==n&&(h=a),c!==n){if(h===n)return c;typeof a=="string"||typeof c=="string"?(a=oe(a),c=oe(c)):(a=ah(a),c=ah(c)),h=r(a,c)}return h}}function ba(r){return Be(function(i){return i=gt(i,se(U())),X(function(a){var c=this;return r(i,function(h){return ie(h,c,a)})})})}function ls(r,i){i=i===n?" ":oe(i);var a=i.length;if(a<2)return a?_a(i,r):i;var c=_a(i,Xi(r/Wn(i)));return qn(i)?sn(be(c),0,r).join(""):c.slice(0,r)}function Gv(r,i,a,c){var h=i&rt,g=$r(r);function m(){for(var v=-1,_=arguments.length,S=-1,C=c.length,b=T(C+_),N=this&&this!==Nt&&this instanceof m?g:r;++S<C;)b[S]=c[S];for(;_--;)b[S++]=arguments[++v];return ie(N,h?a:this,b)}return m}function Ah(r){return function(i,a,c){return c&&typeof c!="number"&&Gt(i,a,c)&&(a=c=n),i=He(i),a===n?(a=i,i=0):a=He(a),c=c===n?i<a?1:-1:He(c),Nv(i,a,c,r)}}function hs(r){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=Te(i),a=Te(a)),r(i,a)}}function Ih(r,i,a,c,h,g,m,v,_,S){var C=i&Ut,b=C?m:n,N=C?n:m,M=C?g:n,V=C?n:g;i|=C?re:Ye,i&=~(C?Ye:re),i&fe||(i&=~(rt|xt));var Y=[r,i,h,M,b,V,N,v,_,S],$=a.apply(n,Y);return Ma(r)&&Ph($,Y),$.placeholder=c,Fh($,r,i)}function Ra(r){var i=It[r];return function(a,c){if(a=Te(a),c=c==null?0:Vt(z(c),292),c&&Fl(a)){var h=(st(a)+"e").split("e"),g=i(h[0]+"e"+(+h[1]+c));return h=(st(g)+"e").split("e"),+(h[0]+"e"+(+h[1]-c))}return i(a)}}var Kv=Kn&&1/$i(new Kn([,-0]))[1]==dn?function(r){return new Kn(r)}:Xa;function Sh(r){return function(i){var a=$t(i);return a==Se?ia(i):a==Ce?cy(i):ey(i,r(i))}}function $e(r,i,a,c,h,g,m,v){var _=i&xt;if(!_&&typeof r!="function")throw new ye(l);var S=c?c.length:0;if(S||(i&=~(re|Ye),c=h=n),m=m===n?m:St(z(m),0),v=v===n?v:z(v),S-=h?h.length:0,i&Ye){var C=c,b=h;c=h=n}var N=_?n:Da(r),M=[r,i,a,c,h,C,b,g,m,v];if(N&&a0(M,N),r=M[0],i=M[1],a=M[2],c=M[3],h=M[4],v=M[9]=M[9]===n?_?0:r.length:St(M[9]-S,0),!v&&i&(Ut|de)&&(i&=~(Ut|de)),!i||i==rt)var V=Wv(r,i,a);else i==Ut||i==de?V=Hv(r,i,v):(i==re||i==(rt|re))&&!h.length?V=Gv(r,i,a,c):V=us.apply(n,M);var Y=N?sh:Ph;return Fh(Y(V,M),r,i)}function Ch(r,i,a,c){return r===n||xe(r,Gn[a])&&!at.call(c,a)?i:r}function bh(r,i,a,c,h,g){return mt(r)&&mt(i)&&(g.set(i,r),is(r,i,n,bh,g),g.delete(i)),r}function zv(r){return Wr(r)?n:r}function Rh(r,i,a,c,h,g){var m=a&P,v=r.length,_=i.length;if(v!=_&&!(m&&_>v))return!1;var S=g.get(r),C=g.get(i);if(S&&C)return S==i&&C==r;var b=-1,N=!0,M=a&et?new yn:n;for(g.set(r,i),g.set(i,r);++b<v;){var V=r[b],Y=i[b];if(c)var $=m?c(Y,V,b,i,r,g):c(V,Y,b,r,i,g);if($!==n){if($)continue;N=!1;break}if(M){if(!Jo(i,function(Q,Z){if(!xr(M,Z)&&(V===Q||h(V,Q,a,c,g)))return M.push(Z)})){N=!1;break}}else if(!(V===Y||h(V,Y,a,c,g))){N=!1;break}}return g.delete(r),g.delete(i),N}function jv(r,i,a,c,h,g,m){switch(a){case Vn:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset)return!1;r=r.buffer,i=i.buffer;case Rr:return!(r.byteLength!=i.byteLength||!g(new Ki(r),new Ki(i)));case Tr:case Ar:case Ir:return xe(+r,+i);case Li:return r.name==i.name&&r.message==i.message;case Sr:case Cr:return r==i+"";case Se:var v=ia;case Ce:var _=c&P;if(v||(v=$i),r.size!=i.size&&!_)return!1;var S=m.get(r);if(S)return S==i;c|=et,m.set(r,i);var C=Rh(v(r),v(i),c,h,g,m);return m.delete(r),C;case ki:if(kr)return kr.call(r)==kr.call(i)}return!1}function Yv(r,i,a,c,h,g){var m=a&P,v=xa(r),_=v.length,S=xa(i),C=S.length;if(_!=C&&!m)return!1;for(var b=_;b--;){var N=v[b];if(!(m?N in i:at.call(i,N)))return!1}var M=g.get(r),V=g.get(i);if(M&&V)return M==i&&V==r;var Y=!0;g.set(r,i),g.set(i,r);for(var $=m;++b<_;){N=v[b];var Q=r[N],Z=i[N];if(c)var ue=m?c(Z,Q,N,i,r,g):c(Q,Z,N,r,i,g);if(!(ue===n?Q===Z||h(Q,Z,a,c,g):ue)){Y=!1;break}$||($=N=="constructor")}if(Y&&!$){var Kt=r.constructor,ce=i.constructor;Kt!=ce&&"constructor"in r&&"constructor"in i&&!(typeof Kt=="function"&&Kt instanceof Kt&&typeof ce=="function"&&ce instanceof ce)&&(Y=!1)}return g.delete(r),g.delete(i),Y}function Be(r){return Fa(kh(r,n,Wh),r+"")}function xa(r){return jl(r,Ct,Oa)}function Na(r){return jl(r,Jt,xh)}var Da=Ji?function(r){return Ji.get(r)}:Xa;function fs(r){for(var i=r.name+"",a=zn[i],c=at.call(zn,i)?a.length:0;c--;){var h=a[c],g=h.func;if(g==null||g==r)return h.name}return i}function Qn(r){var i=at.call(d,"placeholder")?d:r;return i.placeholder}function U(){var r=d.iteratee||ja;return r=r===ja?Ql:r,arguments.length?r(arguments[0],arguments[1]):r}function ds(r,i){var a=r.__data__;return r0(i)?a[typeof i=="string"?"string":"hash"]:a.map}function La(r){for(var i=Ct(r),a=i.length;a--;){var c=i[a],h=r[c];i[a]=[c,h,Lh(h)]}return i}function _n(r,i){var a=oy(r,i);return Xl(a)?a:n}function Xv(r){var i=at.call(r,pn),a=r[pn];try{r[pn]=n;var c=!0}catch{}var h=Hi.call(r);return c&&(i?r[pn]=a:delete r[pn]),h}var Oa=oa?function(r){return r==null?[]:(r=ct(r),Qe(oa(r),function(i){return Ml.call(r,i)}))}:Qa,xh=oa?function(r){for(var i=[];r;)Je(i,Oa(r)),r=zi(r);return i}:Qa,$t=Ht;(aa&&$t(new aa(new ArrayBuffer(1)))!=Vn||Dr&&$t(new Dr)!=Se||ua&&$t(ua.resolve())!=Gc||Kn&&$t(new Kn)!=Ce||Lr&&$t(new Lr)!=br)&&($t=function(r){var i=Ht(r),a=i==Pe?r.constructor:n,c=a?En(a):"";if(c)switch(c){case Ly:return Vn;case Oy:return Se;case ky:return Gc;case My:return Ce;case Py:return br}return i});function Qv(r,i,a){for(var c=-1,h=a.length;++c<h;){var g=a[c],m=g.size;switch(g.type){case"drop":r+=m;break;case"dropRight":i-=m;break;case"take":i=Vt(i,r+m);break;case"takeRight":r=St(r,i-m);break}}return{start:r,end:i}}function Jv(r){var i=r.match(im);return i?i[1].split(sm):[]}function Nh(r,i,a){i=rn(i,r);for(var c=-1,h=i.length,g=!1;++c<h;){var m=ke(i[c]);if(!(g=r!=null&&a(r,m)))break;r=r[m]}return g||++c!=h?g:(h=r==null?0:r.length,!!h&&_s(h)&&qe(m,h)&&(G(r)||Tn(r)))}function Zv(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&at.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function Dh(r){return typeof r.constructor=="function"&&!Br(r)?jn(zi(r)):{}}function t0(r,i,a){var c=r.constructor;switch(i){case Rr:return Ca(r);case Tr:case Ar:return new c(+r);case Vn:return Fv(r,a);case Lo:case Oo:case ko:case Mo:case Po:case Fo:case Uo:case Vo:case $o:return dh(r,a);case Se:return new c;case Ir:case Cr:return new c(r);case Sr:return Uv(r);case Ce:return new c;case ki:return Vv(r)}}function e0(r,i){var a=i.length;if(!a)return r;var c=a-1;return i[c]=(a>1?"& ":"")+i[c],i=i.join(a>2?", ":" "),r.replace(rm,`{
/* [wrapped with `+i+`] */
`)}function n0(r){return G(r)||Tn(r)||!!(Pl&&r&&r[Pl])}function qe(r,i){var a=typeof r;return i=i==null?Xe:i,!!i&&(a=="number"||a!="symbol"&&gm.test(r))&&r>-1&&r%1==0&&r<i}function Gt(r,i,a){if(!mt(a))return!1;var c=typeof i;return(c=="number"?Qt(a)&&qe(i,a.length):c=="string"&&i in a)?xe(a[i],r):!1}function ka(r,i){if(G(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||ae(r)?!0:Zp.test(r)||!Jp.test(r)||i!=null&&r in ct(i)}function r0(r){var i=typeof r;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?r!=="__proto__":r===null}function Ma(r){var i=fs(r),a=d[i];if(typeof a!="function"||!(i in J.prototype))return!1;if(r===a)return!0;var c=Da(a);return!!c&&r===c[0]}function i0(r){return!!Ll&&Ll in r}var s0=qi?We:Ja;function Br(r){var i=r&&r.constructor,a=typeof i=="function"&&i.prototype||Gn;return r===a}function Lh(r){return r===r&&!mt(r)}function Oh(r,i){return function(a){return a==null?!1:a[r]===i&&(i!==n||r in ct(a))}}function o0(r){var i=vs(r,function(c){return a.size===y&&a.clear(),c}),a=i.cache;return i}function a0(r,i){var a=r[1],c=i[1],h=a|c,g=h<(rt|xt|ge),m=c==ge&&a==Ut||c==ge&&a==Er&&r[7].length<=i[8]||c==(ge|Er)&&i[7].length<=i[8]&&a==Ut;if(!(g||m))return r;c&rt&&(r[2]=i[2],h|=a&rt?0:fe);var v=i[3];if(v){var _=r[3];r[3]=_?ph(_,v,i[4]):v,r[4]=_?Ze(r[3],E):i[4]}return v=i[5],v&&(_=r[5],r[5]=_?mh(_,v,i[6]):v,r[6]=_?Ze(r[5],E):i[6]),v=i[7],v&&(r[7]=v),c&ge&&(r[8]=r[8]==null?i[8]:Vt(r[8],i[8])),r[9]==null&&(r[9]=i[9]),r[0]=i[0],r[1]=h,r}function u0(r){var i=[];if(r!=null)for(var a in ct(r))i.push(a);return i}function c0(r){return Hi.call(r)}function kh(r,i,a){return i=St(i===n?r.length-1:i,0),function(){for(var c=arguments,h=-1,g=St(c.length-i,0),m=T(g);++h<g;)m[h]=c[i+h];h=-1;for(var v=T(i+1);++h<i;)v[h]=c[h];return v[i]=a(m),ie(r,this,v)}}function Mh(r,i){return i.length<2?r:wn(r,_e(i,0,-1))}function l0(r,i){for(var a=r.length,c=Vt(i.length,a),h=Xt(r);c--;){var g=i[c];r[c]=qe(g,a)?h[g]:n}return r}function Pa(r,i){if(!(i==="constructor"&&typeof r[i]=="function")&&i!="__proto__")return r[i]}var Ph=Uh(sh),qr=Sy||function(r,i){return Nt.setTimeout(r,i)},Fa=Uh(Ov);function Fh(r,i,a){var c=i+"";return Fa(r,e0(c,h0(Jv(c),a)))}function Uh(r){var i=0,a=0;return function(){var c=xy(),h=Lp-(c-a);if(a=c,h>0){if(++i>=Dp)return arguments[0]}else i=0;return r.apply(n,arguments)}}function gs(r,i){var a=-1,c=r.length,h=c-1;for(i=i===n?c:i;++a<i;){var g=wa(a,h),m=r[g];r[g]=r[a],r[a]=m}return r.length=i,r}var Vh=o0(function(r){var i=[];return r.charCodeAt(0)===46&&i.push(""),r.replace(tm,function(a,c,h,g){i.push(h?g.replace(um,"$1"):c||a)}),i});function ke(r){if(typeof r=="string"||ae(r))return r;var i=r+"";return i=="0"&&1/r==-dn?"-0":i}function En(r){if(r!=null){try{return Wi.call(r)}catch{}try{return r+""}catch{}}return""}function h0(r,i){return me(Up,function(a){var c="_."+a[0];i&a[1]&&!Ui(r,c)&&r.push(c)}),r.sort()}function $h(r){if(r instanceof J)return r.clone();var i=new ve(r.__wrapped__,r.__chain__);return i.__actions__=Xt(r.__actions__),i.__index__=r.__index__,i.__values__=r.__values__,i}function f0(r,i,a){(a?Gt(r,i,a):i===n)?i=1:i=St(z(i),0);var c=r==null?0:r.length;if(!c||i<1)return[];for(var h=0,g=0,m=T(Xi(c/i));h<c;)m[g++]=_e(r,h,h+=i);return m}function d0(r){for(var i=-1,a=r==null?0:r.length,c=0,h=[];++i<a;){var g=r[i];g&&(h[c++]=g)}return h}function g0(){var r=arguments.length;if(!r)return[];for(var i=T(r-1),a=arguments[0],c=r;c--;)i[c-1]=arguments[c];return Je(G(a)?Xt(a):[a],Dt(i,1))}var p0=X(function(r,i){return vt(r)?Pr(r,Dt(i,1,vt,!0)):[]}),m0=X(function(r,i){var a=Ee(i);return vt(a)&&(a=n),vt(r)?Pr(r,Dt(i,1,vt,!0),U(a,2)):[]}),y0=X(function(r,i){var a=Ee(i);return vt(a)&&(a=n),vt(r)?Pr(r,Dt(i,1,vt,!0),n,a):[]});function v0(r,i,a){var c=r==null?0:r.length;return c?(i=a||i===n?1:z(i),_e(r,i<0?0:i,c)):[]}function w0(r,i,a){var c=r==null?0:r.length;return c?(i=a||i===n?1:z(i),i=c-i,_e(r,0,i<0?0:i)):[]}function _0(r,i){return r&&r.length?os(r,U(i,3),!0,!0):[]}function E0(r,i){return r&&r.length?os(r,U(i,3),!0):[]}function T0(r,i,a,c){var h=r==null?0:r.length;return h?(a&&typeof a!="number"&&Gt(r,i,a)&&(a=0,c=h),gv(r,i,a,c)):[]}function Bh(r,i,a){var c=r==null?0:r.length;if(!c)return-1;var h=a==null?0:z(a);return h<0&&(h=St(c+h,0)),Vi(r,U(i,3),h)}function qh(r,i,a){var c=r==null?0:r.length;if(!c)return-1;var h=c-1;return a!==n&&(h=z(a),h=a<0?St(c+h,0):Vt(h,c-1)),Vi(r,U(i,3),h,!0)}function Wh(r){var i=r==null?0:r.length;return i?Dt(r,1):[]}function A0(r){var i=r==null?0:r.length;return i?Dt(r,dn):[]}function I0(r,i){var a=r==null?0:r.length;return a?(i=i===n?1:z(i),Dt(r,i)):[]}function S0(r){for(var i=-1,a=r==null?0:r.length,c={};++i<a;){var h=r[i];c[h[0]]=h[1]}return c}function Hh(r){return r&&r.length?r[0]:n}function C0(r,i,a){var c=r==null?0:r.length;if(!c)return-1;var h=a==null?0:z(a);return h<0&&(h=St(c+h,0)),Bn(r,i,h)}function b0(r){var i=r==null?0:r.length;return i?_e(r,0,-1):[]}var R0=X(function(r){var i=gt(r,Ia);return i.length&&i[0]===r[0]?ga(i):[]}),x0=X(function(r){var i=Ee(r),a=gt(r,Ia);return i===Ee(a)?i=n:a.pop(),a.length&&a[0]===r[0]?ga(a,U(i,2)):[]}),N0=X(function(r){var i=Ee(r),a=gt(r,Ia);return i=typeof i=="function"?i:n,i&&a.pop(),a.length&&a[0]===r[0]?ga(a,n,i):[]});function D0(r,i){return r==null?"":by.call(r,i)}function Ee(r){var i=r==null?0:r.length;return i?r[i-1]:n}function L0(r,i,a){var c=r==null?0:r.length;if(!c)return-1;var h=c;return a!==n&&(h=z(a),h=h<0?St(c+h,0):Vt(h,c-1)),i===i?hy(r,i,h):Vi(r,Il,h,!0)}function O0(r,i){return r&&r.length?eh(r,z(i)):n}var k0=X(Gh);function Gh(r,i){return r&&r.length&&i&&i.length?va(r,i):r}function M0(r,i,a){return r&&r.length&&i&&i.length?va(r,i,U(a,2)):r}function P0(r,i,a){return r&&r.length&&i&&i.length?va(r,i,n,a):r}var F0=Be(function(r,i){var a=r==null?0:r.length,c=la(r,i);return ih(r,gt(i,function(h){return qe(h,a)?+h:h}).sort(gh)),c});function U0(r,i){var a=[];if(!(r&&r.length))return a;var c=-1,h=[],g=r.length;for(i=U(i,3);++c<g;){var m=r[c];i(m,c,r)&&(a.push(m),h.push(c))}return ih(r,h),a}function Ua(r){return r==null?r:Dy.call(r)}function V0(r,i,a){var c=r==null?0:r.length;return c?(a&&typeof a!="number"&&Gt(r,i,a)?(i=0,a=c):(i=i==null?0:z(i),a=a===n?c:z(a)),_e(r,i,a)):[]}function $0(r,i){return ss(r,i)}function B0(r,i,a){return Ea(r,i,U(a,2))}function q0(r,i){var a=r==null?0:r.length;if(a){var c=ss(r,i);if(c<a&&xe(r[c],i))return c}return-1}function W0(r,i){return ss(r,i,!0)}function H0(r,i,a){return Ea(r,i,U(a,2),!0)}function G0(r,i){var a=r==null?0:r.length;if(a){var c=ss(r,i,!0)-1;if(xe(r[c],i))return c}return-1}function K0(r){return r&&r.length?oh(r):[]}function z0(r,i){return r&&r.length?oh(r,U(i,2)):[]}function j0(r){var i=r==null?0:r.length;return i?_e(r,1,i):[]}function Y0(r,i,a){return r&&r.length?(i=a||i===n?1:z(i),_e(r,0,i<0?0:i)):[]}function X0(r,i,a){var c=r==null?0:r.length;return c?(i=a||i===n?1:z(i),i=c-i,_e(r,i<0?0:i,c)):[]}function Q0(r,i){return r&&r.length?os(r,U(i,3),!1,!0):[]}function J0(r,i){return r&&r.length?os(r,U(i,3)):[]}var Z0=X(function(r){return nn(Dt(r,1,vt,!0))}),tw=X(function(r){var i=Ee(r);return vt(i)&&(i=n),nn(Dt(r,1,vt,!0),U(i,2))}),ew=X(function(r){var i=Ee(r);return i=typeof i=="function"?i:n,nn(Dt(r,1,vt,!0),n,i)});function nw(r){return r&&r.length?nn(r):[]}function rw(r,i){return r&&r.length?nn(r,U(i,2)):[]}function iw(r,i){return i=typeof i=="function"?i:n,r&&r.length?nn(r,n,i):[]}function Va(r){if(!(r&&r.length))return[];var i=0;return r=Qe(r,function(a){if(vt(a))return i=St(a.length,i),!0}),na(i,function(a){return gt(r,Zo(a))})}function Kh(r,i){if(!(r&&r.length))return[];var a=Va(r);return i==null?a:gt(a,function(c){return ie(i,n,c)})}var sw=X(function(r,i){return vt(r)?Pr(r,i):[]}),ow=X(function(r){return Aa(Qe(r,vt))}),aw=X(function(r){var i=Ee(r);return vt(i)&&(i=n),Aa(Qe(r,vt),U(i,2))}),uw=X(function(r){var i=Ee(r);return i=typeof i=="function"?i:n,Aa(Qe(r,vt),n,i)}),cw=X(Va);function lw(r,i){return lh(r||[],i||[],Mr)}function hw(r,i){return lh(r||[],i||[],Vr)}var fw=X(function(r){var i=r.length,a=i>1?r[i-1]:n;return a=typeof a=="function"?(r.pop(),a):n,Kh(r,a)});function zh(r){var i=d(r);return i.__chain__=!0,i}function dw(r,i){return i(r),r}function ps(r,i){return i(r)}var gw=Be(function(r){var i=r.length,a=i?r[0]:0,c=this.__wrapped__,h=function(g){return la(g,r)};return i>1||this.__actions__.length||!(c instanceof J)||!qe(a)?this.thru(h):(c=c.slice(a,+a+(i?1:0)),c.__actions__.push({func:ps,args:[h],thisArg:n}),new ve(c,this.__chain__).thru(function(g){return i&&!g.length&&g.push(n),g}))});function pw(){return zh(this)}function mw(){return new ve(this.value(),this.__chain__)}function yw(){this.__values__===n&&(this.__values__=uf(this.value()));var r=this.__index__>=this.__values__.length,i=r?n:this.__values__[this.__index__++];return{done:r,value:i}}function vw(){return this}function ww(r){for(var i,a=this;a instanceof ts;){var c=$h(a);c.__index__=0,c.__values__=n,i?h.__wrapped__=c:i=c;var h=c;a=a.__wrapped__}return h.__wrapped__=r,i}function _w(){var r=this.__wrapped__;if(r instanceof J){var i=r;return this.__actions__.length&&(i=new J(this)),i=i.reverse(),i.__actions__.push({func:ps,args:[Ua],thisArg:n}),new ve(i,this.__chain__)}return this.thru(Ua)}function Ew(){return ch(this.__wrapped__,this.__actions__)}var Tw=as(function(r,i,a){at.call(r,a)?++r[a]:Ve(r,a,1)});function Aw(r,i,a){var c=G(r)?Tl:dv;return a&&Gt(r,i,a)&&(i=n),c(r,U(i,3))}function Iw(r,i){var a=G(r)?Qe:Kl;return a(r,U(i,3))}var Sw=_h(Bh),Cw=_h(qh);function bw(r,i){return Dt(ms(r,i),1)}function Rw(r,i){return Dt(ms(r,i),dn)}function xw(r,i,a){return a=a===n?1:z(a),Dt(ms(r,i),a)}function jh(r,i){var a=G(r)?me:en;return a(r,U(i,3))}function Yh(r,i){var a=G(r)?jm:Gl;return a(r,U(i,3))}var Nw=as(function(r,i,a){at.call(r,a)?r[a].push(i):Ve(r,a,[i])});function Dw(r,i,a,c){r=Qt(r)?r:Zn(r),a=a&&!c?z(a):0;var h=r.length;return a<0&&(a=St(h+a,0)),Es(r)?a<=h&&r.indexOf(i,a)>-1:!!h&&Bn(r,i,a)>-1}var Lw=X(function(r,i,a){var c=-1,h=typeof i=="function",g=Qt(r)?T(r.length):[];return en(r,function(m){g[++c]=h?ie(i,m,a):Fr(m,i,a)}),g}),Ow=as(function(r,i,a){Ve(r,a,i)});function ms(r,i){var a=G(r)?gt:Jl;return a(r,U(i,3))}function kw(r,i,a,c){return r==null?[]:(G(i)||(i=i==null?[]:[i]),a=c?n:a,G(a)||(a=a==null?[]:[a]),nh(r,i,a))}var Mw=as(function(r,i,a){r[a?0:1].push(i)},function(){return[[],[]]});function Pw(r,i,a){var c=G(r)?Qo:Cl,h=arguments.length<3;return c(r,U(i,4),a,h,en)}function Fw(r,i,a){var c=G(r)?Ym:Cl,h=arguments.length<3;return c(r,U(i,4),a,h,Gl)}function Uw(r,i){var a=G(r)?Qe:Kl;return a(r,ws(U(i,3)))}function Vw(r){var i=G(r)?Bl:Dv;return i(r)}function $w(r,i,a){(a?Gt(r,i,a):i===n)?i=1:i=z(i);var c=G(r)?uv:Lv;return c(r,i)}function Bw(r){var i=G(r)?cv:kv;return i(r)}function qw(r){if(r==null)return 0;if(Qt(r))return Es(r)?Wn(r):r.length;var i=$t(r);return i==Se||i==Ce?r.size:ma(r).length}function Ww(r,i,a){var c=G(r)?Jo:Mv;return a&&Gt(r,i,a)&&(i=n),c(r,U(i,3))}var Hw=X(function(r,i){if(r==null)return[];var a=i.length;return a>1&&Gt(r,i[0],i[1])?i=[]:a>2&&Gt(i[0],i[1],i[2])&&(i=[i[0]]),nh(r,Dt(i,1),[])}),ys=Iy||function(){return Nt.Date.now()};function Gw(r,i){if(typeof i!="function")throw new ye(l);return r=z(r),function(){if(--r<1)return i.apply(this,arguments)}}function Xh(r,i,a){return i=a?n:i,i=r&&i==null?r.length:i,$e(r,ge,n,n,n,n,i)}function Qh(r,i){var a;if(typeof i!="function")throw new ye(l);return r=z(r),function(){return--r>0&&(a=i.apply(this,arguments)),r<=1&&(i=n),a}}var $a=X(function(r,i,a){var c=rt;if(a.length){var h=Ze(a,Qn($a));c|=re}return $e(r,c,i,a,h)}),Jh=X(function(r,i,a){var c=rt|xt;if(a.length){var h=Ze(a,Qn(Jh));c|=re}return $e(i,c,r,a,h)});function Zh(r,i,a){i=a?n:i;var c=$e(r,Ut,n,n,n,n,n,i);return c.placeholder=Zh.placeholder,c}function tf(r,i,a){i=a?n:i;var c=$e(r,de,n,n,n,n,n,i);return c.placeholder=tf.placeholder,c}function ef(r,i,a){var c,h,g,m,v,_,S=0,C=!1,b=!1,N=!0;if(typeof r!="function")throw new ye(l);i=Te(i)||0,mt(a)&&(C=!!a.leading,b="maxWait"in a,g=b?St(Te(a.maxWait)||0,i):g,N="trailing"in a?!!a.trailing:N);function M(wt){var Ne=c,Ge=h;return c=h=n,S=wt,m=r.apply(Ge,Ne),m}function V(wt){return S=wt,v=qr(Q,i),C?M(wt):m}function Y(wt){var Ne=wt-_,Ge=wt-S,Ef=i-Ne;return b?Vt(Ef,g-Ge):Ef}function $(wt){var Ne=wt-_,Ge=wt-S;return _===n||Ne>=i||Ne<0||b&&Ge>=g}function Q(){var wt=ys();if($(wt))return Z(wt);v=qr(Q,Y(wt))}function Z(wt){return v=n,N&&c?M(wt):(c=h=n,m)}function ue(){v!==n&&hh(v),S=0,c=_=h=v=n}function Kt(){return v===n?m:Z(ys())}function ce(){var wt=ys(),Ne=$(wt);if(c=arguments,h=this,_=wt,Ne){if(v===n)return V(_);if(b)return hh(v),v=qr(Q,i),M(_)}return v===n&&(v=qr(Q,i)),m}return ce.cancel=ue,ce.flush=Kt,ce}var Kw=X(function(r,i){return Hl(r,1,i)}),zw=X(function(r,i,a){return Hl(r,Te(i)||0,a)});function jw(r){return $e(r,Do)}function vs(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new ye(l);var a=function(){var c=arguments,h=i?i.apply(this,c):c[0],g=a.cache;if(g.has(h))return g.get(h);var m=r.apply(this,c);return a.cache=g.set(h,m)||g,m};return a.cache=new(vs.Cache||Ue),a}vs.Cache=Ue;function ws(r){if(typeof r!="function")throw new ye(l);return function(){var i=arguments;switch(i.length){case 0:return!r.call(this);case 1:return!r.call(this,i[0]);case 2:return!r.call(this,i[0],i[1]);case 3:return!r.call(this,i[0],i[1],i[2])}return!r.apply(this,i)}}function Yw(r){return Qh(2,r)}var Xw=Pv(function(r,i){i=i.length==1&&G(i[0])?gt(i[0],se(U())):gt(Dt(i,1),se(U()));var a=i.length;return X(function(c){for(var h=-1,g=Vt(c.length,a);++h<g;)c[h]=i[h].call(this,c[h]);return ie(r,this,c)})}),Ba=X(function(r,i){var a=Ze(i,Qn(Ba));return $e(r,re,n,i,a)}),nf=X(function(r,i){var a=Ze(i,Qn(nf));return $e(r,Ye,n,i,a)}),Qw=Be(function(r,i){return $e(r,Er,n,n,n,i)});function Jw(r,i){if(typeof r!="function")throw new ye(l);return i=i===n?i:z(i),X(r,i)}function Zw(r,i){if(typeof r!="function")throw new ye(l);return i=i==null?0:St(z(i),0),X(function(a){var c=a[i],h=sn(a,0,i);return c&&Je(h,c),ie(r,this,h)})}function t_(r,i,a){var c=!0,h=!0;if(typeof r!="function")throw new ye(l);return mt(a)&&(c="leading"in a?!!a.leading:c,h="trailing"in a?!!a.trailing:h),ef(r,i,{leading:c,maxWait:i,trailing:h})}function e_(r){return Xh(r,1)}function n_(r,i){return Ba(Sa(i),r)}function r_(){if(!arguments.length)return[];var r=arguments[0];return G(r)?r:[r]}function i_(r){return we(r,L)}function s_(r,i){return i=typeof i=="function"?i:n,we(r,L,i)}function o_(r){return we(r,I|L)}function a_(r,i){return i=typeof i=="function"?i:n,we(r,I|L,i)}function u_(r,i){return i==null||Wl(r,i,Ct(i))}function xe(r,i){return r===i||r!==r&&i!==i}var c_=hs(da),l_=hs(function(r,i){return r>=i}),Tn=Yl(function(){return arguments}())?Yl:function(r){return yt(r)&&at.call(r,"callee")&&!Ml.call(r,"callee")},G=T.isArray,h_=ml?se(ml):wv;function Qt(r){return r!=null&&_s(r.length)&&!We(r)}function vt(r){return yt(r)&&Qt(r)}function f_(r){return r===!0||r===!1||yt(r)&&Ht(r)==Tr}var on=Cy||Ja,d_=yl?se(yl):_v;function g_(r){return yt(r)&&r.nodeType===1&&!Wr(r)}function p_(r){if(r==null)return!0;if(Qt(r)&&(G(r)||typeof r=="string"||typeof r.splice=="function"||on(r)||Jn(r)||Tn(r)))return!r.length;var i=$t(r);if(i==Se||i==Ce)return!r.size;if(Br(r))return!ma(r).length;for(var a in r)if(at.call(r,a))return!1;return!0}function m_(r,i){return Ur(r,i)}function y_(r,i,a){a=typeof a=="function"?a:n;var c=a?a(r,i):n;return c===n?Ur(r,i,n,a):!!c}function qa(r){if(!yt(r))return!1;var i=Ht(r);return i==Li||i==$p||typeof r.message=="string"&&typeof r.name=="string"&&!Wr(r)}function v_(r){return typeof r=="number"&&Fl(r)}function We(r){if(!mt(r))return!1;var i=Ht(r);return i==Oi||i==Hc||i==Vp||i==qp}function rf(r){return typeof r=="number"&&r==z(r)}function _s(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Xe}function mt(r){var i=typeof r;return r!=null&&(i=="object"||i=="function")}function yt(r){return r!=null&&typeof r=="object"}var sf=vl?se(vl):Tv;function w_(r,i){return r===i||pa(r,i,La(i))}function __(r,i,a){return a=typeof a=="function"?a:n,pa(r,i,La(i),a)}function E_(r){return of(r)&&r!=+r}function T_(r){if(s0(r))throw new W(u);return Xl(r)}function A_(r){return r===null}function I_(r){return r==null}function of(r){return typeof r=="number"||yt(r)&&Ht(r)==Ir}function Wr(r){if(!yt(r)||Ht(r)!=Pe)return!1;var i=zi(r);if(i===null)return!0;var a=at.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&Wi.call(a)==_y}var Wa=wl?se(wl):Av;function S_(r){return rf(r)&&r>=-Xe&&r<=Xe}var af=_l?se(_l):Iv;function Es(r){return typeof r=="string"||!G(r)&&yt(r)&&Ht(r)==Cr}function ae(r){return typeof r=="symbol"||yt(r)&&Ht(r)==ki}var Jn=El?se(El):Sv;function C_(r){return r===n}function b_(r){return yt(r)&&$t(r)==br}function R_(r){return yt(r)&&Ht(r)==Hp}var x_=hs(ya),N_=hs(function(r,i){return r<=i});function uf(r){if(!r)return[];if(Qt(r))return Es(r)?be(r):Xt(r);if(Nr&&r[Nr])return uy(r[Nr]());var i=$t(r),a=i==Se?ia:i==Ce?$i:Zn;return a(r)}function He(r){if(!r)return r===0?r:0;if(r=Te(r),r===dn||r===-dn){var i=r<0?-1:1;return i*Mp}return r===r?r:0}function z(r){var i=He(r),a=i%1;return i===i?a?i-a:i:0}function cf(r){return r?vn(z(r),0,De):0}function Te(r){if(typeof r=="number")return r;if(ae(r))return Ni;if(mt(r)){var i=typeof r.valueOf=="function"?r.valueOf():r;r=mt(i)?i+"":i}if(typeof r!="string")return r===0?r:+r;r=bl(r);var a=hm.test(r);return a||dm.test(r)?Gm(r.slice(2),a?2:8):lm.test(r)?Ni:+r}function lf(r){return Oe(r,Jt(r))}function D_(r){return r?vn(z(r),-Xe,Xe):r===0?r:0}function st(r){return r==null?"":oe(r)}var L_=Yn(function(r,i){if(Br(i)||Qt(i)){Oe(i,Ct(i),r);return}for(var a in i)at.call(i,a)&&Mr(r,a,i[a])}),hf=Yn(function(r,i){Oe(i,Jt(i),r)}),Ts=Yn(function(r,i,a,c){Oe(i,Jt(i),r,c)}),O_=Yn(function(r,i,a,c){Oe(i,Ct(i),r,c)}),k_=Be(la);function M_(r,i){var a=jn(r);return i==null?a:ql(a,i)}var P_=X(function(r,i){r=ct(r);var a=-1,c=i.length,h=c>2?i[2]:n;for(h&&Gt(i[0],i[1],h)&&(c=1);++a<c;)for(var g=i[a],m=Jt(g),v=-1,_=m.length;++v<_;){var S=m[v],C=r[S];(C===n||xe(C,Gn[S])&&!at.call(r,S))&&(r[S]=g[S])}return r}),F_=X(function(r){return r.push(n,bh),ie(ff,n,r)});function U_(r,i){return Al(r,U(i,3),Le)}function V_(r,i){return Al(r,U(i,3),fa)}function $_(r,i){return r==null?r:ha(r,U(i,3),Jt)}function B_(r,i){return r==null?r:zl(r,U(i,3),Jt)}function q_(r,i){return r&&Le(r,U(i,3))}function W_(r,i){return r&&fa(r,U(i,3))}function H_(r){return r==null?[]:rs(r,Ct(r))}function G_(r){return r==null?[]:rs(r,Jt(r))}function Ha(r,i,a){var c=r==null?n:wn(r,i);return c===n?a:c}function K_(r,i){return r!=null&&Nh(r,i,pv)}function Ga(r,i){return r!=null&&Nh(r,i,mv)}var z_=Th(function(r,i,a){i!=null&&typeof i.toString!="function"&&(i=Hi.call(i)),r[i]=a},za(Zt)),j_=Th(function(r,i,a){i!=null&&typeof i.toString!="function"&&(i=Hi.call(i)),at.call(r,i)?r[i].push(a):r[i]=[a]},U),Y_=X(Fr);function Ct(r){return Qt(r)?$l(r):ma(r)}function Jt(r){return Qt(r)?$l(r,!0):Cv(r)}function X_(r,i){var a={};return i=U(i,3),Le(r,function(c,h,g){Ve(a,i(c,h,g),c)}),a}function Q_(r,i){var a={};return i=U(i,3),Le(r,function(c,h,g){Ve(a,h,i(c,h,g))}),a}var J_=Yn(function(r,i,a){is(r,i,a)}),ff=Yn(function(r,i,a,c){is(r,i,a,c)}),Z_=Be(function(r,i){var a={};if(r==null)return a;var c=!1;i=gt(i,function(g){return g=rn(g,r),c||(c=g.length>1),g}),Oe(r,Na(r),a),c&&(a=we(a,I|R|L,zv));for(var h=i.length;h--;)Ta(a,i[h]);return a});function t1(r,i){return df(r,ws(U(i)))}var e1=Be(function(r,i){return r==null?{}:Rv(r,i)});function df(r,i){if(r==null)return{};var a=gt(Na(r),function(c){return[c]});return i=U(i),rh(r,a,function(c,h){return i(c,h[0])})}function n1(r,i,a){i=rn(i,r);var c=-1,h=i.length;for(h||(h=1,r=n);++c<h;){var g=r==null?n:r[ke(i[c])];g===n&&(c=h,g=a),r=We(g)?g.call(r):g}return r}function r1(r,i,a){return r==null?r:Vr(r,i,a)}function i1(r,i,a,c){return c=typeof c=="function"?c:n,r==null?r:Vr(r,i,a,c)}var gf=Sh(Ct),pf=Sh(Jt);function s1(r,i,a){var c=G(r),h=c||on(r)||Jn(r);if(i=U(i,4),a==null){var g=r&&r.constructor;h?a=c?new g:[]:mt(r)?a=We(g)?jn(zi(r)):{}:a={}}return(h?me:Le)(r,function(m,v,_){return i(a,m,v,_)}),a}function o1(r,i){return r==null?!0:Ta(r,i)}function a1(r,i,a){return r==null?r:uh(r,i,Sa(a))}function u1(r,i,a,c){return c=typeof c=="function"?c:n,r==null?r:uh(r,i,Sa(a),c)}function Zn(r){return r==null?[]:ra(r,Ct(r))}function c1(r){return r==null?[]:ra(r,Jt(r))}function l1(r,i,a){return a===n&&(a=i,i=n),a!==n&&(a=Te(a),a=a===a?a:0),i!==n&&(i=Te(i),i=i===i?i:0),vn(Te(r),i,a)}function h1(r,i,a){return i=He(i),a===n?(a=i,i=0):a=He(a),r=Te(r),yv(r,i,a)}function f1(r,i,a){if(a&&typeof a!="boolean"&&Gt(r,i,a)&&(i=a=n),a===n&&(typeof i=="boolean"?(a=i,i=n):typeof r=="boolean"&&(a=r,r=n)),r===n&&i===n?(r=0,i=1):(r=He(r),i===n?(i=r,r=0):i=He(i)),r>i){var c=r;r=i,i=c}if(a||r%1||i%1){var h=Ul();return Vt(r+h*(i-r+Hm("1e-"+((h+"").length-1))),i)}return wa(r,i)}var d1=Xn(function(r,i,a){return i=i.toLowerCase(),r+(a?mf(i):i)});function mf(r){return Ka(st(r).toLowerCase())}function yf(r){return r=st(r),r&&r.replace(pm,ry).replace(km,"")}function g1(r,i,a){r=st(r),i=oe(i);var c=r.length;a=a===n?c:vn(z(a),0,c);var h=a;return a-=i.length,a>=0&&r.slice(a,h)==i}function p1(r){return r=st(r),r&&Yp.test(r)?r.replace(zc,iy):r}function m1(r){return r=st(r),r&&em.test(r)?r.replace(Bo,"\\$&"):r}var y1=Xn(function(r,i,a){return r+(a?"-":"")+i.toLowerCase()}),v1=Xn(function(r,i,a){return r+(a?" ":"")+i.toLowerCase()}),w1=wh("toLowerCase");function _1(r,i,a){r=st(r),i=z(i);var c=i?Wn(r):0;if(!i||c>=i)return r;var h=(i-c)/2;return ls(Qi(h),a)+r+ls(Xi(h),a)}function E1(r,i,a){r=st(r),i=z(i);var c=i?Wn(r):0;return i&&c<i?r+ls(i-c,a):r}function T1(r,i,a){r=st(r),i=z(i);var c=i?Wn(r):0;return i&&c<i?ls(i-c,a)+r:r}function A1(r,i,a){return a||i==null?i=0:i&&(i=+i),Ny(st(r).replace(qo,""),i||0)}function I1(r,i,a){return(a?Gt(r,i,a):i===n)?i=1:i=z(i),_a(st(r),i)}function S1(){var r=arguments,i=st(r[0]);return r.length<3?i:i.replace(r[1],r[2])}var C1=Xn(function(r,i,a){return r+(a?"_":"")+i.toLowerCase()});function b1(r,i,a){return a&&typeof a!="number"&&Gt(r,i,a)&&(i=a=n),a=a===n?De:a>>>0,a?(r=st(r),r&&(typeof i=="string"||i!=null&&!Wa(i))&&(i=oe(i),!i&&qn(r))?sn(be(r),0,a):r.split(i,a)):[]}var R1=Xn(function(r,i,a){return r+(a?" ":"")+Ka(i)});function x1(r,i,a){return r=st(r),a=a==null?0:vn(z(a),0,r.length),i=oe(i),r.slice(a,a+i.length)==i}function N1(r,i,a){var c=d.templateSettings;a&&Gt(r,i,a)&&(i=n),r=st(r),i=Ts({},i,c,Ch);var h=Ts({},i.imports,c.imports,Ch),g=Ct(h),m=ra(h,g),v,_,S=0,C=i.interpolate||Mi,b="__p += '",N=sa((i.escape||Mi).source+"|"+C.source+"|"+(C===jc?cm:Mi).source+"|"+(i.evaluate||Mi).source+"|$","g"),M="//# sourceURL="+(at.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Vm+"]")+`
`;r.replace(N,function($,Q,Z,ue,Kt,ce){return Z||(Z=ue),b+=r.slice(S,ce).replace(mm,sy),Q&&(v=!0,b+=`' +
__e(`+Q+`) +
'`),Kt&&(_=!0,b+=`';
`+Kt+`;
__p += '`),Z&&(b+=`' +
((__t = (`+Z+`)) == null ? '' : __t) +
'`),S=ce+$.length,$}),b+=`';
`;var V=at.call(i,"variable")&&i.variable;if(!V)b=`with (obj) {
`+b+`
}
`;else if(am.test(V))throw new W(f);b=(_?b.replace(Gp,""):b).replace(Kp,"$1").replace(zp,"$1;"),b="function("+(V||"obj")+`) {
`+(V?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(_?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+b+`return __p
}`;var Y=wf(function(){return it(g,M+"return "+b).apply(n,m)});if(Y.source=b,qa(Y))throw Y;return Y}function D1(r){return st(r).toLowerCase()}function L1(r){return st(r).toUpperCase()}function O1(r,i,a){if(r=st(r),r&&(a||i===n))return bl(r);if(!r||!(i=oe(i)))return r;var c=be(r),h=be(i),g=Rl(c,h),m=xl(c,h)+1;return sn(c,g,m).join("")}function k1(r,i,a){if(r=st(r),r&&(a||i===n))return r.slice(0,Dl(r)+1);if(!r||!(i=oe(i)))return r;var c=be(r),h=xl(c,be(i))+1;return sn(c,0,h).join("")}function M1(r,i,a){if(r=st(r),r&&(a||i===n))return r.replace(qo,"");if(!r||!(i=oe(i)))return r;var c=be(r),h=Rl(c,be(i));return sn(c,h).join("")}function P1(r,i){var a=xp,c=Np;if(mt(i)){var h="separator"in i?i.separator:h;a="length"in i?z(i.length):a,c="omission"in i?oe(i.omission):c}r=st(r);var g=r.length;if(qn(r)){var m=be(r);g=m.length}if(a>=g)return r;var v=a-Wn(c);if(v<1)return c;var _=m?sn(m,0,v).join(""):r.slice(0,v);if(h===n)return _+c;if(m&&(v+=_.length-v),Wa(h)){if(r.slice(v).search(h)){var S,C=_;for(h.global||(h=sa(h.source,st(Yc.exec(h))+"g")),h.lastIndex=0;S=h.exec(C);)var b=S.index;_=_.slice(0,b===n?v:b)}}else if(r.indexOf(oe(h),v)!=v){var N=_.lastIndexOf(h);N>-1&&(_=_.slice(0,N))}return _+c}function F1(r){return r=st(r),r&&jp.test(r)?r.replace(Kc,fy):r}var U1=Xn(function(r,i,a){return r+(a?" ":"")+i.toUpperCase()}),Ka=wh("toUpperCase");function vf(r,i,a){return r=st(r),i=a?n:i,i===n?ay(r)?py(r):Jm(r):r.match(i)||[]}var wf=X(function(r,i){try{return ie(r,n,i)}catch(a){return qa(a)?a:new W(a)}}),V1=Be(function(r,i){return me(i,function(a){a=ke(a),Ve(r,a,$a(r[a],r))}),r});function $1(r){var i=r==null?0:r.length,a=U();return r=i?gt(r,function(c){if(typeof c[1]!="function")throw new ye(l);return[a(c[0]),c[1]]}):[],X(function(c){for(var h=-1;++h<i;){var g=r[h];if(ie(g[0],this,c))return ie(g[1],this,c)}})}function B1(r){return fv(we(r,I))}function za(r){return function(){return r}}function q1(r,i){return r==null||r!==r?i:r}var W1=Eh(),H1=Eh(!0);function Zt(r){return r}function ja(r){return Ql(typeof r=="function"?r:we(r,I))}function G1(r){return Zl(we(r,I))}function K1(r,i){return th(r,we(i,I))}var z1=X(function(r,i){return function(a){return Fr(a,r,i)}}),j1=X(function(r,i){return function(a){return Fr(r,a,i)}});function Ya(r,i,a){var c=Ct(i),h=rs(i,c);a==null&&!(mt(i)&&(h.length||!c.length))&&(a=i,i=r,r=this,h=rs(i,Ct(i)));var g=!(mt(a)&&"chain"in a)||!!a.chain,m=We(r);return me(h,function(v){var _=i[v];r[v]=_,m&&(r.prototype[v]=function(){var S=this.__chain__;if(g||S){var C=r(this.__wrapped__),b=C.__actions__=Xt(this.__actions__);return b.push({func:_,args:arguments,thisArg:r}),C.__chain__=S,C}return _.apply(r,Je([this.value()],arguments))})}),r}function Y1(){return Nt._===this&&(Nt._=Ey),this}function Xa(){}function X1(r){return r=z(r),X(function(i){return eh(i,r)})}var Q1=ba(gt),J1=ba(Tl),Z1=ba(Jo);function _f(r){return ka(r)?Zo(ke(r)):xv(r)}function tE(r){return function(i){return r==null?n:wn(r,i)}}var eE=Ah(),nE=Ah(!0);function Qa(){return[]}function Ja(){return!1}function rE(){return{}}function iE(){return""}function sE(){return!0}function oE(r,i){if(r=z(r),r<1||r>Xe)return[];var a=De,c=Vt(r,De);i=U(i),r-=De;for(var h=na(c,i);++a<r;)i(a);return h}function aE(r){return G(r)?gt(r,ke):ae(r)?[r]:Xt(Vh(st(r)))}function uE(r){var i=++wy;return st(r)+i}var cE=cs(function(r,i){return r+i},0),lE=Ra("ceil"),hE=cs(function(r,i){return r/i},1),fE=Ra("floor");function dE(r){return r&&r.length?ns(r,Zt,da):n}function gE(r,i){return r&&r.length?ns(r,U(i,2),da):n}function pE(r){return Sl(r,Zt)}function mE(r,i){return Sl(r,U(i,2))}function yE(r){return r&&r.length?ns(r,Zt,ya):n}function vE(r,i){return r&&r.length?ns(r,U(i,2),ya):n}var wE=cs(function(r,i){return r*i},1),_E=Ra("round"),EE=cs(function(r,i){return r-i},0);function TE(r){return r&&r.length?ea(r,Zt):0}function AE(r,i){return r&&r.length?ea(r,U(i,2)):0}return d.after=Gw,d.ary=Xh,d.assign=L_,d.assignIn=hf,d.assignInWith=Ts,d.assignWith=O_,d.at=k_,d.before=Qh,d.bind=$a,d.bindAll=V1,d.bindKey=Jh,d.castArray=r_,d.chain=zh,d.chunk=f0,d.compact=d0,d.concat=g0,d.cond=$1,d.conforms=B1,d.constant=za,d.countBy=Tw,d.create=M_,d.curry=Zh,d.curryRight=tf,d.debounce=ef,d.defaults=P_,d.defaultsDeep=F_,d.defer=Kw,d.delay=zw,d.difference=p0,d.differenceBy=m0,d.differenceWith=y0,d.drop=v0,d.dropRight=w0,d.dropRightWhile=_0,d.dropWhile=E0,d.fill=T0,d.filter=Iw,d.flatMap=bw,d.flatMapDeep=Rw,d.flatMapDepth=xw,d.flatten=Wh,d.flattenDeep=A0,d.flattenDepth=I0,d.flip=jw,d.flow=W1,d.flowRight=H1,d.fromPairs=S0,d.functions=H_,d.functionsIn=G_,d.groupBy=Nw,d.initial=b0,d.intersection=R0,d.intersectionBy=x0,d.intersectionWith=N0,d.invert=z_,d.invertBy=j_,d.invokeMap=Lw,d.iteratee=ja,d.keyBy=Ow,d.keys=Ct,d.keysIn=Jt,d.map=ms,d.mapKeys=X_,d.mapValues=Q_,d.matches=G1,d.matchesProperty=K1,d.memoize=vs,d.merge=J_,d.mergeWith=ff,d.method=z1,d.methodOf=j1,d.mixin=Ya,d.negate=ws,d.nthArg=X1,d.omit=Z_,d.omitBy=t1,d.once=Yw,d.orderBy=kw,d.over=Q1,d.overArgs=Xw,d.overEvery=J1,d.overSome=Z1,d.partial=Ba,d.partialRight=nf,d.partition=Mw,d.pick=e1,d.pickBy=df,d.property=_f,d.propertyOf=tE,d.pull=k0,d.pullAll=Gh,d.pullAllBy=M0,d.pullAllWith=P0,d.pullAt=F0,d.range=eE,d.rangeRight=nE,d.rearg=Qw,d.reject=Uw,d.remove=U0,d.rest=Jw,d.reverse=Ua,d.sampleSize=$w,d.set=r1,d.setWith=i1,d.shuffle=Bw,d.slice=V0,d.sortBy=Hw,d.sortedUniq=K0,d.sortedUniqBy=z0,d.split=b1,d.spread=Zw,d.tail=j0,d.take=Y0,d.takeRight=X0,d.takeRightWhile=Q0,d.takeWhile=J0,d.tap=dw,d.throttle=t_,d.thru=ps,d.toArray=uf,d.toPairs=gf,d.toPairsIn=pf,d.toPath=aE,d.toPlainObject=lf,d.transform=s1,d.unary=e_,d.union=Z0,d.unionBy=tw,d.unionWith=ew,d.uniq=nw,d.uniqBy=rw,d.uniqWith=iw,d.unset=o1,d.unzip=Va,d.unzipWith=Kh,d.update=a1,d.updateWith=u1,d.values=Zn,d.valuesIn=c1,d.without=sw,d.words=vf,d.wrap=n_,d.xor=ow,d.xorBy=aw,d.xorWith=uw,d.zip=cw,d.zipObject=lw,d.zipObjectDeep=hw,d.zipWith=fw,d.entries=gf,d.entriesIn=pf,d.extend=hf,d.extendWith=Ts,Ya(d,d),d.add=cE,d.attempt=wf,d.camelCase=d1,d.capitalize=mf,d.ceil=lE,d.clamp=l1,d.clone=i_,d.cloneDeep=o_,d.cloneDeepWith=a_,d.cloneWith=s_,d.conformsTo=u_,d.deburr=yf,d.defaultTo=q1,d.divide=hE,d.endsWith=g1,d.eq=xe,d.escape=p1,d.escapeRegExp=m1,d.every=Aw,d.find=Sw,d.findIndex=Bh,d.findKey=U_,d.findLast=Cw,d.findLastIndex=qh,d.findLastKey=V_,d.floor=fE,d.forEach=jh,d.forEachRight=Yh,d.forIn=$_,d.forInRight=B_,d.forOwn=q_,d.forOwnRight=W_,d.get=Ha,d.gt=c_,d.gte=l_,d.has=K_,d.hasIn=Ga,d.head=Hh,d.identity=Zt,d.includes=Dw,d.indexOf=C0,d.inRange=h1,d.invoke=Y_,d.isArguments=Tn,d.isArray=G,d.isArrayBuffer=h_,d.isArrayLike=Qt,d.isArrayLikeObject=vt,d.isBoolean=f_,d.isBuffer=on,d.isDate=d_,d.isElement=g_,d.isEmpty=p_,d.isEqual=m_,d.isEqualWith=y_,d.isError=qa,d.isFinite=v_,d.isFunction=We,d.isInteger=rf,d.isLength=_s,d.isMap=sf,d.isMatch=w_,d.isMatchWith=__,d.isNaN=E_,d.isNative=T_,d.isNil=I_,d.isNull=A_,d.isNumber=of,d.isObject=mt,d.isObjectLike=yt,d.isPlainObject=Wr,d.isRegExp=Wa,d.isSafeInteger=S_,d.isSet=af,d.isString=Es,d.isSymbol=ae,d.isTypedArray=Jn,d.isUndefined=C_,d.isWeakMap=b_,d.isWeakSet=R_,d.join=D0,d.kebabCase=y1,d.last=Ee,d.lastIndexOf=L0,d.lowerCase=v1,d.lowerFirst=w1,d.lt=x_,d.lte=N_,d.max=dE,d.maxBy=gE,d.mean=pE,d.meanBy=mE,d.min=yE,d.minBy=vE,d.stubArray=Qa,d.stubFalse=Ja,d.stubObject=rE,d.stubString=iE,d.stubTrue=sE,d.multiply=wE,d.nth=O0,d.noConflict=Y1,d.noop=Xa,d.now=ys,d.pad=_1,d.padEnd=E1,d.padStart=T1,d.parseInt=A1,d.random=f1,d.reduce=Pw,d.reduceRight=Fw,d.repeat=I1,d.replace=S1,d.result=n1,d.round=_E,d.runInContext=w,d.sample=Vw,d.size=qw,d.snakeCase=C1,d.some=Ww,d.sortedIndex=$0,d.sortedIndexBy=B0,d.sortedIndexOf=q0,d.sortedLastIndex=W0,d.sortedLastIndexBy=H0,d.sortedLastIndexOf=G0,d.startCase=R1,d.startsWith=x1,d.subtract=EE,d.sum=TE,d.sumBy=AE,d.template=N1,d.times=oE,d.toFinite=He,d.toInteger=z,d.toLength=cf,d.toLower=D1,d.toNumber=Te,d.toSafeInteger=D_,d.toString=st,d.toUpper=L1,d.trim=O1,d.trimEnd=k1,d.trimStart=M1,d.truncate=P1,d.unescape=F1,d.uniqueId=uE,d.upperCase=U1,d.upperFirst=Ka,d.each=jh,d.eachRight=Yh,d.first=Hh,Ya(d,function(){var r={};return Le(d,function(i,a){at.call(d.prototype,a)||(r[a]=i)}),r}(),{chain:!1}),d.VERSION=s,me(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){d[r].placeholder=d}),me(["drop","take"],function(r,i){J.prototype[r]=function(a){a=a===n?1:St(z(a),0);var c=this.__filtered__&&!i?new J(this):this.clone();return c.__filtered__?c.__takeCount__=Vt(a,c.__takeCount__):c.__views__.push({size:Vt(a,De),type:r+(c.__dir__<0?"Right":"")}),c},J.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),me(["filter","map","takeWhile"],function(r,i){var a=i+1,c=a==Wc||a==kp;J.prototype[r]=function(h){var g=this.clone();return g.__iteratees__.push({iteratee:U(h,3),type:a}),g.__filtered__=g.__filtered__||c,g}}),me(["head","last"],function(r,i){var a="take"+(i?"Right":"");J.prototype[r]=function(){return this[a](1).value()[0]}}),me(["initial","tail"],function(r,i){var a="drop"+(i?"":"Right");J.prototype[r]=function(){return this.__filtered__?new J(this):this[a](1)}}),J.prototype.compact=function(){return this.filter(Zt)},J.prototype.find=function(r){return this.filter(r).head()},J.prototype.findLast=function(r){return this.reverse().find(r)},J.prototype.invokeMap=X(function(r,i){return typeof r=="function"?new J(this):this.map(function(a){return Fr(a,r,i)})}),J.prototype.reject=function(r){return this.filter(ws(U(r)))},J.prototype.slice=function(r,i){r=z(r);var a=this;return a.__filtered__&&(r>0||i<0)?new J(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),i!==n&&(i=z(i),a=i<0?a.dropRight(-i):a.take(i-r)),a)},J.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},J.prototype.toArray=function(){return this.take(De)},Le(J.prototype,function(r,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),c=/^(?:head|last)$/.test(i),h=d[c?"take"+(i=="last"?"Right":""):i],g=c||/^find/.test(i);!h||(d.prototype[i]=function(){var m=this.__wrapped__,v=c?[1]:arguments,_=m instanceof J,S=v[0],C=_||G(m),b=function(Q){var Z=h.apply(d,Je([Q],v));return c&&N?Z[0]:Z};C&&a&&typeof S=="function"&&S.length!=1&&(_=C=!1);var N=this.__chain__,M=!!this.__actions__.length,V=g&&!N,Y=_&&!M;if(!g&&C){m=Y?m:new J(this);var $=r.apply(m,v);return $.__actions__.push({func:ps,args:[b],thisArg:n}),new ve($,N)}return V&&Y?r.apply(this,v):($=this.thru(b),V?c?$.value()[0]:$.value():$)})}),me(["pop","push","shift","sort","splice","unshift"],function(r){var i=Bi[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",c=/^(?:pop|shift)$/.test(r);d.prototype[r]=function(){var h=arguments;if(c&&!this.__chain__){var g=this.value();return i.apply(G(g)?g:[],h)}return this[a](function(m){return i.apply(G(m)?m:[],h)})}}),Le(J.prototype,function(r,i){var a=d[i];if(a){var c=a.name+"";at.call(zn,c)||(zn[c]=[]),zn[c].push({name:i,func:a})}}),zn[us(n,xt).name]=[{name:"wrapper",func:n}],J.prototype.clone=Fy,J.prototype.reverse=Uy,J.prototype.value=Vy,d.prototype.at=gw,d.prototype.chain=pw,d.prototype.commit=mw,d.prototype.next=yw,d.prototype.plant=ww,d.prototype.reverse=_w,d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=Ew,d.prototype.first=d.prototype.head,Nr&&(d.prototype[Nr]=vw),d},Hn=my();gn?((gn.exports=Hn)._=Hn,jo._=Hn):Nt._=Hn}).call(Yr)})(ru,ru.exports);var Rb=ru.exports;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KE(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rs())}function zE(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function jE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YE(){return Rs().indexOf("Electron/")>=0}function XE(){const e=Rs();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function QE(){return Rs().indexOf("MSAppHost/")>=0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="FirebaseError";class xs extends Error{constructor(t,n,s){super(n);this.code=t,this.customData=s,this.name=JE,Object.setPrototypeOf(this,xs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Df.prototype.create)}}class Df{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],l=u?ZE(u,s):"Error",f=`${this.serviceName}: ${l} (${o}).`;return new xs(o,f,s)}}function ZE(e,t){return e.replace(tT,(n,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const tT=/\{\$([^}]+)}/g;function iu(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const o of n){if(!s.includes(o))return!1;const u=e[o],l=t[o];if(Lf(u)&&Lf(l)){if(!iu(u,l))return!1}else if(u!==l)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Lf(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(e){return e&&e._delegate?e._delegate:e}class Ns{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new GE;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(rT(t))try{this.getOrInitializeService({instanceIdentifier:Sn})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(t=Sn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Sn){return this.instances.has(t)}getOptions(t=Sn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,l]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(u);s===f&&l.resolve(o)}return o}onInit(t,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(t),this.onInitCallbacks.set(o,u);const l=this.instances.get(o);return l&&t(l,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(!!s)for(const o of s)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:nT(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Sn){return this.component?this.component.multipleInstances?t:Sn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nT(e){return e===Sn?void 0:e}function rT(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new eT(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ot||(ot={}));const sT={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},oT=ot.INFO,aT={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},uT=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),o=aT[t];if(o)console[o](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Of{constructor(t){this.name=t,this._logLevel=oT,this._logHandler=uT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?sT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...t),this._logHandler(this,ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...t),this._logHandler(this,ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...t),this._logHandler(this,ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...t),this._logHandler(this,ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...t),this._logHandler(this,ot.ERROR,...t)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lT(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function lT(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const su="@firebase/app",kf="0.7.15";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=new Of("@firebase/app"),hT="@firebase/app-compat",fT="@firebase/analytics-compat",dT="@firebase/analytics",gT="@firebase/app-check-compat",pT="@firebase/app-check",mT="@firebase/auth",yT="@firebase/auth-compat",vT="@firebase/database",wT="@firebase/database-compat",_T="@firebase/functions",ET="@firebase/functions-compat",TT="@firebase/installations",AT="@firebase/installations-compat",IT="@firebase/messaging",ST="@firebase/messaging-compat",CT="@firebase/performance",bT="@firebase/performance-compat",RT="@firebase/remote-config",xT="@firebase/remote-config-compat",NT="@firebase/storage",DT="@firebase/storage-compat",LT="@firebase/firestore",OT="@firebase/firestore-compat",kT="firebase",MT="9.6.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="[DEFAULT]",PT={[su]:"fire-core",[hT]:"fire-core-compat",[dT]:"fire-analytics",[fT]:"fire-analytics-compat",[pT]:"fire-app-check",[gT]:"fire-app-check-compat",[mT]:"fire-auth",[yT]:"fire-auth-compat",[vT]:"fire-rtdb",[wT]:"fire-rtdb-compat",[_T]:"fire-fn",[ET]:"fire-fn-compat",[TT]:"fire-iid",[AT]:"fire-iid-compat",[IT]:"fire-fcm",[ST]:"fire-fcm-compat",[CT]:"fire-perf",[bT]:"fire-perf-compat",[RT]:"fire-rc",[xT]:"fire-rc-compat",[NT]:"fire-gcs",[DT]:"fire-gcs-compat",[LT]:"fire-fst",[OT]:"fire-fst-compat","fire-js":"fire-js",[kT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new Map,au=new Map;function FT(e,t){try{e.container.addComponent(t)}catch(n){ou.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function uu(e){const t=e.name;if(au.has(t))return ou.debug(`There were multiple attempts to register component ${t}.`),!1;au.set(t,e);for(const n of Ds.values())FT(n,e);return!0}function UT(e,t){return e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},Ls=new Df("app","Firebase",VT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=MT;function xb(e,t={}){typeof t!="object"&&(t={name:t});const n=Object.assign({name:Mf,automaticDataCollectionEnabled:!1},t),s=n.name;if(typeof s!="string"||!s)throw Ls.create("bad-app-name",{appName:String(s)});const o=Ds.get(s);if(o){if(iu(e,o.options)&&iu(n,o.config))return o;throw Ls.create("duplicate-app",{appName:s})}const u=new iT(s);for(const f of au.values())u.addComponent(f);const l=new $T(e,n,u);return Ds.set(s,l),l}function qT(e=Mf){const t=Ds.get(e);if(!t)throw Ls.create("no-app",{appName:e});return t}function er(e,t,n){var s;let o=(s=PT[e])!==null&&s!==void 0?s:e;n&&(o+=`-${n}`);const u=o.match(/\s|\//),l=t.match(/\s|\//);if(u||l){const f=[`Unable to register library "${o}" with version "${t}":`];u&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&l&&f.push("and"),l&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ou.warn(f.join(" "));return}uu(new Ns(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(e){uu(new Ns("platform-logger",t=>new cT(t),"PRIVATE")),er(su,kf,e),er(su,kf,"esm2017"),er("fire-js","")}WT("");var HT="firebase",GT="9.6.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er(HT,GT,"app");var KT=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},k,cu=cu||{},q=KT||self;function Os(){}function lu(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Xr(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function zT(e){return Object.prototype.hasOwnProperty.call(e,hu)&&e[hu]||(e[hu]=++jT)}var hu="closure_uid_"+(1e9*Math.random()>>>0),jT=0;function YT(e,t,n){return e.call.apply(e.bind,arguments)}function XT(e,t,n){if(!e)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,s),e.apply(t,o)}}return function(){return e.apply(t,arguments)}}function Lt(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Lt=YT:Lt=XT,Lt.apply(null,arguments)}function ks(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),e.apply(this,s)}}function Ot(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(s,o,u){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return t.prototype[o].apply(s,l)}}function an(){this.s=this.s,this.o=this.o}var QT=0,JT={};an.prototype.s=!1;an.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),QT!=0)){var e=zT(this);delete JT[e]}};an.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Pf=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Ff=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const s=e.length,o=typeof e=="string"?e.split(""):e;for(let u=0;u<s;u++)u in o&&t.call(n,o[u],u,e)};function ZT(e){t:{var t=HA;const n=e.length,s=typeof e=="string"?e.split(""):e;for(let o=0;o<n;o++)if(o in s&&t.call(void 0,s[o],o,e)){t=o;break t}t=-1}return 0>t?null:typeof e=="string"?e.charAt(t):e[t]}function Uf(e){return Array.prototype.concat.apply([],arguments)}function fu(e){const t=e.length;if(0<t){const n=Array(t);for(let s=0;s<t;s++)n[s]=e[s];return n}return[]}function Ms(e){return/^[\s\xa0]*$/.test(e)}var Vf=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function zt(e,t){return e.indexOf(t)!=-1}function du(e,t){return e<t?-1:e>t?1:0}var jt;t:{var $f=q.navigator;if($f){var Bf=$f.userAgent;if(Bf){jt=Bf;break t}}jt=""}function gu(e,t,n){for(const s in e)t.call(n,e[s],s,e)}function qf(e){const t={};for(const n in e)t[n]=e[n];return t}var Wf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Hf(e,t){let n,s;for(let o=1;o<arguments.length;o++){s=arguments[o];for(n in s)e[n]=s[n];for(let u=0;u<Wf.length;u++)n=Wf[u],Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}}function pu(e){return pu[" "](e),e}pu[" "]=Os;function tA(e){var t=rA;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}var eA=zt(jt,"Opera"),nr=zt(jt,"Trident")||zt(jt,"MSIE"),Gf=zt(jt,"Edge"),mu=Gf||nr,Kf=zt(jt,"Gecko")&&!(zt(jt.toLowerCase(),"webkit")&&!zt(jt,"Edge"))&&!(zt(jt,"Trident")||zt(jt,"MSIE"))&&!zt(jt,"Edge"),nA=zt(jt.toLowerCase(),"webkit")&&!zt(jt,"Edge");function zf(){var e=q.document;return e?e.documentMode:void 0}var Ps;t:{var yu="",vu=function(){var e=jt;if(Kf)return/rv:([^\);]+)(\)|;)/.exec(e);if(Gf)return/Edge\/([\d\.]+)/.exec(e);if(nr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(nA)return/WebKit\/(\S+)/.exec(e);if(eA)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(vu&&(yu=vu?vu[1]:""),nr){var wu=zf();if(wu!=null&&wu>parseFloat(yu)){Ps=String(wu);break t}}Ps=yu}var rA={};function iA(){return tA(function(){let e=0;const t=Vf(String(Ps)).split("."),n=Vf("9").split("."),s=Math.max(t.length,n.length);for(let l=0;e==0&&l<s;l++){var o=t[l]||"",u=n[l]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],o[0].length==0&&u[0].length==0)break;e=du(o[1].length==0?0:parseInt(o[1],10),u[1].length==0?0:parseInt(u[1],10))||du(o[2].length==0,u[2].length==0)||du(o[2],u[2]),o=o[3],u=u[3]}while(e==0)}return 0<=e})}var _u;if(q.document&&nr){var jf=zf();_u=jf||parseInt(Ps,10)||void 0}else _u=void 0;var sA=_u,oA=function(){if(!q.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{q.addEventListener("test",Os,t),q.removeEventListener("test",Os,t)}catch{}return e}();function Bt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Bt.prototype.h=function(){this.defaultPrevented=!0};function Qr(e,t){if(Bt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,s=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Kf){t:{try{pu(t.nodeName);var o=!0;break t}catch{}o=!1}o||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:aA[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Qr.Z.h.call(this)}}Ot(Qr,Bt);var aA={2:"touch",3:"pen",4:"mouse"};Qr.prototype.h=function(){Qr.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Jr="closure_listenable_"+(1e6*Math.random()|0),uA=0;function cA(e,t,n,s,o){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!s,this.ia=o,this.key=++uA,this.ca=this.fa=!1}function Fs(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Us(e){this.src=e,this.g={},this.h=0}Us.prototype.add=function(e,t,n,s,o){var u=e.toString();e=this.g[u],e||(e=this.g[u]=[],this.h++);var l=Tu(e,t,s,o);return-1<l?(t=e[l],n||(t.fa=!1)):(t=new cA(t,this.src,u,!!s,o),t.fa=n,e.push(t)),t};function Eu(e,t){var n=t.type;if(n in e.g){var s=e.g[n],o=Pf(s,t),u;(u=0<=o)&&Array.prototype.splice.call(s,o,1),u&&(Fs(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Tu(e,t,n,s){for(var o=0;o<e.length;++o){var u=e[o];if(!u.ca&&u.listener==t&&u.capture==!!n&&u.ia==s)return o}return-1}var Au="closure_lm_"+(1e6*Math.random()|0),Iu={};function Yf(e,t,n,s,o){if(s&&s.once)return Qf(e,t,n,s,o);if(Array.isArray(t)){for(var u=0;u<t.length;u++)Yf(e,t[u],n,s,o);return null}return n=Ru(n),e&&e[Jr]?e.N(t,n,Xr(s)?!!s.capture:!!s,o):Xf(e,t,n,!1,s,o)}function Xf(e,t,n,s,o,u){if(!t)throw Error("Invalid event type");var l=Xr(o)?!!o.capture:!!o,f=Cu(e);if(f||(e[Au]=f=new Us(e)),n=f.add(t,n,s,l,u),n.proxy)return n;if(s=lA(),n.proxy=s,s.src=e,s.listener=n,e.addEventListener)oA||(o=l),o===void 0&&(o=!1),e.addEventListener(t.toString(),s,o);else if(e.attachEvent)e.attachEvent(Zf(t.toString()),s);else if(e.addListener&&e.removeListener)e.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function lA(){function e(n){return t.call(e.src,e.listener,n)}var t=hA;return e}function Qf(e,t,n,s,o){if(Array.isArray(t)){for(var u=0;u<t.length;u++)Qf(e,t[u],n,s,o);return null}return n=Ru(n),e&&e[Jr]?e.O(t,n,Xr(s)?!!s.capture:!!s,o):Xf(e,t,n,!0,s,o)}function Jf(e,t,n,s,o){if(Array.isArray(t))for(var u=0;u<t.length;u++)Jf(e,t[u],n,s,o);else s=Xr(s)?!!s.capture:!!s,n=Ru(n),e&&e[Jr]?(e=e.i,t=String(t).toString(),t in e.g&&(u=e.g[t],n=Tu(u,n,s,o),-1<n&&(Fs(u[n]),Array.prototype.splice.call(u,n,1),u.length==0&&(delete e.g[t],e.h--)))):e&&(e=Cu(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Tu(t,n,s,o)),(n=-1<e?t[e]:null)&&Su(n))}function Su(e){if(typeof e!="number"&&e&&!e.ca){var t=e.src;if(t&&t[Jr])Eu(t.i,e);else{var n=e.type,s=e.proxy;t.removeEventListener?t.removeEventListener(n,s,e.capture):t.detachEvent?t.detachEvent(Zf(n),s):t.addListener&&t.removeListener&&t.removeListener(s),(n=Cu(t))?(Eu(n,e),n.h==0&&(n.src=null,t[Au]=null)):Fs(e)}}}function Zf(e){return e in Iu?Iu[e]:Iu[e]="on"+e}function hA(e,t){if(e.ca)e=!0;else{t=new Qr(t,this);var n=e.listener,s=e.ia||e.src;e.fa&&Su(e),e=n.call(s,t)}return e}function Cu(e){return e=e[Au],e instanceof Us?e:null}var bu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ru(e){return typeof e=="function"?e:(e[bu]||(e[bu]=function(t){return e.handleEvent(t)}),e[bu])}function bt(){an.call(this),this.i=new Us(this),this.P=this,this.I=null}Ot(bt,an);bt.prototype[Jr]=!0;bt.prototype.removeEventListener=function(e,t,n,s){Jf(this,e,t,n,s)};function kt(e,t){var n,s=e.I;if(s)for(n=[];s;s=s.I)n.push(s);if(e=e.P,s=t.type||t,typeof t=="string")t=new Bt(t,e);else if(t instanceof Bt)t.target=t.target||e;else{var o=t;t=new Bt(s,e),Hf(t,o)}if(o=!0,n)for(var u=n.length-1;0<=u;u--){var l=t.g=n[u];o=Vs(l,s,!0,t)&&o}if(l=t.g=e,o=Vs(l,s,!0,t)&&o,o=Vs(l,s,!1,t)&&o,n)for(u=0;u<n.length;u++)l=t.g=n[u],o=Vs(l,s,!1,t)&&o}bt.prototype.M=function(){if(bt.Z.M.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],s=0;s<n.length;s++)Fs(n[s]);delete e.g[t],e.h--}}this.I=null};bt.prototype.N=function(e,t,n,s){return this.i.add(String(e),t,!1,n,s)};bt.prototype.O=function(e,t,n,s){return this.i.add(String(e),t,!0,n,s)};function Vs(e,t,n,s){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var o=!0,u=0;u<t.length;++u){var l=t[u];if(l&&!l.ca&&l.capture==n){var f=l.listener,p=l.ia||l.src;l.fa&&Eu(e.i,l),o=f.call(p,s)!==!1&&o}}return o&&!s.defaultPrevented}var xu=q.JSON.stringify;function fA(){var e=ed;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class dA{constructor(){this.h=this.g=null}add(t,n){const s=td.get();s.set(t,n),this.h?this.h.next=s:this.g=s,this.h=s}}var td=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new gA,e=>e.reset());class gA{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function pA(e){q.setTimeout(()=>{throw e},0)}function Nu(e,t){Du||mA(),Lu||(Du(),Lu=!0),ed.add(e,t)}var Du;function mA(){var e=q.Promise.resolve(void 0);Du=function(){e.then(yA)}}var Lu=!1,ed=new dA;function yA(){for(var e;e=fA();){try{e.h.call(e.g)}catch(n){pA(n)}var t=td;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Lu=!1}function $s(e,t){bt.call(this),this.h=e||1,this.g=t||q,this.j=Lt(this.kb,this),this.l=Date.now()}Ot($s,bt);k=$s.prototype;k.da=!1;k.S=null;k.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),kt(this,"tick"),this.da&&(Ou(this),this.start()))}};k.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ou(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}k.M=function(){$s.Z.M.call(this),Ou(this),delete this.g};function ku(e,t,n){if(typeof e=="function")n&&(e=Lt(e,n));else if(e&&typeof e.handleEvent=="function")e=Lt(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:q.setTimeout(e,t||0)}function nd(e){e.g=ku(()=>{e.g=null,e.i&&(e.i=!1,nd(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class vA extends an{constructor(t,n){super();this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:nd(this)}M(){super.M(),this.g&&(q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(e){an.call(this),this.h=e,this.g={}}Ot(Zr,an);var rd=[];function id(e,t,n,s){Array.isArray(n)||(n&&(rd[0]=n.toString()),n=rd);for(var o=0;o<n.length;o++){var u=Yf(t,n[o],s||e.handleEvent,!1,e.h||e);if(!u)break;e.g[u.key]=u}}function sd(e){gu(e.g,function(t,n){this.g.hasOwnProperty(n)&&Su(t)},e),e.g={}}Zr.prototype.M=function(){Zr.Z.M.call(this),sd(this)};Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Bs(){this.g=!0}Bs.prototype.Aa=function(){this.g=!1};function wA(e,t,n,s,o,u){e.info(function(){if(e.g)if(u)for(var l="",f=u.split("&"),p=0;p<f.length;p++){var y=f[p].split("=");if(1<y.length){var E=y[0];y=y[1];var I=E.split("_");l=2<=I.length&&I[1]=="type"?l+(E+"="+y+"&"):l+(E+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+s+") [attempt "+o+"]: "+t+`
`+n+`
`+l})}function _A(e,t,n,s,o,u,l){e.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+o+"]: "+t+`
`+n+`
`+u+" "+l})}function rr(e,t,n,s){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+TA(e,n)+(s?" "+s:"")})}function EA(e,t){e.info(function(){return"TIMEOUT: "+t})}Bs.prototype.info=function(){};function TA(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var s=n[e];if(!(2>s.length)){var o=s[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if(u!="noop"&&u!="stop"&&u!="close")for(var l=1;l<o.length;l++)o[l]=""}}}}return xu(n)}catch{return t}}var Cn={},od=null;function qs(){return od=od||new bt}Cn.Ma="serverreachability";function ad(e){Bt.call(this,Cn.Ma,e)}Ot(ad,Bt);function ti(e){const t=qs();kt(t,new ad(t,e))}Cn.STAT_EVENT="statevent";function ud(e,t){Bt.call(this,Cn.STAT_EVENT,e),this.stat=t}Ot(ud,Bt);function Yt(e){const t=qs();kt(t,new ud(t,e))}Cn.Na="timingevent";function cd(e,t){Bt.call(this,Cn.Na,e),this.size=t}Ot(cd,Bt);function ei(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return q.setTimeout(function(){e()},t)}var Ws={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ld={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Mu(){}Mu.prototype.h=null;function hd(e){return e.h||(e.h=e.i())}function fd(){}var ni={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Pu(){Bt.call(this,"d")}Ot(Pu,Bt);function Fu(){Bt.call(this,"c")}Ot(Fu,Bt);var Uu;function Hs(){}Ot(Hs,Mu);Hs.prototype.g=function(){return new XMLHttpRequest};Hs.prototype.i=function(){return{}};Uu=new Hs;function ri(e,t,n,s){this.l=e,this.j=t,this.m=n,this.X=s||1,this.V=new Zr(this),this.P=AA,e=mu?125:void 0,this.W=new $s(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new dd}function dd(){this.i=null,this.g="",this.h=!1}var AA=45e3,Vu={},Gs={};k=ri.prototype;k.setTimeout=function(e){this.P=e};function $u(e,t,n){e.K=1,e.v=Xs(Ke(t)),e.s=n,e.U=!0,gd(e,null)}function gd(e,t){e.F=Date.now(),ii(e),e.A=Ke(e.v);var n=e.A,s=e.X;Array.isArray(s)||(s=[String(s)]),Ad(n.h,"t",s),e.C=0,n=e.l.H,e.h=new dd,e.g=Kd(e.l,n?t:null,!e.s),0<e.O&&(e.L=new vA(Lt(e.Ia,e,e.g),e.O)),id(e.V,e.g,"readystatechange",e.gb),t=e.H?qf(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ti(1),wA(e.j,e.u,e.A,e.m,e.X,e.s)}k.gb=function(e){e=e.target;const t=this.L;t&&ze(e)==3?t.l():this.Ia(e)};k.Ia=function(e){try{if(e==this.g)t:{const E=ze(this.g);var t=this.g.Da();const I=this.g.ba();if(!(3>E)&&(E!=3||mu||this.g&&(this.h.h||this.g.ga()||Md(this.g)))){this.I||E!=4||t==7||(t==8||0>=I?ti(3):ti(2)),Ks(this);var n=this.g.ba();this.N=n;e:if(pd(this)){var s=Md(this.g);e="";var o=s.length,u=ze(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){bn(this),si(this);var l="";break e}this.h.i=new q.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(s[t],{stream:u&&t==o-1});s.splice(0,o),this.h.g+=e,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=n==200,_A(this.j,this.u,this.A,this.m,this.X,E,n),this.i){if(this.$&&!this.J){e:{if(this.g){var f,p=this.g;if((f=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ms(f)){var y=f;break e}}y=null}if(n=y)rr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Bu(this,n);else{this.i=!1,this.o=3,Yt(12),bn(this),si(this);break t}}this.U?(md(this,E,l),mu&&this.i&&E==3&&(id(this.V,this.W,"tick",this.fb),this.W.start())):(rr(this.j,this.m,l,null),Bu(this,l)),E==4&&bn(this),this.i&&!this.I&&(E==4?qd(this.l,this):(this.i=!1,ii(this)))}else n==400&&0<l.indexOf("Unknown SID")?(this.o=3,Yt(12)):(this.o=0,Yt(13)),bn(this),si(this)}}}catch{}finally{}};function pd(e){return e.g?e.u=="GET"&&e.K!=2&&e.l.Ba:!1}function md(e,t,n){let s=!0,o;for(;!e.I&&e.C<n.length;)if(o=IA(e,n),o==Gs){t==4&&(e.o=4,Yt(14),s=!1),rr(e.j,e.m,null,"[Incomplete Response]");break}else if(o==Vu){e.o=4,Yt(15),rr(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}else rr(e.j,e.m,o,null),Bu(e,o);pd(e)&&o!=Gs&&o!=Vu&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,Yt(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.aa&&(e.aa=!0,t=e.l,t.g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ju(t),t.L=!0,Yt(11))):(rr(e.j,e.m,n,"[Invalid Chunked Response]"),bn(e),si(e))}k.fb=function(){if(this.g){var e=ze(this.g),t=this.g.ga();this.C<t.length&&(Ks(this),md(this,e,t),this.i&&e!=4&&ii(this))}};function IA(e,t){var n=e.C,s=t.indexOf(`
`,n);return s==-1?Gs:(n=Number(t.substring(n,s)),isNaN(n)?Vu:(s+=1,s+n>t.length?Gs:(t=t.substr(s,n),e.C=s+n,t)))}k.cancel=function(){this.I=!0,bn(this)};function ii(e){e.Y=Date.now()+e.P,yd(e,e.P)}function yd(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=ei(Lt(e.eb,e),t)}function Ks(e){e.B&&(q.clearTimeout(e.B),e.B=null)}k.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(EA(this.j,this.A),this.K!=2&&(ti(3),Yt(17)),bn(this),this.o=2,si(this)):yd(this,this.Y-e)};function si(e){e.l.G==0||e.I||qd(e.l,e)}function bn(e){Ks(e);var t=e.L;t&&typeof t.na=="function"&&t.na(),e.L=null,Ou(e.W),sd(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Bu(e,t){try{var n=e.l;if(n.G!=0&&(n.g==e||Hu(n.i,e))){if(n.I=e.N,!e.J&&Hu(n.i,e)&&n.G==3){try{var s=n.Ca.g.parse(t)}catch{s=null}if(Array.isArray(s)&&s.length==3){var o=s;if(o[0]==0)t:if(!n.u){if(n.g)if(n.g.F+3e3<e.F)no(n),to(n);else break t;Qu(n),Yt(18)}else n.ta=o[1],0<n.ta-n.U&&37500>o[2]&&n.N&&n.A==0&&!n.v&&(n.v=ei(Lt(n.ab,n),6e3));if(1>=Cd(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else Nn(n,11)}else if((e.J||n.g==e)&&no(n),!Ms(t))for(o=n.Ca.g.parse(t),t=0;t<o.length;t++){let y=o[t];if(n.U=y[0],y=y[1],n.G==2)if(y[0]=="c"){n.J=y[1],n.la=y[2];const E=y[3];E!=null&&(n.ma=E,n.h.info("VER="+n.ma));const I=y[4];I!=null&&(n.za=I,n.h.info("SVER="+n.za));const R=y[5];R!=null&&typeof R=="number"&&0<R&&(s=1.5*R,n.K=s,n.h.info("backChannelRequestTimeoutMs_="+s)),s=n;const L=e.g;if(L){const P=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(P){var u=s.i;!u.g&&(zt(P,"spdy")||zt(P,"quic")||zt(P,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Gu(u,u.h),u.h=null))}if(s.D){const et=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;et&&(s.sa=et,pt(s.F,s.D,et))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms")),s=n;var l=e;if(s.oa=Gd(s,s.H?s.la:null,s.W),l.J){bd(s.i,l);var f=l,p=s.K;p&&f.setTimeout(p),f.B&&(Ks(f),ii(f)),s.g=l}else $d(s);0<n.l.length&&eo(n)}else y[0]!="stop"&&y[0]!="close"||Nn(n,7);else n.G==3&&(y[0]=="stop"||y[0]=="close"?y[0]=="stop"?Nn(n,7):Yu(n):y[0]!="noop"&&n.j&&n.j.wa(y),n.A=0)}}ti(4)}catch{}}function SA(e){if(e.R&&typeof e.R=="function")return e.R();if(typeof e=="string")return e.split("");if(lu(e)){for(var t=[],n=e.length,s=0;s<n;s++)t.push(e[s]);return t}t=[],n=0;for(s in e)t[n++]=e[s];return t}function qu(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(lu(e)||typeof e=="string")Ff(e,t,void 0);else{if(e.T&&typeof e.T=="function")var n=e.T();else if(e.R&&typeof e.R=="function")n=void 0;else if(lu(e)||typeof e=="string"){n=[];for(var s=e.length,o=0;o<s;o++)n.push(o)}else for(o in n=[],s=0,e)n[s++]=o;s=SA(e),o=s.length;for(var u=0;u<o;u++)t.call(void 0,s[u],n&&n[u],e)}}function ir(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var s=0;s<n;s+=2)this.set(arguments[s],arguments[s+1])}else if(e)if(e instanceof ir)for(n=e.T(),s=0;s<n.length;s++)this.set(n[s],e.get(n[s]));else for(s in e)this.set(s,e[s])}k=ir.prototype;k.R=function(){Wu(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e};k.T=function(){return Wu(this),this.g.concat()};function Wu(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var s=e.g[t];Rn(e.h,s)&&(e.g[n++]=s),t++}e.g.length=n}if(e.i!=e.g.length){var o={};for(n=t=0;t<e.g.length;)s=e.g[t],Rn(o,s)||(e.g[n++]=s,o[s]=1),t++;e.g.length=n}}k.get=function(e,t){return Rn(this.h,e)?this.h[e]:t};k.set=function(e,t){Rn(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t};k.forEach=function(e,t){for(var n=this.T(),s=0;s<n.length;s++){var o=n[s],u=this.get(o);e.call(t,u,o,this)}};function Rn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var vd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function CA(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var s=e[n].indexOf("="),o=null;if(0<=s){var u=e[n].substring(0,s);o=e[n].substring(s+1)}else u=e[n];t(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}function xn(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof xn){this.g=t!==void 0?t:e.g,zs(this,e.j),this.s=e.s,js(this,e.i),Ys(this,e.m),this.l=e.l,t=e.h;var n=new ui;n.i=t.i,t.g&&(n.g=new ir(t.g),n.h=t.h),wd(this,n),this.o=e.o}else e&&(n=String(e).match(vd))?(this.g=!!t,zs(this,n[1]||"",!0),this.s=oi(n[2]||""),js(this,n[3]||"",!0),Ys(this,n[4]),this.l=oi(n[5]||"",!0),wd(this,n[6]||"",!0),this.o=oi(n[7]||"")):(this.g=!!t,this.h=new ui(null,this.g))}xn.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ai(t,_d,!0),":");var n=this.i;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(ai(t,_d,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&e.push("/"),e.push(ai(n,n.charAt(0)=="/"?DA:NA,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ai(n,OA)),e.join("")};function Ke(e){return new xn(e)}function zs(e,t,n){e.j=n?oi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function js(e,t,n){e.i=n?oi(t,!0):t}function Ys(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function wd(e,t,n){t instanceof ui?(e.h=t,kA(e.h,e.g)):(n||(t=ai(t,LA)),e.h=new ui(t,e.g))}function pt(e,t,n){e.h.set(t,n)}function Xs(e){return pt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function bA(e){return e instanceof xn?Ke(e):new xn(e,void 0)}function RA(e,t,n,s){var o=new xn(null,void 0);return e&&zs(o,e),t&&js(o,t),n&&Ys(o,n),s&&(o.l=s),o}function oi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ai(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,xA),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function xA(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var _d=/[#\/\?@]/g,NA=/[#\?:]/g,DA=/[#\?]/g,LA=/[#\?@]/g,OA=/#/g;function ui(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function un(e){e.g||(e.g=new ir,e.h=0,e.i&&CA(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}k=ui.prototype;k.add=function(e,t){un(this),this.i=null,e=sr(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function Ed(e,t){un(e),t=sr(e,t),Rn(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,e=e.g,Rn(e.h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Wu(e)))}function Td(e,t){return un(e),t=sr(e,t),Rn(e.g.h,t)}k.forEach=function(e,t){un(this),this.g.forEach(function(n,s){Ff(n,function(o){e.call(t,o,s,this)},this)},this)};k.T=function(){un(this);for(var e=this.g.R(),t=this.g.T(),n=[],s=0;s<t.length;s++)for(var o=e[s],u=0;u<o.length;u++)n.push(t[s]);return n};k.R=function(e){un(this);var t=[];if(typeof e=="string")Td(this,e)&&(t=Uf(t,this.g.get(sr(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Uf(t,e[n])}return t};k.set=function(e,t){return un(this),this.i=null,e=sr(this,e),Td(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};k.get=function(e,t){return e?(e=this.R(e),0<e.length?String(e[0]):t):t};function Ad(e,t,n){Ed(e,t),0<n.length&&(e.i=null,e.g.set(sr(e,t),fu(n)),e.h+=n.length)}k.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var s=t[n],o=encodeURIComponent(String(s));s=this.R(s);for(var u=0;u<s.length;u++){var l=o;s[u]!==""&&(l+="="+encodeURIComponent(String(s[u]))),e.push(l)}}return this.i=e.join("&")};function sr(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kA(e,t){t&&!e.j&&(un(e),e.i=null,e.g.forEach(function(n,s){var o=s.toLowerCase();s!=o&&(Ed(this,s),Ad(this,o,n))},e)),e.j=t}var MA=class{constructor(e,t){this.h=e,this.g=t}};function Id(e){this.l=e||PA,q.PerformanceNavigationTiming?(e=q.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(q.g&&q.g.Ea&&q.g.Ea()&&q.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var PA=10;function Sd(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function Cd(e){return e.h?1:e.g?e.g.size:0}function Hu(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Gu(e,t){e.g?e.g.add(t):e.h=t}function bd(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}Id.prototype.cancel=function(){if(this.i=Rd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function Rd(e){if(e.h!=null)return e.i.concat(e.h.D);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return fu(e.i)}function Ku(){}Ku.prototype.stringify=function(e){return q.JSON.stringify(e,void 0)};Ku.prototype.parse=function(e){return q.JSON.parse(e,void 0)};function FA(){this.g=new Ku}function UA(e,t,n){const s=n||"";try{qu(e,function(o,u){let l=o;Xr(o)&&(l=xu(o)),t.push(s+u+"="+encodeURIComponent(l))})}catch(o){throw t.push(s+"type="+encodeURIComponent("_badmap")),o}}function VA(e,t){const n=new Bs;if(q.Image){const s=new Image;s.onload=ks(Qs,n,s,"TestLoadImage: loaded",!0,t),s.onerror=ks(Qs,n,s,"TestLoadImage: error",!1,t),s.onabort=ks(Qs,n,s,"TestLoadImage: abort",!1,t),s.ontimeout=ks(Qs,n,s,"TestLoadImage: timeout",!1,t),q.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=e}else t(!1)}function Qs(e,t,n,s,o){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,o(s)}catch{}}function ci(e){this.l=e.$b||null,this.j=e.ib||!1}Ot(ci,Mu);ci.prototype.g=function(){return new Js(this.l,this.j)};ci.prototype.i=function(e){return function(){return e}}({});function Js(e,t){bt.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=zu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ot(Js,bt);var zu=0;k=Js.prototype;k.open=function(e,t){if(this.readyState!=zu)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,hi(this)};k.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||q).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))};k.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,li(this)),this.readyState=zu};k.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof q.ReadableStream!="undefined"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xd(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))};function xd(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}k.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?li(this):hi(this),this.readyState==3&&xd(this)}};k.Ua=function(e){this.g&&(this.response=this.responseText=e,li(this))};k.Ta=function(e){this.g&&(this.response=e,li(this))};k.ha=function(){this.g&&li(this)};function li(e){e.readyState=4,e.l=null,e.j=null,e.A=null,hi(e)}k.setRequestHeader=function(e,t){this.v.append(e,t)};k.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};k.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function hi(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var $A=q.JSON.parse;function Et(e){bt.call(this),this.headers=new ir,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Nd,this.K=this.L=!1}Ot(Et,bt);var Nd="",BA=/^https?$/i,qA=["POST","PUT"];k=Et.prototype;k.ea=function(e,t,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Uu.g(),this.C=this.u?hd(this.u):hd(Uu),this.g.onreadystatechange=Lt(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){Dd(this,u);return}e=n||"";const o=new ir(this.headers);s&&qu(s,function(u,l){o.set(l,u)}),s=ZT(o.T()),n=q.FormData&&e instanceof q.FormData,!(0<=Pf(qA,t))||s||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,l){this.g.setRequestHeader(l,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{kd(this),0<this.B&&((this.K=WA(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Lt(this.pa,this)):this.A=ku(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Dd(this,u)}};function WA(e){return nr&&iA()&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function HA(e){return e.toLowerCase()=="content-type"}k.pa=function(){typeof cu!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kt(this,"timeout"),this.abort(8))};function Dd(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ld(e),Zs(e)}function Ld(e){e.D||(e.D=!0,kt(e,"complete"),kt(e,"error"))}k.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,kt(this,"complete"),kt(this,"abort"),Zs(this))};k.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zs(this,!0)),Et.Z.M.call(this)};k.Fa=function(){this.s||(this.F||this.v||this.l?Od(this):this.cb())};k.cb=function(){Od(this)};function Od(e){if(e.h&&typeof cu!="undefined"&&(!e.C[1]||ze(e)!=4||e.ba()!=2)){if(e.v&&ze(e)==4)ku(e.Fa,0,e);else if(kt(e,"readystatechange"),ze(e)==4){e.h=!1;try{const f=e.ba();t:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var s;if(s=f===0){var o=String(e.H).match(vd)[1]||null;if(!o&&q.self&&q.self.location){var u=q.self.location.protocol;o=u.substr(0,u.length-1)}s=!BA.test(o?o.toLowerCase():"")}n=s}if(n)kt(e,"complete"),kt(e,"success");else{e.m=6;try{var l=2<ze(e)?e.g.statusText:""}catch{l=""}e.j=l+" ["+e.ba()+"]",Ld(e)}}finally{Zs(e)}}}}function Zs(e,t){if(e.g){kd(e);const n=e.g,s=e.C[0]?Os:null;e.g=null,e.C=null,t||kt(e,"ready");try{n.onreadystatechange=s}catch{}}}function kd(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(q.clearTimeout(e.A),e.A=null)}function ze(e){return e.g?e.g.readyState:0}k.ba=function(){try{return 2<ze(this)?this.g.status:-1}catch{return-1}};k.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};k.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),$A(t)}};function Md(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Nd:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}k.Da=function(){return this.m};k.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function GA(e){let t="";return gu(e,function(n,s){t+=s,t+=":",t+=n,t+=`\r
`}),t}function ju(e,t,n){t:{for(s in n){var s=!1;break t}s=!0}s||(n=GA(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):pt(e,t,n))}function fi(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Pd(e){this.za=0,this.l=[],this.h=new Bs,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=fi("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=fi("baseRetryDelayMs",5e3,e),this.$a=fi("retryDelaySeedMs",1e4,e),this.Ya=fi("forwardChannelMaxRetries",2,e),this.ra=fi("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Id(e&&e.concurrentRequestLimit),this.Ca=new FA,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||e.Xb!==!1}k=Pd.prototype;k.ma=8;k.G=1;function Yu(e){if(Fd(e),e.G==3){var t=e.V++,n=Ke(e.F);pt(n,"SID",e.J),pt(n,"RID",t),pt(n,"TYPE","terminate"),di(e,n),t=new ri(e,e.h,t,void 0),t.K=2,t.v=Xs(Ke(n)),n=!1,q.navigator&&q.navigator.sendBeacon&&(n=q.navigator.sendBeacon(t.v.toString(),"")),!n&&q.Image&&(new Image().src=t.v,n=!0),n||(t.g=Kd(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ii(t)}Hd(e)}k.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch{}};function to(e){e.g&&(Ju(e),e.g.cancel(),e.g=null)}function Fd(e){to(e),e.u&&(q.clearTimeout(e.u),e.u=null),no(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&q.clearTimeout(e.m),e.m=null)}function Xu(e,t){e.l.push(new MA(e.Za++,t)),e.G==3&&eo(e)}function eo(e){Sd(e.i)||e.m||(e.m=!0,Nu(e.Ha,e),e.C=0)}function KA(e,t){return Cd(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.l=t.D.concat(e.l),!0):e.G==1||e.G==2||e.C>=(e.Xa?0:e.Ya)?!1:(e.m=ei(Lt(e.Ha,e,t),Wd(e,e.C)),e.C++,!0)}k.Ha=function(e){if(this.m)if(this.m=null,this.G==1){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const o=new ri(this,this.h,e,void 0);let u=this.s;if(this.P&&(u?(u=qf(u),Hf(u,this.P)):u=this.P),this.o===null&&(o.H=u),this.ja)t:{for(var t=0,n=0;n<this.l.length;n++){e:{var s=this.l[n];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break e}s=void 0}if(s===void 0)break;if(t+=s,4096<t){t=n;break t}if(t===4096||n===this.l.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Vd(this,o,t),n=Ke(this.F),pt(n,"RID",e),pt(n,"CVER",22),this.D&&pt(n,"X-HTTP-Session-Id",this.D),di(this,n),this.o&&u&&ju(n,this.o,u),Gu(this.i,o),this.Ra&&pt(n,"TYPE","init"),this.ja?(pt(n,"$req",t),pt(n,"SID","null"),o.$=!0,$u(o,n,null)):$u(o,n,t),this.G=2}}else this.G==3&&(e?Ud(this,e):this.l.length==0||Sd(this.i)||Ud(this))};function Ud(e,t){var n;t?n=t.m:n=e.V++;const s=Ke(e.F);pt(s,"SID",e.J),pt(s,"RID",n),pt(s,"AID",e.U),di(e,s),e.o&&e.s&&ju(s,e.o,e.s),n=new ri(e,e.h,n,e.C+1),e.o===null&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Vd(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Gu(e.i,n),$u(n,s,t)}function di(e,t){e.j&&qu({},function(n,s){pt(t,s,n)})}function Vd(e,t,n){n=Math.min(e.l.length,n);var s=e.j?Lt(e.j.Oa,e.j,e):null;t:{var o=e.l;let u=-1;for(;;){const l=["count="+n];u==-1?0<n?(u=o[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let f=!0;for(let p=0;p<n;p++){let y=o[p].h;const E=o[p].g;if(y-=u,0>y)u=Math.max(0,o[p].h-100),f=!1;else try{UA(E,l,"req"+y+"_")}catch{s&&s(E)}}if(f){s=l.join("&");break t}}}return e=e.l.splice(0,n),t.D=e,s}function $d(e){e.g||e.u||(e.Y=1,Nu(e.Ga,e),e.A=0)}function Qu(e){return e.g||e.u||3<=e.A?!1:(e.Y++,e.u=ei(Lt(e.Ga,e),Wd(e,e.A)),e.A++,!0)}k.Ga=function(){if(this.u=null,Bd(this),this.$&&!(this.L||this.g==null||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=ei(Lt(this.bb,this),e)}};k.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Yt(10),to(this),Bd(this))};function Ju(e){e.B!=null&&(q.clearTimeout(e.B),e.B=null)}function Bd(e){e.g=new ri(e,e.h,"rpc",e.Y),e.o===null&&(e.g.H=e.s),e.g.O=0;var t=Ke(e.oa);pt(t,"RID","rpc"),pt(t,"SID",e.J),pt(t,"CI",e.N?"0":"1"),pt(t,"AID",e.U),di(e,t),pt(t,"TYPE","xmlhttp"),e.o&&e.s&&ju(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Xs(Ke(t)),n.s=null,n.U=!0,gd(n,e)}k.ab=function(){this.v!=null&&(this.v=null,to(this),Qu(this),Yt(19))};function no(e){e.v!=null&&(q.clearTimeout(e.v),e.v=null)}function qd(e,t){var n=null;if(e.g==t){no(e),Ju(e),e.g=null;var s=2}else if(Hu(e.i,t))n=t.D,bd(e.i,t),s=1;else return;if(e.I=t.N,e.G!=0){if(t.i)if(s==1){n=t.s?t.s.length:0,t=Date.now()-t.F;var o=e.C;s=qs(),kt(s,new cd(s,n,t,o)),eo(e)}else $d(e);else if(o=t.o,o==3||o==0&&0<e.I||!(s==1&&KA(e,t)||s==2&&Qu(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),o){case 1:Nn(e,5);break;case 4:Nn(e,10);break;case 3:Nn(e,6);break;default:Nn(e,2)}}}function Wd(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Nn(e,t){if(e.h.info("Error code "+t),t==2){var n=null;e.j&&(n=null);var s=Lt(e.jb,e);n||(n=new xn("//www.google.com/images/cleardot.gif"),q.location&&q.location.protocol=="http"||zs(n,"https"),Xs(n)),VA(n.toString(),s)}else Yt(2);e.G=0,e.j&&e.j.va(t),Hd(e),Fd(e)}k.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Yt(2)):(this.h.info("Failed to ping google.com"),Yt(1))};function Hd(e){e.G=0,e.I=-1,e.j&&((Rd(e.i).length!=0||e.l.length!=0)&&(e.i.i.length=0,fu(e.l),e.l.length=0),e.j.ua())}function Gd(e,t,n){let s=bA(n);if(s.i!="")t&&js(s,t+"."+s.i),Ys(s,s.m);else{const o=q.location;s=RA(o.protocol,t?t+"."+o.hostname:o.hostname,+o.port,n)}return e.aa&&gu(e.aa,function(o,u){pt(s,u,o)}),t=e.D,n=e.sa,t&&n&&pt(s,t,n),pt(s,"VER",e.ma),di(e,s),s}function Kd(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ba&&!e.qa?new Et(new ci({ib:!0})):new Et(e.qa),t.L=e.H,t}function zd(){}k=zd.prototype;k.xa=function(){};k.wa=function(){};k.va=function(){};k.ua=function(){};k.Oa=function(){};function ro(){if(nr&&!(10<=Number(sA)))throw Error("Environmental error: no available transport.")}ro.prototype.g=function(e,t){return new le(e,t)};function le(e,t){bt.call(this),this.g=new Pd(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Ms(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ms(t)&&(this.g.D=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new or(this)}Ot(le,bt);le.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Nu(Lt(e.hb,e,t))),Yt(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Gd(e,null,e.W),eo(e)};le.prototype.close=function(){Yu(this.g)};le.prototype.u=function(e){if(typeof e=="string"){var t={};t.__data__=e,Xu(this.g,t)}else this.v?(t={},t.__data__=xu(e),Xu(this.g,t)):Xu(this.g,e)};le.prototype.M=function(){this.g.j=null,delete this.j,Yu(this.g),delete this.g,le.Z.M.call(this)};function jd(e){Pu.call(this);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Ot(jd,Pu);function Yd(){Fu.call(this),this.status=1}Ot(Yd,Fu);function or(e){this.g=e}Ot(or,zd);or.prototype.xa=function(){kt(this.g,"a")};or.prototype.wa=function(e){kt(this.g,new jd(e))};or.prototype.va=function(e){kt(this.g,new Yd(e))};or.prototype.ua=function(){kt(this.g,"b")};ro.prototype.createWebChannel=ro.prototype.g;le.prototype.send=le.prototype.u;le.prototype.open=le.prototype.m;le.prototype.close=le.prototype.close;Ws.NO_ERROR=0;Ws.TIMEOUT=8;Ws.HTTP_ERROR=6;ld.COMPLETE="complete";fd.EventType=ni;ni.OPEN="a";ni.CLOSE="b";ni.ERROR="c";ni.MESSAGE="d";bt.prototype.listen=bt.prototype.N;Et.prototype.listenOnce=Et.prototype.O;Et.prototype.getLastError=Et.prototype.La;Et.prototype.getLastErrorCode=Et.prototype.Da;Et.prototype.getStatus=Et.prototype.ba;Et.prototype.getResponseJson=Et.prototype.Qa;Et.prototype.getResponseText=Et.prototype.ga;Et.prototype.send=Et.prototype.ea;var zA=function(){return new ro},jA=function(){return qs()},Zu=Ws,YA=ld,XA=Cn,Xd={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},QA=ci,io=fd,JA=Et;const Qd="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}te.UNAUTHENTICATED=new te(null),te.GOOGLE_CREDENTIALS=new te("google-credentials-uid"),te.FIRST_PARTY=new te("first-party-uid"),te.MOCK_USER=new te("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ar="9.6.5";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn=new Of("@firebase/firestore");function Jd(){return Dn.logLevel}function F(e,...t){if(Dn.logLevel<=ot.DEBUG){const n=t.map(tc);Dn.debug(`Firestore (${ar}): ${e}`,...n)}}function cn(e,...t){if(Dn.logLevel<=ot.ERROR){const n=t.map(tc);Dn.error(`Firestore (${ar}): ${e}`,...n)}}function Zd(e,...t){if(Dn.logLevel<=ot.WARN){const n=t.map(tc);Dn.warn(`Firestore (${ar}): ${e}`,...n)}}function tc(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch{return e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j(e="Unexpected state"){const t=`FIRESTORE (${ar}) INTERNAL ASSERTION FAILED: `+e;throw cn(t),new Error(t)}function ht(e,t){e||j()}function K(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends xs{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class tI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(te.UNAUTHENTICATED))}shutdown(){}}class eI{constructor(t){this.t=t,this.currentUser=te.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new ln;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ln,t.enqueueRetryable(()=>o(this.currentUser))};const l=()=>{const p=u;t.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},f=p=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(p=>f(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ln)}},0),l()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ht(typeof s.accessToken=="string"),new ZA(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ht(t===null||typeof t=="string"),new te(t)}}class nI{constructor(t,n,s){this.type="FirstParty",this.user=te.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const o=t.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),s&&this.headers.set("X-Goog-Iam-Authorization-Token",s)}}class rI{constructor(t,n,s){this.h=t,this.l=n,this.m=s}getToken(){return Promise.resolve(new nI(this.h,this.l,this.m))}start(t,n){t.enqueueRetryable(()=>n(te.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iI{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sI{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null}start(t,n){this.o=o=>{t.enqueueRetryable(()=>(u=>(u.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`),n(u.token)))(o))};const s=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?s(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ht(typeof n.token=="string"),new iI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.p(s),this.T=s=>n.writeSequenceNumber(s))}p(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(e){const t=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ec.I=-1;class tg{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let s="";for(;s.length<20;){const o=oI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=t.charAt(o[u]%t.length))}return s}}function ut(e,t){return e<t?-1:e>t?1:0}function ur(e,t,n){return e.length===t.length&&e.every((s,o)=>n(s,t[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new B(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new B(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new B(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return he.fromMillis(Date.now())}static fromDate(t){return he.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor(1e6*(t-1e3*n));return new he(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ut(this.nanoseconds,t.nanoseconds):ut(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new nt(t)}static min(){return new nt(new he(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ln(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ng(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(t,n,s){n===void 0?n=0:n>t.length&&j(),s===void 0?s=t.length-n:s>t.length-n&&j(),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return gi.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof gi?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let o=0;o<s;o++){const u=t.get(o),l=n.get(o);if(u<l)return-1;if(u>l)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class _t extends gi{construct(t,n,s){return new _t(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new B(x.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const aI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ee extends gi{construct(t,n,s){return new ee(t,n,s)}static isValidIdentifier(t){return aI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ee.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ee(["__name__"])}static fromServerFormat(t){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new B(x.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let l=!1;for(;o<t.length;){const f=t[o];if(f==="\\"){if(o+1===t.length)throw new B(x.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new B(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,o+=2}else f==="`"?(l=!l,o++):f!=="."||l?(s+=f,o++):(u(),o++)}if(u(),l)throw new B(x.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ee(n)}static emptyPath(){return new ee([])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(t){this.fields=t,t.sort(ee.comparator)}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ur(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=atob(t);return new Mt(n)}static fromUint8Array(t){const n=function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o}(t);return new Mt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ut(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const uI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hn(e){if(ht(!!e),typeof e=="string"){let t=0;const n=uI.exec(e);if(ht(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Tt(e.seconds),nanos:Tt(e.nanos)}}function Tt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function cr(e){return typeof e=="string"?Mt.fromBase64String(e):Mt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ig(e){const t=e.mapValue.fields.__previous_value__;return rg(t)?ig(t):t}function pi(e){const t=hn(e.mapValue.fields.__local_write_time__.timestampValue);return new he(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(e){return e==null}function so(e){return e===0&&1/e==-1/0}function cI(e){return typeof e=="number"&&Number.isInteger(e)&&!so(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(t){this.path=t}static fromPath(t){return new H(_t.fromString(t))}static fromName(t){return new H(_t.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return t!==null&&_t.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return _t.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new H(new _t(t.slice()))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?rg(e)?4:10:j()}function Me(e,t){if(e===t)return!0;const n=On(e);if(n!==On(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return pi(e).isEqual(pi(t));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=hn(s.timestampValue),l=hn(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,o){return cr(s.bytesValue).isEqual(cr(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,o){return Tt(s.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(s.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)}(e,t);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Tt(s.integerValue)===Tt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=Tt(s.doubleValue),l=Tt(o.doubleValue);return u===l?so(u)===so(l):isNaN(u)&&isNaN(l)}return!1}(e,t);case 9:return ur(e.arrayValue.values||[],t.arrayValue.values||[],Me);case 10:return function(s,o){const u=s.mapValue.fields||{},l=o.mapValue.fields||{};if(eg(u)!==eg(l))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(l[f]===void 0||!Me(u[f],l[f])))return!1;return!0}(e,t);default:return j()}}function mi(e,t){return(e.values||[]).find(n=>Me(n,t))!==void 0}function hr(e,t){if(e===t)return 0;const n=On(e),s=On(t);if(n!==s)return ut(n,s);switch(n){case 0:return 0;case 1:return ut(e.booleanValue,t.booleanValue);case 2:return function(o,u){const l=Tt(o.integerValue||o.doubleValue),f=Tt(u.integerValue||u.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(e,t);case 3:return sg(e.timestampValue,t.timestampValue);case 4:return sg(pi(e),pi(t));case 5:return ut(e.stringValue,t.stringValue);case 6:return function(o,u){const l=cr(o),f=cr(u);return l.compareTo(f)}(e.bytesValue,t.bytesValue);case 7:return function(o,u){const l=o.split("/"),f=u.split("/");for(let p=0;p<l.length&&p<f.length;p++){const y=ut(l[p],f[p]);if(y!==0)return y}return ut(l.length,f.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,u){const l=ut(Tt(o.latitude),Tt(u.latitude));return l!==0?l:ut(Tt(o.longitude),Tt(u.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(o,u){const l=o.values||[],f=u.values||[];for(let p=0;p<l.length&&p<f.length;++p){const y=hr(l[p],f[p]);if(y)return y}return ut(l.length,f.length)}(e.arrayValue,t.arrayValue);case 10:return function(o,u){const l=o.fields||{},f=Object.keys(l),p=u.fields||{},y=Object.keys(p);f.sort(),y.sort();for(let E=0;E<f.length&&E<y.length;++E){const I=ut(f[E],y[E]);if(I!==0)return I;const R=hr(l[f[E]],p[y[E]]);if(R!==0)return R}return ut(f.length,y.length)}(e.mapValue,t.mapValue);default:throw j()}}function sg(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ut(e,t);const n=hn(e),s=hn(t),o=ut(n.seconds,s.seconds);return o!==0?o:ut(n.nanos,s.nanos)}function rc(e){return ic(e)}function ic(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(s){const o=hn(s);return`time(${o.seconds},${o.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?cr(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,H.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(s){let o="[",u=!0;for(const l of s.values||[])u?u=!1:o+=",",o+=ic(l);return o+"]"}(e.arrayValue):"mapValue"in e?function(s){const o=Object.keys(s.fields||{}).sort();let u="{",l=!0;for(const f of o)l?l=!1:u+=",",u+=`${f}:${ic(s.fields[f])}`;return u+"}"}(e.mapValue):j();var t,n}function sc(e){return!!e&&"integerValue"in e}function oc(e){return!!e&&"arrayValue"in e}function og(e){return!!e&&"nullValue"in e}function ag(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function oo(e){return!!e&&"mapValue"in e}function yi(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ln(e.mapValue.fields,(n,s)=>t.mapValue.fields[n]=yi(s)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=yi(e.arrayValue.values[n]);return t}return Object.assign({},e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t){this.value=t}static empty(){return new Ae({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!oo(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=yi(n)}setAll(t){let n=ee.emptyPath(),s={},o=[];t.forEach((l,f)=>{if(!n.isImmediateParentOf(f)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=f.popLast()}l?s[f.lastSegment()]=yi(l):o.push(f.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(t){const n=this.field(t.popLast());oo(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Me(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=n.mapValue.fields[t.get(s)];oo(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,s){Ln(n,(o,u)=>t[o]=u);for(const o of s)delete t[o]}clone(){return new Ae(yi(this.value))}}function ug(e){const t=[];return Ln(e.fields,(n,s)=>{const o=new ee([n]);if(oo(s)){const u=ug(s.mapValue).fields;if(u.length===0)t.push(o);else for(const l of u)t.push(o.child(l))}else t.push(o)}),new nc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(t,n,s,o,u){this.key=t,this.documentType=n,this.version=s,this.data=o,this.documentState=u}static newInvalidDocument(t){return new qt(t,0,nt.min(),Ae.empty(),0)}static newFoundDocument(t,n,s){return new qt(t,1,n,s,0)}static newNoDocument(t,n){return new qt(t,2,n,Ae.empty(),0)}static newUnknownDocument(t,n){return new qt(t,3,n,Ae.empty(),2)}convertToFoundDocument(t,n){return this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ae.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ae.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof qt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(t,n=null,s=[],o=[],u=null,l=null,f=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=l,this.endAt=f,this.R=null}}function cg(e,t=null,n=[],s=[],o=null,u=null,l=null){return new lI(e,t,n,s,o,u,l)}function ac(e){const t=K(e);if(t.R===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>fI(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(o){return o.field.canonicalString()+o.dir}(s)).join(","),lr(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=ao(t.startAt)),t.endAt&&(n+="|ub:",n+=ao(t.endAt)),t.R=n}return t.R}function hI(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(n=>{return`${(s=n).field.canonicalString()} ${s.op} ${rc(s.value)}`;var s}).join(", ")}]`),lr(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(n=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(n)).join(", ")}]`),e.startAt&&(t+=", startAt: "+ao(e.startAt)),e.endAt&&(t+=", endAt: "+ao(e.endAt)),`Target(${t})`}function uc(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let o=0;o<e.orderBy.length;o++)if(!_I(e.orderBy[o],t.orderBy[o]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let o=0;o<e.filters.length;o++)if(n=e.filters[o],s=t.filters[o],n.op!==s.op||!n.field.isEqual(s.field)||!Me(n.value,s.value))return!1;var n,s;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!fg(e.startAt,t.startAt)&&fg(e.endAt,t.endAt)}function cc(e){return H.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}class ne extends class{}{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.P(t,n,s):new dI(t,n,s):n==="array-contains"?new mI(t,s):n==="in"?new yI(t,s):n==="not-in"?new vI(t,s):n==="array-contains-any"?new wI(t,s):new ne(t,n,s)}static P(t,n,s){return n==="in"?new gI(t,s):new pI(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.v(hr(n,this.value)):n!==null&&On(this.value)===On(n)&&this.v(hr(n,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return j()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}function fI(e){return e.field.canonicalString()+e.op.toString()+rc(e.value)}class dI extends ne{constructor(t,n,s){super(t,n,s),this.key=H.fromName(s.referenceValue)}matches(t){const n=H.comparator(t.key,this.key);return this.v(n)}}class gI extends ne{constructor(t,n){super(t,"in",n),this.keys=lg("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class pI extends ne{constructor(t,n){super(t,"not-in",n),this.keys=lg("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function lg(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>H.fromName(s.referenceValue))}class mI extends ne{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return oc(n)&&mi(n.arrayValue,this.value)}}class yI extends ne{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&mi(this.value.arrayValue,n)}}class vI extends ne{constructor(t,n){super(t,"not-in",n)}matches(t){if(mi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!mi(this.value.arrayValue,n)}}class wI extends ne{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!oc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>mi(this.value.arrayValue,s))}}class lc{constructor(t,n){this.position=t,this.before=n}}function ao(e){return`${e.before?"b":"a"}:${e.position.map(t=>rc(t)).join(",")}`}class vi{constructor(t,n="asc"){this.field=t,this.dir=n}}function _I(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function hg(e,t,n){let s=0;for(let o=0;o<e.position.length;o++){const u=t[o],l=e.position[o];if(u.field.isKeyField()?s=H.comparator(H.fromName(l.referenceValue),n.key):s=hr(l,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return e.before?s<=0:s<0}function fg(e,t){if(e===null)return t===null;if(t===null||e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Me(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(t,n=null,s=[],o=[],u=null,l="F",f=null,p=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=l,this.startAt=f,this.endAt=p,this.S=null,this.D=null,this.startAt,this.endAt}}function EI(e,t,n,s,o,u,l,f){return new uo(e,t,n,s,o,u,l,f)}function hc(e){return new uo(e)}function co(e){return!lr(e.limit)&&e.limitType==="F"}function fc(e){return!lr(e.limit)&&e.limitType==="L"}function TI(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function AI(e){for(const t of e.filters)if(t.V())return t.field;return null}function II(e){return e.collectionGroup!==null}function wi(e){const t=K(e);if(t.S===null){t.S=[];const n=AI(t),s=TI(t);if(n!==null&&s===null)n.isKeyField()||t.S.push(new vi(n)),t.S.push(new vi(ee.keyField(),"asc"));else{let o=!1;for(const u of t.explicitOrderBy)t.S.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new vi(ee.keyField(),u))}}}return t.S}function kn(e){const t=K(e);if(!t.D)if(t.limitType==="F")t.D=cg(t.path,t.collectionGroup,wi(t),t.filters,t.limit,t.startAt,t.endAt);else{const n=[];for(const u of wi(t)){const l=u.dir==="desc"?"asc":"desc";n.push(new vi(u.field,l))}const s=t.endAt?new lc(t.endAt.position,!t.endAt.before):null,o=t.startAt?new lc(t.startAt.position,!t.startAt.before):null;t.D=cg(t.path,t.collectionGroup,n,t.filters,t.limit,s,o)}return t.D}function SI(e,t,n){return new uo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function lo(e,t){return uc(kn(e),kn(t))&&e.limitType===t.limitType}function dg(e){return`${ac(kn(e))}|lt:${e.limitType}`}function dc(e){return`Query(target=${hI(kn(e))}; limitType=${e.limitType})`}function ho(e,t){return t.isFoundDocument()&&function(n,s){const o=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):H.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(e,t)&&function(n,s){for(const o of n.explicitOrderBy)if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(e,t)&&function(n,s){for(const o of n.filters)if(!o.matches(s))return!1;return!0}(e,t)&&function(n,s){return!(n.startAt&&!hg(n.startAt,wi(n),s)||n.endAt&&hg(n.endAt,wi(n),s))}(e,t)}function gg(e){return(t,n)=>{let s=!1;for(const o of wi(e)){const u=CI(o,t,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function CI(e,t,n){const s=e.field.isKeyField()?H.comparator(t.key,n.key):function(o,u,l){const f=u.data.field(o),p=l.data.field(o);return f!==null&&p!==null?hr(f,p):j()}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return j()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:so(t)?"-0":t}}function mg(e){return{integerValue:""+e}}function bI(e,t){return cI(t)?mg(t):pg(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this._=void 0}}function RI(e,t,n){return e instanceof go?function(s,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(n,t):e instanceof _i?vg(e,t):e instanceof Ei?wg(e,t):function(s,o){const u=yg(s,o),l=_g(u)+_g(s.N);return sc(u)&&sc(s.N)?mg(l):pg(s.k,l)}(e,t)}function xI(e,t,n){return e instanceof _i?vg(e,t):e instanceof Ei?wg(e,t):n}function yg(e,t){return e instanceof po?sc(n=t)||function(s){return!!s&&"doubleValue"in s}(n)?t:{integerValue:0}:null;var n}class go extends fo{}class _i extends fo{constructor(t){super(),this.elements=t}}function vg(e,t){const n=Eg(t);for(const s of e.elements)n.some(o=>Me(o,s))||n.push(s);return{arrayValue:{values:n}}}class Ei extends fo{constructor(t){super(),this.elements=t}}function wg(e,t){let n=Eg(t);for(const s of e.elements)n=n.filter(o=>!Me(o,s));return{arrayValue:{values:n}}}class po extends fo{constructor(t,n){super(),this.k=t,this.N=n}}function _g(e){return Tt(e.integerValue||e.doubleValue)}function Eg(e){return oc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function NI(e,t){return e.field.isEqual(t.field)&&function(n,s){return n instanceof _i&&s instanceof _i||n instanceof Ei&&s instanceof Ei?ur(n.elements,s.elements,Me):n instanceof po&&s instanceof po?Me(n.N,s.N):n instanceof go&&s instanceof go}(e.transform,t.transform)}class DI{constructor(t,n){this.version=t,this.transformResults=n}}class fr{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new fr}static exists(t){return new fr(void 0,t)}static updateTime(t){return new fr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function mo(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class yo{}function LI(e,t,n){e instanceof pc?function(s,o,u){const l=s.value.clone(),f=Sg(s.fieldTransforms,o,u.transformResults);l.setAll(f),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(e,t,n):e instanceof dr?function(s,o,u){if(!mo(s.precondition,o))return void o.convertToUnknownDocument(u.version);const l=Sg(s.fieldTransforms,o,u.transformResults),f=o.data;f.setAll(Ig(s)),f.setAll(l),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(e,t,n):function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,t,n)}function gc(e,t,n){e instanceof pc?function(s,o,u){if(!mo(s.precondition,o))return;const l=s.value.clone(),f=Cg(s.fieldTransforms,u,o);l.setAll(f),o.convertToFoundDocument(Ag(o),l).setHasLocalMutations()}(e,t,n):e instanceof dr?function(s,o,u){if(!mo(s.precondition,o))return;const l=Cg(s.fieldTransforms,u,o),f=o.data;f.setAll(Ig(s)),f.setAll(l),o.convertToFoundDocument(Ag(o),f).setHasLocalMutations()}(e,t,n):function(s,o){mo(s.precondition,o)&&o.convertToNoDocument(nt.min())}(e,t)}function OI(e,t){let n=null;for(const s of e.fieldTransforms){const o=t.data.field(s.field),u=yg(s.transform,o||null);u!=null&&(n==null&&(n=Ae.empty()),n.set(s.field,u))}return n||null}function Tg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ur(n,s,(o,u)=>NI(o,u))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Ag(e){return e.isFoundDocument()?e.version:nt.min()}class pc extends yo{constructor(t,n,s,o=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}}class dr extends yo{constructor(t,n,s,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}}function Ig(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function Sg(e,t,n){const s=new Map;ht(e.length===n.length);for(let o=0;o<n.length;o++){const u=e[o],l=u.transform,f=t.data.field(u.field);s.set(u.field,xI(l,f,n[o]))}return s}function Cg(e,t,n){const s=new Map;for(const o of e){const u=o.transform,l=n.data.field(o.field);s.set(o.field,RI(u,l,t))}return s}class kI extends yo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}}class MI extends yo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(t){this.count=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,tt;function FI(e){switch(e){default:return j();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function bg(e){if(e===void 0)return cn("GRPC error has no .code"),x.UNKNOWN;switch(e){case At.OK:return x.OK;case At.CANCELLED:return x.CANCELLED;case At.UNKNOWN:return x.UNKNOWN;case At.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case At.INTERNAL:return x.INTERNAL;case At.UNAVAILABLE:return x.UNAVAILABLE;case At.UNAUTHENTICATED:return x.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case At.NOT_FOUND:return x.NOT_FOUND;case At.ALREADY_EXISTS:return x.ALREADY_EXISTS;case At.PERMISSION_DENIED:return x.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case At.ABORTED:return x.ABORTED;case At.OUT_OF_RANGE:return x.OUT_OF_RANGE;case At.UNIMPLEMENTED:return x.UNIMPLEMENTED;case At.DATA_LOSS:return x.DATA_LOSS;default:return j()}}(tt=At||(At={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t,n){this.comparator=t,this.root=n||Pt.EMPTY}insert(t,n){return new Wt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(t){return new Wt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new vo(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new vo(this.root,t,this.comparator,!1)}getReverseIterator(){return new vo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new vo(this.root,t,this.comparator,!0)}}class vo{constructor(t,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?s(t.key,n):1,o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Pt{constructor(t,n,s,o,u){this.key=t,this.value=n,this.color=s!=null?s:Pt.RED,this.left=o!=null?o:Pt.EMPTY,this.right=u!=null?u:Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,o,u){return new Pt(t!=null?t:this.key,n!=null?n:this.value,s!=null?s:this.color,o!=null?o:this.left,u!=null?u:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let o=this;const u=s(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return Pt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw j();const t=this.left.check();if(t!==this.right.check())throw j();return t+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw j()}get value(){throw j()}get color(){throw j()}get left(){throw j()}get right(){throw j()}copy(e,t,n,s,o){return this}insert(e,t,n){return new Pt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(t){this.comparator=t,this.data=new Wt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rg(this.data.getIterator())}getIteratorFrom(t){return new Rg(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof Ft)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ft(this.comparator);return n.data=t,n}}class Rg{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=new Wt(H.comparator);function Mn(){return UI}const VI=new Wt(H.comparator);function mc(){return VI}const $I=new Wt(H.comparator);function BI(){return $I}const qI=new Ft(H.comparator);function dt(...e){let t=qI;for(const n of e)t=t.add(n);return t}const WI=new Ft(ut);function xg(){return WI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(t,n,s,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n){const s=new Map;return s.set(t,Ti.createSynthesizedTargetChangeForCurrentChange(t,n)),new wo(nt.min(),s,xg(),Mn(),dt())}}class Ti{constructor(t,n,s,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n){return new Ti(Mt.EMPTY_BYTE_STRING,n,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(t,n,s,o){this.$=t,this.removedTargetIds=n,this.key=s,this.O=o}}class Ng{constructor(t,n){this.targetId=t,this.M=n}}class Dg{constructor(t,n,s=Mt.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Lg{constructor(){this.F=0,this.L=kg(),this.B=Mt.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return this.F!==0}get j(){return this.q}W(t){t.approximateByteSize()>0&&(this.q=!0,this.B=t)}G(){let t=dt(),n=dt(),s=dt();return this.L.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:j()}}),new Ti(this.B,this.U,t,n,s)}H(){this.q=!1,this.L=kg()}J(t,n){this.q=!0,this.L=this.L.insert(t,n)}Y(t){this.q=!0,this.L=this.L.remove(t)}X(){this.F+=1}Z(){this.F-=1}tt(){this.q=!0,this.U=!0}}class HI{constructor(t){this.et=t,this.nt=new Map,this.st=Mn(),this.it=Og(),this.rt=new Ft(ut)}ot(t){for(const n of t.$)t.O&&t.O.isFoundDocument()?this.ct(n,t.O):this.at(n,t.key,t.O);for(const n of t.removedTargetIds)this.at(n,t.key,t.O)}ut(t){this.forEachTarget(t,n=>{const s=this.ht(n);switch(t.state){case 0:this.lt(n)&&s.W(t.resumeToken);break;case 1:s.Z(),s.K||s.H(),s.W(t.resumeToken);break;case 2:s.Z(),s.K||this.removeTarget(n);break;case 3:this.lt(n)&&(s.tt(),s.W(t.resumeToken));break;case 4:this.lt(n)&&(this.ft(n),s.W(t.resumeToken));break;default:j()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.nt.forEach((s,o)=>{this.lt(o)&&n(o)})}dt(t){const n=t.targetId,s=t.M.count,o=this.wt(n);if(o){const u=o.target;if(cc(u))if(s===0){const l=new H(u.path);this.at(n,l,qt.newNoDocument(l,nt.min()))}else ht(s===1);else this._t(n)!==s&&(this.ft(n),this.rt=this.rt.add(n))}}gt(t){const n=new Map;this.nt.forEach((u,l)=>{const f=this.wt(l);if(f){if(u.current&&cc(f.target)){const p=new H(f.target.path);this.st.get(p)!==null||this.yt(l,p)||this.at(l,p,qt.newNoDocument(p,t))}u.j&&(n.set(l,u.G()),u.H())}});let s=dt();this.it.forEach((u,l)=>{let f=!0;l.forEachWhile(p=>{const y=this.wt(p);return!y||y.purpose===2||(f=!1,!1)}),f&&(s=s.add(u))});const o=new wo(t,n,this.rt,this.st,s);return this.st=Mn(),this.it=Og(),this.rt=new Ft(ut),o}ct(t,n){if(!this.lt(t))return;const s=this.yt(t,n.key)?2:0;this.ht(t).J(n.key,s),this.st=this.st.insert(n.key,n),this.it=this.it.insert(n.key,this.Tt(n.key).add(t))}at(t,n,s){if(!this.lt(t))return;const o=this.ht(t);this.yt(t,n)?o.J(n,1):o.Y(n),this.it=this.it.insert(n,this.Tt(n).delete(t)),s&&(this.st=this.st.insert(n,s))}removeTarget(t){this.nt.delete(t)}_t(t){const n=this.ht(t).G();return this.et.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}X(t){this.ht(t).X()}ht(t){let n=this.nt.get(t);return n||(n=new Lg,this.nt.set(t,n)),n}Tt(t){let n=this.it.get(t);return n||(n=new Ft(ut),this.it=this.it.insert(t,n)),n}lt(t){const n=this.wt(t)!==null;return n||F("WatchChangeAggregator","Detected inactive target",t),n}wt(t){const n=this.nt.get(t);return n&&n.K?null:this.et.Et(t)}ft(t){this.nt.set(t,new Lg),this.et.getRemoteKeysForTarget(t).forEach(n=>{this.at(t,n,null)})}yt(t,n){return this.et.getRemoteKeysForTarget(t).has(n)}}function Og(){return new Wt(H.comparator)}function kg(){return new Wt(H.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),KI=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class zI{constructor(t,n){this.databaseId=t,this.C=n}}function Eo(e,t){return e.C?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Mg(e,t){return e.C?t.toBase64():t.toUint8Array()}function jI(e,t){return Eo(e,t.toTimestamp())}function je(e){return ht(!!e),nt.fromTimestamp(function(t){const n=hn(t);return new he(n.seconds,n.nanos)}(e))}function yc(e,t){return function(n){return new _t(["projects",n.projectId,"databases",n.database])}(e).child("documents").child(t).canonicalString()}function Pg(e){const t=_t.fromString(e);return ht(qg(t)),t}function vc(e,t){return yc(e.databaseId,t.path)}function wc(e,t){const n=Pg(t);if(n.get(1)!==e.databaseId.projectId)throw new B(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new B(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new H(Fg(n))}function _c(e,t){return yc(e.databaseId,t)}function YI(e){const t=Pg(e);return t.length===4?_t.emptyPath():Fg(t)}function Ec(e){return new _t(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Fg(e){return ht(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Ug(e,t,n){return{name:vc(e,t),fields:n.value.mapValue.fields}}function XI(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:j()}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(p,y){return p.C?(ht(y===void 0||typeof y=="string"),Mt.fromBase64String(y||"")):(ht(y===void 0||y instanceof Uint8Array),Mt.fromUint8Array(y||new Uint8Array))}(e,t.targetChange.resumeToken),l=t.targetChange.cause,f=l&&function(p){const y=p.code===void 0?x.UNKNOWN:bg(p.code);return new B(y,p.message||"")}(l);n=new Dg(s,o,u,f||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=wc(e,s.document.name),u=je(s.document.updateTime),l=new Ae({mapValue:{fields:s.document.fields}}),f=qt.newFoundDocument(o,u,l),p=s.targetIds||[],y=s.removedTargetIds||[];n=new _o(p,y,f.key,f)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=wc(e,s.document),u=s.readTime?je(s.readTime):nt.min(),l=qt.newNoDocument(o,u),f=s.removedTargetIds||[];n=new _o([],f,l.key,l)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=wc(e,s.document),u=s.removedTargetIds||[];n=new _o([],u,o,null)}else{if(!("filter"in t))return j();{t.filter;const s=t.filter;s.targetId;const o=s.count||0,u=new PI(o),l=s.targetId;n=new Ng(l,u)}}return n}function QI(e,t){let n;if(t instanceof pc)n={update:Ug(e,t.key,t.value)};else if(t instanceof kI)n={delete:vc(e,t.key)};else if(t instanceof dr)n={update:Ug(e,t.key,t.data),updateMask:aS(t.fieldMask)};else{if(!(t instanceof MI))return j();n={verify:vc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(o,u){const l=u.transform;if(l instanceof go)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof _i)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ei)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof po)return{fieldPath:u.field.canonicalString(),increment:l.N};throw j()}(0,s))),t.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:jI(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:j()}(e,t.precondition)),n}function JI(e,t){return e&&e.length>0?(ht(t!==void 0),e.map(n=>function(s,o){let u=s.updateTime?je(s.updateTime):je(o);return u.isEqual(nt.min())&&(u=je(o)),new DI(u,s.transformResults||[])}(n,t))):[]}function ZI(e,t){return{documents:[_c(e,t.path)]}}function tS(e,t){const n={structuredQuery:{}},s=t.path;t.collectionGroup!==null?(n.parent=_c(e,s),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=_c(e,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const o=function(f){if(f.length===0)return;const p=f.map(y=>function(E){if(E.op==="=="){if(ag(E.value))return{unaryFilter:{field:gr(E.field),op:"IS_NAN"}};if(og(E.value))return{unaryFilter:{field:gr(E.field),op:"IS_NULL"}}}else if(E.op==="!="){if(ag(E.value))return{unaryFilter:{field:gr(E.field),op:"IS_NOT_NAN"}};if(og(E.value))return{unaryFilter:{field:gr(E.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gr(E.field),op:iS(E.op),value:E.value}}}(y));return p.length===1?p[0]:{compositeFilter:{op:"AND",filters:p}}}(t.filters);o&&(n.structuredQuery.where=o);const u=function(f){if(f.length!==0)return f.map(p=>function(y){return{field:gr(y.field),direction:rS(y.dir)}}(p))}(t.orderBy);u&&(n.structuredQuery.orderBy=u);const l=function(f,p){return f.C||lr(p)?p:{value:p}}(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=$g(t.startAt)),t.endAt&&(n.structuredQuery.endAt=$g(t.endAt)),n}function eS(e){let t=YI(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){ht(s===1);const E=n.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];n.where&&(u=Vg(n.where));let l=[];n.orderBy&&(l=n.orderBy.map(E=>function(I){return new vi(pr(I.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(E)));let f=null;n.limit&&(f=function(E){let I;return I=typeof E=="object"?E.value:E,lr(I)?null:I}(n.limit));let p=null;n.startAt&&(p=Bg(n.startAt));let y=null;return n.endAt&&(y=Bg(n.endAt)),EI(t,o,l,u,f,"F",p,y)}function nS(e,t){const n=function(s,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return j()}}(0,t.purpose);return n==null?null:{"goog-listen-tags":n}}function Vg(e){return e?e.unaryFilter!==void 0?[oS(e)]:e.fieldFilter!==void 0?[sS(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(t=>Vg(t)).reduce((t,n)=>t.concat(n)):j():[]}function $g(e){return{before:e.before,values:e.position}}function Bg(e){const t=!!e.before,n=e.values||[];return new lc(n,t)}function rS(e){return GI[e]}function iS(e){return KI[e]}function gr(e){return{fieldPath:e.canonicalString()}}function pr(e){return ee.fromServerFormat(e.fieldPath)}function sS(e){return ne.create(pr(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return j()}}(e.fieldFilter.op),e.fieldFilter.value)}function oS(e){switch(e.unaryFilter.op){case"IS_NAN":const t=pr(e.unaryFilter.field);return ne.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=pr(e.unaryFilter.field);return ne.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=pr(e.unaryFilter.field);return ne.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=pr(e.unaryFilter.field);return ne.create(o,"!=",{nullValue:"NULL_VALUE"});default:return j()}}function aS(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function qg(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}const uS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&j(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new D((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):D.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):D.reject(n)}static resolve(t){return new D((n,s)=>{n(t)})}static reject(t){return new D((n,s)=>{s(t)})}static waitFor(t){return new D((n,s)=>{let o=0,u=0,l=!1;t.forEach(f=>{++o,f.next(()=>{++u,l&&u===o&&n()},p=>s(p))}),l=!0,u===o&&n()})}static or(t){let n=D.resolve(!1);for(const s of t)n=n.next(o=>o?D.resolve(o):s());return n}static forEach(t,n){const s=[];return t.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}}function Ai(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(t,n,s,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&LI(u,t,s[o])}}applyToLocalView(t){for(const n of this.baseMutations)n.key.isEqual(t.key)&&gc(n,t,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(t.key)&&gc(n,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(n=>{const s=t.get(n.key),o=s;this.applyToLocalView(o),s.isValidDocument()||o.convertToNoDocument(nt.min())})}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),dt())}isEqual(t){return this.batchId===t.batchId&&ur(this.mutations,t.mutations,(n,s)=>Tg(n,s))&&ur(this.baseMutations,t.baseMutations,(n,s)=>Tg(n,s))}}class Tc{constructor(t,n,s,o){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(t,n,s){ht(t.mutations.length===s.length);let o=BI();const u=t.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,s[l].version);return new Tc(t,n,s,o)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t,n,s,o,u=nt.min(),l=nt.min(),f=Mt.EMPTY_BYTE_STRING){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f}withSequenceNumber(t){return new Pn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,n){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(t){this.Gt=t}}function fS(e){const t=eS({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?SI(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.zt=new gS}addToCollectionParentIndex(t,n){return this.zt.add(n),D.resolve()}getCollectionParents(t,n){return D.resolve(this.zt.getEntries(n))}}class gS{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n]||new Ft(_t.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(t){return(this.index[t]||new Ft(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(t){this.se=t}next(){return this.se+=2,this.se}static ie(){return new mr(0)}static re(){return new mr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ii(e){if(e.code!==x.FAILED_PRECONDITION||e.message!==uS)throw e;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={}}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),o=this.inner[s];if(o!==void 0){for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n])}else this.inner[s]=[[t,n]]}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[n]:s.splice(o,1),!0;return!1}forEach(t){Ln(this.inner,(n,s)=>{for(const[o,u]of s)t(o,u)})}isEmpty(){return ng(this.inner)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(){this.changes=new Si(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}getReadTime(t){const n=this.changes.get(t);return n?n.readTime:nt.min()}addEntry(t,n){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:n})}removeEntry(t,n=null){this.assertNotApplied(),this.changes.set(t,{document:qt.newInvalidDocument(t),readTime:n})}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?D.resolve(s.document):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(t,n,s){this.Je=t,this.An=n,this.Jt=s}Rn(t,n){return this.An.getAllMutationBatchesAffectingDocumentKey(t,n).next(s=>this.bn(t,n,s))}bn(t,n,s){return this.Je.getEntry(t,n).next(o=>{for(const u of s)u.applyToLocalView(o);return o})}Pn(t,n){t.forEach((s,o)=>{for(const u of n)u.applyToLocalView(o)})}vn(t,n){return this.Je.getEntries(t,n).next(s=>this.Vn(t,s).next(()=>s))}Vn(t,n){return this.An.getAllMutationBatchesAffectingDocumentKeys(t,n).next(s=>this.Pn(n,s))}getDocumentsMatchingQuery(t,n,s){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.Sn(t,n.path):II(n)?this.Dn(t,n,s):this.Cn(t,n,s)}Sn(t,n){return this.Rn(t,new H(n)).next(s=>{let o=mc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}Dn(t,n,s){const o=n.collectionGroup;let u=mc();return this.Jt.getCollectionParents(t,o).next(l=>D.forEach(l,f=>{const p=function(y,E){return new uo(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,f.child(o));return this.Cn(t,p,s).next(y=>{y.forEach((E,I)=>{u=u.insert(E,I)})})}).next(()=>u))}Cn(t,n,s){let o,u;return this.Je.getDocumentsMatchingQuery(t,n,s).next(l=>(o=l,this.An.getAllMutationBatchesAffectingQuery(t,n))).next(l=>(u=l,this.Nn(t,u,o).next(f=>{o=f;for(const p of u)for(const y of p.mutations){const E=y.key;let I=o.get(E);I==null&&(I=qt.newInvalidDocument(E),o=o.insert(E,I)),gc(y,I,p.localWriteTime),I.isFoundDocument()||(o=o.remove(E))}}))).next(()=>(o.forEach((l,f)=>{ho(n,f)||(o=o.remove(l))}),o))}Nn(t,n,s){let o=dt();for(const l of n)for(const f of l.mutations)f instanceof dr&&s.get(f.key)===null&&(o=o.add(f.key));let u=s;return this.Je.getEntries(t,o).next(l=>(l.forEach((f,p)=>{p.isFoundDocument()&&(u=u.insert(f,p))}),u))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(t,n,s,o){this.targetId=t,this.fromCache=n,this.kn=s,this.xn=o}static $n(t,n){let s=dt(),o=dt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ac(t,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{On(t){this.Mn=t}getDocumentsMatchingQuery(t,n,s,o){return function(u){return u.filters.length===0&&u.limit===null&&u.startAt==null&&u.endAt==null&&(u.explicitOrderBy.length===0||u.explicitOrderBy.length===1&&u.explicitOrderBy[0].field.isKeyField())}(n)||s.isEqual(nt.min())?this.Fn(t,n):this.Mn.vn(t,o).next(u=>{const l=this.Ln(n,u);return(co(n)||fc(n))&&this.Bn(n.limitType,l,o,s)?this.Fn(t,n):(Jd()<=ot.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),dc(n)),this.Mn.getDocumentsMatchingQuery(t,n,s).next(f=>(l.forEach(p=>{f=f.insert(p.key,p)}),f)))})}Ln(t,n){let s=new Ft(gg(t));return n.forEach((o,u)=>{ho(t,u)&&(s=s.add(u))}),s}Bn(t,n,s,o){if(s.size!==n.size)return!0;const u=t==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Fn(t,n){return Jd()<=ot.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",dc(n)),this.Mn.getDocumentsMatchingQuery(t,n,nt.min())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(t,n,s,o){this.persistence=t,this.Un=n,this.k=o,this.qn=new Wt(ut),this.Kn=new Si(u=>ac(u),uc),this.jn=nt.min(),this.An=t.getMutationQueue(s),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new Wg(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.On(this.Wn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.qn))}}function vS(e,t,n,s){return new yS(e,t,n,s)}async function Hg(e,t){const n=K(e);let s=n.An,o=n.Wn;const u=await n.persistence.runTransaction("Handle user change","readonly",l=>{let f;return n.An.getAllMutationBatches(l).next(p=>(f=p,s=n.persistence.getMutationQueue(t),o=new Wg(n.Qn,s,n.persistence.getIndexManager()),s.getAllMutationBatches(l))).next(p=>{const y=[],E=[];let I=dt();for(const R of f){y.push(R.batchId);for(const L of R.mutations)I=I.add(L.key)}for(const R of p){E.push(R.batchId);for(const L of R.mutations)I=I.add(L.key)}return o.vn(l,I).next(R=>({Gn:R,removedBatchIds:y,addedBatchIds:E}))})});return n.An=s,n.Wn=o,n.Un.On(n.Wn),u}function wS(e,t){const n=K(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=t.batch.keys(),u=n.Qn.newChangeBuffer({trackRemovals:!0});return function(l,f,p,y){const E=p.batch,I=E.keys();let R=D.resolve();return I.forEach(L=>{R=R.next(()=>y.getEntry(f,L)).next(P=>{const et=p.docVersions.get(L);ht(et!==null),P.version.compareTo(et)<0&&(E.applyToRemoteDocument(P,p),P.isValidDocument()&&y.addEntry(P,p.commitVersion))})}),R.next(()=>l.An.removeMutationBatch(f,E))}(n,s,t,u).next(()=>u.apply(s)).next(()=>n.An.performConsistencyCheck(s)).next(()=>n.Wn.vn(s,o))})}function Gg(e){const t=K(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.He.getLastRemoteSnapshotVersion(n))}function _S(e,t){const n=K(e),s=t.snapshotVersion;let o=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=n.Qn.newChangeBuffer({trackRemovals:!0});o=n.qn;const f=[];t.targetChanges.forEach((y,E)=>{const I=o.get(E);if(!I)return;f.push(n.He.removeMatchingKeys(u,y.removedDocuments,E).next(()=>n.He.addMatchingKeys(u,y.addedDocuments,E)));let R=I.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.has(E)?R=R.withResumeToken(Mt.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):y.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(y.resumeToken,s)),o=o.insert(E,R),function(L,P,et){return L.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8?!0:et.addedDocuments.size+et.modifiedDocuments.size+et.removedDocuments.size>0}(I,R,y)&&f.push(n.He.updateTargetData(u,R))});let p=Mn();if(t.documentUpdates.forEach((y,E)=>{t.resolvedLimboDocuments.has(y)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(u,y))}),f.push(ES(u,l,t.documentUpdates,s,void 0).next(y=>{p=y})),!s.isEqual(nt.min())){const y=n.He.getLastRemoteSnapshotVersion(u).next(E=>n.He.setTargetsMetadata(u,u.currentSequenceNumber,s));f.push(y)}return D.waitFor(f).next(()=>l.apply(u)).next(()=>n.Wn.Vn(u,p)).next(()=>p)}).then(u=>(n.qn=o,u))}function ES(e,t,n,s,o){let u=dt();return n.forEach(l=>u=u.add(l)),t.getEntries(e,u).next(l=>{let f=Mn();return n.forEach((p,y)=>{const E=l.get(p),I=(o==null?void 0:o.get(p))||s;y.isNoDocument()&&y.version.isEqual(nt.min())?(t.removeEntry(p,I),f=f.insert(p,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||y.version.compareTo(E.version)===0&&E.hasPendingWrites?(t.addEntry(y,I),f=f.insert(p,y)):F("LocalStore","Ignoring outdated watch update for ",p,". Current version:",E.version," Watch version:",y.version)}),f})}function TS(e,t){const n=K(e);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=-1),n.An.getNextMutationBatchAfterBatchId(s,t)))}function AS(e,t){const n=K(e);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.He.getTargetData(s,t).next(u=>u?(o=u,D.resolve(o)):n.He.allocateTargetId(s).next(l=>(o=new Pn(t,l,0,s.currentSequenceNumber),n.He.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.qn.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.qn=n.qn.insert(s.targetId,s),n.Kn.set(t,s.targetId)),s})}async function Ic(e,t,n){const s=K(e),o=s.qn.get(t),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,l=>s.persistence.referenceDelegate.removeTarget(l,o))}catch(l){if(!Ai(l))throw l;F("LocalStore",`Failed to update sequence numbers for target ${t}: ${l}`)}s.qn=s.qn.remove(t),s.Kn.delete(o.target)}function Kg(e,t,n){const s=K(e);let o=nt.min(),u=dt();return s.persistence.runTransaction("Execute query","readonly",l=>function(f,p,y){const E=K(f),I=E.Kn.get(y);return I!==void 0?D.resolve(E.qn.get(I)):E.He.getTargetData(p,y)}(s,l,kn(t)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.He.getMatchingKeysForTargetId(l,f.targetId).next(p=>{u=p})}).next(()=>s.Un.getDocumentsMatchingQuery(l,t,n?o:nt.min(),n?u:dt())).next(f=>({documents:f,zn:u})))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(t){this.k=t,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(t,n){return D.resolve(this.Xn.get(n))}saveBundleMetadata(t,n){var s;return this.Xn.set(n.id,{id:(s=n).id,version:s.version,createTime:je(s.createTime)}),D.resolve()}getNamedQuery(t,n){return D.resolve(this.Zn.get(n))}saveNamedQuery(t,n){return this.Zn.set(n.name,function(s){return{name:s.name,query:fS(s.bundledQuery),readTime:je(s.readTime)}}(n)),D.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(){this.ts=new Ft(Rt.es),this.ns=new Ft(Rt.ss)}isEmpty(){return this.ts.isEmpty()}addReference(t,n){const s=new Rt(t,n);this.ts=this.ts.add(s),this.ns=this.ns.add(s)}rs(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.os(new Rt(t,n))}cs(t,n){t.forEach(s=>this.removeReference(s,n))}us(t){const n=new H(new _t([])),s=new Rt(n,t),o=new Rt(n,t+1),u=[];return this.ns.forEachInRange([s,o],l=>{this.os(l),u.push(l.key)}),u}hs(){this.ts.forEach(t=>this.os(t))}os(t){this.ts=this.ts.delete(t),this.ns=this.ns.delete(t)}ls(t){const n=new H(new _t([])),s=new Rt(n,t),o=new Rt(n,t+1);let u=dt();return this.ns.forEachInRange([s,o],l=>{u=u.add(l.key)}),u}containsKey(t){const n=new Rt(t,0),s=this.ts.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Rt{constructor(t,n){this.key=t,this.fs=n}static es(t,n){return H.comparator(t.key,n.key)||ut(t.fs,n.fs)}static ss(t,n){return ut(t.fs,n.fs)||H.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(t,n){this.Jt=t,this.referenceDelegate=n,this.An=[],this.ds=1,this.ws=new Ft(Rt.es)}checkEmpty(t){return D.resolve(this.An.length===0)}addMutationBatch(t,n,s,o){const u=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];const l=new lS(u,n,s,o);this.An.push(l);for(const f of o)this.ws=this.ws.add(new Rt(f.key,u)),this.Jt.addToCollectionParentIndex(t,f.key.path.popLast());return D.resolve(l)}lookupMutationBatch(t,n){return D.resolve(this._s(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,o=this.gs(s),u=o<0?0:o;return D.resolve(this.An.length>u?this.An[u]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.An.length===0?-1:this.ds-1)}getAllMutationBatches(t){return D.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Rt(n,0),o=new Rt(n,Number.POSITIVE_INFINITY),u=[];return this.ws.forEachInRange([s,o],l=>{const f=this._s(l.fs);u.push(f)}),D.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ft(ut);return n.forEach(o=>{const u=new Rt(o,0),l=new Rt(o,Number.POSITIVE_INFINITY);this.ws.forEachInRange([u,l],f=>{s=s.add(f.fs)})}),D.resolve(this.ys(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,o=s.length+1;let u=s;H.isDocumentKey(u)||(u=u.child(""));const l=new Rt(new H(u),0);let f=new Ft(ut);return this.ws.forEachWhile(p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(p.fs)),!0)},l),D.resolve(this.ys(f))}ys(t){const n=[];return t.forEach(s=>{const o=this._s(s);o!==null&&n.push(o)}),n}removeMutationBatch(t,n){ht(this.ps(n.batchId,"removed")===0),this.An.shift();let s=this.ws;return D.forEach(n.mutations,o=>{const u=new Rt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.ws=s})}ee(t){}containsKey(t,n){const s=new Rt(n,0),o=this.ws.firstAfterOrEqual(s);return D.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.An.length,D.resolve()}ps(t,n){return this.gs(t)}gs(t){return this.An.length===0?0:t-this.An[0].batchId}_s(t){const n=this.gs(t);return n<0||n>=this.An.length?null:this.An[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(t,n){this.Jt=t,this.Ts=n,this.docs=new Wt(H.comparator),this.size=0}addEntry(t,n,s){const o=n.key,u=this.docs.get(o),l=u?u.size:0,f=this.Ts(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:f,readTime:s}),this.size+=f-l,this.Jt.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return D.resolve(s?s.document.mutableCopy():qt.newInvalidDocument(n))}getEntries(t,n){let s=Mn();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():qt.newInvalidDocument(o))}),D.resolve(s)}getDocumentsMatchingQuery(t,n,s){let o=Mn();const u=new H(n.path.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:f,value:{document:p,readTime:y}}=l.getNext();if(!n.path.isPrefixOf(f.path))break;y.compareTo(s)<=0||ho(n,p)&&(o=o.insert(p.key,p.mutableCopy()))}return D.resolve(o)}Es(t,n){return D.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new bS(this)}getSize(t){return D.resolve(this.size)}}class bS extends pS{constructor(t){super(),this.De=t}applyChanges(t){const n=[];return this.changes.forEach((s,o)=>{o.document.isValidDocument()?n.push(this.De.addEntry(t,o.document,this.getReadTime(s))):this.De.removeEntry(s)}),D.waitFor(n)}getFromCache(t,n){return this.De.getEntry(t,n)}getAllFromCache(t,n){return this.De.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(t){this.persistence=t,this.Is=new Si(n=>ac(n),uc),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.As=0,this.Rs=new Sc,this.targetCount=0,this.bs=mr.ie()}forEachTarget(t,n){return this.Is.forEach((s,o)=>n(o)),D.resolve()}getLastRemoteSnapshotVersion(t){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return D.resolve(this.As)}allocateTargetId(t){return this.highestTargetId=this.bs.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.As&&(this.As=n),D.resolve()}ae(t){this.Is.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.bs=new mr(n),this.highestTargetId=n),t.sequenceNumber>this.As&&(this.As=t.sequenceNumber)}addTargetData(t,n){return this.ae(n),this.targetCount+=1,D.resolve()}updateTargetData(t,n){return this.ae(n),D.resolve()}removeTargetData(t,n){return this.Is.delete(n.target),this.Rs.us(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(t,n,s){let o=0;const u=[];return this.Is.forEach((l,f)=>{f.sequenceNumber<=n&&s.get(f.targetId)===null&&(this.Is.delete(l),u.push(this.removeMatchingKeysForTargetId(t,f.targetId)),o++)}),D.waitFor(u).next(()=>o)}getTargetCount(t){return D.resolve(this.targetCount)}getTargetData(t,n){const s=this.Is.get(n)||null;return D.resolve(s)}addMatchingKeys(t,n,s){return this.Rs.rs(n,s),D.resolve()}removeMatchingKeys(t,n,s){this.Rs.cs(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(l=>{u.push(o.markPotentiallyOrphaned(t,l))}),D.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this.Rs.us(n),D.resolve()}getMatchingKeysForTargetId(t,n){const s=this.Rs.ls(n);return D.resolve(s)}containsKey(t,n){return D.resolve(this.Rs.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(t,n){this.Ps={},this.Be=new ec(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new RS(this),this.Jt=new dS,this.Je=function(s,o){return new CS(s,o)}(this.Jt,s=>this.referenceDelegate.vs(s)),this.k=new hS(n),this.Ye=new IS(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(t){let n=this.Ps[t.toKey()];return n||(n=new SS(this.Jt,this.referenceDelegate),this.Ps[t.toKey()]=n),n}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(t,n,s){F("MemoryPersistence","Starting transaction:",t);const o=new NS(this.Be.next());return this.referenceDelegate.Vs(),s(o).next(u=>this.referenceDelegate.Ss(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ds(t,n){return D.or(Object.values(this.Ps).map(s=>()=>s.containsKey(t,n)))}}class NS extends cS{constructor(t){super(),this.currentSequenceNumber=t}}class Cc{constructor(t){this.persistence=t,this.Cs=new Sc,this.Ns=null}static ks(t){return new Cc(t)}get xs(){if(this.Ns)return this.Ns;throw j()}addReference(t,n,s){return this.Cs.addReference(s,n),this.xs.delete(s.toString()),D.resolve()}removeReference(t,n,s){return this.Cs.removeReference(s,n),this.xs.add(s.toString()),D.resolve()}markPotentiallyOrphaned(t,n){return this.xs.add(n.toString()),D.resolve()}removeTarget(t,n){this.Cs.us(n.targetId).forEach(o=>this.xs.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(o=>{o.forEach(u=>this.xs.add(u.toString()))}).next(()=>s.removeTargetData(t,n))}Vs(){this.Ns=new Set}Ss(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.xs,s=>{const o=H.fromPath(s);return this.$s(t,o).next(u=>{u||n.removeEntry(o)})}).next(()=>(this.Ns=null,n.apply(t)))}updateLimboDocument(t,n){return this.$s(t,n).next(s=>{s?this.xs.delete(n.toString()):this.xs.add(n.toString())})}vs(t){return 0}$s(t,n){return D.or([()=>D.resolve(this.Cs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ds(t,n)])}}class zg{constructor(){this.activeTargetIds=xg()}Fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ls(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ms(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class DS{constructor(){this.pi=new zg,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t){return this.pi.Fs(t),this.Ti[t]||"not-current"}updateQueryState(t,n,s){this.Ti[t]=n}removeLocalQueryTarget(t){this.pi.Ls(t)}isLocalQueryTarget(t){return this.pi.activeTargetIds.has(t)}clearQueryState(t){delete this.Ti[t]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(t){return this.pi.activeTargetIds.has(t)}start(){return this.pi=new zg,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{Ei(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.bi(),this.Pi=[],this.vi()}Ei(t){this.Pi.push(t)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Pi)t(0)}bi(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Pi)t(1)}static Pt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(t){this.Vi=t.Vi,this.Si=t.Si}Di(t){this.Ci=t}Ni(t){this.ki=t}onMessage(t){this.xi=t}close(){this.Si()}send(t){this.Vi(t)}$i(){this.Ci()}Oi(t){this.ki(t)}Mi(t){this.xi(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http";this.Fi=n+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(t,n,s,o,u){const l=this.Ui(t,n);F("RestConnection","Sending: ",l,s);const f={};return this.qi(f,o,u),this.Ki(t,l,f,s).then(p=>(F("RestConnection","Received: ",p),p),p=>{throw Zd("RestConnection",`${t} failed with error: `,p,"url: ",l,"request:",s),p})}ji(t,n,s,o,u){return this.Bi(t,n,s,o,u)}qi(t,n,s){t["X-Goog-Api-Client"]="gl-js/ fire/"+ar,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>t[u]=o),s&&s.headers.forEach((o,u)=>t[u]=o)}Ui(t,n){const s=OS[t];return`${this.Fi}/v1/${n}:${s}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}Ki(t,n,s,o){return new Promise((u,l)=>{const f=new JA;f.listenOnce(YA.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Zu.NO_ERROR:const y=f.getResponseJson();F("Connection","XHR received:",JSON.stringify(y)),u(y);break;case Zu.TIMEOUT:F("Connection",'RPC "'+t+'" timed out'),l(new B(x.DEADLINE_EXCEEDED,"Request time out"));break;case Zu.HTTP_ERROR:const E=f.getStatus();if(F("Connection",'RPC "'+t+'" failed with status:',E,"response text:",f.getResponseText()),E>0){const I=f.getResponseJson().error;if(I&&I.status&&I.message){const R=function(L){const P=L.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(P)>=0?P:x.UNKNOWN}(I.status);l(new B(R,I.message))}else l(new B(x.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new B(x.UNAVAILABLE,"Connection failed."));break;default:j()}}finally{F("Connection",'RPC "'+t+'" completed.')}});const p=JSON.stringify(o);f.send(n,"POST",p,s,15)})}Qi(t,n,s){const o=[this.Fi,"/","google.firestore.v1.Firestore","/",t,"/channel"],u=zA(),l=jA(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new QA({})),this.qi(f.initMessageHeaders,n,s),KE()||jE()||YE()||XE()||QE()||zE()||(f.httpHeadersOverwriteParam="$httpHeaders");const p=o.join("");F("Connection","Creating WebChannel: "+p,f);const y=u.createWebChannel(p,f);let E=!1,I=!1;const R=new kS({Vi:P=>{I?F("Connection","Not sending because WebChannel is closed:",P):(E||(F("Connection","Opening WebChannel transport."),y.open(),E=!0),F("Connection","WebChannel sending:",P),y.send(P))},Si:()=>y.close()}),L=(P,et,rt)=>{P.listen(et,xt=>{try{rt(xt)}catch(fe){setTimeout(()=>{throw fe},0)}})};return L(y,io.EventType.OPEN,()=>{I||F("Connection","WebChannel transport opened.")}),L(y,io.EventType.CLOSE,()=>{I||(I=!0,F("Connection","WebChannel transport closed"),R.Oi())}),L(y,io.EventType.ERROR,P=>{I||(I=!0,Zd("Connection","WebChannel transport errored:",P),R.Oi(new B(x.UNAVAILABLE,"The operation could not be completed")))}),L(y,io.EventType.MESSAGE,P=>{var et;if(!I){const rt=P.data[0];ht(!!rt);const xt=rt,fe=xt.error||((et=xt[0])===null||et===void 0?void 0:et.error);if(fe){F("Connection","WebChannel received error:",fe);const Ut=fe.status;let de=function(Ye){const ge=At[Ye];if(ge!==void 0)return bg(ge)}(Ut),re=fe.message;de===void 0&&(de=x.INTERNAL,re="Unknown error status: "+Ut+" with message "+fe.message),I=!0,R.Oi(new B(de,re)),y.close()}else F("Connection","WebChannel received:",rt),R.Mi(rt)}}),L(l,XA.STAT_EVENT,P=>{P.stat===Xd.PROXY?F("Connection","Detected buffering proxy"):P.stat===Xd.NOPROXY&&F("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.$i()},0),R}}function bc(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(e){return new zI(e,!0)}class Yg{constructor(t,n,s=1e3,o=1.5,u=6e4){this.Me=t,this.timerId=n,this.Wi=s,this.Gi=o,this.zi=u,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(t){this.cancel();const n=Math.floor(this.Hi+this.tr()),s=Math.max(0,Date.now()-this.Yi),o=Math.max(0,n-s);o>0&&F("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Hi} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Ji=this.Me.enqueueAfterDelay(this.timerId,o,()=>(this.Yi=Date.now(),t())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){this.Ji!==null&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){this.Ji!==null&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(t,n,s,o,u,l,f,p){this.Me=t,this.nr=s,this.sr=o,this.ir=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new Yg(t,n)}hr(){return this.state===1||this.state===5||this.lr()}lr(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.dr()}async stop(){this.hr()&&await this.close(0)}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&this.cr===null&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(t){this.yr(),this.stream.send(t)}async mr(){if(this.lr())return this.close(0)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}pr(){this.ar&&(this.ar.cancel(),this.ar=null)}async close(t,n){this.yr(),this.pr(),this.ur.cancel(),this.rr++,t!==4?this.ur.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(cn(n.toString()),cn("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ni(n)}Tr(){}auth(){this.state=1;const t=this.Er(this.rr),n=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.rr===n&&this.Ir(s,o)},s=>{t(()=>{const o=new B(x.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Ar(o)})})}Ir(t,n){const s=this.Er(this.rr);this.stream=this.Rr(t,n),this.stream.Di(()=>{s(()=>(this.state=2,this.ar=this.Me.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(o=>{s(()=>this.Ar(o))}),this.stream.onMessage(o=>{s(()=>this.onMessage(o))})}dr(){this.state=5,this.ur.Zi(async()=>{this.state=0,this.start()})}Ar(t){return F("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Er(t){return n=>{this.Me.enqueueAndForget(()=>this.rr===t?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PS extends Xg{constructor(t,n,s,o,u,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,l),this.k=u}Rr(t,n){return this.ir.Qi("Listen",t,n)}onMessage(t){this.ur.reset();const n=XI(this.k,t),s=function(o){if(!("targetChange"in o))return nt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?nt.min():u.readTime?je(u.readTime):nt.min()}(t);return this.listener.br(n,s)}Pr(t){const n={};n.database=Ec(this.k),n.addTarget=function(o,u){let l;const f=u.target;return l=cc(f)?{documents:ZI(o,f)}:{query:tS(o,f)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=Mg(o,u.resumeToken):u.snapshotVersion.compareTo(nt.min())>0&&(l.readTime=Eo(o,u.snapshotVersion.toTimestamp())),l}(this.k,t);const s=nS(this.k,t);s&&(n.labels=s),this.gr(n)}vr(t){const n={};n.database=Ec(this.k),n.removeTarget=t,this.gr(n)}}class FS extends Xg{constructor(t,n,s,o,u,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,l),this.k=u,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(t,n){return this.ir.Qi("Write",t,n)}onMessage(t){if(ht(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vr){this.ur.reset();const n=JI(t.writeResults,t.commitTime),s=je(t.commitTime);return this.listener.Cr(s,n)}return ht(!t.writeResults||t.writeResults.length===0),this.Vr=!0,this.listener.Nr()}kr(){const t={};t.database=Ec(this.k),this.gr(t)}Dr(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>QI(this.k,s))};this.gr(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US extends class{}{constructor(t,n,s,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.ir=s,this.k=o,this.$r=!1}Or(){if(this.$r)throw new B(x.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(t,n,s){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.ir.Bi(t,n,s,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(x.UNKNOWN,o.toString())})}ji(t,n,s){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.ir.ji(t,n,s,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(x.UNKNOWN,o.toString())})}terminate(){this.$r=!0}}class VS{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}Br(){this.Mr===0&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(t){this.state==="Online"?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Ur("Offline")))}set(t){this.jr(),this.Mr=0,t==="Online"&&(this.Lr=!1),this.Ur(t)}Ur(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}qr(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(cn(n),this.Lr=!1):F("OnlineStateTracker",n)}jr(){this.Fr!==null&&(this.Fr.cancel(),this.Fr=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(t,n,s,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=u,this.Hr.Ei(l=>{s.enqueueAndForget(async()=>{Fn(this)&&(F("RemoteStore","Restarting streams for network reachability change."),await async function(f){const p=K(f);p.Gr.add(4),await Ci(p),p.Jr.set("Unknown"),p.Gr.delete(4),await Ao(p)}(this))})}),this.Jr=new VS(s,o)}}async function Ao(e){if(Fn(e))for(const t of e.zr)await t(!0)}async function Ci(e){for(const t of e.zr)await t(!1)}function Qg(e,t){const n=K(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),Nc(n)?xc(n):yr(n).lr()&&Rc(n,t))}function Jg(e,t){const n=K(e),s=yr(n);n.Wr.delete(t),s.lr()&&Zg(n,t),n.Wr.size===0&&(s.lr()?s._r():Fn(n)&&n.Jr.set("Unknown"))}function Rc(e,t){e.Yr.X(t.targetId),yr(e).Pr(t)}function Zg(e,t){e.Yr.X(t),yr(e).vr(t)}function xc(e){e.Yr=new HI({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Wr.get(t)||null}),yr(e).start(),e.Jr.Br()}function Nc(e){return Fn(e)&&!yr(e).hr()&&e.Wr.size>0}function Fn(e){return K(e).Gr.size===0}function tp(e){e.Yr=void 0}async function BS(e){e.Wr.forEach((t,n)=>{Rc(e,t)})}async function qS(e,t){tp(e),Nc(e)?(e.Jr.Kr(t),xc(e)):e.Jr.set("Unknown")}async function WS(e,t,n){if(e.Jr.set("Online"),t instanceof Dg&&t.state===2&&t.cause)try{await async function(s,o){const u=o.cause;for(const l of o.targetIds)s.Wr.has(l)&&(await s.remoteSyncer.rejectListen(l,u),s.Wr.delete(l),s.Yr.removeTarget(l))}(e,t)}catch(s){F("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Io(e,s)}else if(t instanceof _o?e.Yr.ot(t):t instanceof Ng?e.Yr.dt(t):e.Yr.ut(t),!n.isEqual(nt.min()))try{const s=await Gg(e.localStore);n.compareTo(s)>=0&&await function(o,u){const l=o.Yr.gt(u);return l.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const y=o.Wr.get(p);y&&o.Wr.set(p,y.withResumeToken(f.resumeToken,u))}}),l.targetMismatches.forEach(f=>{const p=o.Wr.get(f);if(!p)return;o.Wr.set(f,p.withResumeToken(Mt.EMPTY_BYTE_STRING,p.snapshotVersion)),Zg(o,f);const y=new Pn(p.target,f,1,p.sequenceNumber);Rc(o,y)}),o.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(s){F("RemoteStore","Failed to raise snapshot:",s),await Io(e,s)}}async function Io(e,t,n){if(!Ai(t))throw t;e.Gr.add(1),await Ci(e),e.Jr.set("Offline"),n||(n=()=>Gg(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{F("RemoteStore","Retrying IndexedDB access"),await n(),e.Gr.delete(1),await Ao(e)})}function ep(e,t){return t().catch(n=>Io(e,n,t))}async function So(e){const t=K(e),n=fn(t);let s=t.Qr.length>0?t.Qr[t.Qr.length-1].batchId:-1;for(;HS(t);)try{const o=await TS(t.localStore,s);if(o===null){t.Qr.length===0&&n._r();break}s=o.batchId,GS(t,o)}catch(o){await Io(t,o)}np(t)&&rp(t)}function HS(e){return Fn(e)&&e.Qr.length<10}function GS(e,t){e.Qr.push(t);const n=fn(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function np(e){return Fn(e)&&!fn(e).hr()&&e.Qr.length>0}function rp(e){fn(e).start()}async function KS(e){fn(e).kr()}async function zS(e){const t=fn(e);for(const n of e.Qr)t.Dr(n.mutations)}async function jS(e,t,n){const s=e.Qr.shift(),o=Tc.from(s,t,n);await ep(e,()=>e.remoteSyncer.applySuccessfulWrite(o)),await So(e)}async function YS(e,t){t&&fn(e).Sr&&await async function(n,s){if(o=s.code,FI(o)&&o!==x.ABORTED){const u=n.Qr.shift();fn(n).wr(),await ep(n,()=>n.remoteSyncer.rejectFailedWrite(u.batchId,s)),await So(n)}var o}(e,t),np(e)&&rp(e)}async function ip(e,t){const n=K(e);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");const s=Fn(n);n.Gr.add(3),await Ci(n),s&&n.Jr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Gr.delete(3),await Ao(n)}async function XS(e,t){const n=K(e);t?(n.Gr.delete(2),await Ao(n)):t||(n.Gr.add(2),await Ci(n),n.Jr.set("Unknown"))}function yr(e){return e.Xr||(e.Xr=function(t,n,s){const o=K(t);return o.Or(),new PS(n,o.ir,o.authCredentials,o.appCheckCredentials,o.k,s)}(e.datastore,e.asyncQueue,{Di:BS.bind(null,e),Ni:qS.bind(null,e),br:WS.bind(null,e)}),e.zr.push(async t=>{t?(e.Xr.wr(),Nc(e)?xc(e):e.Jr.set("Unknown")):(await e.Xr.stop(),tp(e))})),e.Xr}function fn(e){return e.Zr||(e.Zr=function(t,n,s){const o=K(t);return o.Or(),new FS(n,o.ir,o.authCredentials,o.appCheckCredentials,o.k,s)}(e.datastore,e.asyncQueue,{Di:KS.bind(null,e),Ni:YS.bind(null,e),Nr:zS.bind(null,e),Cr:jS.bind(null,e)}),e.zr.push(async t=>{t?(e.Zr.wr(),await So(e)):(await e.Zr.stop(),e.Qr.length>0&&(F("RemoteStore",`Stopping write stream with ${e.Qr.length} pending writes`),e.Qr=[]))})),e.Zr}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(t,n,s,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(t,n,s,o,u){const l=Date.now()+s,f=new Dc(t,n,l,o,u);return f.start(s),f}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(x.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lc(e,t){if(cn("AsyncQueue",`${t}: ${e}`),Ai(e))return new B(x.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(t){this.comparator=t?(n,s)=>t(n,s)||H.comparator(n.key,s.key):(n,s)=>H.comparator(n.key,s.key),this.keyedMap=mc(),this.sortedSet=new Wt(this.comparator)}static emptySet(t){return new vr(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof vr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new vr;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this.eo=new Wt(H.comparator)}track(t){const n=t.doc.key,s=this.eo.get(n);s?t.type!==0&&s.type===3?this.eo=this.eo.insert(n,t):t.type===3&&s.type!==1?this.eo=this.eo.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.eo=this.eo.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.eo=this.eo.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.eo=this.eo.remove(n):t.type===1&&s.type===2?this.eo=this.eo.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.eo=this.eo.insert(n,{type:2,doc:t.doc}):j():this.eo=this.eo.insert(n,t)}no(){const t=[];return this.eo.inorderTraversal((n,s)=>{t.push(s)}),t}}class wr{constructor(t,n,s,o,u,l,f,p){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=p}static fromInitialDocuments(t,n,s,o){const u=[];return n.forEach(l=>{u.push({type:0,doc:l})}),new wr(t,n,vr.emptySet(n),u,s,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&lo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.so=void 0,this.listeners=[]}}class JS{constructor(){this.queries=new Si(t=>dg(t),lo),this.onlineState="Unknown",this.io=new Set}}async function ZS(e,t){const n=K(e),s=t.query;let o=!1,u=n.queries.get(s);if(u||(o=!0,u=new QS),o)try{u.so=await n.onListen(s)}catch(l){const f=Lc(l,`Initialization of query '${dc(t.query)}' failed`);return void t.onError(f)}n.queries.set(s,u),u.listeners.push(t),t.ro(n.onlineState),u.so&&t.oo(u.so)&&Oc(n)}async function tC(e,t){const n=K(e),s=t.query;let o=!1;const u=n.queries.get(s);if(u){const l=u.listeners.indexOf(t);l>=0&&(u.listeners.splice(l,1),o=u.listeners.length===0)}if(o)return n.queries.delete(s),n.onUnlisten(s)}function eC(e,t){const n=K(e);let s=!1;for(const o of t){const u=o.query,l=n.queries.get(u);if(l){for(const f of l.listeners)f.oo(o)&&(s=!0);l.so=o}}s&&Oc(n)}function nC(e,t,n){const s=K(e),o=s.queries.get(t);if(o)for(const u of o.listeners)u.onError(n);s.queries.delete(t)}function Oc(e){e.io.forEach(t=>{t.next()})}class rC{constructor(t,n,s){this.query=t,this.co=n,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=s||{}}oo(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new wr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let n=!1;return this.ao?this.ho(t)&&(this.co.next(t),n=!0):this.lo(t,this.onlineState)&&(this.fo(t),n=!0),this.uo=t,n}onError(t){this.co.error(t)}ro(t){this.onlineState=t;let n=!1;return this.uo&&!this.ao&&this.lo(this.uo,t)&&(this.fo(this.uo),n=!0),n}lo(t,n){if(!t.fromCache)return!0;const s=n!=="Offline";return(!this.options.wo||!s)&&(!t.docs.isEmpty()||n==="Offline")}ho(t){if(t.docChanges.length>0)return!0;const n=this.uo&&this.uo.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}fo(t){t=wr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.ao=!0,this.co.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(t){this.key=t}}class ap{constructor(t){this.key=t}}class iC{constructor(t,n){this.query=t,this.To=n,this.Eo=null,this.current=!1,this.Io=dt(),this.mutatedKeys=dt(),this.Ao=gg(t),this.Ro=new vr(this.Ao)}get bo(){return this.To}Po(t,n){const s=n?n.vo:new sp,o=n?n.Ro:this.Ro;let u=n?n.mutatedKeys:this.mutatedKeys,l=o,f=!1;const p=co(this.query)&&o.size===this.query.limit?o.last():null,y=fc(this.query)&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((E,I)=>{const R=o.get(E),L=ho(this.query,I)?I:null,P=!!R&&this.mutatedKeys.has(R.key),et=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let rt=!1;R&&L?R.data.isEqual(L.data)?P!==et&&(s.track({type:3,doc:L}),rt=!0):this.Vo(R,L)||(s.track({type:2,doc:L}),rt=!0,(p&&this.Ao(L,p)>0||y&&this.Ao(L,y)<0)&&(f=!0)):!R&&L?(s.track({type:0,doc:L}),rt=!0):R&&!L&&(s.track({type:1,doc:R}),rt=!0,(p||y)&&(f=!0)),rt&&(L?(l=l.add(L),u=et?u.add(E):u.delete(E)):(l=l.delete(E),u=u.delete(E)))}),co(this.query)||fc(this.query))for(;l.size>this.query.limit;){const E=co(this.query)?l.last():l.first();l=l.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{Ro:l,vo:s,Bn:f,mutatedKeys:u}}Vo(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s){const o=this.Ro;this.Ro=t.Ro,this.mutatedKeys=t.mutatedKeys;const u=t.vo.no();u.sort((y,E)=>function(I,R){const L=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j()}};return L(I)-L(R)}(y.type,E.type)||this.Ao(y.doc,E.doc)),this.So(s);const l=n?this.Do():[],f=this.Io.size===0&&this.current?1:0,p=f!==this.Eo;return this.Eo=f,u.length!==0||p?{snapshot:new wr(this.query,t.Ro,o,u,t.mutatedKeys,f===0,p,!1),Co:l}:{Co:l}}ro(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new sp,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(t){return!this.To.has(t)&&!!this.Ro.has(t)&&!this.Ro.get(t).hasLocalMutations}So(t){t&&(t.addedDocuments.forEach(n=>this.To=this.To.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.To=this.To.delete(n)),this.current=t.current)}Do(){if(!this.current)return[];const t=this.Io;this.Io=dt(),this.Ro.forEach(s=>{this.No(s.key)&&(this.Io=this.Io.add(s.key))});const n=[];return t.forEach(s=>{this.Io.has(s)||n.push(new ap(s))}),this.Io.forEach(s=>{t.has(s)||n.push(new op(s))}),n}ko(t){this.To=t.zn,this.Io=dt();const n=this.Po(t.documents);return this.applyChanges(n,!0)}xo(){return wr.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,this.Eo===0)}}class sC{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class oC{constructor(t){this.key=t,this.$o=!1}}class aC{constructor(t,n,s,o,u,l){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.Oo={},this.Mo=new Si(f=>dg(f),lo),this.Fo=new Map,this.Lo=new Set,this.Bo=new Wt(H.comparator),this.Uo=new Map,this.qo=new Sc,this.Ko={},this.jo=new Map,this.Qo=mr.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return this.Wo===!0}}async function uC(e,t){const n=vC(e);let s,o;const u=n.Mo.get(t);if(u)s=u.targetId,n.sharedClientState.addLocalQueryTarget(s),o=u.view.xo();else{const l=await AS(n.localStore,kn(t)),f=n.sharedClientState.addLocalQueryTarget(l.targetId);s=l.targetId,o=await cC(n,t,s,f==="current"),n.isPrimaryClient&&Qg(n.remoteStore,l)}return o}async function cC(e,t,n,s){e.Go=(E,I,R)=>async function(L,P,et,rt){let xt=P.view.Po(et);xt.Bn&&(xt=await Kg(L.localStore,P.query,!1).then(({documents:de})=>P.view.Po(de,xt)));const fe=rt&&rt.targetChanges.get(P.targetId),Ut=P.view.applyChanges(xt,L.isPrimaryClient,fe);return dp(L,P.targetId,Ut.Co),Ut.snapshot}(e,E,I,R);const o=await Kg(e.localStore,t,!0),u=new iC(t,o.zn),l=u.Po(o.documents),f=Ti.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline"),p=u.applyChanges(l,e.isPrimaryClient,f);dp(e,n,p.Co);const y=new sC(t,n,u);return e.Mo.set(t,y),e.Fo.has(n)?e.Fo.get(n).push(t):e.Fo.set(n,[t]),p.snapshot}async function lC(e,t){const n=K(e),s=n.Mo.get(t),o=n.Fo.get(s.targetId);if(o.length>1)return n.Fo.set(s.targetId,o.filter(u=>!lo(u,t))),void n.Mo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Ic(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),Jg(n.remoteStore,s.targetId),kc(n,s.targetId)}).catch(Ii)):(kc(n,s.targetId),await Ic(n.localStore,s.targetId,!0))}async function hC(e,t,n){const s=wC(e);try{const o=await function(u,l){const f=K(u),p=he.now(),y=l.reduce((I,R)=>I.add(R.key),dt());let E;return f.persistence.runTransaction("Locally write mutations","readwrite",I=>f.Wn.vn(I,y).next(R=>{E=R;const L=[];for(const P of l){const et=OI(P,E.get(P.key));et!=null&&L.push(new dr(P.key,et,ug(et.value.mapValue),fr.exists(!0)))}return f.An.addMutationBatch(I,p,L,l)})).then(I=>(I.applyToLocalDocumentSet(E),{batchId:I.batchId,changes:E}))}(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),function(u,l,f){let p=u.Ko[u.currentUser.toKey()];p||(p=new Wt(ut)),p=p.insert(l,f),u.Ko[u.currentUser.toKey()]=p}(s,o.batchId,n),await bi(s,o.changes),await So(s.remoteStore)}catch(o){const u=Lc(o,"Failed to persist write");n.reject(u)}}async function up(e,t){const n=K(e);try{const s=await _S(n.localStore,t);t.targetChanges.forEach((o,u)=>{const l=n.Uo.get(u);l&&(ht(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.$o=!0:o.modifiedDocuments.size>0?ht(l.$o):o.removedDocuments.size>0&&(ht(l.$o),l.$o=!1))}),await bi(n,s,t)}catch(s){await Ii(s)}}function cp(e,t,n){const s=K(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Mo.forEach((u,l)=>{const f=l.view.ro(t);f.snapshot&&o.push(f.snapshot)}),function(u,l){const f=K(u);f.onlineState=l;let p=!1;f.queries.forEach((y,E)=>{for(const I of E.listeners)I.ro(l)&&(p=!0)}),p&&Oc(f)}(s.eventManager,t),o.length&&s.Oo.br(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function fC(e,t,n){const s=K(e);s.sharedClientState.updateQueryState(t,"rejected",n);const o=s.Uo.get(t),u=o&&o.key;if(u){let l=new Wt(H.comparator);l=l.insert(u,qt.newNoDocument(u,nt.min()));const f=dt().add(u),p=new wo(nt.min(),new Map,new Ft(ut),l,f);await up(s,p),s.Bo=s.Bo.remove(u),s.Uo.delete(t),Mc(s)}else await Ic(s.localStore,t,!1).then(()=>kc(s,t,n)).catch(Ii)}async function dC(e,t){const n=K(e),s=t.batch.batchId;try{const o=await wS(n.localStore,t);hp(n,s,null),lp(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await bi(n,o)}catch(o){await Ii(o)}}async function gC(e,t,n){const s=K(e);try{const o=await function(u,l){const f=K(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return f.An.lookupMutationBatch(p,l).next(E=>(ht(E!==null),y=E.keys(),f.An.removeMutationBatch(p,E))).next(()=>f.An.performConsistencyCheck(p)).next(()=>f.Wn.vn(p,y))})}(s.localStore,t);hp(s,t,n),lp(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await bi(s,o)}catch(o){await Ii(o)}}function lp(e,t){(e.jo.get(t)||[]).forEach(n=>{n.resolve()}),e.jo.delete(t)}function hp(e,t,n){const s=K(e);let o=s.Ko[s.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),s.Ko[s.currentUser.toKey()]=o}}function kc(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Fo.get(t))e.Mo.delete(s),n&&e.Oo.zo(s,n);e.Fo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach(s=>{e.qo.containsKey(s)||fp(e,s)})}function fp(e,t){e.Lo.delete(t.path.canonicalString());const n=e.Bo.get(t);n!==null&&(Jg(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),Mc(e))}function dp(e,t,n){for(const s of n)s instanceof op?(e.qo.addReference(s.key,t),pC(e,s)):s instanceof ap?(F("SyncEngine","Document no longer in limbo: "+s.key),e.qo.removeReference(s.key,t),e.qo.containsKey(s.key)||fp(e,s.key)):j()}function pC(e,t){const n=t.key,s=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(s)||(F("SyncEngine","New document in limbo: "+n),e.Lo.add(s),Mc(e))}function Mc(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){const t=e.Lo.values().next().value;e.Lo.delete(t);const n=new H(_t.fromString(t)),s=e.Qo.next();e.Uo.set(s,new oC(n)),e.Bo=e.Bo.insert(n,s),Qg(e.remoteStore,new Pn(kn(hc(n.path)),s,2,ec.I))}}async function bi(e,t,n){const s=K(e),o=[],u=[],l=[];s.Mo.isEmpty()||(s.Mo.forEach((f,p)=>{l.push(s.Go(p,t,n).then(y=>{if(y){s.isPrimaryClient&&s.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),o.push(y);const E=Ac.$n(p.targetId,y);u.push(E)}}))}),await Promise.all(l),s.Oo.br(o),await async function(f,p){const y=K(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>D.forEach(p,I=>D.forEach(I.kn,R=>y.persistence.referenceDelegate.addReference(E,I.targetId,R)).next(()=>D.forEach(I.xn,R=>y.persistence.referenceDelegate.removeReference(E,I.targetId,R)))))}catch(E){if(!Ai(E))throw E;F("LocalStore","Failed to update sequence numbers: "+E)}for(const E of p){const I=E.targetId;if(!E.fromCache){const R=y.qn.get(I),L=R.snapshotVersion,P=R.withLastLimboFreeSnapshotVersion(L);y.qn=y.qn.insert(I,P)}}}(s.localStore,u))}async function mC(e,t){const n=K(e);if(!n.currentUser.isEqual(t)){F("SyncEngine","User change. New user:",t.toKey());const s=await Hg(n.localStore,t);n.currentUser=t,function(o,u){o.jo.forEach(l=>{l.forEach(f=>{f.reject(new B(x.CANCELLED,u))})}),o.jo.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await bi(n,s.Gn)}}function yC(e,t){const n=K(e),s=n.Uo.get(t);if(s&&s.$o)return dt().add(s.key);{let o=dt();const u=n.Fo.get(t);if(!u)return o;for(const l of u){const f=n.Mo.get(l);o=o.unionWith(f.view.bo)}return o}}function vC(e){const t=K(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=up.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=yC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=fC.bind(null,t),t.Oo.br=eC.bind(null,t.eventManager),t.Oo.zo=nC.bind(null,t.eventManager),t}function wC(e){const t=K(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gC.bind(null,t),t}class _C{constructor(){this.synchronizeTabs=!1}async initialize(t){this.k=To(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),await this.persistence.start(),this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t)}Xo(t){return null}Zo(t){return vS(this.persistence,new mS,t.initialUser,this.k)}Yo(t){return new xS(Cc.ks,this.k)}Jo(t){return new DS}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class EC{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>cp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=mC.bind(null,this.syncEngine),await XS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new JS}createDatastore(t){const n=To(t.databaseInfo.databaseId),s=(o=t.databaseInfo,new MS(o));var o;return function(u,l,f,p){return new US(u,l,f,p)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return n=this.localStore,s=this.datastore,o=t.asyncQueue,u=f=>cp(this.syncEngine,f,0),l=jg.Pt()?new jg:new LS,new $S(n,s,o,u,l);var n,s,o,u,l}createSyncEngine(t,n){return function(s,o,u,l,f,p,y){const E=new aC(s,o,u,l,f,p);return y&&(E.Wo=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(t){const n=K(t);F("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),await Ci(n),n.Hr.shutdown(),n.Jr.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.ec(this.observer.next,t)}error(t){this.observer.error?this.ec(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}nc(){this.muted=!0}ec(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(t,n,s,o){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=te.UNAUTHENTICATED,this.clientId=tg.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async u=>{F("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(s,u=>(F("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new B(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Lc(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function IC(e,t){e.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async o=>{s.isEqual(o)||(await Hg(t.localStore,o),s=o)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t}async function SC(e,t){e.asyncQueue.verifyOperationInProgress();const n=await CC(e);F("FirestoreClient","Initializing OnlineComponentProvider");const s=await e.getConfiguration();await t.initialize(n,s),e.setCredentialChangeListener(o=>ip(t.remoteStore,o)),e.setAppCheckTokenChangeListener((o,u)=>ip(t.remoteStore,u)),e.onlineComponents=t}async function CC(e){return e.offlineComponents||(F("FirestoreClient","Using default OfflineComponentProvider"),await IC(e,new _C)),e.offlineComponents}async function gp(e){return e.onlineComponents||(F("FirestoreClient","Using default OnlineComponentProvider"),await SC(e,new EC)),e.onlineComponents}function bC(e){return gp(e).then(t=>t.syncEngine)}async function RC(e){const t=await gp(e),n=t.eventManager;return n.onListen=uC.bind(null,t.syncEngine),n.onUnlisten=lC.bind(null,t.syncEngine),n}function xC(e,t,n={}){const s=new ln;return e.asyncQueue.enqueueAndForget(async()=>function(o,u,l,f,p){const y=new TC({next:I=>{u.enqueueAndForget(()=>tC(o,E));const R=I.docs.has(l);!R&&I.fromCache?p.reject(new B(x.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&I.fromCache&&f&&f.source==="server"?p.reject(new B(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(I)},error:I=>p.reject(I)}),E=new rC(hc(l.path),y,{includeMetadataChanges:!0,wo:!0});return ZS(o,E)}(await RC(e),e.asyncQueue,t,n,s)),s.promise}class NC{constructor(t,n,s,o,u,l,f,p){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=p}}class Ri{constructor(t,n){this.projectId=t,this.database=n||"(default)"}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Ri&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(e,t,n){if(!n)throw new B(x.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function LC(e,t,n,s){if(t===!0&&s===!0)throw new B(x.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function mp(e){if(!H.isDocumentKey(e))throw new B(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Pc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":j()}function Co(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new B(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pc(e);throw new B(x.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(t){var n;if(t.host===void 0){if(t.ssl!==void 0)throw new B(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new B(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,LC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(t,n,s){this._authCredentials=n,this._appCheckCredentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yp({}),this._settingsFrozen=!1,t instanceof Ri?this._databaseId=t:(this._app=t,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new B(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ri(o.options.projectId)}(t))}get app(){if(!this._app)throw new B(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new B(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yp(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new tI;switch(n.type){case"gapi":const s=n.client;return ht(!(typeof s!="object"||s===null||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new rI(s,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new B(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=pp.get(t);n&&(F("ComponentProvider","Removing Datastore"),pp.delete(t),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ie(this.firestore,t,this._key)}}class Fc{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Fc(this.firestore,t,this._query)}}class xi extends Fc{constructor(t,n,s){super(t,n,hc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ie(this.firestore,null,new H(t))}withConverter(t){return new xi(this.firestore,t,this._path)}}function Nb(e,t,...n){if(e=In(e),arguments.length===1&&(t=tg.A()),DC("doc","path",t),e instanceof vp){const s=_t.fromString(t,...n);return mp(s),new Ie(e,null,new H(s))}{if(!(e instanceof Ie||e instanceof xi))throw new B(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(_t.fromString(t,...n));return mp(s),new Ie(e.firestore,e instanceof xi?e.converter:null,new H(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new Yg(this,"async_queue_retry"),this.bc=()=>{const n=bc();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ur.er()};const t=bc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bc)}get isShuttingDown(){return this.yc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pc(),this.vc(t)}enterRestrictedMode(t){if(!this.yc){this.yc=!0,this.Ac=t||!1;const n=bc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.bc)}}enqueue(t){if(this.Pc(),this.yc)return new Promise(()=>{});const n=new ln;return this.vc(()=>this.yc&&this.Ac?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.gc.push(t),this.Vc()))}async Vc(){if(this.gc.length!==0){try{await this.gc[0](),this.gc.shift(),this.ur.reset()}catch(t){if(!Ai(t))throw t;F("AsyncQueue","Operation failed with retryable error: "+t)}this.gc.length>0&&this.ur.Zi(()=>this.Vc())}}vc(t){const n=this.mc.then(()=>(this.Ic=!0,t().catch(s=>{this.Ec=s,this.Ic=!1;const o=function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),l}(s);throw cn("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.Ic=!1,s))));return this.mc=n,n}enqueueAfterDelay(t,n,s){this.Pc(),this.Rc.indexOf(t)>-1&&(n=0);const o=Dc.createAndSchedule(this,t,n,s,u=>this.Sc(u));return this.Tc.push(o),o}Pc(){this.Ec&&j()}verifyOperationInProgress(){}async Dc(){let t;do t=this.mc,await t;while(t!==this.mc)}Cc(t){for(const n of this.Tc)if(n.timerId===t)return!0;return!1}Nc(t){return this.Dc().then(()=>{this.Tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Dc()})}kc(t){this.Rc.push(t)}Sc(t){const n=this.Tc.indexOf(t);this.Tc.splice(n,1)}}class Uc extends vp{constructor(t,n,s){super(t,n,s),this.type="firestore",this._queue=new OC,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||_p(this),this._firestoreClient.terminate()}}function Db(e=qT()){return UT(e,"firestore").getImmediate()}function wp(e){return e._firestoreClient||_p(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function _p(e){var t;const n=e._freezeSettings(),s=function(o,u,l,f){return new NC(o,u,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new AC(e._authCredentials,e._appCheckCredentials,e._queue,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new B(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ee(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(t){this._byteString=t}static fromBase64String(t){try{return new _r(Mt.fromBase64String(t))}catch(n){throw new B(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new _r(Mt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new B(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new B(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ut(this._lat,t._lat)||ut(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=/^__.*__$/;class Ep{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new dr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Tp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j()}}class Bc{constructor(t,n,s,o,u,l){this.settings=t,this.databaseId=n,this.k=s,this.ignoreUndefinedProperties=o,u===void 0&&this.xc(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get $c(){return this.settings.$c}Oc(t){return new Bc(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mc(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.Oc({path:s,Fc:!1});return o.Lc(t),o}Bc(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.Oc({path:s,Fc:!1});return o.xc(),o}Uc(t){return this.Oc({path:void 0,Fc:!0})}qc(t){return No(t,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}xc(){if(this.path)for(let t=0;t<this.path.length;t++)this.Lc(this.path.get(t))}Lc(t){if(t.length===0)throw this.qc("Document fields must not be empty");if(Tp(this.$c)&&kC.test(t))throw this.qc('Document fields cannot begin and end with "__"')}}class MC{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.k=s||To(t)}Qc(t,n,s,o=!1){return new Bc({$c:t,methodName:n,jc:s,path:ee.emptyPath(),Fc:!1,Kc:o},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function PC(e){const t=e._freezeSettings(),n=To(e._databaseId);return new MC(e._databaseId,!!t.ignoreUndefinedProperties,n)}class Ro extends Vc{_toFieldTransform(t){if(t.$c!==2)throw t.$c===1?t.qc(`${this._methodName}() can only appear at the top level of your update data`):t.qc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ro}}function FC(e,t,n,s){const o=e.Qc(1,t,n);Ip("Data must be an object, but it was:",o,s);const u=[],l=Ae.empty();Ln(s,(p,y)=>{const E=qc(t,p,n);y=In(y);const I=o.Bc(E);if(y instanceof Ro)u.push(E);else{const R=xo(y,I);R!=null&&(u.push(E),l.set(E,R))}});const f=new nc(u);return new Ep(l,f,o.fieldTransforms)}function UC(e,t,n,s,o,u){const l=e.Qc(1,t,n),f=[Sp(t,s,n)],p=[o];if(u.length%2!=0)throw new B(x.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<u.length;R+=2)f.push(Sp(t,u[R])),p.push(u[R+1]);const y=[],E=Ae.empty();for(let R=f.length-1;R>=0;--R)if(!BC(y,f[R])){const L=f[R];let P=p[R];P=In(P);const et=l.Bc(L);if(P instanceof Ro)y.push(L);else{const rt=xo(P,et);rt!=null&&(y.push(L),E.set(L,rt))}}const I=new nc(y);return new Ep(E,I,l.fieldTransforms)}function xo(e,t){if(Ap(e=In(e)))return Ip("Unsupported field value:",t,e),VC(e,t);if(e instanceof Vc)return function(n,s){if(!Tp(s.$c))throw s.qc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.qc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&t.$c!==4)throw t.qc("Nested arrays are not supported");return function(n,s){const o=[];let u=0;for(const l of n){let f=xo(l,s.Uc(u));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),u++}return{arrayValue:{values:o}}}(e,t)}return function(n,s){if((n=In(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return bI(s.k,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=he.fromDate(n);return{timestampValue:Eo(s.k,o)}}if(n instanceof he){const o=new he(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Eo(s.k,o)}}if(n instanceof $c)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof _r)return{bytesValue:Mg(s.k,n._byteString)};if(n instanceof Ie){const o=s.databaseId,u=n.firestore._databaseId;if(!u.isEqual(o))throw s.qc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yc(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s.qc(`Unsupported field value: ${Pc(n)}`)}(e,t)}function VC(e,t){const n={};return ng(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ln(e,(s,o)=>{const u=xo(o,t.Mc(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function Ap(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof he||e instanceof $c||e instanceof _r||e instanceof Ie||e instanceof Vc)}function Ip(e,t,n){if(!Ap(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const s=Pc(n);throw s==="an object"?t.qc(e+" a custom object"):t.qc(e+" "+s)}}function Sp(e,t,n){if((t=In(t))instanceof bo)return t._internalPath;if(typeof t=="string")return qc(e,t);throw No("Field path arguments must be of type string or ",e,!1,void 0,n)}const $C=new RegExp("[~\\*/\\[\\]]");function qc(e,t,n){if(t.search($C)>=0)throw No(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new bo(...t.split("."))._internalPath}catch{throw No(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function No(e,t,n,s,o){const u=s&&!s.isEmpty(),l=o!==void 0;let f=`Function ${t}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(u||l)&&(p+=" (found",u&&(p+=` in field ${s}`),l&&(p+=` in document ${o}`),p+=")"),new B(x.INVALID_ARGUMENT,f+e+p)}function BC(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(t,n,s,o,u){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ie(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new qC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(bp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qC extends Cp{data(){return super.data()}}function bp(e,t){return typeof t=="string"?qc(e,t):t instanceof bo?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Rp extends Cp{constructor(t,n,s,o,u,l){super(t,n,s,o,l),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new HC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(bp("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class HC extends Rp{data(t={}){return super.data(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{convertValue(t,n="none"){switch(On(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Tt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(cr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw j()}}convertObject(t,n){const s={};return Ln(t.fields,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertGeoPoint(t){return new $c(Tt(t.latitude),Tt(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=ig(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(pi(t));default:return null}}convertTimestamp(t){const n=hn(t);return new he(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=_t.fromString(t);ht(qg(s));const o=new Ri(s.get(1),s.get(3)),u=new H(s.popFirst(5));return o.isEqual(n)||cn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(e){e=Co(e,Ie);const t=Co(e.firestore,Uc);return xC(wp(t),e._key).then(n=>jC(t,e,n))}class KC extends GC{constructor(t){super(),this.firestore=t}convertBytes(t){return new _r(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ie(this.firestore,null,n)}}function Ob(e,t,n,...s){e=Co(e,Ie);const o=Co(e.firestore,Uc),u=PC(o);let l;return l=typeof(t=In(t))=="string"||t instanceof bo?UC(u,"updateDoc",e._key,t,n,s):FC(u,"updateDoc",e._key,t),zC(o,[l.toMutation(e._key,fr.exists(!0))])}function zC(e,t){return function(n,s){const o=new ln;return n.asyncQueue.enqueueAndForget(async()=>hC(await bC(n),s,o)),o.promise}(wp(e),t)}function jC(e,t,n){const s=n.docs.get(t._key),o=new KC(e);return new Rp(e,o,t._key,s,new WC(n.hasPendingWrites,n.fromCache),t.converter)}(function(e,t=!0){(function(n){ar=n})(BT),uu(new Ns("firestore",(n,{options:s})=>{const o=n.getProvider("app").getImmediate(),u=new Uc(o,new eI(n.getProvider("auth-internal")),new sI(n.getProvider("app-check-internal")));return s=Object.assign({useFetchStreams:t},s),u._setSettings(s),u},"PUBLIC")),er(Qd,"3.4.4",e),er(Qd,"3.4.4","esm2017")})();export{Tb as A,WE as B,IE as C,bb as D,yb as E,YC as F,QC as G,JC as H,XC as I,LE as J,Hr as K,cb as L,rb as M,Gr as N,gb as O,hb as P,ib as Q,tb as R,Cb as S,mb as T,xb as U,Db as V,Ob as W,Nb as X,Lb as Y,Cf as Z,Rb as _,ME as a,sb as b,ob as c,OE as d,kE as e,lb as f,ZC as g,UE as h,Sb as i,ub as j,eb as k,nb as l,ab as m,vb as n,_b as o,wb as p,BE as q,pb as r,CE as s,Za as t,db as u,fb as v,Ab as w,Ib as x,qE as y,Eb as z};
